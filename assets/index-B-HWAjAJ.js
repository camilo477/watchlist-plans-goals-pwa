(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function t(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(o){if(o.ep)return;o.ep=!0;const l=t(o);fetch(o.href,l)}})();function r1(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Hp={exports:{}},Ru={};var LT;function pR(){if(LT)return Ru;LT=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(i,o,l){var c=null;if(l!==void 0&&(c=""+l),o.key!==void 0&&(c=""+o.key),"key"in o){l={};for(var f in o)f!=="key"&&(l[f]=o[f])}else l=o;return o=l.ref,{$$typeof:r,type:i,key:c,ref:o!==void 0?o:null,props:l}}return Ru.Fragment=e,Ru.jsx=t,Ru.jsxs=t,Ru}var UT;function gR(){return UT||(UT=1,Hp.exports=pR()),Hp.exports}var A=gR(),Gp={exports:{}},Ne={};var BT;function yR(){if(BT)return Ne;BT=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),c=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),E=Symbol.for("react.lazy"),T=Symbol.for("react.activity"),S=Symbol.iterator;function O(P){return P===null||typeof P!="object"?null:(P=S&&P[S]||P["@@iterator"],typeof P=="function"?P:null)}var z={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Y=Object.assign,U={};function F(P,ne,ue){this.props=P,this.context=ne,this.refs=U,this.updater=ue||z}F.prototype.isReactComponent={},F.prototype.setState=function(P,ne){if(typeof P!="object"&&typeof P!="function"&&P!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,P,ne,"setState")},F.prototype.forceUpdate=function(P){this.updater.enqueueForceUpdate(this,P,"forceUpdate")};function K(){}K.prototype=F.prototype;function ee(P,ne,ue){this.props=P,this.context=ne,this.refs=U,this.updater=ue||z}var he=ee.prototype=new K;he.constructor=ee,Y(he,F.prototype),he.isPureReactComponent=!0;var de=Array.isArray;function pe(){}var x={H:null,A:null,T:null,S:null},R=Object.prototype.hasOwnProperty;function C(P,ne,ue){var me=ue.ref;return{$$typeof:r,type:P,key:ne,ref:me!==void 0?me:null,props:ue}}function D(P,ne){return C(P.type,ne,P.props)}function V(P){return typeof P=="object"&&P!==null&&P.$$typeof===r}function k(P){var ne={"=":"=0",":":"=2"};return"$"+P.replace(/[=:]/g,function(ue){return ne[ue]})}var I=/\/+/g;function fe(P,ne){return typeof P=="object"&&P!==null&&P.key!=null?k(""+P.key):ne.toString(36)}function Ie(P){switch(P.status){case"fulfilled":return P.value;case"rejected":throw P.reason;default:switch(typeof P.status=="string"?P.then(pe,pe):(P.status="pending",P.then(function(ne){P.status==="pending"&&(P.status="fulfilled",P.value=ne)},function(ne){P.status==="pending"&&(P.status="rejected",P.reason=ne)})),P.status){case"fulfilled":return P.value;case"rejected":throw P.reason}}throw P}function $(P,ne,ue,me,we){var Re=typeof P;(Re==="undefined"||Re==="boolean")&&(P=null);var re=!1;if(P===null)re=!0;else switch(Re){case"bigint":case"string":case"number":re=!0;break;case"object":switch(P.$$typeof){case r:case e:re=!0;break;case E:return re=P._init,$(re(P._payload),ne,ue,me,we)}}if(re)return we=we(P),re=me===""?"."+fe(P,0):me,de(we)?(ue="",re!=null&&(ue=re.replace(I,"$&/")+"/"),$(we,ne,ue,"",function(Ut){return Ut})):we!=null&&(V(we)&&(we=D(we,ue+(we.key==null||P&&P.key===we.key?"":(""+we.key).replace(I,"$&/")+"/")+re)),ne.push(we)),1;re=0;var Ve=me===""?".":me+":";if(de(P))for(var Ce=0;Ce<P.length;Ce++)me=P[Ce],Re=Ve+fe(me,Ce),re+=$(me,ne,ue,Re,we);else if(Ce=O(P),typeof Ce=="function")for(P=Ce.call(P),Ce=0;!(me=P.next()).done;)me=me.value,Re=Ve+fe(me,Ce++),re+=$(me,ne,ue,Re,we);else if(Re==="object"){if(typeof P.then=="function")return $(Ie(P),ne,ue,me,we);throw ne=String(P),Error("Objects are not valid as a React child (found: "+(ne==="[object Object]"?"object with keys {"+Object.keys(P).join(", ")+"}":ne)+"). If you meant to render a collection of children, use an array instead.")}return re}function ae(P,ne,ue){if(P==null)return P;var me=[],we=0;return $(P,me,"","",function(Re){return ne.call(ue,Re,we++)}),me}function ve(P){if(P._status===-1){var ne=P._result;ne=ne(),ne.then(function(ue){(P._status===0||P._status===-1)&&(P._status=1,P._result=ue)},function(ue){(P._status===0||P._status===-1)&&(P._status=2,P._result=ue)}),P._status===-1&&(P._status=0,P._result=ne)}if(P._status===1)return P._result.default;throw P._result}var Le=typeof reportError=="function"?reportError:function(P){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ne=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof P=="object"&&P!==null&&typeof P.message=="string"?String(P.message):String(P),error:P});if(!window.dispatchEvent(ne))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",P);return}console.error(P)},Ge={map:ae,forEach:function(P,ne,ue){ae(P,function(){ne.apply(this,arguments)},ue)},count:function(P){var ne=0;return ae(P,function(){ne++}),ne},toArray:function(P){return ae(P,function(ne){return ne})||[]},only:function(P){if(!V(P))throw Error("React.Children.only expected to receive a single React element child.");return P}};return Ne.Activity=T,Ne.Children=Ge,Ne.Component=F,Ne.Fragment=t,Ne.Profiler=o,Ne.PureComponent=ee,Ne.StrictMode=i,Ne.Suspense=p,Ne.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=x,Ne.__COMPILER_RUNTIME={__proto__:null,c:function(P){return x.H.useMemoCache(P)}},Ne.cache=function(P){return function(){return P.apply(null,arguments)}},Ne.cacheSignal=function(){return null},Ne.cloneElement=function(P,ne,ue){if(P==null)throw Error("The argument must be a React element, but you passed "+P+".");var me=Y({},P.props),we=P.key;if(ne!=null)for(Re in ne.key!==void 0&&(we=""+ne.key),ne)!R.call(ne,Re)||Re==="key"||Re==="__self"||Re==="__source"||Re==="ref"&&ne.ref===void 0||(me[Re]=ne[Re]);var Re=arguments.length-2;if(Re===1)me.children=ue;else if(1<Re){for(var re=Array(Re),Ve=0;Ve<Re;Ve++)re[Ve]=arguments[Ve+2];me.children=re}return C(P.type,we,me)},Ne.createContext=function(P){return P={$$typeof:c,_currentValue:P,_currentValue2:P,_threadCount:0,Provider:null,Consumer:null},P.Provider=P,P.Consumer={$$typeof:l,_context:P},P},Ne.createElement=function(P,ne,ue){var me,we={},Re=null;if(ne!=null)for(me in ne.key!==void 0&&(Re=""+ne.key),ne)R.call(ne,me)&&me!=="key"&&me!=="__self"&&me!=="__source"&&(we[me]=ne[me]);var re=arguments.length-2;if(re===1)we.children=ue;else if(1<re){for(var Ve=Array(re),Ce=0;Ce<re;Ce++)Ve[Ce]=arguments[Ce+2];we.children=Ve}if(P&&P.defaultProps)for(me in re=P.defaultProps,re)we[me]===void 0&&(we[me]=re[me]);return C(P,Re,we)},Ne.createRef=function(){return{current:null}},Ne.forwardRef=function(P){return{$$typeof:f,render:P}},Ne.isValidElement=V,Ne.lazy=function(P){return{$$typeof:E,_payload:{_status:-1,_result:P},_init:ve}},Ne.memo=function(P,ne){return{$$typeof:g,type:P,compare:ne===void 0?null:ne}},Ne.startTransition=function(P){var ne=x.T,ue={};x.T=ue;try{var me=P(),we=x.S;we!==null&&we(ue,me),typeof me=="object"&&me!==null&&typeof me.then=="function"&&me.then(pe,Le)}catch(Re){Le(Re)}finally{ne!==null&&ue.types!==null&&(ne.types=ue.types),x.T=ne}},Ne.unstable_useCacheRefresh=function(){return x.H.useCacheRefresh()},Ne.use=function(P){return x.H.use(P)},Ne.useActionState=function(P,ne,ue){return x.H.useActionState(P,ne,ue)},Ne.useCallback=function(P,ne){return x.H.useCallback(P,ne)},Ne.useContext=function(P){return x.H.useContext(P)},Ne.useDebugValue=function(){},Ne.useDeferredValue=function(P,ne){return x.H.useDeferredValue(P,ne)},Ne.useEffect=function(P,ne){return x.H.useEffect(P,ne)},Ne.useEffectEvent=function(P){return x.H.useEffectEvent(P)},Ne.useId=function(){return x.H.useId()},Ne.useImperativeHandle=function(P,ne,ue){return x.H.useImperativeHandle(P,ne,ue)},Ne.useInsertionEffect=function(P,ne){return x.H.useInsertionEffect(P,ne)},Ne.useLayoutEffect=function(P,ne){return x.H.useLayoutEffect(P,ne)},Ne.useMemo=function(P,ne){return x.H.useMemo(P,ne)},Ne.useOptimistic=function(P,ne){return x.H.useOptimistic(P,ne)},Ne.useReducer=function(P,ne,ue){return x.H.useReducer(P,ne,ue)},Ne.useRef=function(P){return x.H.useRef(P)},Ne.useState=function(P){return x.H.useState(P)},Ne.useSyncExternalStore=function(P,ne,ue){return x.H.useSyncExternalStore(P,ne,ue)},Ne.useTransition=function(){return x.H.useTransition()},Ne.version="19.2.3",Ne}var zT;function iy(){return zT||(zT=1,Gp.exports=yR()),Gp.exports}var L=iy();const _R=r1(L);var Kp={exports:{}},Cu={},Qp={exports:{}},Yp={};var jT;function vR(){return jT||(jT=1,(function(r){function e($,ae){var ve=$.length;$.push(ae);e:for(;0<ve;){var Le=ve-1>>>1,Ge=$[Le];if(0<o(Ge,ae))$[Le]=ae,$[ve]=Ge,ve=Le;else break e}}function t($){return $.length===0?null:$[0]}function i($){if($.length===0)return null;var ae=$[0],ve=$.pop();if(ve!==ae){$[0]=ve;e:for(var Le=0,Ge=$.length,P=Ge>>>1;Le<P;){var ne=2*(Le+1)-1,ue=$[ne],me=ne+1,we=$[me];if(0>o(ue,ve))me<Ge&&0>o(we,ue)?($[Le]=we,$[me]=ve,Le=me):($[Le]=ue,$[ne]=ve,Le=ne);else if(me<Ge&&0>o(we,ve))$[Le]=we,$[me]=ve,Le=me;else break e}}return ae}function o($,ae){var ve=$.sortIndex-ae.sortIndex;return ve!==0?ve:$.id-ae.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;r.unstable_now=function(){return l.now()}}else{var c=Date,f=c.now();r.unstable_now=function(){return c.now()-f}}var p=[],g=[],E=1,T=null,S=3,O=!1,z=!1,Y=!1,U=!1,F=typeof setTimeout=="function"?setTimeout:null,K=typeof clearTimeout=="function"?clearTimeout:null,ee=typeof setImmediate<"u"?setImmediate:null;function he($){for(var ae=t(g);ae!==null;){if(ae.callback===null)i(g);else if(ae.startTime<=$)i(g),ae.sortIndex=ae.expirationTime,e(p,ae);else break;ae=t(g)}}function de($){if(Y=!1,he($),!z)if(t(p)!==null)z=!0,pe||(pe=!0,k());else{var ae=t(g);ae!==null&&Ie(de,ae.startTime-$)}}var pe=!1,x=-1,R=5,C=-1;function D(){return U?!0:!(r.unstable_now()-C<R)}function V(){if(U=!1,pe){var $=r.unstable_now();C=$;var ae=!0;try{e:{z=!1,Y&&(Y=!1,K(x),x=-1),O=!0;var ve=S;try{t:{for(he($),T=t(p);T!==null&&!(T.expirationTime>$&&D());){var Le=T.callback;if(typeof Le=="function"){T.callback=null,S=T.priorityLevel;var Ge=Le(T.expirationTime<=$);if($=r.unstable_now(),typeof Ge=="function"){T.callback=Ge,he($),ae=!0;break t}T===t(p)&&i(p),he($)}else i(p);T=t(p)}if(T!==null)ae=!0;else{var P=t(g);P!==null&&Ie(de,P.startTime-$),ae=!1}}break e}finally{T=null,S=ve,O=!1}ae=void 0}}finally{ae?k():pe=!1}}}var k;if(typeof ee=="function")k=function(){ee(V)};else if(typeof MessageChannel<"u"){var I=new MessageChannel,fe=I.port2;I.port1.onmessage=V,k=function(){fe.postMessage(null)}}else k=function(){F(V,0)};function Ie($,ae){x=F(function(){$(r.unstable_now())},ae)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function($){$.callback=null},r.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<$?Math.floor(1e3/$):5},r.unstable_getCurrentPriorityLevel=function(){return S},r.unstable_next=function($){switch(S){case 1:case 2:case 3:var ae=3;break;default:ae=S}var ve=S;S=ae;try{return $()}finally{S=ve}},r.unstable_requestPaint=function(){U=!0},r.unstable_runWithPriority=function($,ae){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var ve=S;S=$;try{return ae()}finally{S=ve}},r.unstable_scheduleCallback=function($,ae,ve){var Le=r.unstable_now();switch(typeof ve=="object"&&ve!==null?(ve=ve.delay,ve=typeof ve=="number"&&0<ve?Le+ve:Le):ve=Le,$){case 1:var Ge=-1;break;case 2:Ge=250;break;case 5:Ge=1073741823;break;case 4:Ge=1e4;break;default:Ge=5e3}return Ge=ve+Ge,$={id:E++,callback:ae,priorityLevel:$,startTime:ve,expirationTime:Ge,sortIndex:-1},ve>Le?($.sortIndex=ve,e(g,$),t(p)===null&&$===t(g)&&(Y?(K(x),x=-1):Y=!0,Ie(de,ve-Le))):($.sortIndex=Ge,e(p,$),z||O||(z=!0,pe||(pe=!0,k()))),$},r.unstable_shouldYield=D,r.unstable_wrapCallback=function($){var ae=S;return function(){var ve=S;S=ae;try{return $.apply(this,arguments)}finally{S=ve}}}})(Yp)),Yp}var qT;function ER(){return qT||(qT=1,Qp.exports=vR()),Qp.exports}var $p={exports:{}},an={};var FT;function TR(){if(FT)return an;FT=1;var r=iy();function e(p){var g="https://react.dev/errors/"+p;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var E=2;E<arguments.length;E++)g+="&args[]="+encodeURIComponent(arguments[E])}return"Minified React error #"+p+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var i={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},o=Symbol.for("react.portal");function l(p,g,E){var T=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:T==null?null:""+T,children:p,containerInfo:g,implementation:E}}var c=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function f(p,g){if(p==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return an.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,an.createPortal=function(p,g){var E=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(e(299));return l(p,g,null,E)},an.flushSync=function(p){var g=c.T,E=i.p;try{if(c.T=null,i.p=2,p)return p()}finally{c.T=g,i.p=E,i.d.f()}},an.preconnect=function(p,g){typeof p=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,i.d.C(p,g))},an.prefetchDNS=function(p){typeof p=="string"&&i.d.D(p)},an.preinit=function(p,g){if(typeof p=="string"&&g&&typeof g.as=="string"){var E=g.as,T=f(E,g.crossOrigin),S=typeof g.integrity=="string"?g.integrity:void 0,O=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;E==="style"?i.d.S(p,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:T,integrity:S,fetchPriority:O}):E==="script"&&i.d.X(p,{crossOrigin:T,integrity:S,fetchPriority:O,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},an.preinitModule=function(p,g){if(typeof p=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var E=f(g.as,g.crossOrigin);i.d.M(p,{crossOrigin:E,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&i.d.M(p)},an.preload=function(p,g){if(typeof p=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var E=g.as,T=f(E,g.crossOrigin);i.d.L(p,E,{crossOrigin:T,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},an.preloadModule=function(p,g){if(typeof p=="string")if(g){var E=f(g.as,g.crossOrigin);i.d.m(p,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:E,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else i.d.m(p)},an.requestFormReset=function(p){i.d.r(p)},an.unstable_batchedUpdates=function(p,g){return p(g)},an.useFormState=function(p,g,E){return c.H.useFormState(p,g,E)},an.useFormStatus=function(){return c.H.useHostTransitionStatus()},an.version="19.2.3",an}var HT;function bR(){if(HT)return $p.exports;HT=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),$p.exports=TR(),$p.exports}var GT;function SR(){if(GT)return Cu;GT=1;var r=ER(),e=iy(),t=bR();function i(n){var s="https://react.dev/errors/"+n;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)s+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+n+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function l(n){var s=n,a=n;if(n.alternate)for(;s.return;)s=s.return;else{n=s;do s=n,(s.flags&4098)!==0&&(a=s.return),n=s.return;while(n)}return s.tag===3?a:null}function c(n){if(n.tag===13){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function f(n){if(n.tag===31){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function p(n){if(l(n)!==n)throw Error(i(188))}function g(n){var s=n.alternate;if(!s){if(s=l(n),s===null)throw Error(i(188));return s!==n?null:n}for(var a=n,u=s;;){var d=a.return;if(d===null)break;var m=d.alternate;if(m===null){if(u=d.return,u!==null){a=u;continue}break}if(d.child===m.child){for(m=d.child;m;){if(m===a)return p(d),n;if(m===u)return p(d),s;m=m.sibling}throw Error(i(188))}if(a.return!==u.return)a=d,u=m;else{for(var _=!1,b=d.child;b;){if(b===a){_=!0,a=d,u=m;break}if(b===u){_=!0,u=d,a=m;break}b=b.sibling}if(!_){for(b=m.child;b;){if(b===a){_=!0,a=m,u=d;break}if(b===u){_=!0,u=m,a=d;break}b=b.sibling}if(!_)throw Error(i(189))}}if(a.alternate!==u)throw Error(i(190))}if(a.tag!==3)throw Error(i(188));return a.stateNode.current===a?n:s}function E(n){var s=n.tag;if(s===5||s===26||s===27||s===6)return n;for(n=n.child;n!==null;){if(s=E(n),s!==null)return s;n=n.sibling}return null}var T=Object.assign,S=Symbol.for("react.element"),O=Symbol.for("react.transitional.element"),z=Symbol.for("react.portal"),Y=Symbol.for("react.fragment"),U=Symbol.for("react.strict_mode"),F=Symbol.for("react.profiler"),K=Symbol.for("react.consumer"),ee=Symbol.for("react.context"),he=Symbol.for("react.forward_ref"),de=Symbol.for("react.suspense"),pe=Symbol.for("react.suspense_list"),x=Symbol.for("react.memo"),R=Symbol.for("react.lazy"),C=Symbol.for("react.activity"),D=Symbol.for("react.memo_cache_sentinel"),V=Symbol.iterator;function k(n){return n===null||typeof n!="object"?null:(n=V&&n[V]||n["@@iterator"],typeof n=="function"?n:null)}var I=Symbol.for("react.client.reference");function fe(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===I?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case Y:return"Fragment";case F:return"Profiler";case U:return"StrictMode";case de:return"Suspense";case pe:return"SuspenseList";case C:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case z:return"Portal";case ee:return n.displayName||"Context";case K:return(n._context.displayName||"Context")+".Consumer";case he:var s=n.render;return n=n.displayName,n||(n=s.displayName||s.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case x:return s=n.displayName||null,s!==null?s:fe(n.type)||"Memo";case R:s=n._payload,n=n._init;try{return fe(n(s))}catch{}}return null}var Ie=Array.isArray,$=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ae=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ve={pending:!1,data:null,method:null,action:null},Le=[],Ge=-1;function P(n){return{current:n}}function ne(n){0>Ge||(n.current=Le[Ge],Le[Ge]=null,Ge--)}function ue(n,s){Ge++,Le[Ge]=n.current,n.current=s}var me=P(null),we=P(null),Re=P(null),re=P(null);function Ve(n,s){switch(ue(Re,s),ue(we,n),ue(me,null),s.nodeType){case 9:case 11:n=(n=s.documentElement)&&(n=n.namespaceURI)?aT(n):0;break;default:if(n=s.tagName,s=s.namespaceURI)s=aT(s),n=oT(s,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}ne(me),ue(me,n)}function Ce(){ne(me),ne(we),ne(Re)}function Ut(n){n.memoizedState!==null&&ue(re,n);var s=me.current,a=oT(s,n.type);s!==a&&(ue(we,n),ue(me,a))}function Zi(n){we.current===n&&(ne(me),ne(we)),re.current===n&&(ne(re),Su._currentValue=ve)}var ut,Bt;function zt(n){if(ut===void 0)try{throw Error()}catch(a){var s=a.stack.trim().match(/\n( *(at )?)/);ut=s&&s[1]||"",Bt=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ut+n+Bt}var Sl=!1;function Ls(n,s){if(!n||Sl)return"";Sl=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(s){var ie=function(){throw Error()};if(Object.defineProperty(ie.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ie,[])}catch(W){var Q=W}Reflect.construct(n,[],ie)}else{try{ie.call()}catch(W){Q=W}n.call(ie.prototype)}}else{try{throw Error()}catch(W){Q=W}(ie=n())&&typeof ie.catch=="function"&&ie.catch(function(){})}}catch(W){if(W&&Q&&typeof W.stack=="string")return[W.stack,Q.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var d=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");d&&d.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=u.DetermineComponentFrameRoot(),_=m[0],b=m[1];if(_&&b){var N=_.split(`
`),G=b.split(`
`);for(d=u=0;u<N.length&&!N[u].includes("DetermineComponentFrameRoot");)u++;for(;d<G.length&&!G[d].includes("DetermineComponentFrameRoot");)d++;if(u===N.length||d===G.length)for(u=N.length-1,d=G.length-1;1<=u&&0<=d&&N[u]!==G[d];)d--;for(;1<=u&&0<=d;u--,d--)if(N[u]!==G[d]){if(u!==1||d!==1)do if(u--,d--,0>d||N[u]!==G[d]){var J=`
`+N[u].replace(" at new "," at ");return n.displayName&&J.includes("<anonymous>")&&(J=J.replace("<anonymous>",n.displayName)),J}while(1<=u&&0<=d);break}}}finally{Sl=!1,Error.prepareStackTrace=a}return(a=n?n.displayName||n.name:"")?zt(a):""}function Al(n,s){switch(n.tag){case 26:case 27:case 5:return zt(n.type);case 16:return zt("Lazy");case 13:return n.child!==s&&s!==null?zt("Suspense Fallback"):zt("Suspense");case 19:return zt("SuspenseList");case 0:case 15:return Ls(n.type,!1);case 11:return Ls(n.type.render,!1);case 1:return Ls(n.type,!0);case 31:return zt("Activity");default:return""}}function wl(n){try{var s="",a=null;do s+=Al(n,a),a=n,n=n.return;while(n);return s}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}var wt=Object.prototype.hasOwnProperty,jt=r.unstable_scheduleCallback,Vr=r.unstable_cancelCallback,Kf=r.unstable_shouldYield,Lc=r.unstable_requestPaint,hn=r.unstable_now,Us=r.unstable_getCurrentPriorityLevel,Il=r.unstable_ImmediatePriority,Rl=r.unstable_UserBlockingPriority,Or=r.unstable_NormalPriority,Qf=r.unstable_LowPriority,Uc=r.unstable_IdlePriority,Bc=r.log,zc=r.unstable_setDisableYieldValue,ni=null,Wt=null;function Un(n){if(typeof Bc=="function"&&zc(n),Wt&&typeof Wt.setStrictMode=="function")try{Wt.setStrictMode(ni,n)}catch{}}var Tt=Math.clz32?Math.clz32:qc,jc=Math.log,qa=Math.LN2;function qc(n){return n>>>=0,n===0?32:31-(jc(n)/qa|0)|0}var Ei=256,Bs=262144,It=4194304;function Ti(n){var s=n&42;if(s!==0)return s;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return n&261888;case 262144:case 524288:case 1048576:case 2097152:return n&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function bi(n,s,a){var u=n.pendingLanes;if(u===0)return 0;var d=0,m=n.suspendedLanes,_=n.pingedLanes;n=n.warmLanes;var b=u&134217727;return b!==0?(u=b&~m,u!==0?d=Ti(u):(_&=b,_!==0?d=Ti(_):a||(a=b&~n,a!==0&&(d=Ti(a))))):(b=u&~m,b!==0?d=Ti(b):_!==0?d=Ti(_):a||(a=u&~n,a!==0&&(d=Ti(a)))),d===0?0:s!==0&&s!==d&&(s&m)===0&&(m=d&-d,a=s&-s,m>=a||m===32&&(a&4194048)!==0)?s:d}function ii(n,s){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&s)===0}function Yf(n,s){switch(n){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Fc(){var n=It;return It<<=1,(It&62914560)===0&&(It=4194304),n}function Si(n){for(var s=[],a=0;31>a;a++)s.push(n);return s}function zs(n,s){n.pendingLanes|=s,s!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function $f(n,s,a,u,d,m){var _=n.pendingLanes;n.pendingLanes=a,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=a,n.entangledLanes&=a,n.errorRecoveryDisabledLanes&=a,n.shellSuspendCounter=0;var b=n.entanglements,N=n.expirationTimes,G=n.hiddenUpdates;for(a=_&~a;0<a;){var J=31-Tt(a),ie=1<<J;b[J]=0,N[J]=-1;var Q=G[J];if(Q!==null)for(G[J]=null,J=0;J<Q.length;J++){var W=Q[J];W!==null&&(W.lane&=-536870913)}a&=~ie}u!==0&&js(n,u,0),m!==0&&d===0&&n.tag!==0&&(n.suspendedLanes|=m&~(_&~s))}function js(n,s,a){n.pendingLanes|=s,n.suspendedLanes&=~s;var u=31-Tt(s);n.entangledLanes|=s,n.entanglements[u]=n.entanglements[u]|1073741824|a&261930}function Cl(n,s){var a=n.entangledLanes|=s;for(n=n.entanglements;a;){var u=31-Tt(a),d=1<<u;d&s|n[u]&s&&(n[u]|=s),a&=~d}}function xl(n,s){var a=s&-s;return a=(a&42)!==0?1:qs(a),(a&(n.suspendedLanes|s))!==0?0:a}function qs(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function er(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function Hc(){var n=ae.p;return n!==0?n:(n=window.event,n===void 0?32:DT(n.type))}function ri(n,s){var a=ae.p;try{return ae.p=n,s()}finally{ae.p=a}}var si=Math.random().toString(36).slice(2),Rt="__reactFiber$"+si,Kt="__reactProps$"+si,Ai="__reactContainer$"+si,Fa="__reactEvents$"+si,Xf="__reactListeners$"+si,Gc="__reactHandles$"+si,Kc="__reactResources$"+si,wi="__reactMarker$"+si;function Ha(n){delete n[Rt],delete n[Kt],delete n[Fa],delete n[Xf],delete n[Gc]}function Ii(n){var s=n[Rt];if(s)return s;for(var a=n.parentNode;a;){if(s=a[Ai]||a[Rt]){if(a=s.alternate,s.child!==null||a!==null&&a.child!==null)for(n=mT(n);n!==null;){if(a=n[Rt])return a;n=mT(n)}return s}n=a,a=n.parentNode}return null}function Bn(n){if(n=n[Rt]||n[Ai]){var s=n.tag;if(s===5||s===6||s===13||s===31||s===26||s===27||s===3)return n}return null}function wn(n){var s=n.tag;if(s===5||s===26||s===27||s===6)return n.stateNode;throw Error(i(33))}function Ri(n){var s=n[Kc];return s||(s=n[Kc]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function Ct(n){n[wi]=!0}var Dl=new Set,Nl={};function Ci(n,s){xi(n,s),xi(n+"Capture",s)}function xi(n,s){for(Nl[n]=s,n=0;n<s.length;n++)Dl.add(s[n])}var Vl=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ol={},Ml={};function Qc(n){return wt.call(Ml,n)?!0:wt.call(Ol,n)?!1:Vl.test(n)?Ml[n]=!0:(Ol[n]=!0,!1)}function Ga(n,s,a){if(Qc(s))if(a===null)n.removeAttribute(s);else{switch(typeof a){case"undefined":case"function":case"symbol":n.removeAttribute(s);return;case"boolean":var u=s.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){n.removeAttribute(s);return}}n.setAttribute(s,""+a)}}function In(n,s,a){if(a===null)n.removeAttribute(s);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(s);return}n.setAttribute(s,""+a)}}function xt(n,s,a,u){if(u===null)n.removeAttribute(a);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(a);return}n.setAttributeNS(s,a,""+u)}}function Qt(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Mr(n){var s=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function Pl(n,s,a){var u=Object.getOwnPropertyDescriptor(n.constructor.prototype,s);if(!n.hasOwnProperty(s)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var d=u.get,m=u.set;return Object.defineProperty(n,s,{configurable:!0,get:function(){return d.call(this)},set:function(_){a=""+_,m.call(this,_)}}),Object.defineProperty(n,s,{enumerable:u.enumerable}),{getValue:function(){return a},setValue:function(_){a=""+_},stopTracking:function(){n._valueTracker=null,delete n[s]}}}}function Je(n){if(!n._valueTracker){var s=Mr(n)?"checked":"value";n._valueTracker=Pl(n,s,""+n[s])}}function Fs(n){if(!n)return!1;var s=n._valueTracker;if(!s)return!0;var a=s.getValue(),u="";return n&&(u=Mr(n)?n.checked?"true":"false":n.value),n=u,n!==a?(s.setValue(n),!0):!1}function Di(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var Hs=/[\n"\\]/g;function yn(n){return n.replace(Hs,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function Ka(n,s,a,u,d,m,_,b){n.name="",_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?n.type=_:n.removeAttribute("type"),s!=null?_==="number"?(s===0&&n.value===""||n.value!=s)&&(n.value=""+Qt(s)):n.value!==""+Qt(s)&&(n.value=""+Qt(s)):_!=="submit"&&_!=="reset"||n.removeAttribute("value"),s!=null?kl(n,_,Qt(s)):a!=null?kl(n,_,Qt(a)):u!=null&&n.removeAttribute("value"),d==null&&m!=null&&(n.defaultChecked=!!m),d!=null&&(n.checked=d&&typeof d!="function"&&typeof d!="symbol"),b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?n.name=""+Qt(b):n.removeAttribute("name")}function Yc(n,s,a,u,d,m,_,b){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(n.type=m),s!=null||a!=null){if(!(m!=="submit"&&m!=="reset"||s!=null)){Je(n);return}a=a!=null?""+Qt(a):"",s=s!=null?""+Qt(s):a,b||s===n.value||(n.value=s),n.defaultValue=s}u=u??d,u=typeof u!="function"&&typeof u!="symbol"&&!!u,n.checked=b?n.checked:!!u,n.defaultChecked=!!u,_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(n.name=_),Je(n)}function kl(n,s,a){s==="number"&&Di(n.ownerDocument)===n||n.defaultValue===""+a||(n.defaultValue=""+a)}function Pr(n,s,a,u){if(n=n.options,s){s={};for(var d=0;d<a.length;d++)s["$"+a[d]]=!0;for(a=0;a<n.length;a++)d=s.hasOwnProperty("$"+n[a].value),n[a].selected!==d&&(n[a].selected=d),d&&u&&(n[a].defaultSelected=!0)}else{for(a=""+Qt(a),s=null,d=0;d<n.length;d++){if(n[d].value===a){n[d].selected=!0,u&&(n[d].defaultSelected=!0);return}s!==null||n[d].disabled||(s=n[d])}s!==null&&(s.selected=!0)}}function $c(n,s,a){if(s!=null&&(s=""+Qt(s),s!==n.value&&(n.value=s),a==null)){n.defaultValue!==s&&(n.defaultValue=s);return}n.defaultValue=a!=null?""+Qt(a):""}function kr(n,s,a,u){if(s==null){if(u!=null){if(a!=null)throw Error(i(92));if(Ie(u)){if(1<u.length)throw Error(i(93));u=u[0]}a=u}a==null&&(a=""),s=a}a=Qt(s),n.defaultValue=a,u=n.textContent,u===a&&u!==""&&u!==null&&(n.value=u),Je(n)}function _n(n,s){if(s){var a=n.firstChild;if(a&&a===n.lastChild&&a.nodeType===3){a.nodeValue=s;return}}n.textContent=s}var Xc=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ll(n,s,a){var u=s.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?u?n.setProperty(s,""):s==="float"?n.cssFloat="":n[s]="":u?n.setProperty(s,a):typeof a!="number"||a===0||Xc.has(s)?s==="float"?n.cssFloat=a:n[s]=(""+a).trim():n[s]=a+"px"}function Ul(n,s,a){if(s!=null&&typeof s!="object")throw Error(i(62));if(n=n.style,a!=null){for(var u in a)!a.hasOwnProperty(u)||s!=null&&s.hasOwnProperty(u)||(u.indexOf("--")===0?n.setProperty(u,""):u==="float"?n.cssFloat="":n[u]="");for(var d in s)u=s[d],s.hasOwnProperty(d)&&a[d]!==u&&Ll(n,d,u)}else for(var m in s)s.hasOwnProperty(m)&&Ll(n,m,s[m])}function Qa(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Wc=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Lr=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ya(n){return Lr.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}function ai(){}var Bl=null;function zn(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Ur=null,Ni=null;function Gs(n){var s=Bn(n);if(s&&(n=s.stateNode)){var a=n[Kt]||null;e:switch(n=s.stateNode,s.type){case"input":if(Ka(n,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),s=a.name,a.type==="radio"&&s!=null){for(a=n;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+yn(""+s)+'"][type="radio"]'),s=0;s<a.length;s++){var u=a[s];if(u!==n&&u.form===n.form){var d=u[Kt]||null;if(!d)throw Error(i(90));Ka(u,d.value,d.defaultValue,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name)}}for(s=0;s<a.length;s++)u=a[s],u.form===n.form&&Fs(u)}break e;case"textarea":$c(n,a.value,a.defaultValue);break e;case"select":s=a.value,s!=null&&Pr(n,!!a.multiple,s,!1)}}}var $a=!1;function Br(n,s,a){if($a)return n(s,a);$a=!0;try{var u=n(s);return u}finally{if($a=!1,(Ur!==null||Ni!==null)&&(Hh(),Ur&&(s=Ur,n=Ni,Ni=Ur=null,Gs(s),n)))for(s=0;s<n.length;s++)Gs(n[s])}}function oi(n,s){var a=n.stateNode;if(a===null)return null;var u=a[Kt]||null;if(u===null)return null;a=u[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(n=n.type,u=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!u;break e;default:n=!1}if(n)return null;if(a&&typeof a!="function")throw Error(i(231,s,typeof a));return a}var jn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ks=!1;if(jn)try{var rt={};Object.defineProperty(rt,"passive",{get:function(){Ks=!0}}),window.addEventListener("test",rt,rt),window.removeEventListener("test",rt,rt)}catch{Ks=!1}var Vi=null,zl=null,Qs=null;function jl(){if(Qs)return Qs;var n,s=zl,a=s.length,u,d="value"in Vi?Vi.value:Vi.textContent,m=d.length;for(n=0;n<a&&s[n]===d[n];n++);var _=a-n;for(u=1;u<=_&&s[a-u]===d[m-u];u++);return Qs=d.slice(n,1<u?1-u:void 0)}function Ys(n){var s=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&s===13&&(n=13)):n=s,n===10&&(n=13),32<=n||n===13?n:0}function tr(){return!0}function li(){return!1}function Jt(n){function s(a,u,d,m,_){this._reactName=a,this._targetInst=d,this.type=u,this.nativeEvent=m,this.target=_,this.currentTarget=null;for(var b in n)n.hasOwnProperty(b)&&(a=n[b],this[b]=a?a(m):m[b]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?tr:li,this.isPropagationStopped=li,this}return T(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=tr)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=tr)},persist:function(){},isPersistent:tr}),s}var nr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Oi=Jt(nr),zr=T({},nr,{view:0,detail:0}),ql=Jt(zr),jr,Xa,Mi,Wa=T({},zr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:qr,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Mi&&(Mi&&n.type==="mousemove"?(jr=n.screenX-Mi.screenX,Xa=n.screenY-Mi.screenY):Xa=jr=0,Mi=n),jr)},movementY:function(n){return"movementY"in n?n.movementY:Xa}}),Fl=Jt(Wa),$s=T({},Wa,{dataTransfer:0}),Jc=Jt($s),Zc=T({},zr,{relatedTarget:0}),Xs=Jt(Zc),Hl=T({},nr,{animationName:0,elapsedTime:0,pseudoElement:0}),eh=Jt(Hl),Ja=T({},nr,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),th=Jt(Ja),nh=T({},nr,{data:0}),Pi=Jt(nh),ih={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},rh={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},sh={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ah(n){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(n):(n=sh[n])?!!s[n]:!1}function qr(){return ah}var dn=T({},zr,{key:function(n){if(n.key){var s=ih[n.key]||n.key;if(s!=="Unidentified")return s}return n.type==="keypress"?(n=Ys(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?rh[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:qr,charCode:function(n){return n.type==="keypress"?Ys(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Ys(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),oh=Jt(dn),lh=T({},Wa,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ir=Jt(lh),h=T({},zr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:qr}),y=Jt(h),v=T({},nr,{propertyName:0,elapsedTime:0,pseudoElement:0}),w=Jt(v),q=T({},Wa,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),X=Jt(q),oe=T({},nr,{newState:0,oldState:0}),Oe=Jt(oe),bt=[9,13,27,32],$e=jn&&"CompositionEvent"in window,dt=null;jn&&"documentMode"in document&&(dt=document.documentMode);var qn=jn&&"TextEvent"in window&&!dt,ki=jn&&(!$e||dt&&8<dt&&11>=dt),ui=" ",ci=!1;function Ws(n,s){switch(n){case"keyup":return bt.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Za(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var eo=!1;function Bw(n,s){switch(n){case"compositionend":return Za(s);case"keypress":return s.which!==32?null:(ci=!0,ui);case"textInput":return n=s.data,n===ui&&ci?null:n;default:return null}}function zw(n,s){if(eo)return n==="compositionend"||!$e&&Ws(n,s)?(n=jl(),Qs=zl=Vi=null,eo=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return ki&&s.locale!=="ko"?null:s.data;default:return null}}var jw={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function y_(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s==="input"?!!jw[n.type]:s==="textarea"}function __(n,s,a,u){Ur?Ni?Ni.push(u):Ni=[u]:Ur=u,s=Wh(s,"onChange"),0<s.length&&(a=new Oi("onChange","change",null,a,u),n.push({event:a,listeners:s}))}var Gl=null,Kl=null;function qw(n){eT(n,0)}function uh(n){var s=wn(n);if(Fs(s))return n}function v_(n,s){if(n==="change")return s}var E_=!1;if(jn){var Wf;if(jn){var Jf="oninput"in document;if(!Jf){var T_=document.createElement("div");T_.setAttribute("oninput","return;"),Jf=typeof T_.oninput=="function"}Wf=Jf}else Wf=!1;E_=Wf&&(!document.documentMode||9<document.documentMode)}function b_(){Gl&&(Gl.detachEvent("onpropertychange",S_),Kl=Gl=null)}function S_(n){if(n.propertyName==="value"&&uh(Kl)){var s=[];__(s,Kl,n,zn(n)),Br(qw,s)}}function Fw(n,s,a){n==="focusin"?(b_(),Gl=s,Kl=a,Gl.attachEvent("onpropertychange",S_)):n==="focusout"&&b_()}function Hw(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return uh(Kl)}function Gw(n,s){if(n==="click")return uh(s)}function Kw(n,s){if(n==="input"||n==="change")return uh(s)}function Qw(n,s){return n===s&&(n!==0||1/n===1/s)||n!==n&&s!==s}var Rn=typeof Object.is=="function"?Object.is:Qw;function Ql(n,s){if(Rn(n,s))return!0;if(typeof n!="object"||n===null||typeof s!="object"||s===null)return!1;var a=Object.keys(n),u=Object.keys(s);if(a.length!==u.length)return!1;for(u=0;u<a.length;u++){var d=a[u];if(!wt.call(s,d)||!Rn(n[d],s[d]))return!1}return!0}function A_(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function w_(n,s){var a=A_(n);n=0;for(var u;a;){if(a.nodeType===3){if(u=n+a.textContent.length,n<=s&&u>=s)return{node:a,offset:s-n};n=u}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=A_(a)}}function I_(n,s){return n&&s?n===s?!0:n&&n.nodeType===3?!1:s&&s.nodeType===3?I_(n,s.parentNode):"contains"in n?n.contains(s):n.compareDocumentPosition?!!(n.compareDocumentPosition(s)&16):!1:!1}function R_(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var s=Di(n.document);s instanceof n.HTMLIFrameElement;){try{var a=typeof s.contentWindow.location.href=="string"}catch{a=!1}if(a)n=s.contentWindow;else break;s=Di(n.document)}return s}function Zf(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s&&(s==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||s==="textarea"||n.contentEditable==="true")}var Yw=jn&&"documentMode"in document&&11>=document.documentMode,to=null,em=null,Yl=null,tm=!1;function C_(n,s,a){var u=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;tm||to==null||to!==Di(u)||(u=to,"selectionStart"in u&&Zf(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),Yl&&Ql(Yl,u)||(Yl=u,u=Wh(em,"onSelect"),0<u.length&&(s=new Oi("onSelect","select",null,s,a),n.push({event:s,listeners:u}),s.target=to)))}function Js(n,s){var a={};return a[n.toLowerCase()]=s.toLowerCase(),a["Webkit"+n]="webkit"+s,a["Moz"+n]="moz"+s,a}var no={animationend:Js("Animation","AnimationEnd"),animationiteration:Js("Animation","AnimationIteration"),animationstart:Js("Animation","AnimationStart"),transitionrun:Js("Transition","TransitionRun"),transitionstart:Js("Transition","TransitionStart"),transitioncancel:Js("Transition","TransitionCancel"),transitionend:Js("Transition","TransitionEnd")},nm={},x_={};jn&&(x_=document.createElement("div").style,"AnimationEvent"in window||(delete no.animationend.animation,delete no.animationiteration.animation,delete no.animationstart.animation),"TransitionEvent"in window||delete no.transitionend.transition);function Zs(n){if(nm[n])return nm[n];if(!no[n])return n;var s=no[n],a;for(a in s)if(s.hasOwnProperty(a)&&a in x_)return nm[n]=s[a];return n}var D_=Zs("animationend"),N_=Zs("animationiteration"),V_=Zs("animationstart"),$w=Zs("transitionrun"),Xw=Zs("transitionstart"),Ww=Zs("transitioncancel"),O_=Zs("transitionend"),M_=new Map,im="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");im.push("scrollEnd");function hi(n,s){M_.set(n,s),Ci(s,[n])}var ch=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)},Fn=[],io=0,rm=0;function hh(){for(var n=io,s=rm=io=0;s<n;){var a=Fn[s];Fn[s++]=null;var u=Fn[s];Fn[s++]=null;var d=Fn[s];Fn[s++]=null;var m=Fn[s];if(Fn[s++]=null,u!==null&&d!==null){var _=u.pending;_===null?d.next=d:(d.next=_.next,_.next=d),u.pending=d}m!==0&&P_(a,d,m)}}function dh(n,s,a,u){Fn[io++]=n,Fn[io++]=s,Fn[io++]=a,Fn[io++]=u,rm|=u,n.lanes|=u,n=n.alternate,n!==null&&(n.lanes|=u)}function sm(n,s,a,u){return dh(n,s,a,u),fh(n)}function ea(n,s){return dh(n,null,null,s),fh(n)}function P_(n,s,a){n.lanes|=a;var u=n.alternate;u!==null&&(u.lanes|=a);for(var d=!1,m=n.return;m!==null;)m.childLanes|=a,u=m.alternate,u!==null&&(u.childLanes|=a),m.tag===22&&(n=m.stateNode,n===null||n._visibility&1||(d=!0)),n=m,m=m.return;return n.tag===3?(m=n.stateNode,d&&s!==null&&(d=31-Tt(a),n=m.hiddenUpdates,u=n[d],u===null?n[d]=[s]:u.push(s),s.lane=a|536870912),m):null}function fh(n){if(50<gu)throw gu=0,mp=null,Error(i(185));for(var s=n.return;s!==null;)n=s,s=n.return;return n.tag===3?n.stateNode:null}var ro={};function Jw(n,s,a,u){this.tag=n,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Cn(n,s,a,u){return new Jw(n,s,a,u)}function am(n){return n=n.prototype,!(!n||!n.isReactComponent)}function rr(n,s){var a=n.alternate;return a===null?(a=Cn(n.tag,s,n.key,n.mode),a.elementType=n.elementType,a.type=n.type,a.stateNode=n.stateNode,a.alternate=n,n.alternate=a):(a.pendingProps=s,a.type=n.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=n.flags&65011712,a.childLanes=n.childLanes,a.lanes=n.lanes,a.child=n.child,a.memoizedProps=n.memoizedProps,a.memoizedState=n.memoizedState,a.updateQueue=n.updateQueue,s=n.dependencies,a.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},a.sibling=n.sibling,a.index=n.index,a.ref=n.ref,a.refCleanup=n.refCleanup,a}function k_(n,s){n.flags&=65011714;var a=n.alternate;return a===null?(n.childLanes=0,n.lanes=s,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=a.childLanes,n.lanes=a.lanes,n.child=a.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=a.memoizedProps,n.memoizedState=a.memoizedState,n.updateQueue=a.updateQueue,n.type=a.type,s=a.dependencies,n.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),n}function mh(n,s,a,u,d,m){var _=0;if(u=n,typeof n=="function")am(n)&&(_=1);else if(typeof n=="string")_=iR(n,a,me.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case C:return n=Cn(31,a,s,d),n.elementType=C,n.lanes=m,n;case Y:return ta(a.children,d,m,s);case U:_=8,d|=24;break;case F:return n=Cn(12,a,s,d|2),n.elementType=F,n.lanes=m,n;case de:return n=Cn(13,a,s,d),n.elementType=de,n.lanes=m,n;case pe:return n=Cn(19,a,s,d),n.elementType=pe,n.lanes=m,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case ee:_=10;break e;case K:_=9;break e;case he:_=11;break e;case x:_=14;break e;case R:_=16,u=null;break e}_=29,a=Error(i(130,n===null?"null":typeof n,"")),u=null}return s=Cn(_,a,s,d),s.elementType=n,s.type=u,s.lanes=m,s}function ta(n,s,a,u){return n=Cn(7,n,u,s),n.lanes=a,n}function om(n,s,a){return n=Cn(6,n,null,s),n.lanes=a,n}function L_(n){var s=Cn(18,null,null,0);return s.stateNode=n,s}function lm(n,s,a){return s=Cn(4,n.children!==null?n.children:[],n.key,s),s.lanes=a,s.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},s}var U_=new WeakMap;function Hn(n,s){if(typeof n=="object"&&n!==null){var a=U_.get(n);return a!==void 0?a:(s={value:n,source:s,stack:wl(s)},U_.set(n,s),s)}return{value:n,source:s,stack:wl(s)}}var so=[],ao=0,ph=null,$l=0,Gn=[],Kn=0,Fr=null,Li=1,Ui="";function sr(n,s){so[ao++]=$l,so[ao++]=ph,ph=n,$l=s}function B_(n,s,a){Gn[Kn++]=Li,Gn[Kn++]=Ui,Gn[Kn++]=Fr,Fr=n;var u=Li;n=Ui;var d=32-Tt(u)-1;u&=~(1<<d),a+=1;var m=32-Tt(s)+d;if(30<m){var _=d-d%5;m=(u&(1<<_)-1).toString(32),u>>=_,d-=_,Li=1<<32-Tt(s)+d|a<<d|u,Ui=m+n}else Li=1<<m|a<<d|u,Ui=n}function um(n){n.return!==null&&(sr(n,1),B_(n,1,0))}function cm(n){for(;n===ph;)ph=so[--ao],so[ao]=null,$l=so[--ao],so[ao]=null;for(;n===Fr;)Fr=Gn[--Kn],Gn[Kn]=null,Ui=Gn[--Kn],Gn[Kn]=null,Li=Gn[--Kn],Gn[Kn]=null}function z_(n,s){Gn[Kn++]=Li,Gn[Kn++]=Ui,Gn[Kn++]=Fr,Li=s.id,Ui=s.overflow,Fr=n}var Zt=null,ct=null,He=!1,Hr=null,Qn=!1,hm=Error(i(519));function Gr(n){var s=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Xl(Hn(s,n)),hm}function j_(n){var s=n.stateNode,a=n.type,u=n.memoizedProps;switch(s[Rt]=n,s[Kt]=u,a){case"dialog":Be("cancel",s),Be("close",s);break;case"iframe":case"object":case"embed":Be("load",s);break;case"video":case"audio":for(a=0;a<_u.length;a++)Be(_u[a],s);break;case"source":Be("error",s);break;case"img":case"image":case"link":Be("error",s),Be("load",s);break;case"details":Be("toggle",s);break;case"input":Be("invalid",s),Yc(s,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0);break;case"select":Be("invalid",s);break;case"textarea":Be("invalid",s),kr(s,u.value,u.defaultValue,u.children)}a=u.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||s.textContent===""+a||u.suppressHydrationWarning===!0||rT(s.textContent,a)?(u.popover!=null&&(Be("beforetoggle",s),Be("toggle",s)),u.onScroll!=null&&Be("scroll",s),u.onScrollEnd!=null&&Be("scrollend",s),u.onClick!=null&&(s.onclick=ai),s=!0):s=!1,s||Gr(n,!0)}function q_(n){for(Zt=n.return;Zt;)switch(Zt.tag){case 5:case 31:case 13:Qn=!1;return;case 27:case 3:Qn=!0;return;default:Zt=Zt.return}}function oo(n){if(n!==Zt)return!1;if(!He)return q_(n),He=!0,!1;var s=n.tag,a;if((a=s!==3&&s!==27)&&((a=s===5)&&(a=n.type,a=!(a!=="form"&&a!=="button")||xp(n.type,n.memoizedProps)),a=!a),a&&ct&&Gr(n),q_(n),s===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(i(317));ct=fT(n)}else if(s===31){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(i(317));ct=fT(n)}else s===27?(s=ct,ss(n.type)?(n=Mp,Mp=null,ct=n):ct=s):ct=Zt?$n(n.stateNode.nextSibling):null;return!0}function na(){ct=Zt=null,He=!1}function dm(){var n=Hr;return n!==null&&(bn===null?bn=n:bn.push.apply(bn,n),Hr=null),n}function Xl(n){Hr===null?Hr=[n]:Hr.push(n)}var fm=P(null),ia=null,ar=null;function Kr(n,s,a){ue(fm,s._currentValue),s._currentValue=a}function or(n){n._currentValue=fm.current,ne(fm)}function mm(n,s,a){for(;n!==null;){var u=n.alternate;if((n.childLanes&s)!==s?(n.childLanes|=s,u!==null&&(u.childLanes|=s)):u!==null&&(u.childLanes&s)!==s&&(u.childLanes|=s),n===a)break;n=n.return}}function pm(n,s,a,u){var d=n.child;for(d!==null&&(d.return=n);d!==null;){var m=d.dependencies;if(m!==null){var _=d.child;m=m.firstContext;e:for(;m!==null;){var b=m;m=d;for(var N=0;N<s.length;N++)if(b.context===s[N]){m.lanes|=a,b=m.alternate,b!==null&&(b.lanes|=a),mm(m.return,a,n),u||(_=null);break e}m=b.next}}else if(d.tag===18){if(_=d.return,_===null)throw Error(i(341));_.lanes|=a,m=_.alternate,m!==null&&(m.lanes|=a),mm(_,a,n),_=null}else _=d.child;if(_!==null)_.return=d;else for(_=d;_!==null;){if(_===n){_=null;break}if(d=_.sibling,d!==null){d.return=_.return,_=d;break}_=_.return}d=_}}function lo(n,s,a,u){n=null;for(var d=s,m=!1;d!==null;){if(!m){if((d.flags&524288)!==0)m=!0;else if((d.flags&262144)!==0)break}if(d.tag===10){var _=d.alternate;if(_===null)throw Error(i(387));if(_=_.memoizedProps,_!==null){var b=d.type;Rn(d.pendingProps.value,_.value)||(n!==null?n.push(b):n=[b])}}else if(d===re.current){if(_=d.alternate,_===null)throw Error(i(387));_.memoizedState.memoizedState!==d.memoizedState.memoizedState&&(n!==null?n.push(Su):n=[Su])}d=d.return}n!==null&&pm(s,n,a,u),s.flags|=262144}function gh(n){for(n=n.firstContext;n!==null;){if(!Rn(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function ra(n){ia=n,ar=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function en(n){return F_(ia,n)}function yh(n,s){return ia===null&&ra(n),F_(n,s)}function F_(n,s){var a=s._currentValue;if(s={context:s,memoizedValue:a,next:null},ar===null){if(n===null)throw Error(i(308));ar=s,n.dependencies={lanes:0,firstContext:s},n.flags|=524288}else ar=ar.next=s;return a}var Zw=typeof AbortController<"u"?AbortController:function(){var n=[],s=this.signal={aborted:!1,addEventListener:function(a,u){n.push(u)}};this.abort=function(){s.aborted=!0,n.forEach(function(a){return a()})}},eI=r.unstable_scheduleCallback,tI=r.unstable_NormalPriority,Dt={$$typeof:ee,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function gm(){return{controller:new Zw,data:new Map,refCount:0}}function Wl(n){n.refCount--,n.refCount===0&&eI(tI,function(){n.controller.abort()})}var Jl=null,ym=0,uo=0,co=null;function nI(n,s){if(Jl===null){var a=Jl=[];ym=0,uo=Ep(),co={status:"pending",value:void 0,then:function(u){a.push(u)}}}return ym++,s.then(H_,H_),s}function H_(){if(--ym===0&&Jl!==null){co!==null&&(co.status="fulfilled");var n=Jl;Jl=null,uo=0,co=null;for(var s=0;s<n.length;s++)(0,n[s])()}}function iI(n,s){var a=[],u={status:"pending",value:null,reason:null,then:function(d){a.push(d)}};return n.then(function(){u.status="fulfilled",u.value=s;for(var d=0;d<a.length;d++)(0,a[d])(s)},function(d){for(u.status="rejected",u.reason=d,d=0;d<a.length;d++)(0,a[d])(void 0)}),u}var G_=$.S;$.S=function(n,s){CE=hn(),typeof s=="object"&&s!==null&&typeof s.then=="function"&&nI(n,s),G_!==null&&G_(n,s)};var sa=P(null);function _m(){var n=sa.current;return n!==null?n:lt.pooledCache}function _h(n,s){s===null?ue(sa,sa.current):ue(sa,s.pool)}function K_(){var n=_m();return n===null?null:{parent:Dt._currentValue,pool:n}}var ho=Error(i(460)),vm=Error(i(474)),vh=Error(i(542)),Eh={then:function(){}};function Q_(n){return n=n.status,n==="fulfilled"||n==="rejected"}function Y_(n,s,a){switch(a=n[a],a===void 0?n.push(s):a!==s&&(s.then(ai,ai),s=a),s.status){case"fulfilled":return s.value;case"rejected":throw n=s.reason,X_(n),n;default:if(typeof s.status=="string")s.then(ai,ai);else{if(n=lt,n!==null&&100<n.shellSuspendCounter)throw Error(i(482));n=s,n.status="pending",n.then(function(u){if(s.status==="pending"){var d=s;d.status="fulfilled",d.value=u}},function(u){if(s.status==="pending"){var d=s;d.status="rejected",d.reason=u}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw n=s.reason,X_(n),n}throw oa=s,ho}}function aa(n){try{var s=n._init;return s(n._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(oa=a,ho):a}}var oa=null;function $_(){if(oa===null)throw Error(i(459));var n=oa;return oa=null,n}function X_(n){if(n===ho||n===vh)throw Error(i(483))}var fo=null,Zl=0;function Th(n){var s=Zl;return Zl+=1,fo===null&&(fo=[]),Y_(fo,n,s)}function eu(n,s){s=s.props.ref,n.ref=s!==void 0?s:null}function bh(n,s){throw s.$$typeof===S?Error(i(525)):(n=Object.prototype.toString.call(s),Error(i(31,n==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":n)))}function W_(n){function s(B,M){if(n){var H=B.deletions;H===null?(B.deletions=[M],B.flags|=16):H.push(M)}}function a(B,M){if(!n)return null;for(;M!==null;)s(B,M),M=M.sibling;return null}function u(B){for(var M=new Map;B!==null;)B.key!==null?M.set(B.key,B):M.set(B.index,B),B=B.sibling;return M}function d(B,M){return B=rr(B,M),B.index=0,B.sibling=null,B}function m(B,M,H){return B.index=H,n?(H=B.alternate,H!==null?(H=H.index,H<M?(B.flags|=67108866,M):H):(B.flags|=67108866,M)):(B.flags|=1048576,M)}function _(B){return n&&B.alternate===null&&(B.flags|=67108866),B}function b(B,M,H,te){return M===null||M.tag!==6?(M=om(H,B.mode,te),M.return=B,M):(M=d(M,H),M.return=B,M)}function N(B,M,H,te){var Te=H.type;return Te===Y?J(B,M,H.props.children,te,H.key):M!==null&&(M.elementType===Te||typeof Te=="object"&&Te!==null&&Te.$$typeof===R&&aa(Te)===M.type)?(M=d(M,H.props),eu(M,H),M.return=B,M):(M=mh(H.type,H.key,H.props,null,B.mode,te),eu(M,H),M.return=B,M)}function G(B,M,H,te){return M===null||M.tag!==4||M.stateNode.containerInfo!==H.containerInfo||M.stateNode.implementation!==H.implementation?(M=lm(H,B.mode,te),M.return=B,M):(M=d(M,H.children||[]),M.return=B,M)}function J(B,M,H,te,Te){return M===null||M.tag!==7?(M=ta(H,B.mode,te,Te),M.return=B,M):(M=d(M,H),M.return=B,M)}function ie(B,M,H){if(typeof M=="string"&&M!==""||typeof M=="number"||typeof M=="bigint")return M=om(""+M,B.mode,H),M.return=B,M;if(typeof M=="object"&&M!==null){switch(M.$$typeof){case O:return H=mh(M.type,M.key,M.props,null,B.mode,H),eu(H,M),H.return=B,H;case z:return M=lm(M,B.mode,H),M.return=B,M;case R:return M=aa(M),ie(B,M,H)}if(Ie(M)||k(M))return M=ta(M,B.mode,H,null),M.return=B,M;if(typeof M.then=="function")return ie(B,Th(M),H);if(M.$$typeof===ee)return ie(B,yh(B,M),H);bh(B,M)}return null}function Q(B,M,H,te){var Te=M!==null?M.key:null;if(typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint")return Te!==null?null:b(B,M,""+H,te);if(typeof H=="object"&&H!==null){switch(H.$$typeof){case O:return H.key===Te?N(B,M,H,te):null;case z:return H.key===Te?G(B,M,H,te):null;case R:return H=aa(H),Q(B,M,H,te)}if(Ie(H)||k(H))return Te!==null?null:J(B,M,H,te,null);if(typeof H.then=="function")return Q(B,M,Th(H),te);if(H.$$typeof===ee)return Q(B,M,yh(B,H),te);bh(B,H)}return null}function W(B,M,H,te,Te){if(typeof te=="string"&&te!==""||typeof te=="number"||typeof te=="bigint")return B=B.get(H)||null,b(M,B,""+te,Te);if(typeof te=="object"&&te!==null){switch(te.$$typeof){case O:return B=B.get(te.key===null?H:te.key)||null,N(M,B,te,Te);case z:return B=B.get(te.key===null?H:te.key)||null,G(M,B,te,Te);case R:return te=aa(te),W(B,M,H,te,Te)}if(Ie(te)||k(te))return B=B.get(H)||null,J(M,B,te,Te,null);if(typeof te.then=="function")return W(B,M,H,Th(te),Te);if(te.$$typeof===ee)return W(B,M,H,yh(M,te),Te);bh(M,te)}return null}function ge(B,M,H,te){for(var Te=null,Qe=null,_e=M,Pe=M=0,je=null;_e!==null&&Pe<H.length;Pe++){_e.index>Pe?(je=_e,_e=null):je=_e.sibling;var Ye=Q(B,_e,H[Pe],te);if(Ye===null){_e===null&&(_e=je);break}n&&_e&&Ye.alternate===null&&s(B,_e),M=m(Ye,M,Pe),Qe===null?Te=Ye:Qe.sibling=Ye,Qe=Ye,_e=je}if(Pe===H.length)return a(B,_e),He&&sr(B,Pe),Te;if(_e===null){for(;Pe<H.length;Pe++)_e=ie(B,H[Pe],te),_e!==null&&(M=m(_e,M,Pe),Qe===null?Te=_e:Qe.sibling=_e,Qe=_e);return He&&sr(B,Pe),Te}for(_e=u(_e);Pe<H.length;Pe++)je=W(_e,B,Pe,H[Pe],te),je!==null&&(n&&je.alternate!==null&&_e.delete(je.key===null?Pe:je.key),M=m(je,M,Pe),Qe===null?Te=je:Qe.sibling=je,Qe=je);return n&&_e.forEach(function(cs){return s(B,cs)}),He&&sr(B,Pe),Te}function Se(B,M,H,te){if(H==null)throw Error(i(151));for(var Te=null,Qe=null,_e=M,Pe=M=0,je=null,Ye=H.next();_e!==null&&!Ye.done;Pe++,Ye=H.next()){_e.index>Pe?(je=_e,_e=null):je=_e.sibling;var cs=Q(B,_e,Ye.value,te);if(cs===null){_e===null&&(_e=je);break}n&&_e&&cs.alternate===null&&s(B,_e),M=m(cs,M,Pe),Qe===null?Te=cs:Qe.sibling=cs,Qe=cs,_e=je}if(Ye.done)return a(B,_e),He&&sr(B,Pe),Te;if(_e===null){for(;!Ye.done;Pe++,Ye=H.next())Ye=ie(B,Ye.value,te),Ye!==null&&(M=m(Ye,M,Pe),Qe===null?Te=Ye:Qe.sibling=Ye,Qe=Ye);return He&&sr(B,Pe),Te}for(_e=u(_e);!Ye.done;Pe++,Ye=H.next())Ye=W(_e,B,Pe,Ye.value,te),Ye!==null&&(n&&Ye.alternate!==null&&_e.delete(Ye.key===null?Pe:Ye.key),M=m(Ye,M,Pe),Qe===null?Te=Ye:Qe.sibling=Ye,Qe=Ye);return n&&_e.forEach(function(mR){return s(B,mR)}),He&&sr(B,Pe),Te}function ot(B,M,H,te){if(typeof H=="object"&&H!==null&&H.type===Y&&H.key===null&&(H=H.props.children),typeof H=="object"&&H!==null){switch(H.$$typeof){case O:e:{for(var Te=H.key;M!==null;){if(M.key===Te){if(Te=H.type,Te===Y){if(M.tag===7){a(B,M.sibling),te=d(M,H.props.children),te.return=B,B=te;break e}}else if(M.elementType===Te||typeof Te=="object"&&Te!==null&&Te.$$typeof===R&&aa(Te)===M.type){a(B,M.sibling),te=d(M,H.props),eu(te,H),te.return=B,B=te;break e}a(B,M);break}else s(B,M);M=M.sibling}H.type===Y?(te=ta(H.props.children,B.mode,te,H.key),te.return=B,B=te):(te=mh(H.type,H.key,H.props,null,B.mode,te),eu(te,H),te.return=B,B=te)}return _(B);case z:e:{for(Te=H.key;M!==null;){if(M.key===Te)if(M.tag===4&&M.stateNode.containerInfo===H.containerInfo&&M.stateNode.implementation===H.implementation){a(B,M.sibling),te=d(M,H.children||[]),te.return=B,B=te;break e}else{a(B,M);break}else s(B,M);M=M.sibling}te=lm(H,B.mode,te),te.return=B,B=te}return _(B);case R:return H=aa(H),ot(B,M,H,te)}if(Ie(H))return ge(B,M,H,te);if(k(H)){if(Te=k(H),typeof Te!="function")throw Error(i(150));return H=Te.call(H),Se(B,M,H,te)}if(typeof H.then=="function")return ot(B,M,Th(H),te);if(H.$$typeof===ee)return ot(B,M,yh(B,H),te);bh(B,H)}return typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint"?(H=""+H,M!==null&&M.tag===6?(a(B,M.sibling),te=d(M,H),te.return=B,B=te):(a(B,M),te=om(H,B.mode,te),te.return=B,B=te),_(B)):a(B,M)}return function(B,M,H,te){try{Zl=0;var Te=ot(B,M,H,te);return fo=null,Te}catch(_e){if(_e===ho||_e===vh)throw _e;var Qe=Cn(29,_e,null,B.mode);return Qe.lanes=te,Qe.return=B,Qe}}}var la=W_(!0),J_=W_(!1),Qr=!1;function Em(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Tm(n,s){n=n.updateQueue,s.updateQueue===n&&(s.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function Yr(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function $r(n,s,a){var u=n.updateQueue;if(u===null)return null;if(u=u.shared,(Xe&2)!==0){var d=u.pending;return d===null?s.next=s:(s.next=d.next,d.next=s),u.pending=s,s=fh(n),P_(n,null,a),s}return dh(n,u,s,a),fh(n)}function tu(n,s,a){if(s=s.updateQueue,s!==null&&(s=s.shared,(a&4194048)!==0)){var u=s.lanes;u&=n.pendingLanes,a|=u,s.lanes=a,Cl(n,a)}}function bm(n,s){var a=n.updateQueue,u=n.alternate;if(u!==null&&(u=u.updateQueue,a===u)){var d=null,m=null;if(a=a.firstBaseUpdate,a!==null){do{var _={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};m===null?d=m=_:m=m.next=_,a=a.next}while(a!==null);m===null?d=m=s:m=m.next=s}else d=m=s;a={baseState:u.baseState,firstBaseUpdate:d,lastBaseUpdate:m,shared:u.shared,callbacks:u.callbacks},n.updateQueue=a;return}n=a.lastBaseUpdate,n===null?a.firstBaseUpdate=s:n.next=s,a.lastBaseUpdate=s}var Sm=!1;function nu(){if(Sm){var n=co;if(n!==null)throw n}}function iu(n,s,a,u){Sm=!1;var d=n.updateQueue;Qr=!1;var m=d.firstBaseUpdate,_=d.lastBaseUpdate,b=d.shared.pending;if(b!==null){d.shared.pending=null;var N=b,G=N.next;N.next=null,_===null?m=G:_.next=G,_=N;var J=n.alternate;J!==null&&(J=J.updateQueue,b=J.lastBaseUpdate,b!==_&&(b===null?J.firstBaseUpdate=G:b.next=G,J.lastBaseUpdate=N))}if(m!==null){var ie=d.baseState;_=0,J=G=N=null,b=m;do{var Q=b.lane&-536870913,W=Q!==b.lane;if(W?(ze&Q)===Q:(u&Q)===Q){Q!==0&&Q===uo&&(Sm=!0),J!==null&&(J=J.next={lane:0,tag:b.tag,payload:b.payload,callback:null,next:null});e:{var ge=n,Se=b;Q=s;var ot=a;switch(Se.tag){case 1:if(ge=Se.payload,typeof ge=="function"){ie=ge.call(ot,ie,Q);break e}ie=ge;break e;case 3:ge.flags=ge.flags&-65537|128;case 0:if(ge=Se.payload,Q=typeof ge=="function"?ge.call(ot,ie,Q):ge,Q==null)break e;ie=T({},ie,Q);break e;case 2:Qr=!0}}Q=b.callback,Q!==null&&(n.flags|=64,W&&(n.flags|=8192),W=d.callbacks,W===null?d.callbacks=[Q]:W.push(Q))}else W={lane:Q,tag:b.tag,payload:b.payload,callback:b.callback,next:null},J===null?(G=J=W,N=ie):J=J.next=W,_|=Q;if(b=b.next,b===null){if(b=d.shared.pending,b===null)break;W=b,b=W.next,W.next=null,d.lastBaseUpdate=W,d.shared.pending=null}}while(!0);J===null&&(N=ie),d.baseState=N,d.firstBaseUpdate=G,d.lastBaseUpdate=J,m===null&&(d.shared.lanes=0),es|=_,n.lanes=_,n.memoizedState=ie}}function Z_(n,s){if(typeof n!="function")throw Error(i(191,n));n.call(s)}function ev(n,s){var a=n.callbacks;if(a!==null)for(n.callbacks=null,n=0;n<a.length;n++)Z_(a[n],s)}var mo=P(null),Sh=P(0);function tv(n,s){n=gr,ue(Sh,n),ue(mo,s),gr=n|s.baseLanes}function Am(){ue(Sh,gr),ue(mo,mo.current)}function wm(){gr=Sh.current,ne(mo),ne(Sh)}var xn=P(null),Yn=null;function Xr(n){var s=n.alternate;ue(St,St.current&1),ue(xn,n),Yn===null&&(s===null||mo.current!==null||s.memoizedState!==null)&&(Yn=n)}function Im(n){ue(St,St.current),ue(xn,n),Yn===null&&(Yn=n)}function nv(n){n.tag===22?(ue(St,St.current),ue(xn,n),Yn===null&&(Yn=n)):Wr()}function Wr(){ue(St,St.current),ue(xn,xn.current)}function Dn(n){ne(xn),Yn===n&&(Yn=null),ne(St)}var St=P(0);function Ah(n){for(var s=n;s!==null;){if(s.tag===13){var a=s.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||Vp(a)||Op(a)))return s}else if(s.tag===19&&(s.memoizedProps.revealOrder==="forwards"||s.memoizedProps.revealOrder==="backwards"||s.memoizedProps.revealOrder==="unstable_legacy-backwards"||s.memoizedProps.revealOrder==="together")){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var lr=0,Me=null,st=null,Nt=null,wh=!1,po=!1,ua=!1,Ih=0,ru=0,go=null,rI=0;function _t(){throw Error(i(321))}function Rm(n,s){if(s===null)return!1;for(var a=0;a<s.length&&a<n.length;a++)if(!Rn(n[a],s[a]))return!1;return!0}function Cm(n,s,a,u,d,m){return lr=m,Me=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,$.H=n===null||n.memoizedState===null?Bv:Fm,ua=!1,m=a(u,d),ua=!1,po&&(m=rv(s,a,u,d)),iv(n),m}function iv(n){$.H=ou;var s=st!==null&&st.next!==null;if(lr=0,Nt=st=Me=null,wh=!1,ru=0,go=null,s)throw Error(i(300));n===null||Vt||(n=n.dependencies,n!==null&&gh(n)&&(Vt=!0))}function rv(n,s,a,u){Me=n;var d=0;do{if(po&&(go=null),ru=0,po=!1,25<=d)throw Error(i(301));if(d+=1,Nt=st=null,n.updateQueue!=null){var m=n.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}$.H=zv,m=s(a,u)}while(po);return m}function sI(){var n=$.H,s=n.useState()[0];return s=typeof s.then=="function"?su(s):s,n=n.useState()[0],(st!==null?st.memoizedState:null)!==n&&(Me.flags|=1024),s}function xm(){var n=Ih!==0;return Ih=0,n}function Dm(n,s,a){s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~a}function Nm(n){if(wh){for(n=n.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}wh=!1}lr=0,Nt=st=Me=null,po=!1,ru=Ih=0,go=null}function fn(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Nt===null?Me.memoizedState=Nt=n:Nt=Nt.next=n,Nt}function At(){if(st===null){var n=Me.alternate;n=n!==null?n.memoizedState:null}else n=st.next;var s=Nt===null?Me.memoizedState:Nt.next;if(s!==null)Nt=s,st=n;else{if(n===null)throw Me.alternate===null?Error(i(467)):Error(i(310));st=n,n={memoizedState:st.memoizedState,baseState:st.baseState,baseQueue:st.baseQueue,queue:st.queue,next:null},Nt===null?Me.memoizedState=Nt=n:Nt=Nt.next=n}return Nt}function Rh(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function su(n){var s=ru;return ru+=1,go===null&&(go=[]),n=Y_(go,n,s),s=Me,(Nt===null?s.memoizedState:Nt.next)===null&&(s=s.alternate,$.H=s===null||s.memoizedState===null?Bv:Fm),n}function Ch(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return su(n);if(n.$$typeof===ee)return en(n)}throw Error(i(438,String(n)))}function Vm(n){var s=null,a=Me.updateQueue;if(a!==null&&(s=a.memoCache),s==null){var u=Me.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(s={data:u.data.map(function(d){return d.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),a===null&&(a=Rh(),Me.updateQueue=a),a.memoCache=s,a=s.data[s.index],a===void 0)for(a=s.data[s.index]=Array(n),u=0;u<n;u++)a[u]=D;return s.index++,a}function ur(n,s){return typeof s=="function"?s(n):s}function xh(n){var s=At();return Om(s,st,n)}function Om(n,s,a){var u=n.queue;if(u===null)throw Error(i(311));u.lastRenderedReducer=a;var d=n.baseQueue,m=u.pending;if(m!==null){if(d!==null){var _=d.next;d.next=m.next,m.next=_}s.baseQueue=d=m,u.pending=null}if(m=n.baseState,d===null)n.memoizedState=m;else{s=d.next;var b=_=null,N=null,G=s,J=!1;do{var ie=G.lane&-536870913;if(ie!==G.lane?(ze&ie)===ie:(lr&ie)===ie){var Q=G.revertLane;if(Q===0)N!==null&&(N=N.next={lane:0,revertLane:0,gesture:null,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null}),ie===uo&&(J=!0);else if((lr&Q)===Q){G=G.next,Q===uo&&(J=!0);continue}else ie={lane:0,revertLane:G.revertLane,gesture:null,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null},N===null?(b=N=ie,_=m):N=N.next=ie,Me.lanes|=Q,es|=Q;ie=G.action,ua&&a(m,ie),m=G.hasEagerState?G.eagerState:a(m,ie)}else Q={lane:ie,revertLane:G.revertLane,gesture:G.gesture,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null},N===null?(b=N=Q,_=m):N=N.next=Q,Me.lanes|=ie,es|=ie;G=G.next}while(G!==null&&G!==s);if(N===null?_=m:N.next=b,!Rn(m,n.memoizedState)&&(Vt=!0,J&&(a=co,a!==null)))throw a;n.memoizedState=m,n.baseState=_,n.baseQueue=N,u.lastRenderedState=m}return d===null&&(u.lanes=0),[n.memoizedState,u.dispatch]}function Mm(n){var s=At(),a=s.queue;if(a===null)throw Error(i(311));a.lastRenderedReducer=n;var u=a.dispatch,d=a.pending,m=s.memoizedState;if(d!==null){a.pending=null;var _=d=d.next;do m=n(m,_.action),_=_.next;while(_!==d);Rn(m,s.memoizedState)||(Vt=!0),s.memoizedState=m,s.baseQueue===null&&(s.baseState=m),a.lastRenderedState=m}return[m,u]}function sv(n,s,a){var u=Me,d=At(),m=He;if(m){if(a===void 0)throw Error(i(407));a=a()}else a=s();var _=!Rn((st||d).memoizedState,a);if(_&&(d.memoizedState=a,Vt=!0),d=d.queue,Lm(lv.bind(null,u,d,n),[n]),d.getSnapshot!==s||_||Nt!==null&&Nt.memoizedState.tag&1){if(u.flags|=2048,yo(9,{destroy:void 0},ov.bind(null,u,d,a,s),null),lt===null)throw Error(i(349));m||(lr&127)!==0||av(u,s,a)}return a}function av(n,s,a){n.flags|=16384,n={getSnapshot:s,value:a},s=Me.updateQueue,s===null?(s=Rh(),Me.updateQueue=s,s.stores=[n]):(a=s.stores,a===null?s.stores=[n]:a.push(n))}function ov(n,s,a,u){s.value=a,s.getSnapshot=u,uv(s)&&cv(n)}function lv(n,s,a){return a(function(){uv(s)&&cv(n)})}function uv(n){var s=n.getSnapshot;n=n.value;try{var a=s();return!Rn(n,a)}catch{return!0}}function cv(n){var s=ea(n,2);s!==null&&Sn(s,n,2)}function Pm(n){var s=fn();if(typeof n=="function"){var a=n;if(n=a(),ua){Un(!0);try{a()}finally{Un(!1)}}}return s.memoizedState=s.baseState=n,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ur,lastRenderedState:n},s}function hv(n,s,a,u){return n.baseState=a,Om(n,st,typeof u=="function"?u:ur)}function aI(n,s,a,u,d){if(Vh(n))throw Error(i(485));if(n=s.action,n!==null){var m={payload:d,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(_){m.listeners.push(_)}};$.T!==null?a(!0):m.isTransition=!1,u(m),a=s.pending,a===null?(m.next=s.pending=m,dv(s,m)):(m.next=a.next,s.pending=a.next=m)}}function dv(n,s){var a=s.action,u=s.payload,d=n.state;if(s.isTransition){var m=$.T,_={};$.T=_;try{var b=a(d,u),N=$.S;N!==null&&N(_,b),fv(n,s,b)}catch(G){km(n,s,G)}finally{m!==null&&_.types!==null&&(m.types=_.types),$.T=m}}else try{m=a(d,u),fv(n,s,m)}catch(G){km(n,s,G)}}function fv(n,s,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(u){mv(n,s,u)},function(u){return km(n,s,u)}):mv(n,s,a)}function mv(n,s,a){s.status="fulfilled",s.value=a,pv(s),n.state=a,s=n.pending,s!==null&&(a=s.next,a===s?n.pending=null:(a=a.next,s.next=a,dv(n,a)))}function km(n,s,a){var u=n.pending;if(n.pending=null,u!==null){u=u.next;do s.status="rejected",s.reason=a,pv(s),s=s.next;while(s!==u)}n.action=null}function pv(n){n=n.listeners;for(var s=0;s<n.length;s++)(0,n[s])()}function gv(n,s){return s}function yv(n,s){if(He){var a=lt.formState;if(a!==null){e:{var u=Me;if(He){if(ct){t:{for(var d=ct,m=Qn;d.nodeType!==8;){if(!m){d=null;break t}if(d=$n(d.nextSibling),d===null){d=null;break t}}m=d.data,d=m==="F!"||m==="F"?d:null}if(d){ct=$n(d.nextSibling),u=d.data==="F!";break e}}Gr(u)}u=!1}u&&(s=a[0])}}return a=fn(),a.memoizedState=a.baseState=s,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:gv,lastRenderedState:s},a.queue=u,a=kv.bind(null,Me,u),u.dispatch=a,u=Pm(!1),m=qm.bind(null,Me,!1,u.queue),u=fn(),d={state:s,dispatch:null,action:n,pending:null},u.queue=d,a=aI.bind(null,Me,d,m,a),d.dispatch=a,u.memoizedState=n,[s,a,!1]}function _v(n){var s=At();return vv(s,st,n)}function vv(n,s,a){if(s=Om(n,s,gv)[0],n=xh(ur)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var u=su(s)}catch(_){throw _===ho?vh:_}else u=s;s=At();var d=s.queue,m=d.dispatch;return a!==s.memoizedState&&(Me.flags|=2048,yo(9,{destroy:void 0},oI.bind(null,d,a),null)),[u,m,n]}function oI(n,s){n.action=s}function Ev(n){var s=At(),a=st;if(a!==null)return vv(s,a,n);At(),s=s.memoizedState,a=At();var u=a.queue.dispatch;return a.memoizedState=n,[s,u,!1]}function yo(n,s,a,u){return n={tag:n,create:a,deps:u,inst:s,next:null},s=Me.updateQueue,s===null&&(s=Rh(),Me.updateQueue=s),a=s.lastEffect,a===null?s.lastEffect=n.next=n:(u=a.next,a.next=n,n.next=u,s.lastEffect=n),n}function Tv(){return At().memoizedState}function Dh(n,s,a,u){var d=fn();Me.flags|=n,d.memoizedState=yo(1|s,{destroy:void 0},a,u===void 0?null:u)}function Nh(n,s,a,u){var d=At();u=u===void 0?null:u;var m=d.memoizedState.inst;st!==null&&u!==null&&Rm(u,st.memoizedState.deps)?d.memoizedState=yo(s,m,a,u):(Me.flags|=n,d.memoizedState=yo(1|s,m,a,u))}function bv(n,s){Dh(8390656,8,n,s)}function Lm(n,s){Nh(2048,8,n,s)}function lI(n){Me.flags|=4;var s=Me.updateQueue;if(s===null)s=Rh(),Me.updateQueue=s,s.events=[n];else{var a=s.events;a===null?s.events=[n]:a.push(n)}}function Sv(n){var s=At().memoizedState;return lI({ref:s,nextImpl:n}),function(){if((Xe&2)!==0)throw Error(i(440));return s.impl.apply(void 0,arguments)}}function Av(n,s){return Nh(4,2,n,s)}function wv(n,s){return Nh(4,4,n,s)}function Iv(n,s){if(typeof s=="function"){n=n();var a=s(n);return function(){typeof a=="function"?a():s(null)}}if(s!=null)return n=n(),s.current=n,function(){s.current=null}}function Rv(n,s,a){a=a!=null?a.concat([n]):null,Nh(4,4,Iv.bind(null,s,n),a)}function Um(){}function Cv(n,s){var a=At();s=s===void 0?null:s;var u=a.memoizedState;return s!==null&&Rm(s,u[1])?u[0]:(a.memoizedState=[n,s],n)}function xv(n,s){var a=At();s=s===void 0?null:s;var u=a.memoizedState;if(s!==null&&Rm(s,u[1]))return u[0];if(u=n(),ua){Un(!0);try{n()}finally{Un(!1)}}return a.memoizedState=[u,s],u}function Bm(n,s,a){return a===void 0||(lr&1073741824)!==0&&(ze&261930)===0?n.memoizedState=s:(n.memoizedState=a,n=DE(),Me.lanes|=n,es|=n,a)}function Dv(n,s,a,u){return Rn(a,s)?a:mo.current!==null?(n=Bm(n,a,u),Rn(n,s)||(Vt=!0),n):(lr&42)===0||(lr&1073741824)!==0&&(ze&261930)===0?(Vt=!0,n.memoizedState=a):(n=DE(),Me.lanes|=n,es|=n,s)}function Nv(n,s,a,u,d){var m=ae.p;ae.p=m!==0&&8>m?m:8;var _=$.T,b={};$.T=b,qm(n,!1,s,a);try{var N=d(),G=$.S;if(G!==null&&G(b,N),N!==null&&typeof N=="object"&&typeof N.then=="function"){var J=iI(N,u);au(n,s,J,On(n))}else au(n,s,u,On(n))}catch(ie){au(n,s,{then:function(){},status:"rejected",reason:ie},On())}finally{ae.p=m,_!==null&&b.types!==null&&(_.types=b.types),$.T=_}}function uI(){}function zm(n,s,a,u){if(n.tag!==5)throw Error(i(476));var d=Vv(n).queue;Nv(n,d,s,ve,a===null?uI:function(){return Ov(n),a(u)})}function Vv(n){var s=n.memoizedState;if(s!==null)return s;s={memoizedState:ve,baseState:ve,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ur,lastRenderedState:ve},next:null};var a={};return s.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ur,lastRenderedState:a},next:null},n.memoizedState=s,n=n.alternate,n!==null&&(n.memoizedState=s),s}function Ov(n){var s=Vv(n);s.next===null&&(s=n.alternate.memoizedState),au(n,s.next.queue,{},On())}function jm(){return en(Su)}function Mv(){return At().memoizedState}function Pv(){return At().memoizedState}function cI(n){for(var s=n.return;s!==null;){switch(s.tag){case 24:case 3:var a=On();n=Yr(a);var u=$r(s,n,a);u!==null&&(Sn(u,s,a),tu(u,s,a)),s={cache:gm()},n.payload=s;return}s=s.return}}function hI(n,s,a){var u=On();a={lane:u,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},Vh(n)?Lv(s,a):(a=sm(n,s,a,u),a!==null&&(Sn(a,n,u),Uv(a,s,u)))}function kv(n,s,a){var u=On();au(n,s,a,u)}function au(n,s,a,u){var d={lane:u,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(Vh(n))Lv(s,d);else{var m=n.alternate;if(n.lanes===0&&(m===null||m.lanes===0)&&(m=s.lastRenderedReducer,m!==null))try{var _=s.lastRenderedState,b=m(_,a);if(d.hasEagerState=!0,d.eagerState=b,Rn(b,_))return dh(n,s,d,0),lt===null&&hh(),!1}catch{}if(a=sm(n,s,d,u),a!==null)return Sn(a,n,u),Uv(a,s,u),!0}return!1}function qm(n,s,a,u){if(u={lane:2,revertLane:Ep(),gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},Vh(n)){if(s)throw Error(i(479))}else s=sm(n,a,u,2),s!==null&&Sn(s,n,2)}function Vh(n){var s=n.alternate;return n===Me||s!==null&&s===Me}function Lv(n,s){po=wh=!0;var a=n.pending;a===null?s.next=s:(s.next=a.next,a.next=s),n.pending=s}function Uv(n,s,a){if((a&4194048)!==0){var u=s.lanes;u&=n.pendingLanes,a|=u,s.lanes=a,Cl(n,a)}}var ou={readContext:en,use:Ch,useCallback:_t,useContext:_t,useEffect:_t,useImperativeHandle:_t,useLayoutEffect:_t,useInsertionEffect:_t,useMemo:_t,useReducer:_t,useRef:_t,useState:_t,useDebugValue:_t,useDeferredValue:_t,useTransition:_t,useSyncExternalStore:_t,useId:_t,useHostTransitionStatus:_t,useFormState:_t,useActionState:_t,useOptimistic:_t,useMemoCache:_t,useCacheRefresh:_t};ou.useEffectEvent=_t;var Bv={readContext:en,use:Ch,useCallback:function(n,s){return fn().memoizedState=[n,s===void 0?null:s],n},useContext:en,useEffect:bv,useImperativeHandle:function(n,s,a){a=a!=null?a.concat([n]):null,Dh(4194308,4,Iv.bind(null,s,n),a)},useLayoutEffect:function(n,s){return Dh(4194308,4,n,s)},useInsertionEffect:function(n,s){Dh(4,2,n,s)},useMemo:function(n,s){var a=fn();s=s===void 0?null:s;var u=n();if(ua){Un(!0);try{n()}finally{Un(!1)}}return a.memoizedState=[u,s],u},useReducer:function(n,s,a){var u=fn();if(a!==void 0){var d=a(s);if(ua){Un(!0);try{a(s)}finally{Un(!1)}}}else d=s;return u.memoizedState=u.baseState=d,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:d},u.queue=n,n=n.dispatch=hI.bind(null,Me,n),[u.memoizedState,n]},useRef:function(n){var s=fn();return n={current:n},s.memoizedState=n},useState:function(n){n=Pm(n);var s=n.queue,a=kv.bind(null,Me,s);return s.dispatch=a,[n.memoizedState,a]},useDebugValue:Um,useDeferredValue:function(n,s){var a=fn();return Bm(a,n,s)},useTransition:function(){var n=Pm(!1);return n=Nv.bind(null,Me,n.queue,!0,!1),fn().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,s,a){var u=Me,d=fn();if(He){if(a===void 0)throw Error(i(407));a=a()}else{if(a=s(),lt===null)throw Error(i(349));(ze&127)!==0||av(u,s,a)}d.memoizedState=a;var m={value:a,getSnapshot:s};return d.queue=m,bv(lv.bind(null,u,m,n),[n]),u.flags|=2048,yo(9,{destroy:void 0},ov.bind(null,u,m,a,s),null),a},useId:function(){var n=fn(),s=lt.identifierPrefix;if(He){var a=Ui,u=Li;a=(u&~(1<<32-Tt(u)-1)).toString(32)+a,s="_"+s+"R_"+a,a=Ih++,0<a&&(s+="H"+a.toString(32)),s+="_"}else a=rI++,s="_"+s+"r_"+a.toString(32)+"_";return n.memoizedState=s},useHostTransitionStatus:jm,useFormState:yv,useActionState:yv,useOptimistic:function(n){var s=fn();s.memoizedState=s.baseState=n;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=a,s=qm.bind(null,Me,!0,a),a.dispatch=s,[n,s]},useMemoCache:Vm,useCacheRefresh:function(){return fn().memoizedState=cI.bind(null,Me)},useEffectEvent:function(n){var s=fn(),a={impl:n};return s.memoizedState=a,function(){if((Xe&2)!==0)throw Error(i(440));return a.impl.apply(void 0,arguments)}}},Fm={readContext:en,use:Ch,useCallback:Cv,useContext:en,useEffect:Lm,useImperativeHandle:Rv,useInsertionEffect:Av,useLayoutEffect:wv,useMemo:xv,useReducer:xh,useRef:Tv,useState:function(){return xh(ur)},useDebugValue:Um,useDeferredValue:function(n,s){var a=At();return Dv(a,st.memoizedState,n,s)},useTransition:function(){var n=xh(ur)[0],s=At().memoizedState;return[typeof n=="boolean"?n:su(n),s]},useSyncExternalStore:sv,useId:Mv,useHostTransitionStatus:jm,useFormState:_v,useActionState:_v,useOptimistic:function(n,s){var a=At();return hv(a,st,n,s)},useMemoCache:Vm,useCacheRefresh:Pv};Fm.useEffectEvent=Sv;var zv={readContext:en,use:Ch,useCallback:Cv,useContext:en,useEffect:Lm,useImperativeHandle:Rv,useInsertionEffect:Av,useLayoutEffect:wv,useMemo:xv,useReducer:Mm,useRef:Tv,useState:function(){return Mm(ur)},useDebugValue:Um,useDeferredValue:function(n,s){var a=At();return st===null?Bm(a,n,s):Dv(a,st.memoizedState,n,s)},useTransition:function(){var n=Mm(ur)[0],s=At().memoizedState;return[typeof n=="boolean"?n:su(n),s]},useSyncExternalStore:sv,useId:Mv,useHostTransitionStatus:jm,useFormState:Ev,useActionState:Ev,useOptimistic:function(n,s){var a=At();return st!==null?hv(a,st,n,s):(a.baseState=n,[n,a.queue.dispatch])},useMemoCache:Vm,useCacheRefresh:Pv};zv.useEffectEvent=Sv;function Hm(n,s,a,u){s=n.memoizedState,a=a(u,s),a=a==null?s:T({},s,a),n.memoizedState=a,n.lanes===0&&(n.updateQueue.baseState=a)}var Gm={enqueueSetState:function(n,s,a){n=n._reactInternals;var u=On(),d=Yr(u);d.payload=s,a!=null&&(d.callback=a),s=$r(n,d,u),s!==null&&(Sn(s,n,u),tu(s,n,u))},enqueueReplaceState:function(n,s,a){n=n._reactInternals;var u=On(),d=Yr(u);d.tag=1,d.payload=s,a!=null&&(d.callback=a),s=$r(n,d,u),s!==null&&(Sn(s,n,u),tu(s,n,u))},enqueueForceUpdate:function(n,s){n=n._reactInternals;var a=On(),u=Yr(a);u.tag=2,s!=null&&(u.callback=s),s=$r(n,u,a),s!==null&&(Sn(s,n,a),tu(s,n,a))}};function jv(n,s,a,u,d,m,_){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(u,m,_):s.prototype&&s.prototype.isPureReactComponent?!Ql(a,u)||!Ql(d,m):!0}function qv(n,s,a,u){n=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(a,u),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(a,u),s.state!==n&&Gm.enqueueReplaceState(s,s.state,null)}function ca(n,s){var a=s;if("ref"in s){a={};for(var u in s)u!=="ref"&&(a[u]=s[u])}if(n=n.defaultProps){a===s&&(a=T({},a));for(var d in n)a[d]===void 0&&(a[d]=n[d])}return a}function Fv(n){ch(n)}function Hv(n){console.error(n)}function Gv(n){ch(n)}function Oh(n,s){try{var a=n.onUncaughtError;a(s.value,{componentStack:s.stack})}catch(u){setTimeout(function(){throw u})}}function Kv(n,s,a){try{var u=n.onCaughtError;u(a.value,{componentStack:a.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(d){setTimeout(function(){throw d})}}function Km(n,s,a){return a=Yr(a),a.tag=3,a.payload={element:null},a.callback=function(){Oh(n,s)},a}function Qv(n){return n=Yr(n),n.tag=3,n}function Yv(n,s,a,u){var d=a.type.getDerivedStateFromError;if(typeof d=="function"){var m=u.value;n.payload=function(){return d(m)},n.callback=function(){Kv(s,a,u)}}var _=a.stateNode;_!==null&&typeof _.componentDidCatch=="function"&&(n.callback=function(){Kv(s,a,u),typeof d!="function"&&(ts===null?ts=new Set([this]):ts.add(this));var b=u.stack;this.componentDidCatch(u.value,{componentStack:b!==null?b:""})})}function dI(n,s,a,u,d){if(a.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(s=a.alternate,s!==null&&lo(s,a,d,!0),a=xn.current,a!==null){switch(a.tag){case 31:case 13:return Yn===null?Gh():a.alternate===null&&vt===0&&(vt=3),a.flags&=-257,a.flags|=65536,a.lanes=d,u===Eh?a.flags|=16384:(s=a.updateQueue,s===null?a.updateQueue=new Set([u]):s.add(u),yp(n,u,d)),!1;case 22:return a.flags|=65536,u===Eh?a.flags|=16384:(s=a.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([u])},a.updateQueue=s):(a=s.retryQueue,a===null?s.retryQueue=new Set([u]):a.add(u)),yp(n,u,d)),!1}throw Error(i(435,a.tag))}return yp(n,u,d),Gh(),!1}if(He)return s=xn.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=d,u!==hm&&(n=Error(i(422),{cause:u}),Xl(Hn(n,a)))):(u!==hm&&(s=Error(i(423),{cause:u}),Xl(Hn(s,a))),n=n.current.alternate,n.flags|=65536,d&=-d,n.lanes|=d,u=Hn(u,a),d=Km(n.stateNode,u,d),bm(n,d),vt!==4&&(vt=2)),!1;var m=Error(i(520),{cause:u});if(m=Hn(m,a),pu===null?pu=[m]:pu.push(m),vt!==4&&(vt=2),s===null)return!0;u=Hn(u,a),a=s;do{switch(a.tag){case 3:return a.flags|=65536,n=d&-d,a.lanes|=n,n=Km(a.stateNode,u,n),bm(a,n),!1;case 1:if(s=a.type,m=a.stateNode,(a.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(ts===null||!ts.has(m))))return a.flags|=65536,d&=-d,a.lanes|=d,d=Qv(d),Yv(d,n,a,u),bm(a,d),!1}a=a.return}while(a!==null);return!1}var Qm=Error(i(461)),Vt=!1;function tn(n,s,a,u){s.child=n===null?J_(s,null,a,u):la(s,n.child,a,u)}function $v(n,s,a,u,d){a=a.render;var m=s.ref;if("ref"in u){var _={};for(var b in u)b!=="ref"&&(_[b]=u[b])}else _=u;return ra(s),u=Cm(n,s,a,_,m,d),b=xm(),n!==null&&!Vt?(Dm(n,s,d),cr(n,s,d)):(He&&b&&um(s),s.flags|=1,tn(n,s,u,d),s.child)}function Xv(n,s,a,u,d){if(n===null){var m=a.type;return typeof m=="function"&&!am(m)&&m.defaultProps===void 0&&a.compare===null?(s.tag=15,s.type=m,Wv(n,s,m,u,d)):(n=mh(a.type,null,u,s,s.mode,d),n.ref=s.ref,n.return=s,s.child=n)}if(m=n.child,!tp(n,d)){var _=m.memoizedProps;if(a=a.compare,a=a!==null?a:Ql,a(_,u)&&n.ref===s.ref)return cr(n,s,d)}return s.flags|=1,n=rr(m,u),n.ref=s.ref,n.return=s,s.child=n}function Wv(n,s,a,u,d){if(n!==null){var m=n.memoizedProps;if(Ql(m,u)&&n.ref===s.ref)if(Vt=!1,s.pendingProps=u=m,tp(n,d))(n.flags&131072)!==0&&(Vt=!0);else return s.lanes=n.lanes,cr(n,s,d)}return Ym(n,s,a,u,d)}function Jv(n,s,a,u){var d=u.children,m=n!==null?n.memoizedState:null;if(n===null&&s.stateNode===null&&(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.mode==="hidden"){if((s.flags&128)!==0){if(m=m!==null?m.baseLanes|a:a,n!==null){for(u=s.child=n.child,d=0;u!==null;)d=d|u.lanes|u.childLanes,u=u.sibling;u=d&~m}else u=0,s.child=null;return Zv(n,s,m,a,u)}if((a&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},n!==null&&_h(s,m!==null?m.cachePool:null),m!==null?tv(s,m):Am(),nv(s);else return u=s.lanes=536870912,Zv(n,s,m!==null?m.baseLanes|a:a,a,u)}else m!==null?(_h(s,m.cachePool),tv(s,m),Wr(),s.memoizedState=null):(n!==null&&_h(s,null),Am(),Wr());return tn(n,s,d,a),s.child}function lu(n,s){return n!==null&&n.tag===22||s.stateNode!==null||(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.sibling}function Zv(n,s,a,u,d){var m=_m();return m=m===null?null:{parent:Dt._currentValue,pool:m},s.memoizedState={baseLanes:a,cachePool:m},n!==null&&_h(s,null),Am(),nv(s),n!==null&&lo(n,s,u,!0),s.childLanes=d,null}function Mh(n,s){return s=kh({mode:s.mode,children:s.children},n.mode),s.ref=n.ref,n.child=s,s.return=n,s}function eE(n,s,a){return la(s,n.child,null,a),n=Mh(s,s.pendingProps),n.flags|=2,Dn(s),s.memoizedState=null,n}function fI(n,s,a){var u=s.pendingProps,d=(s.flags&128)!==0;if(s.flags&=-129,n===null){if(He){if(u.mode==="hidden")return n=Mh(s,u),s.lanes=536870912,lu(null,n);if(Im(s),(n=ct)?(n=dT(n,Qn),n=n!==null&&n.data==="&"?n:null,n!==null&&(s.memoizedState={dehydrated:n,treeContext:Fr!==null?{id:Li,overflow:Ui}:null,retryLane:536870912,hydrationErrors:null},a=L_(n),a.return=s,s.child=a,Zt=s,ct=null)):n=null,n===null)throw Gr(s);return s.lanes=536870912,null}return Mh(s,u)}var m=n.memoizedState;if(m!==null){var _=m.dehydrated;if(Im(s),d)if(s.flags&256)s.flags&=-257,s=eE(n,s,a);else if(s.memoizedState!==null)s.child=n.child,s.flags|=128,s=null;else throw Error(i(558));else if(Vt||lo(n,s,a,!1),d=(a&n.childLanes)!==0,Vt||d){if(u=lt,u!==null&&(_=xl(u,a),_!==0&&_!==m.retryLane))throw m.retryLane=_,ea(n,_),Sn(u,n,_),Qm;Gh(),s=eE(n,s,a)}else n=m.treeContext,ct=$n(_.nextSibling),Zt=s,He=!0,Hr=null,Qn=!1,n!==null&&z_(s,n),s=Mh(s,u),s.flags|=4096;return s}return n=rr(n.child,{mode:u.mode,children:u.children}),n.ref=s.ref,s.child=n,n.return=s,n}function Ph(n,s){var a=s.ref;if(a===null)n!==null&&n.ref!==null&&(s.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(i(284));(n===null||n.ref!==a)&&(s.flags|=4194816)}}function Ym(n,s,a,u,d){return ra(s),a=Cm(n,s,a,u,void 0,d),u=xm(),n!==null&&!Vt?(Dm(n,s,d),cr(n,s,d)):(He&&u&&um(s),s.flags|=1,tn(n,s,a,d),s.child)}function tE(n,s,a,u,d,m){return ra(s),s.updateQueue=null,a=rv(s,u,a,d),iv(n),u=xm(),n!==null&&!Vt?(Dm(n,s,m),cr(n,s,m)):(He&&u&&um(s),s.flags|=1,tn(n,s,a,m),s.child)}function nE(n,s,a,u,d){if(ra(s),s.stateNode===null){var m=ro,_=a.contextType;typeof _=="object"&&_!==null&&(m=en(_)),m=new a(u,m),s.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=Gm,s.stateNode=m,m._reactInternals=s,m=s.stateNode,m.props=u,m.state=s.memoizedState,m.refs={},Em(s),_=a.contextType,m.context=typeof _=="object"&&_!==null?en(_):ro,m.state=s.memoizedState,_=a.getDerivedStateFromProps,typeof _=="function"&&(Hm(s,a,_,u),m.state=s.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(_=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),_!==m.state&&Gm.enqueueReplaceState(m,m.state,null),iu(s,u,m,d),nu(),m.state=s.memoizedState),typeof m.componentDidMount=="function"&&(s.flags|=4194308),u=!0}else if(n===null){m=s.stateNode;var b=s.memoizedProps,N=ca(a,b);m.props=N;var G=m.context,J=a.contextType;_=ro,typeof J=="object"&&J!==null&&(_=en(J));var ie=a.getDerivedStateFromProps;J=typeof ie=="function"||typeof m.getSnapshotBeforeUpdate=="function",b=s.pendingProps!==b,J||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(b||G!==_)&&qv(s,m,u,_),Qr=!1;var Q=s.memoizedState;m.state=Q,iu(s,u,m,d),nu(),G=s.memoizedState,b||Q!==G||Qr?(typeof ie=="function"&&(Hm(s,a,ie,u),G=s.memoizedState),(N=Qr||jv(s,a,N,u,Q,G,_))?(J||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(s.flags|=4194308)):(typeof m.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=u,s.memoizedState=G),m.props=u,m.state=G,m.context=_,u=N):(typeof m.componentDidMount=="function"&&(s.flags|=4194308),u=!1)}else{m=s.stateNode,Tm(n,s),_=s.memoizedProps,J=ca(a,_),m.props=J,ie=s.pendingProps,Q=m.context,G=a.contextType,N=ro,typeof G=="object"&&G!==null&&(N=en(G)),b=a.getDerivedStateFromProps,(G=typeof b=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(_!==ie||Q!==N)&&qv(s,m,u,N),Qr=!1,Q=s.memoizedState,m.state=Q,iu(s,u,m,d),nu();var W=s.memoizedState;_!==ie||Q!==W||Qr||n!==null&&n.dependencies!==null&&gh(n.dependencies)?(typeof b=="function"&&(Hm(s,a,b,u),W=s.memoizedState),(J=Qr||jv(s,a,J,u,Q,W,N)||n!==null&&n.dependencies!==null&&gh(n.dependencies))?(G||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(u,W,N),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(u,W,N)),typeof m.componentDidUpdate=="function"&&(s.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof m.componentDidUpdate!="function"||_===n.memoizedProps&&Q===n.memoizedState||(s.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||_===n.memoizedProps&&Q===n.memoizedState||(s.flags|=1024),s.memoizedProps=u,s.memoizedState=W),m.props=u,m.state=W,m.context=N,u=J):(typeof m.componentDidUpdate!="function"||_===n.memoizedProps&&Q===n.memoizedState||(s.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||_===n.memoizedProps&&Q===n.memoizedState||(s.flags|=1024),u=!1)}return m=u,Ph(n,s),u=(s.flags&128)!==0,m||u?(m=s.stateNode,a=u&&typeof a.getDerivedStateFromError!="function"?null:m.render(),s.flags|=1,n!==null&&u?(s.child=la(s,n.child,null,d),s.child=la(s,null,a,d)):tn(n,s,a,d),s.memoizedState=m.state,n=s.child):n=cr(n,s,d),n}function iE(n,s,a,u){return na(),s.flags|=256,tn(n,s,a,u),s.child}var $m={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Xm(n){return{baseLanes:n,cachePool:K_()}}function Wm(n,s,a){return n=n!==null?n.childLanes&~a:0,s&&(n|=Vn),n}function rE(n,s,a){var u=s.pendingProps,d=!1,m=(s.flags&128)!==0,_;if((_=m)||(_=n!==null&&n.memoizedState===null?!1:(St.current&2)!==0),_&&(d=!0,s.flags&=-129),_=(s.flags&32)!==0,s.flags&=-33,n===null){if(He){if(d?Xr(s):Wr(),(n=ct)?(n=dT(n,Qn),n=n!==null&&n.data!=="&"?n:null,n!==null&&(s.memoizedState={dehydrated:n,treeContext:Fr!==null?{id:Li,overflow:Ui}:null,retryLane:536870912,hydrationErrors:null},a=L_(n),a.return=s,s.child=a,Zt=s,ct=null)):n=null,n===null)throw Gr(s);return Op(n)?s.lanes=32:s.lanes=536870912,null}var b=u.children;return u=u.fallback,d?(Wr(),d=s.mode,b=kh({mode:"hidden",children:b},d),u=ta(u,d,a,null),b.return=s,u.return=s,b.sibling=u,s.child=b,u=s.child,u.memoizedState=Xm(a),u.childLanes=Wm(n,_,a),s.memoizedState=$m,lu(null,u)):(Xr(s),Jm(s,b))}var N=n.memoizedState;if(N!==null&&(b=N.dehydrated,b!==null)){if(m)s.flags&256?(Xr(s),s.flags&=-257,s=Zm(n,s,a)):s.memoizedState!==null?(Wr(),s.child=n.child,s.flags|=128,s=null):(Wr(),b=u.fallback,d=s.mode,u=kh({mode:"visible",children:u.children},d),b=ta(b,d,a,null),b.flags|=2,u.return=s,b.return=s,u.sibling=b,s.child=u,la(s,n.child,null,a),u=s.child,u.memoizedState=Xm(a),u.childLanes=Wm(n,_,a),s.memoizedState=$m,s=lu(null,u));else if(Xr(s),Op(b)){if(_=b.nextSibling&&b.nextSibling.dataset,_)var G=_.dgst;_=G,u=Error(i(419)),u.stack="",u.digest=_,Xl({value:u,source:null,stack:null}),s=Zm(n,s,a)}else if(Vt||lo(n,s,a,!1),_=(a&n.childLanes)!==0,Vt||_){if(_=lt,_!==null&&(u=xl(_,a),u!==0&&u!==N.retryLane))throw N.retryLane=u,ea(n,u),Sn(_,n,u),Qm;Vp(b)||Gh(),s=Zm(n,s,a)}else Vp(b)?(s.flags|=192,s.child=n.child,s=null):(n=N.treeContext,ct=$n(b.nextSibling),Zt=s,He=!0,Hr=null,Qn=!1,n!==null&&z_(s,n),s=Jm(s,u.children),s.flags|=4096);return s}return d?(Wr(),b=u.fallback,d=s.mode,N=n.child,G=N.sibling,u=rr(N,{mode:"hidden",children:u.children}),u.subtreeFlags=N.subtreeFlags&65011712,G!==null?b=rr(G,b):(b=ta(b,d,a,null),b.flags|=2),b.return=s,u.return=s,u.sibling=b,s.child=u,lu(null,u),u=s.child,b=n.child.memoizedState,b===null?b=Xm(a):(d=b.cachePool,d!==null?(N=Dt._currentValue,d=d.parent!==N?{parent:N,pool:N}:d):d=K_(),b={baseLanes:b.baseLanes|a,cachePool:d}),u.memoizedState=b,u.childLanes=Wm(n,_,a),s.memoizedState=$m,lu(n.child,u)):(Xr(s),a=n.child,n=a.sibling,a=rr(a,{mode:"visible",children:u.children}),a.return=s,a.sibling=null,n!==null&&(_=s.deletions,_===null?(s.deletions=[n],s.flags|=16):_.push(n)),s.child=a,s.memoizedState=null,a)}function Jm(n,s){return s=kh({mode:"visible",children:s},n.mode),s.return=n,n.child=s}function kh(n,s){return n=Cn(22,n,null,s),n.lanes=0,n}function Zm(n,s,a){return la(s,n.child,null,a),n=Jm(s,s.pendingProps.children),n.flags|=2,s.memoizedState=null,n}function sE(n,s,a){n.lanes|=s;var u=n.alternate;u!==null&&(u.lanes|=s),mm(n.return,s,a)}function ep(n,s,a,u,d,m){var _=n.memoizedState;_===null?n.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:u,tail:a,tailMode:d,treeForkCount:m}:(_.isBackwards=s,_.rendering=null,_.renderingStartTime=0,_.last=u,_.tail=a,_.tailMode=d,_.treeForkCount=m)}function aE(n,s,a){var u=s.pendingProps,d=u.revealOrder,m=u.tail;u=u.children;var _=St.current,b=(_&2)!==0;if(b?(_=_&1|2,s.flags|=128):_&=1,ue(St,_),tn(n,s,u,a),u=He?$l:0,!b&&n!==null&&(n.flags&128)!==0)e:for(n=s.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&sE(n,a,s);else if(n.tag===19)sE(n,a,s);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===s)break e;for(;n.sibling===null;){if(n.return===null||n.return===s)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}switch(d){case"forwards":for(a=s.child,d=null;a!==null;)n=a.alternate,n!==null&&Ah(n)===null&&(d=a),a=a.sibling;a=d,a===null?(d=s.child,s.child=null):(d=a.sibling,a.sibling=null),ep(s,!1,d,a,m,u);break;case"backwards":case"unstable_legacy-backwards":for(a=null,d=s.child,s.child=null;d!==null;){if(n=d.alternate,n!==null&&Ah(n)===null){s.child=d;break}n=d.sibling,d.sibling=a,a=d,d=n}ep(s,!0,a,null,m,u);break;case"together":ep(s,!1,null,null,void 0,u);break;default:s.memoizedState=null}return s.child}function cr(n,s,a){if(n!==null&&(s.dependencies=n.dependencies),es|=s.lanes,(a&s.childLanes)===0)if(n!==null){if(lo(n,s,a,!1),(a&s.childLanes)===0)return null}else return null;if(n!==null&&s.child!==n.child)throw Error(i(153));if(s.child!==null){for(n=s.child,a=rr(n,n.pendingProps),s.child=a,a.return=s;n.sibling!==null;)n=n.sibling,a=a.sibling=rr(n,n.pendingProps),a.return=s;a.sibling=null}return s.child}function tp(n,s){return(n.lanes&s)!==0?!0:(n=n.dependencies,!!(n!==null&&gh(n)))}function mI(n,s,a){switch(s.tag){case 3:Ve(s,s.stateNode.containerInfo),Kr(s,Dt,n.memoizedState.cache),na();break;case 27:case 5:Ut(s);break;case 4:Ve(s,s.stateNode.containerInfo);break;case 10:Kr(s,s.type,s.memoizedProps.value);break;case 31:if(s.memoizedState!==null)return s.flags|=128,Im(s),null;break;case 13:var u=s.memoizedState;if(u!==null)return u.dehydrated!==null?(Xr(s),s.flags|=128,null):(a&s.child.childLanes)!==0?rE(n,s,a):(Xr(s),n=cr(n,s,a),n!==null?n.sibling:null);Xr(s);break;case 19:var d=(n.flags&128)!==0;if(u=(a&s.childLanes)!==0,u||(lo(n,s,a,!1),u=(a&s.childLanes)!==0),d){if(u)return aE(n,s,a);s.flags|=128}if(d=s.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),ue(St,St.current),u)break;return null;case 22:return s.lanes=0,Jv(n,s,a,s.pendingProps);case 24:Kr(s,Dt,n.memoizedState.cache)}return cr(n,s,a)}function oE(n,s,a){if(n!==null)if(n.memoizedProps!==s.pendingProps)Vt=!0;else{if(!tp(n,a)&&(s.flags&128)===0)return Vt=!1,mI(n,s,a);Vt=(n.flags&131072)!==0}else Vt=!1,He&&(s.flags&1048576)!==0&&B_(s,$l,s.index);switch(s.lanes=0,s.tag){case 16:e:{var u=s.pendingProps;if(n=aa(s.elementType),s.type=n,typeof n=="function")am(n)?(u=ca(n,u),s.tag=1,s=nE(null,s,n,u,a)):(s.tag=0,s=Ym(null,s,n,u,a));else{if(n!=null){var d=n.$$typeof;if(d===he){s.tag=11,s=$v(null,s,n,u,a);break e}else if(d===x){s.tag=14,s=Xv(null,s,n,u,a);break e}}throw s=fe(n)||n,Error(i(306,s,""))}}return s;case 0:return Ym(n,s,s.type,s.pendingProps,a);case 1:return u=s.type,d=ca(u,s.pendingProps),nE(n,s,u,d,a);case 3:e:{if(Ve(s,s.stateNode.containerInfo),n===null)throw Error(i(387));u=s.pendingProps;var m=s.memoizedState;d=m.element,Tm(n,s),iu(s,u,null,a);var _=s.memoizedState;if(u=_.cache,Kr(s,Dt,u),u!==m.cache&&pm(s,[Dt],a,!0),nu(),u=_.element,m.isDehydrated)if(m={element:u,isDehydrated:!1,cache:_.cache},s.updateQueue.baseState=m,s.memoizedState=m,s.flags&256){s=iE(n,s,u,a);break e}else if(u!==d){d=Hn(Error(i(424)),s),Xl(d),s=iE(n,s,u,a);break e}else for(n=s.stateNode.containerInfo,n.nodeType===9?n=n.body:n=n.nodeName==="HTML"?n.ownerDocument.body:n,ct=$n(n.firstChild),Zt=s,He=!0,Hr=null,Qn=!0,a=J_(s,null,u,a),s.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(na(),u===d){s=cr(n,s,a);break e}tn(n,s,u,a)}s=s.child}return s;case 26:return Ph(n,s),n===null?(a=_T(s.type,null,s.pendingProps,null))?s.memoizedState=a:He||(a=s.type,n=s.pendingProps,u=Jh(Re.current).createElement(a),u[Rt]=s,u[Kt]=n,nn(u,a,n),Ct(u),s.stateNode=u):s.memoizedState=_T(s.type,n.memoizedProps,s.pendingProps,n.memoizedState),null;case 27:return Ut(s),n===null&&He&&(u=s.stateNode=pT(s.type,s.pendingProps,Re.current),Zt=s,Qn=!0,d=ct,ss(s.type)?(Mp=d,ct=$n(u.firstChild)):ct=d),tn(n,s,s.pendingProps.children,a),Ph(n,s),n===null&&(s.flags|=4194304),s.child;case 5:return n===null&&He&&((d=u=ct)&&(u=HI(u,s.type,s.pendingProps,Qn),u!==null?(s.stateNode=u,Zt=s,ct=$n(u.firstChild),Qn=!1,d=!0):d=!1),d||Gr(s)),Ut(s),d=s.type,m=s.pendingProps,_=n!==null?n.memoizedProps:null,u=m.children,xp(d,m)?u=null:_!==null&&xp(d,_)&&(s.flags|=32),s.memoizedState!==null&&(d=Cm(n,s,sI,null,null,a),Su._currentValue=d),Ph(n,s),tn(n,s,u,a),s.child;case 6:return n===null&&He&&((n=a=ct)&&(a=GI(a,s.pendingProps,Qn),a!==null?(s.stateNode=a,Zt=s,ct=null,n=!0):n=!1),n||Gr(s)),null;case 13:return rE(n,s,a);case 4:return Ve(s,s.stateNode.containerInfo),u=s.pendingProps,n===null?s.child=la(s,null,u,a):tn(n,s,u,a),s.child;case 11:return $v(n,s,s.type,s.pendingProps,a);case 7:return tn(n,s,s.pendingProps,a),s.child;case 8:return tn(n,s,s.pendingProps.children,a),s.child;case 12:return tn(n,s,s.pendingProps.children,a),s.child;case 10:return u=s.pendingProps,Kr(s,s.type,u.value),tn(n,s,u.children,a),s.child;case 9:return d=s.type._context,u=s.pendingProps.children,ra(s),d=en(d),u=u(d),s.flags|=1,tn(n,s,u,a),s.child;case 14:return Xv(n,s,s.type,s.pendingProps,a);case 15:return Wv(n,s,s.type,s.pendingProps,a);case 19:return aE(n,s,a);case 31:return fI(n,s,a);case 22:return Jv(n,s,a,s.pendingProps);case 24:return ra(s),u=en(Dt),n===null?(d=_m(),d===null&&(d=lt,m=gm(),d.pooledCache=m,m.refCount++,m!==null&&(d.pooledCacheLanes|=a),d=m),s.memoizedState={parent:u,cache:d},Em(s),Kr(s,Dt,d)):((n.lanes&a)!==0&&(Tm(n,s),iu(s,null,null,a),nu()),d=n.memoizedState,m=s.memoizedState,d.parent!==u?(d={parent:u,cache:u},s.memoizedState=d,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=d),Kr(s,Dt,u)):(u=m.cache,Kr(s,Dt,u),u!==d.cache&&pm(s,[Dt],a,!0))),tn(n,s,s.pendingProps.children,a),s.child;case 29:throw s.pendingProps}throw Error(i(156,s.tag))}function hr(n){n.flags|=4}function np(n,s,a,u,d){if((s=(n.mode&32)!==0)&&(s=!1),s){if(n.flags|=16777216,(d&335544128)===d)if(n.stateNode.complete)n.flags|=8192;else if(ME())n.flags|=8192;else throw oa=Eh,vm}else n.flags&=-16777217}function lE(n,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!ST(s))if(ME())n.flags|=8192;else throw oa=Eh,vm}function Lh(n,s){s!==null&&(n.flags|=4),n.flags&16384&&(s=n.tag!==22?Fc():536870912,n.lanes|=s,To|=s)}function uu(n,s){if(!He)switch(n.tailMode){case"hidden":s=n.tail;for(var a=null;s!==null;)s.alternate!==null&&(a=s),s=s.sibling;a===null?n.tail=null:a.sibling=null;break;case"collapsed":a=n.tail;for(var u=null;a!==null;)a.alternate!==null&&(u=a),a=a.sibling;u===null?s||n.tail===null?n.tail=null:n.tail.sibling=null:u.sibling=null}}function ht(n){var s=n.alternate!==null&&n.alternate.child===n.child,a=0,u=0;if(s)for(var d=n.child;d!==null;)a|=d.lanes|d.childLanes,u|=d.subtreeFlags&65011712,u|=d.flags&65011712,d.return=n,d=d.sibling;else for(d=n.child;d!==null;)a|=d.lanes|d.childLanes,u|=d.subtreeFlags,u|=d.flags,d.return=n,d=d.sibling;return n.subtreeFlags|=u,n.childLanes=a,s}function pI(n,s,a){var u=s.pendingProps;switch(cm(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ht(s),null;case 1:return ht(s),null;case 3:return a=s.stateNode,u=null,n!==null&&(u=n.memoizedState.cache),s.memoizedState.cache!==u&&(s.flags|=2048),or(Dt),Ce(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(n===null||n.child===null)&&(oo(s)?hr(s):n===null||n.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,dm())),ht(s),null;case 26:var d=s.type,m=s.memoizedState;return n===null?(hr(s),m!==null?(ht(s),lE(s,m)):(ht(s),np(s,d,null,u,a))):m?m!==n.memoizedState?(hr(s),ht(s),lE(s,m)):(ht(s),s.flags&=-16777217):(n=n.memoizedProps,n!==u&&hr(s),ht(s),np(s,d,n,u,a)),null;case 27:if(Zi(s),a=Re.current,d=s.type,n!==null&&s.stateNode!=null)n.memoizedProps!==u&&hr(s);else{if(!u){if(s.stateNode===null)throw Error(i(166));return ht(s),null}n=me.current,oo(s)?j_(s):(n=pT(d,u,a),s.stateNode=n,hr(s))}return ht(s),null;case 5:if(Zi(s),d=s.type,n!==null&&s.stateNode!=null)n.memoizedProps!==u&&hr(s);else{if(!u){if(s.stateNode===null)throw Error(i(166));return ht(s),null}if(m=me.current,oo(s))j_(s);else{var _=Jh(Re.current);switch(m){case 1:m=_.createElementNS("http://www.w3.org/2000/svg",d);break;case 2:m=_.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;default:switch(d){case"svg":m=_.createElementNS("http://www.w3.org/2000/svg",d);break;case"math":m=_.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;case"script":m=_.createElement("div"),m.innerHTML="<script><\/script>",m=m.removeChild(m.firstChild);break;case"select":m=typeof u.is=="string"?_.createElement("select",{is:u.is}):_.createElement("select"),u.multiple?m.multiple=!0:u.size&&(m.size=u.size);break;default:m=typeof u.is=="string"?_.createElement(d,{is:u.is}):_.createElement(d)}}m[Rt]=s,m[Kt]=u;e:for(_=s.child;_!==null;){if(_.tag===5||_.tag===6)m.appendChild(_.stateNode);else if(_.tag!==4&&_.tag!==27&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===s)break e;for(;_.sibling===null;){if(_.return===null||_.return===s)break e;_=_.return}_.sibling.return=_.return,_=_.sibling}s.stateNode=m;e:switch(nn(m,d,u),d){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}u&&hr(s)}}return ht(s),np(s,s.type,n===null?null:n.memoizedProps,s.pendingProps,a),null;case 6:if(n&&s.stateNode!=null)n.memoizedProps!==u&&hr(s);else{if(typeof u!="string"&&s.stateNode===null)throw Error(i(166));if(n=Re.current,oo(s)){if(n=s.stateNode,a=s.memoizedProps,u=null,d=Zt,d!==null)switch(d.tag){case 27:case 5:u=d.memoizedProps}n[Rt]=s,n=!!(n.nodeValue===a||u!==null&&u.suppressHydrationWarning===!0||rT(n.nodeValue,a)),n||Gr(s,!0)}else n=Jh(n).createTextNode(u),n[Rt]=s,s.stateNode=n}return ht(s),null;case 31:if(a=s.memoizedState,n===null||n.memoizedState!==null){if(u=oo(s),a!==null){if(n===null){if(!u)throw Error(i(318));if(n=s.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(i(557));n[Rt]=s}else na(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;ht(s),n=!1}else a=dm(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=a),n=!0;if(!n)return s.flags&256?(Dn(s),s):(Dn(s),null);if((s.flags&128)!==0)throw Error(i(558))}return ht(s),null;case 13:if(u=s.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(d=oo(s),u!==null&&u.dehydrated!==null){if(n===null){if(!d)throw Error(i(318));if(d=s.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(i(317));d[Rt]=s}else na(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;ht(s),d=!1}else d=dm(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=d),d=!0;if(!d)return s.flags&256?(Dn(s),s):(Dn(s),null)}return Dn(s),(s.flags&128)!==0?(s.lanes=a,s):(a=u!==null,n=n!==null&&n.memoizedState!==null,a&&(u=s.child,d=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(d=u.alternate.memoizedState.cachePool.pool),m=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(m=u.memoizedState.cachePool.pool),m!==d&&(u.flags|=2048)),a!==n&&a&&(s.child.flags|=8192),Lh(s,s.updateQueue),ht(s),null);case 4:return Ce(),n===null&&Ap(s.stateNode.containerInfo),ht(s),null;case 10:return or(s.type),ht(s),null;case 19:if(ne(St),u=s.memoizedState,u===null)return ht(s),null;if(d=(s.flags&128)!==0,m=u.rendering,m===null)if(d)uu(u,!1);else{if(vt!==0||n!==null&&(n.flags&128)!==0)for(n=s.child;n!==null;){if(m=Ah(n),m!==null){for(s.flags|=128,uu(u,!1),n=m.updateQueue,s.updateQueue=n,Lh(s,n),s.subtreeFlags=0,n=a,a=s.child;a!==null;)k_(a,n),a=a.sibling;return ue(St,St.current&1|2),He&&sr(s,u.treeForkCount),s.child}n=n.sibling}u.tail!==null&&hn()>qh&&(s.flags|=128,d=!0,uu(u,!1),s.lanes=4194304)}else{if(!d)if(n=Ah(m),n!==null){if(s.flags|=128,d=!0,n=n.updateQueue,s.updateQueue=n,Lh(s,n),uu(u,!0),u.tail===null&&u.tailMode==="hidden"&&!m.alternate&&!He)return ht(s),null}else 2*hn()-u.renderingStartTime>qh&&a!==536870912&&(s.flags|=128,d=!0,uu(u,!1),s.lanes=4194304);u.isBackwards?(m.sibling=s.child,s.child=m):(n=u.last,n!==null?n.sibling=m:s.child=m,u.last=m)}return u.tail!==null?(n=u.tail,u.rendering=n,u.tail=n.sibling,u.renderingStartTime=hn(),n.sibling=null,a=St.current,ue(St,d?a&1|2:a&1),He&&sr(s,u.treeForkCount),n):(ht(s),null);case 22:case 23:return Dn(s),wm(),u=s.memoizedState!==null,n!==null?n.memoizedState!==null!==u&&(s.flags|=8192):u&&(s.flags|=8192),u?(a&536870912)!==0&&(s.flags&128)===0&&(ht(s),s.subtreeFlags&6&&(s.flags|=8192)):ht(s),a=s.updateQueue,a!==null&&Lh(s,a.retryQueue),a=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(a=n.memoizedState.cachePool.pool),u=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(u=s.memoizedState.cachePool.pool),u!==a&&(s.flags|=2048),n!==null&&ne(sa),null;case 24:return a=null,n!==null&&(a=n.memoizedState.cache),s.memoizedState.cache!==a&&(s.flags|=2048),or(Dt),ht(s),null;case 25:return null;case 30:return null}throw Error(i(156,s.tag))}function gI(n,s){switch(cm(s),s.tag){case 1:return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 3:return or(Dt),Ce(),n=s.flags,(n&65536)!==0&&(n&128)===0?(s.flags=n&-65537|128,s):null;case 26:case 27:case 5:return Zi(s),null;case 31:if(s.memoizedState!==null){if(Dn(s),s.alternate===null)throw Error(i(340));na()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 13:if(Dn(s),n=s.memoizedState,n!==null&&n.dehydrated!==null){if(s.alternate===null)throw Error(i(340));na()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 19:return ne(St),null;case 4:return Ce(),null;case 10:return or(s.type),null;case 22:case 23:return Dn(s),wm(),n!==null&&ne(sa),n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 24:return or(Dt),null;case 25:return null;default:return null}}function uE(n,s){switch(cm(s),s.tag){case 3:or(Dt),Ce();break;case 26:case 27:case 5:Zi(s);break;case 4:Ce();break;case 31:s.memoizedState!==null&&Dn(s);break;case 13:Dn(s);break;case 19:ne(St);break;case 10:or(s.type);break;case 22:case 23:Dn(s),wm(),n!==null&&ne(sa);break;case 24:or(Dt)}}function cu(n,s){try{var a=s.updateQueue,u=a!==null?a.lastEffect:null;if(u!==null){var d=u.next;a=d;do{if((a.tag&n)===n){u=void 0;var m=a.create,_=a.inst;u=m(),_.destroy=u}a=a.next}while(a!==d)}}catch(b){et(s,s.return,b)}}function Jr(n,s,a){try{var u=s.updateQueue,d=u!==null?u.lastEffect:null;if(d!==null){var m=d.next;u=m;do{if((u.tag&n)===n){var _=u.inst,b=_.destroy;if(b!==void 0){_.destroy=void 0,d=s;var N=a,G=b;try{G()}catch(J){et(d,N,J)}}}u=u.next}while(u!==m)}}catch(J){et(s,s.return,J)}}function cE(n){var s=n.updateQueue;if(s!==null){var a=n.stateNode;try{ev(s,a)}catch(u){et(n,n.return,u)}}}function hE(n,s,a){a.props=ca(n.type,n.memoizedProps),a.state=n.memoizedState;try{a.componentWillUnmount()}catch(u){et(n,s,u)}}function hu(n,s){try{var a=n.ref;if(a!==null){switch(n.tag){case 26:case 27:case 5:var u=n.stateNode;break;case 30:u=n.stateNode;break;default:u=n.stateNode}typeof a=="function"?n.refCleanup=a(u):a.current=u}}catch(d){et(n,s,d)}}function Bi(n,s){var a=n.ref,u=n.refCleanup;if(a!==null)if(typeof u=="function")try{u()}catch(d){et(n,s,d)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(d){et(n,s,d)}else a.current=null}function dE(n){var s=n.type,a=n.memoizedProps,u=n.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":a.autoFocus&&u.focus();break e;case"img":a.src?u.src=a.src:a.srcSet&&(u.srcset=a.srcSet)}}catch(d){et(n,n.return,d)}}function ip(n,s,a){try{var u=n.stateNode;UI(u,n.type,a,s),u[Kt]=s}catch(d){et(n,n.return,d)}}function fE(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&ss(n.type)||n.tag===4}function rp(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||fE(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&ss(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function sp(n,s,a){var u=n.tag;if(u===5||u===6)n=n.stateNode,s?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(n,s):(s=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,s.appendChild(n),a=a._reactRootContainer,a!=null||s.onclick!==null||(s.onclick=ai));else if(u!==4&&(u===27&&ss(n.type)&&(a=n.stateNode,s=null),n=n.child,n!==null))for(sp(n,s,a),n=n.sibling;n!==null;)sp(n,s,a),n=n.sibling}function Uh(n,s,a){var u=n.tag;if(u===5||u===6)n=n.stateNode,s?a.insertBefore(n,s):a.appendChild(n);else if(u!==4&&(u===27&&ss(n.type)&&(a=n.stateNode),n=n.child,n!==null))for(Uh(n,s,a),n=n.sibling;n!==null;)Uh(n,s,a),n=n.sibling}function mE(n){var s=n.stateNode,a=n.memoizedProps;try{for(var u=n.type,d=s.attributes;d.length;)s.removeAttributeNode(d[0]);nn(s,u,a),s[Rt]=n,s[Kt]=a}catch(m){et(n,n.return,m)}}var dr=!1,Ot=!1,ap=!1,pE=typeof WeakSet=="function"?WeakSet:Set,Yt=null;function yI(n,s){if(n=n.containerInfo,Rp=sd,n=R_(n),Zf(n)){if("selectionStart"in n)var a={start:n.selectionStart,end:n.selectionEnd};else e:{a=(a=n.ownerDocument)&&a.defaultView||window;var u=a.getSelection&&a.getSelection();if(u&&u.rangeCount!==0){a=u.anchorNode;var d=u.anchorOffset,m=u.focusNode;u=u.focusOffset;try{a.nodeType,m.nodeType}catch{a=null;break e}var _=0,b=-1,N=-1,G=0,J=0,ie=n,Q=null;t:for(;;){for(var W;ie!==a||d!==0&&ie.nodeType!==3||(b=_+d),ie!==m||u!==0&&ie.nodeType!==3||(N=_+u),ie.nodeType===3&&(_+=ie.nodeValue.length),(W=ie.firstChild)!==null;)Q=ie,ie=W;for(;;){if(ie===n)break t;if(Q===a&&++G===d&&(b=_),Q===m&&++J===u&&(N=_),(W=ie.nextSibling)!==null)break;ie=Q,Q=ie.parentNode}ie=W}a=b===-1||N===-1?null:{start:b,end:N}}else a=null}a=a||{start:0,end:0}}else a=null;for(Cp={focusedElem:n,selectionRange:a},sd=!1,Yt=s;Yt!==null;)if(s=Yt,n=s.child,(s.subtreeFlags&1028)!==0&&n!==null)n.return=s,Yt=n;else for(;Yt!==null;){switch(s=Yt,m=s.alternate,n=s.flags,s.tag){case 0:if((n&4)!==0&&(n=s.updateQueue,n=n!==null?n.events:null,n!==null))for(a=0;a<n.length;a++)d=n[a],d.ref.impl=d.nextImpl;break;case 11:case 15:break;case 1:if((n&1024)!==0&&m!==null){n=void 0,a=s,d=m.memoizedProps,m=m.memoizedState,u=a.stateNode;try{var ge=ca(a.type,d);n=u.getSnapshotBeforeUpdate(ge,m),u.__reactInternalSnapshotBeforeUpdate=n}catch(Se){et(a,a.return,Se)}}break;case 3:if((n&1024)!==0){if(n=s.stateNode.containerInfo,a=n.nodeType,a===9)Np(n);else if(a===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":Np(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(i(163))}if(n=s.sibling,n!==null){n.return=s.return,Yt=n;break}Yt=s.return}}function gE(n,s,a){var u=a.flags;switch(a.tag){case 0:case 11:case 15:mr(n,a),u&4&&cu(5,a);break;case 1:if(mr(n,a),u&4)if(n=a.stateNode,s===null)try{n.componentDidMount()}catch(_){et(a,a.return,_)}else{var d=ca(a.type,s.memoizedProps);s=s.memoizedState;try{n.componentDidUpdate(d,s,n.__reactInternalSnapshotBeforeUpdate)}catch(_){et(a,a.return,_)}}u&64&&cE(a),u&512&&hu(a,a.return);break;case 3:if(mr(n,a),u&64&&(n=a.updateQueue,n!==null)){if(s=null,a.child!==null)switch(a.child.tag){case 27:case 5:s=a.child.stateNode;break;case 1:s=a.child.stateNode}try{ev(n,s)}catch(_){et(a,a.return,_)}}break;case 27:s===null&&u&4&&mE(a);case 26:case 5:mr(n,a),s===null&&u&4&&dE(a),u&512&&hu(a,a.return);break;case 12:mr(n,a);break;case 31:mr(n,a),u&4&&vE(n,a);break;case 13:mr(n,a),u&4&&EE(n,a),u&64&&(n=a.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(a=II.bind(null,a),KI(n,a))));break;case 22:if(u=a.memoizedState!==null||dr,!u){s=s!==null&&s.memoizedState!==null||Ot,d=dr;var m=Ot;dr=u,(Ot=s)&&!m?pr(n,a,(a.subtreeFlags&8772)!==0):mr(n,a),dr=d,Ot=m}break;case 30:break;default:mr(n,a)}}function yE(n){var s=n.alternate;s!==null&&(n.alternate=null,yE(s)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(s=n.stateNode,s!==null&&Ha(s)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var ft=null,vn=!1;function fr(n,s,a){for(a=a.child;a!==null;)_E(n,s,a),a=a.sibling}function _E(n,s,a){if(Wt&&typeof Wt.onCommitFiberUnmount=="function")try{Wt.onCommitFiberUnmount(ni,a)}catch{}switch(a.tag){case 26:Ot||Bi(a,s),fr(n,s,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Ot||Bi(a,s);var u=ft,d=vn;ss(a.type)&&(ft=a.stateNode,vn=!1),fr(n,s,a),Eu(a.stateNode),ft=u,vn=d;break;case 5:Ot||Bi(a,s);case 6:if(u=ft,d=vn,ft=null,fr(n,s,a),ft=u,vn=d,ft!==null)if(vn)try{(ft.nodeType===9?ft.body:ft.nodeName==="HTML"?ft.ownerDocument.body:ft).removeChild(a.stateNode)}catch(m){et(a,s,m)}else try{ft.removeChild(a.stateNode)}catch(m){et(a,s,m)}break;case 18:ft!==null&&(vn?(n=ft,cT(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,a.stateNode),xo(n)):cT(ft,a.stateNode));break;case 4:u=ft,d=vn,ft=a.stateNode.containerInfo,vn=!0,fr(n,s,a),ft=u,vn=d;break;case 0:case 11:case 14:case 15:Jr(2,a,s),Ot||Jr(4,a,s),fr(n,s,a);break;case 1:Ot||(Bi(a,s),u=a.stateNode,typeof u.componentWillUnmount=="function"&&hE(a,s,u)),fr(n,s,a);break;case 21:fr(n,s,a);break;case 22:Ot=(u=Ot)||a.memoizedState!==null,fr(n,s,a),Ot=u;break;default:fr(n,s,a)}}function vE(n,s){if(s.memoizedState===null&&(n=s.alternate,n!==null&&(n=n.memoizedState,n!==null))){n=n.dehydrated;try{xo(n)}catch(a){et(s,s.return,a)}}}function EE(n,s){if(s.memoizedState===null&&(n=s.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{xo(n)}catch(a){et(s,s.return,a)}}function _I(n){switch(n.tag){case 31:case 13:case 19:var s=n.stateNode;return s===null&&(s=n.stateNode=new pE),s;case 22:return n=n.stateNode,s=n._retryCache,s===null&&(s=n._retryCache=new pE),s;default:throw Error(i(435,n.tag))}}function Bh(n,s){var a=_I(n);s.forEach(function(u){if(!a.has(u)){a.add(u);var d=RI.bind(null,n,u);u.then(d,d)}})}function En(n,s){var a=s.deletions;if(a!==null)for(var u=0;u<a.length;u++){var d=a[u],m=n,_=s,b=_;e:for(;b!==null;){switch(b.tag){case 27:if(ss(b.type)){ft=b.stateNode,vn=!1;break e}break;case 5:ft=b.stateNode,vn=!1;break e;case 3:case 4:ft=b.stateNode.containerInfo,vn=!0;break e}b=b.return}if(ft===null)throw Error(i(160));_E(m,_,d),ft=null,vn=!1,m=d.alternate,m!==null&&(m.return=null),d.return=null}if(s.subtreeFlags&13886)for(s=s.child;s!==null;)TE(s,n),s=s.sibling}var di=null;function TE(n,s){var a=n.alternate,u=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:En(s,n),Tn(n),u&4&&(Jr(3,n,n.return),cu(3,n),Jr(5,n,n.return));break;case 1:En(s,n),Tn(n),u&512&&(Ot||a===null||Bi(a,a.return)),u&64&&dr&&(n=n.updateQueue,n!==null&&(u=n.callbacks,u!==null&&(a=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=a===null?u:a.concat(u))));break;case 26:var d=di;if(En(s,n),Tn(n),u&512&&(Ot||a===null||Bi(a,a.return)),u&4){var m=a!==null?a.memoizedState:null;if(u=n.memoizedState,a===null)if(u===null)if(n.stateNode===null){e:{u=n.type,a=n.memoizedProps,d=d.ownerDocument||d;t:switch(u){case"title":m=d.getElementsByTagName("title")[0],(!m||m[wi]||m[Rt]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=d.createElement(u),d.head.insertBefore(m,d.querySelector("head > title"))),nn(m,u,a),m[Rt]=n,Ct(m),u=m;break e;case"link":var _=TT("link","href",d).get(u+(a.href||""));if(_){for(var b=0;b<_.length;b++)if(m=_[b],m.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&m.getAttribute("rel")===(a.rel==null?null:a.rel)&&m.getAttribute("title")===(a.title==null?null:a.title)&&m.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){_.splice(b,1);break t}}m=d.createElement(u),nn(m,u,a),d.head.appendChild(m);break;case"meta":if(_=TT("meta","content",d).get(u+(a.content||""))){for(b=0;b<_.length;b++)if(m=_[b],m.getAttribute("content")===(a.content==null?null:""+a.content)&&m.getAttribute("name")===(a.name==null?null:a.name)&&m.getAttribute("property")===(a.property==null?null:a.property)&&m.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&m.getAttribute("charset")===(a.charSet==null?null:a.charSet)){_.splice(b,1);break t}}m=d.createElement(u),nn(m,u,a),d.head.appendChild(m);break;default:throw Error(i(468,u))}m[Rt]=n,Ct(m),u=m}n.stateNode=u}else bT(d,n.type,n.stateNode);else n.stateNode=ET(d,u,n.memoizedProps);else m!==u?(m===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):m.count--,u===null?bT(d,n.type,n.stateNode):ET(d,u,n.memoizedProps)):u===null&&n.stateNode!==null&&ip(n,n.memoizedProps,a.memoizedProps)}break;case 27:En(s,n),Tn(n),u&512&&(Ot||a===null||Bi(a,a.return)),a!==null&&u&4&&ip(n,n.memoizedProps,a.memoizedProps);break;case 5:if(En(s,n),Tn(n),u&512&&(Ot||a===null||Bi(a,a.return)),n.flags&32){d=n.stateNode;try{_n(d,"")}catch(ge){et(n,n.return,ge)}}u&4&&n.stateNode!=null&&(d=n.memoizedProps,ip(n,d,a!==null?a.memoizedProps:d)),u&1024&&(ap=!0);break;case 6:if(En(s,n),Tn(n),u&4){if(n.stateNode===null)throw Error(i(162));u=n.memoizedProps,a=n.stateNode;try{a.nodeValue=u}catch(ge){et(n,n.return,ge)}}break;case 3:if(td=null,d=di,di=Zh(s.containerInfo),En(s,n),di=d,Tn(n),u&4&&a!==null&&a.memoizedState.isDehydrated)try{xo(s.containerInfo)}catch(ge){et(n,n.return,ge)}ap&&(ap=!1,bE(n));break;case 4:u=di,di=Zh(n.stateNode.containerInfo),En(s,n),Tn(n),di=u;break;case 12:En(s,n),Tn(n);break;case 31:En(s,n),Tn(n),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,Bh(n,u)));break;case 13:En(s,n),Tn(n),n.child.flags&8192&&n.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(jh=hn()),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,Bh(n,u)));break;case 22:d=n.memoizedState!==null;var N=a!==null&&a.memoizedState!==null,G=dr,J=Ot;if(dr=G||d,Ot=J||N,En(s,n),Ot=J,dr=G,Tn(n),u&8192)e:for(s=n.stateNode,s._visibility=d?s._visibility&-2:s._visibility|1,d&&(a===null||N||dr||Ot||ha(n)),a=null,s=n;;){if(s.tag===5||s.tag===26){if(a===null){N=a=s;try{if(m=N.stateNode,d)_=m.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none";else{b=N.stateNode;var ie=N.memoizedProps.style,Q=ie!=null&&ie.hasOwnProperty("display")?ie.display:null;b.style.display=Q==null||typeof Q=="boolean"?"":(""+Q).trim()}}catch(ge){et(N,N.return,ge)}}}else if(s.tag===6){if(a===null){N=s;try{N.stateNode.nodeValue=d?"":N.memoizedProps}catch(ge){et(N,N.return,ge)}}}else if(s.tag===18){if(a===null){N=s;try{var W=N.stateNode;d?hT(W,!0):hT(N.stateNode,!1)}catch(ge){et(N,N.return,ge)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===n)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break e;for(;s.sibling===null;){if(s.return===null||s.return===n)break e;a===s&&(a=null),s=s.return}a===s&&(a=null),s.sibling.return=s.return,s=s.sibling}u&4&&(u=n.updateQueue,u!==null&&(a=u.retryQueue,a!==null&&(u.retryQueue=null,Bh(n,a))));break;case 19:En(s,n),Tn(n),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,Bh(n,u)));break;case 30:break;case 21:break;default:En(s,n),Tn(n)}}function Tn(n){var s=n.flags;if(s&2){try{for(var a,u=n.return;u!==null;){if(fE(u)){a=u;break}u=u.return}if(a==null)throw Error(i(160));switch(a.tag){case 27:var d=a.stateNode,m=rp(n);Uh(n,m,d);break;case 5:var _=a.stateNode;a.flags&32&&(_n(_,""),a.flags&=-33);var b=rp(n);Uh(n,b,_);break;case 3:case 4:var N=a.stateNode.containerInfo,G=rp(n);sp(n,G,N);break;default:throw Error(i(161))}}catch(J){et(n,n.return,J)}n.flags&=-3}s&4096&&(n.flags&=-4097)}function bE(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var s=n;bE(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),n=n.sibling}}function mr(n,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)gE(n,s.alternate,s),s=s.sibling}function ha(n){for(n=n.child;n!==null;){var s=n;switch(s.tag){case 0:case 11:case 14:case 15:Jr(4,s,s.return),ha(s);break;case 1:Bi(s,s.return);var a=s.stateNode;typeof a.componentWillUnmount=="function"&&hE(s,s.return,a),ha(s);break;case 27:Eu(s.stateNode);case 26:case 5:Bi(s,s.return),ha(s);break;case 22:s.memoizedState===null&&ha(s);break;case 30:ha(s);break;default:ha(s)}n=n.sibling}}function pr(n,s,a){for(a=a&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var u=s.alternate,d=n,m=s,_=m.flags;switch(m.tag){case 0:case 11:case 15:pr(d,m,a),cu(4,m);break;case 1:if(pr(d,m,a),u=m,d=u.stateNode,typeof d.componentDidMount=="function")try{d.componentDidMount()}catch(G){et(u,u.return,G)}if(u=m,d=u.updateQueue,d!==null){var b=u.stateNode;try{var N=d.shared.hiddenCallbacks;if(N!==null)for(d.shared.hiddenCallbacks=null,d=0;d<N.length;d++)Z_(N[d],b)}catch(G){et(u,u.return,G)}}a&&_&64&&cE(m),hu(m,m.return);break;case 27:mE(m);case 26:case 5:pr(d,m,a),a&&u===null&&_&4&&dE(m),hu(m,m.return);break;case 12:pr(d,m,a);break;case 31:pr(d,m,a),a&&_&4&&vE(d,m);break;case 13:pr(d,m,a),a&&_&4&&EE(d,m);break;case 22:m.memoizedState===null&&pr(d,m,a),hu(m,m.return);break;case 30:break;default:pr(d,m,a)}s=s.sibling}}function op(n,s){var a=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(a=n.memoizedState.cachePool.pool),n=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(n=s.memoizedState.cachePool.pool),n!==a&&(n!=null&&n.refCount++,a!=null&&Wl(a))}function lp(n,s){n=null,s.alternate!==null&&(n=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==n&&(s.refCount++,n!=null&&Wl(n))}function fi(n,s,a,u){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)SE(n,s,a,u),s=s.sibling}function SE(n,s,a,u){var d=s.flags;switch(s.tag){case 0:case 11:case 15:fi(n,s,a,u),d&2048&&cu(9,s);break;case 1:fi(n,s,a,u);break;case 3:fi(n,s,a,u),d&2048&&(n=null,s.alternate!==null&&(n=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==n&&(s.refCount++,n!=null&&Wl(n)));break;case 12:if(d&2048){fi(n,s,a,u),n=s.stateNode;try{var m=s.memoizedProps,_=m.id,b=m.onPostCommit;typeof b=="function"&&b(_,s.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(N){et(s,s.return,N)}}else fi(n,s,a,u);break;case 31:fi(n,s,a,u);break;case 13:fi(n,s,a,u);break;case 23:break;case 22:m=s.stateNode,_=s.alternate,s.memoizedState!==null?m._visibility&2?fi(n,s,a,u):du(n,s):m._visibility&2?fi(n,s,a,u):(m._visibility|=2,_o(n,s,a,u,(s.subtreeFlags&10256)!==0||!1)),d&2048&&op(_,s);break;case 24:fi(n,s,a,u),d&2048&&lp(s.alternate,s);break;default:fi(n,s,a,u)}}function _o(n,s,a,u,d){for(d=d&&((s.subtreeFlags&10256)!==0||!1),s=s.child;s!==null;){var m=n,_=s,b=a,N=u,G=_.flags;switch(_.tag){case 0:case 11:case 15:_o(m,_,b,N,d),cu(8,_);break;case 23:break;case 22:var J=_.stateNode;_.memoizedState!==null?J._visibility&2?_o(m,_,b,N,d):du(m,_):(J._visibility|=2,_o(m,_,b,N,d)),d&&G&2048&&op(_.alternate,_);break;case 24:_o(m,_,b,N,d),d&&G&2048&&lp(_.alternate,_);break;default:_o(m,_,b,N,d)}s=s.sibling}}function du(n,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var a=n,u=s,d=u.flags;switch(u.tag){case 22:du(a,u),d&2048&&op(u.alternate,u);break;case 24:du(a,u),d&2048&&lp(u.alternate,u);break;default:du(a,u)}s=s.sibling}}var fu=8192;function vo(n,s,a){if(n.subtreeFlags&fu)for(n=n.child;n!==null;)AE(n,s,a),n=n.sibling}function AE(n,s,a){switch(n.tag){case 26:vo(n,s,a),n.flags&fu&&n.memoizedState!==null&&rR(a,di,n.memoizedState,n.memoizedProps);break;case 5:vo(n,s,a);break;case 3:case 4:var u=di;di=Zh(n.stateNode.containerInfo),vo(n,s,a),di=u;break;case 22:n.memoizedState===null&&(u=n.alternate,u!==null&&u.memoizedState!==null?(u=fu,fu=16777216,vo(n,s,a),fu=u):vo(n,s,a));break;default:vo(n,s,a)}}function wE(n){var s=n.alternate;if(s!==null&&(n=s.child,n!==null)){s.child=null;do s=n.sibling,n.sibling=null,n=s;while(n!==null)}}function mu(n){var s=n.deletions;if((n.flags&16)!==0){if(s!==null)for(var a=0;a<s.length;a++){var u=s[a];Yt=u,RE(u,n)}wE(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)IE(n),n=n.sibling}function IE(n){switch(n.tag){case 0:case 11:case 15:mu(n),n.flags&2048&&Jr(9,n,n.return);break;case 3:mu(n);break;case 12:mu(n);break;case 22:var s=n.stateNode;n.memoizedState!==null&&s._visibility&2&&(n.return===null||n.return.tag!==13)?(s._visibility&=-3,zh(n)):mu(n);break;default:mu(n)}}function zh(n){var s=n.deletions;if((n.flags&16)!==0){if(s!==null)for(var a=0;a<s.length;a++){var u=s[a];Yt=u,RE(u,n)}wE(n)}for(n=n.child;n!==null;){switch(s=n,s.tag){case 0:case 11:case 15:Jr(8,s,s.return),zh(s);break;case 22:a=s.stateNode,a._visibility&2&&(a._visibility&=-3,zh(s));break;default:zh(s)}n=n.sibling}}function RE(n,s){for(;Yt!==null;){var a=Yt;switch(a.tag){case 0:case 11:case 15:Jr(8,a,s);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var u=a.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:Wl(a.memoizedState.cache)}if(u=a.child,u!==null)u.return=a,Yt=u;else e:for(a=n;Yt!==null;){u=Yt;var d=u.sibling,m=u.return;if(yE(u),u===a){Yt=null;break e}if(d!==null){d.return=m,Yt=d;break e}Yt=m}}}var vI={getCacheForType:function(n){var s=en(Dt),a=s.data.get(n);return a===void 0&&(a=n(),s.data.set(n,a)),a},cacheSignal:function(){return en(Dt).controller.signal}},EI=typeof WeakMap=="function"?WeakMap:Map,Xe=0,lt=null,Ue=null,ze=0,Ze=0,Nn=null,Zr=!1,Eo=!1,up=!1,gr=0,vt=0,es=0,da=0,cp=0,Vn=0,To=0,pu=null,bn=null,hp=!1,jh=0,CE=0,qh=1/0,Fh=null,ts=null,qt=0,ns=null,bo=null,yr=0,dp=0,fp=null,xE=null,gu=0,mp=null;function On(){return(Xe&2)!==0&&ze!==0?ze&-ze:$.T!==null?Ep():Hc()}function DE(){if(Vn===0)if((ze&536870912)===0||He){var n=Bs;Bs<<=1,(Bs&3932160)===0&&(Bs=262144),Vn=n}else Vn=536870912;return n=xn.current,n!==null&&(n.flags|=32),Vn}function Sn(n,s,a){(n===lt&&(Ze===2||Ze===9)||n.cancelPendingCommit!==null)&&(So(n,0),is(n,ze,Vn,!1)),zs(n,a),((Xe&2)===0||n!==lt)&&(n===lt&&((Xe&2)===0&&(da|=a),vt===4&&is(n,ze,Vn,!1)),zi(n))}function NE(n,s,a){if((Xe&6)!==0)throw Error(i(327));var u=!a&&(s&127)===0&&(s&n.expiredLanes)===0||ii(n,s),d=u?SI(n,s):gp(n,s,!0),m=u;do{if(d===0){Eo&&!u&&is(n,s,0,!1);break}else{if(a=n.current.alternate,m&&!TI(a)){d=gp(n,s,!1),m=!1;continue}if(d===2){if(m=s,n.errorRecoveryDisabledLanes&m)var _=0;else _=n.pendingLanes&-536870913,_=_!==0?_:_&536870912?536870912:0;if(_!==0){s=_;e:{var b=n;d=pu;var N=b.current.memoizedState.isDehydrated;if(N&&(So(b,_).flags|=256),_=gp(b,_,!1),_!==2){if(up&&!N){b.errorRecoveryDisabledLanes|=m,da|=m,d=4;break e}m=bn,bn=d,m!==null&&(bn===null?bn=m:bn.push.apply(bn,m))}d=_}if(m=!1,d!==2)continue}}if(d===1){So(n,0),is(n,s,0,!0);break}e:{switch(u=n,m=d,m){case 0:case 1:throw Error(i(345));case 4:if((s&4194048)!==s)break;case 6:is(u,s,Vn,!Zr);break e;case 2:bn=null;break;case 3:case 5:break;default:throw Error(i(329))}if((s&62914560)===s&&(d=jh+300-hn(),10<d)){if(is(u,s,Vn,!Zr),bi(u,0,!0)!==0)break e;yr=s,u.timeoutHandle=lT(VE.bind(null,u,a,bn,Fh,hp,s,Vn,da,To,Zr,m,"Throttled",-0,0),d);break e}VE(u,a,bn,Fh,hp,s,Vn,da,To,Zr,m,null,-0,0)}}break}while(!0);zi(n)}function VE(n,s,a,u,d,m,_,b,N,G,J,ie,Q,W){if(n.timeoutHandle=-1,ie=s.subtreeFlags,ie&8192||(ie&16785408)===16785408){ie={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ai},AE(s,m,ie);var ge=(m&62914560)===m?jh-hn():(m&4194048)===m?CE-hn():0;if(ge=sR(ie,ge),ge!==null){yr=m,n.cancelPendingCommit=ge(zE.bind(null,n,s,m,a,u,d,_,b,N,J,ie,null,Q,W)),is(n,m,_,!G);return}}zE(n,s,m,a,u,d,_,b,N)}function TI(n){for(var s=n;;){var a=s.tag;if((a===0||a===11||a===15)&&s.flags&16384&&(a=s.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var u=0;u<a.length;u++){var d=a[u],m=d.getSnapshot;d=d.value;try{if(!Rn(m(),d))return!1}catch{return!1}}if(a=s.child,s.subtreeFlags&16384&&a!==null)a.return=s,s=a;else{if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function is(n,s,a,u){s&=~cp,s&=~da,n.suspendedLanes|=s,n.pingedLanes&=~s,u&&(n.warmLanes|=s),u=n.expirationTimes;for(var d=s;0<d;){var m=31-Tt(d),_=1<<m;u[m]=-1,d&=~_}a!==0&&js(n,a,s)}function Hh(){return(Xe&6)===0?(yu(0),!1):!0}function pp(){if(Ue!==null){if(Ze===0)var n=Ue.return;else n=Ue,ar=ia=null,Nm(n),fo=null,Zl=0,n=Ue;for(;n!==null;)uE(n.alternate,n),n=n.return;Ue=null}}function So(n,s){var a=n.timeoutHandle;a!==-1&&(n.timeoutHandle=-1,jI(a)),a=n.cancelPendingCommit,a!==null&&(n.cancelPendingCommit=null,a()),yr=0,pp(),lt=n,Ue=a=rr(n.current,null),ze=s,Ze=0,Nn=null,Zr=!1,Eo=ii(n,s),up=!1,To=Vn=cp=da=es=vt=0,bn=pu=null,hp=!1,(s&8)!==0&&(s|=s&32);var u=n.entangledLanes;if(u!==0)for(n=n.entanglements,u&=s;0<u;){var d=31-Tt(u),m=1<<d;s|=n[d],u&=~m}return gr=s,hh(),a}function OE(n,s){Me=null,$.H=ou,s===ho||s===vh?(s=$_(),Ze=3):s===vm?(s=$_(),Ze=4):Ze=s===Qm?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,Nn=s,Ue===null&&(vt=1,Oh(n,Hn(s,n.current)))}function ME(){var n=xn.current;return n===null?!0:(ze&4194048)===ze?Yn===null:(ze&62914560)===ze||(ze&536870912)!==0?n===Yn:!1}function PE(){var n=$.H;return $.H=ou,n===null?ou:n}function kE(){var n=$.A;return $.A=vI,n}function Gh(){vt=4,Zr||(ze&4194048)!==ze&&xn.current!==null||(Eo=!0),(es&134217727)===0&&(da&134217727)===0||lt===null||is(lt,ze,Vn,!1)}function gp(n,s,a){var u=Xe;Xe|=2;var d=PE(),m=kE();(lt!==n||ze!==s)&&(Fh=null,So(n,s)),s=!1;var _=vt;e:do try{if(Ze!==0&&Ue!==null){var b=Ue,N=Nn;switch(Ze){case 8:pp(),_=6;break e;case 3:case 2:case 9:case 6:xn.current===null&&(s=!0);var G=Ze;if(Ze=0,Nn=null,Ao(n,b,N,G),a&&Eo){_=0;break e}break;default:G=Ze,Ze=0,Nn=null,Ao(n,b,N,G)}}bI(),_=vt;break}catch(J){OE(n,J)}while(!0);return s&&n.shellSuspendCounter++,ar=ia=null,Xe=u,$.H=d,$.A=m,Ue===null&&(lt=null,ze=0,hh()),_}function bI(){for(;Ue!==null;)LE(Ue)}function SI(n,s){var a=Xe;Xe|=2;var u=PE(),d=kE();lt!==n||ze!==s?(Fh=null,qh=hn()+500,So(n,s)):Eo=ii(n,s);e:do try{if(Ze!==0&&Ue!==null){s=Ue;var m=Nn;t:switch(Ze){case 1:Ze=0,Nn=null,Ao(n,s,m,1);break;case 2:case 9:if(Q_(m)){Ze=0,Nn=null,UE(s);break}s=function(){Ze!==2&&Ze!==9||lt!==n||(Ze=7),zi(n)},m.then(s,s);break e;case 3:Ze=7;break e;case 4:Ze=5;break e;case 7:Q_(m)?(Ze=0,Nn=null,UE(s)):(Ze=0,Nn=null,Ao(n,s,m,7));break;case 5:var _=null;switch(Ue.tag){case 26:_=Ue.memoizedState;case 5:case 27:var b=Ue;if(_?ST(_):b.stateNode.complete){Ze=0,Nn=null;var N=b.sibling;if(N!==null)Ue=N;else{var G=b.return;G!==null?(Ue=G,Kh(G)):Ue=null}break t}}Ze=0,Nn=null,Ao(n,s,m,5);break;case 6:Ze=0,Nn=null,Ao(n,s,m,6);break;case 8:pp(),vt=6;break e;default:throw Error(i(462))}}AI();break}catch(J){OE(n,J)}while(!0);return ar=ia=null,$.H=u,$.A=d,Xe=a,Ue!==null?0:(lt=null,ze=0,hh(),vt)}function AI(){for(;Ue!==null&&!Kf();)LE(Ue)}function LE(n){var s=oE(n.alternate,n,gr);n.memoizedProps=n.pendingProps,s===null?Kh(n):Ue=s}function UE(n){var s=n,a=s.alternate;switch(s.tag){case 15:case 0:s=tE(a,s,s.pendingProps,s.type,void 0,ze);break;case 11:s=tE(a,s,s.pendingProps,s.type.render,s.ref,ze);break;case 5:Nm(s);default:uE(a,s),s=Ue=k_(s,gr),s=oE(a,s,gr)}n.memoizedProps=n.pendingProps,s===null?Kh(n):Ue=s}function Ao(n,s,a,u){ar=ia=null,Nm(s),fo=null,Zl=0;var d=s.return;try{if(dI(n,d,s,a,ze)){vt=1,Oh(n,Hn(a,n.current)),Ue=null;return}}catch(m){if(d!==null)throw Ue=d,m;vt=1,Oh(n,Hn(a,n.current)),Ue=null;return}s.flags&32768?(He||u===1?n=!0:Eo||(ze&536870912)!==0?n=!1:(Zr=n=!0,(u===2||u===9||u===3||u===6)&&(u=xn.current,u!==null&&u.tag===13&&(u.flags|=16384))),BE(s,n)):Kh(s)}function Kh(n){var s=n;do{if((s.flags&32768)!==0){BE(s,Zr);return}n=s.return;var a=pI(s.alternate,s,gr);if(a!==null){Ue=a;return}if(s=s.sibling,s!==null){Ue=s;return}Ue=s=n}while(s!==null);vt===0&&(vt=5)}function BE(n,s){do{var a=gI(n.alternate,n);if(a!==null){a.flags&=32767,Ue=a;return}if(a=n.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!s&&(n=n.sibling,n!==null)){Ue=n;return}Ue=n=a}while(n!==null);vt=6,Ue=null}function zE(n,s,a,u,d,m,_,b,N){n.cancelPendingCommit=null;do Qh();while(qt!==0);if((Xe&6)!==0)throw Error(i(327));if(s!==null){if(s===n.current)throw Error(i(177));if(m=s.lanes|s.childLanes,m|=rm,$f(n,a,m,_,b,N),n===lt&&(Ue=lt=null,ze=0),bo=s,ns=n,yr=a,dp=m,fp=d,xE=u,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,CI(Or,function(){return GE(),null})):(n.callbackNode=null,n.callbackPriority=0),u=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||u){u=$.T,$.T=null,d=ae.p,ae.p=2,_=Xe,Xe|=4;try{yI(n,s,a)}finally{Xe=_,ae.p=d,$.T=u}}qt=1,jE(),qE(),FE()}}function jE(){if(qt===1){qt=0;var n=ns,s=bo,a=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||a){a=$.T,$.T=null;var u=ae.p;ae.p=2;var d=Xe;Xe|=4;try{TE(s,n);var m=Cp,_=R_(n.containerInfo),b=m.focusedElem,N=m.selectionRange;if(_!==b&&b&&b.ownerDocument&&I_(b.ownerDocument.documentElement,b)){if(N!==null&&Zf(b)){var G=N.start,J=N.end;if(J===void 0&&(J=G),"selectionStart"in b)b.selectionStart=G,b.selectionEnd=Math.min(J,b.value.length);else{var ie=b.ownerDocument||document,Q=ie&&ie.defaultView||window;if(Q.getSelection){var W=Q.getSelection(),ge=b.textContent.length,Se=Math.min(N.start,ge),ot=N.end===void 0?Se:Math.min(N.end,ge);!W.extend&&Se>ot&&(_=ot,ot=Se,Se=_);var B=w_(b,Se),M=w_(b,ot);if(B&&M&&(W.rangeCount!==1||W.anchorNode!==B.node||W.anchorOffset!==B.offset||W.focusNode!==M.node||W.focusOffset!==M.offset)){var H=ie.createRange();H.setStart(B.node,B.offset),W.removeAllRanges(),Se>ot?(W.addRange(H),W.extend(M.node,M.offset)):(H.setEnd(M.node,M.offset),W.addRange(H))}}}}for(ie=[],W=b;W=W.parentNode;)W.nodeType===1&&ie.push({element:W,left:W.scrollLeft,top:W.scrollTop});for(typeof b.focus=="function"&&b.focus(),b=0;b<ie.length;b++){var te=ie[b];te.element.scrollLeft=te.left,te.element.scrollTop=te.top}}sd=!!Rp,Cp=Rp=null}finally{Xe=d,ae.p=u,$.T=a}}n.current=s,qt=2}}function qE(){if(qt===2){qt=0;var n=ns,s=bo,a=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||a){a=$.T,$.T=null;var u=ae.p;ae.p=2;var d=Xe;Xe|=4;try{gE(n,s.alternate,s)}finally{Xe=d,ae.p=u,$.T=a}}qt=3}}function FE(){if(qt===4||qt===3){qt=0,Lc();var n=ns,s=bo,a=yr,u=xE;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?qt=5:(qt=0,bo=ns=null,HE(n,n.pendingLanes));var d=n.pendingLanes;if(d===0&&(ts=null),er(a),s=s.stateNode,Wt&&typeof Wt.onCommitFiberRoot=="function")try{Wt.onCommitFiberRoot(ni,s,void 0,(s.current.flags&128)===128)}catch{}if(u!==null){s=$.T,d=ae.p,ae.p=2,$.T=null;try{for(var m=n.onRecoverableError,_=0;_<u.length;_++){var b=u[_];m(b.value,{componentStack:b.stack})}}finally{$.T=s,ae.p=d}}(yr&3)!==0&&Qh(),zi(n),d=n.pendingLanes,(a&261930)!==0&&(d&42)!==0?n===mp?gu++:(gu=0,mp=n):gu=0,yu(0)}}function HE(n,s){(n.pooledCacheLanes&=s)===0&&(s=n.pooledCache,s!=null&&(n.pooledCache=null,Wl(s)))}function Qh(){return jE(),qE(),FE(),GE()}function GE(){if(qt!==5)return!1;var n=ns,s=dp;dp=0;var a=er(yr),u=$.T,d=ae.p;try{ae.p=32>a?32:a,$.T=null,a=fp,fp=null;var m=ns,_=yr;if(qt=0,bo=ns=null,yr=0,(Xe&6)!==0)throw Error(i(331));var b=Xe;if(Xe|=4,IE(m.current),SE(m,m.current,_,a),Xe=b,yu(0,!1),Wt&&typeof Wt.onPostCommitFiberRoot=="function")try{Wt.onPostCommitFiberRoot(ni,m)}catch{}return!0}finally{ae.p=d,$.T=u,HE(n,s)}}function KE(n,s,a){s=Hn(a,s),s=Km(n.stateNode,s,2),n=$r(n,s,2),n!==null&&(zs(n,2),zi(n))}function et(n,s,a){if(n.tag===3)KE(n,n,a);else for(;s!==null;){if(s.tag===3){KE(s,n,a);break}else if(s.tag===1){var u=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(ts===null||!ts.has(u))){n=Hn(a,n),a=Qv(2),u=$r(s,a,2),u!==null&&(Yv(a,u,s,n),zs(u,2),zi(u));break}}s=s.return}}function yp(n,s,a){var u=n.pingCache;if(u===null){u=n.pingCache=new EI;var d=new Set;u.set(s,d)}else d=u.get(s),d===void 0&&(d=new Set,u.set(s,d));d.has(a)||(up=!0,d.add(a),n=wI.bind(null,n,s,a),s.then(n,n))}function wI(n,s,a){var u=n.pingCache;u!==null&&u.delete(s),n.pingedLanes|=n.suspendedLanes&a,n.warmLanes&=~a,lt===n&&(ze&a)===a&&(vt===4||vt===3&&(ze&62914560)===ze&&300>hn()-jh?(Xe&2)===0&&So(n,0):cp|=a,To===ze&&(To=0)),zi(n)}function QE(n,s){s===0&&(s=Fc()),n=ea(n,s),n!==null&&(zs(n,s),zi(n))}function II(n){var s=n.memoizedState,a=0;s!==null&&(a=s.retryLane),QE(n,a)}function RI(n,s){var a=0;switch(n.tag){case 31:case 13:var u=n.stateNode,d=n.memoizedState;d!==null&&(a=d.retryLane);break;case 19:u=n.stateNode;break;case 22:u=n.stateNode._retryCache;break;default:throw Error(i(314))}u!==null&&u.delete(s),QE(n,a)}function CI(n,s){return jt(n,s)}var Yh=null,wo=null,_p=!1,$h=!1,vp=!1,rs=0;function zi(n){n!==wo&&n.next===null&&(wo===null?Yh=wo=n:wo=wo.next=n),$h=!0,_p||(_p=!0,DI())}function yu(n,s){if(!vp&&$h){vp=!0;do for(var a=!1,u=Yh;u!==null;){if(n!==0){var d=u.pendingLanes;if(d===0)var m=0;else{var _=u.suspendedLanes,b=u.pingedLanes;m=(1<<31-Tt(42|n)+1)-1,m&=d&~(_&~b),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(a=!0,WE(u,m))}else m=ze,m=bi(u,u===lt?m:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(m&3)===0||ii(u,m)||(a=!0,WE(u,m));u=u.next}while(a);vp=!1}}function xI(){YE()}function YE(){$h=_p=!1;var n=0;rs!==0&&zI()&&(n=rs);for(var s=hn(),a=null,u=Yh;u!==null;){var d=u.next,m=$E(u,s);m===0?(u.next=null,a===null?Yh=d:a.next=d,d===null&&(wo=a)):(a=u,(n!==0||(m&3)!==0)&&($h=!0)),u=d}qt!==0&&qt!==5||yu(n),rs!==0&&(rs=0)}function $E(n,s){for(var a=n.suspendedLanes,u=n.pingedLanes,d=n.expirationTimes,m=n.pendingLanes&-62914561;0<m;){var _=31-Tt(m),b=1<<_,N=d[_];N===-1?((b&a)===0||(b&u)!==0)&&(d[_]=Yf(b,s)):N<=s&&(n.expiredLanes|=b),m&=~b}if(s=lt,a=ze,a=bi(n,n===s?a:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),u=n.callbackNode,a===0||n===s&&(Ze===2||Ze===9)||n.cancelPendingCommit!==null)return u!==null&&u!==null&&Vr(u),n.callbackNode=null,n.callbackPriority=0;if((a&3)===0||ii(n,a)){if(s=a&-a,s===n.callbackPriority)return s;switch(u!==null&&Vr(u),er(a)){case 2:case 8:a=Rl;break;case 32:a=Or;break;case 268435456:a=Uc;break;default:a=Or}return u=XE.bind(null,n),a=jt(a,u),n.callbackPriority=s,n.callbackNode=a,s}return u!==null&&u!==null&&Vr(u),n.callbackPriority=2,n.callbackNode=null,2}function XE(n,s){if(qt!==0&&qt!==5)return n.callbackNode=null,n.callbackPriority=0,null;var a=n.callbackNode;if(Qh()&&n.callbackNode!==a)return null;var u=ze;return u=bi(n,n===lt?u:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),u===0?null:(NE(n,u,s),$E(n,hn()),n.callbackNode!=null&&n.callbackNode===a?XE.bind(null,n):null)}function WE(n,s){if(Qh())return null;NE(n,s,!0)}function DI(){qI(function(){(Xe&6)!==0?jt(Il,xI):YE()})}function Ep(){if(rs===0){var n=uo;n===0&&(n=Ei,Ei<<=1,(Ei&261888)===0&&(Ei=256)),rs=n}return rs}function JE(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:Ya(""+n)}function ZE(n,s){var a=s.ownerDocument.createElement("input");return a.name=s.name,a.value=s.value,n.id&&a.setAttribute("form",n.id),s.parentNode.insertBefore(a,s),n=new FormData(n),a.parentNode.removeChild(a),n}function NI(n,s,a,u,d){if(s==="submit"&&a&&a.stateNode===d){var m=JE((d[Kt]||null).action),_=u.submitter;_&&(s=(s=_[Kt]||null)?JE(s.formAction):_.getAttribute("formAction"),s!==null&&(m=s,_=null));var b=new Oi("action","action",null,u,d);n.push({event:b,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(rs!==0){var N=_?ZE(d,_):new FormData(d);zm(a,{pending:!0,data:N,method:d.method,action:m},null,N)}}else typeof m=="function"&&(b.preventDefault(),N=_?ZE(d,_):new FormData(d),zm(a,{pending:!0,data:N,method:d.method,action:m},m,N))},currentTarget:d}]})}}for(var Tp=0;Tp<im.length;Tp++){var bp=im[Tp],VI=bp.toLowerCase(),OI=bp[0].toUpperCase()+bp.slice(1);hi(VI,"on"+OI)}hi(D_,"onAnimationEnd"),hi(N_,"onAnimationIteration"),hi(V_,"onAnimationStart"),hi("dblclick","onDoubleClick"),hi("focusin","onFocus"),hi("focusout","onBlur"),hi($w,"onTransitionRun"),hi(Xw,"onTransitionStart"),hi(Ww,"onTransitionCancel"),hi(O_,"onTransitionEnd"),xi("onMouseEnter",["mouseout","mouseover"]),xi("onMouseLeave",["mouseout","mouseover"]),xi("onPointerEnter",["pointerout","pointerover"]),xi("onPointerLeave",["pointerout","pointerover"]),Ci("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ci("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ci("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ci("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ci("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ci("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var _u="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),MI=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(_u));function eT(n,s){s=(s&4)!==0;for(var a=0;a<n.length;a++){var u=n[a],d=u.event;u=u.listeners;e:{var m=void 0;if(s)for(var _=u.length-1;0<=_;_--){var b=u[_],N=b.instance,G=b.currentTarget;if(b=b.listener,N!==m&&d.isPropagationStopped())break e;m=b,d.currentTarget=G;try{m(d)}catch(J){ch(J)}d.currentTarget=null,m=N}else for(_=0;_<u.length;_++){if(b=u[_],N=b.instance,G=b.currentTarget,b=b.listener,N!==m&&d.isPropagationStopped())break e;m=b,d.currentTarget=G;try{m(d)}catch(J){ch(J)}d.currentTarget=null,m=N}}}}function Be(n,s){var a=s[Fa];a===void 0&&(a=s[Fa]=new Set);var u=n+"__bubble";a.has(u)||(tT(s,n,2,!1),a.add(u))}function Sp(n,s,a){var u=0;s&&(u|=4),tT(a,n,u,s)}var Xh="_reactListening"+Math.random().toString(36).slice(2);function Ap(n){if(!n[Xh]){n[Xh]=!0,Dl.forEach(function(a){a!=="selectionchange"&&(MI.has(a)||Sp(a,!1,n),Sp(a,!0,n))});var s=n.nodeType===9?n:n.ownerDocument;s===null||s[Xh]||(s[Xh]=!0,Sp("selectionchange",!1,s))}}function tT(n,s,a,u){switch(DT(s)){case 2:var d=lR;break;case 8:d=uR;break;default:d=Bp}a=d.bind(null,s,a,n),d=void 0,!Ks||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(d=!0),u?d!==void 0?n.addEventListener(s,a,{capture:!0,passive:d}):n.addEventListener(s,a,!0):d!==void 0?n.addEventListener(s,a,{passive:d}):n.addEventListener(s,a,!1)}function wp(n,s,a,u,d){var m=u;if((s&1)===0&&(s&2)===0&&u!==null)e:for(;;){if(u===null)return;var _=u.tag;if(_===3||_===4){var b=u.stateNode.containerInfo;if(b===d)break;if(_===4)for(_=u.return;_!==null;){var N=_.tag;if((N===3||N===4)&&_.stateNode.containerInfo===d)return;_=_.return}for(;b!==null;){if(_=Ii(b),_===null)return;if(N=_.tag,N===5||N===6||N===26||N===27){u=m=_;continue e}b=b.parentNode}}u=u.return}Br(function(){var G=m,J=zn(a),ie=[];e:{var Q=M_.get(n);if(Q!==void 0){var W=Oi,ge=n;switch(n){case"keypress":if(Ys(a)===0)break e;case"keydown":case"keyup":W=oh;break;case"focusin":ge="focus",W=Xs;break;case"focusout":ge="blur",W=Xs;break;case"beforeblur":case"afterblur":W=Xs;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":W=Fl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":W=Jc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":W=y;break;case D_:case N_:case V_:W=eh;break;case O_:W=w;break;case"scroll":case"scrollend":W=ql;break;case"wheel":W=X;break;case"copy":case"cut":case"paste":W=th;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":W=ir;break;case"toggle":case"beforetoggle":W=Oe}var Se=(s&4)!==0,ot=!Se&&(n==="scroll"||n==="scrollend"),B=Se?Q!==null?Q+"Capture":null:Q;Se=[];for(var M=G,H;M!==null;){var te=M;if(H=te.stateNode,te=te.tag,te!==5&&te!==26&&te!==27||H===null||B===null||(te=oi(M,B),te!=null&&Se.push(vu(M,te,H))),ot)break;M=M.return}0<Se.length&&(Q=new W(Q,ge,null,a,J),ie.push({event:Q,listeners:Se}))}}if((s&7)===0){e:{if(Q=n==="mouseover"||n==="pointerover",W=n==="mouseout"||n==="pointerout",Q&&a!==Bl&&(ge=a.relatedTarget||a.fromElement)&&(Ii(ge)||ge[Ai]))break e;if((W||Q)&&(Q=J.window===J?J:(Q=J.ownerDocument)?Q.defaultView||Q.parentWindow:window,W?(ge=a.relatedTarget||a.toElement,W=G,ge=ge?Ii(ge):null,ge!==null&&(ot=l(ge),Se=ge.tag,ge!==ot||Se!==5&&Se!==27&&Se!==6)&&(ge=null)):(W=null,ge=G),W!==ge)){if(Se=Fl,te="onMouseLeave",B="onMouseEnter",M="mouse",(n==="pointerout"||n==="pointerover")&&(Se=ir,te="onPointerLeave",B="onPointerEnter",M="pointer"),ot=W==null?Q:wn(W),H=ge==null?Q:wn(ge),Q=new Se(te,M+"leave",W,a,J),Q.target=ot,Q.relatedTarget=H,te=null,Ii(J)===G&&(Se=new Se(B,M+"enter",ge,a,J),Se.target=H,Se.relatedTarget=ot,te=Se),ot=te,W&&ge)t:{for(Se=PI,B=W,M=ge,H=0,te=B;te;te=Se(te))H++;te=0;for(var Te=M;Te;Te=Se(Te))te++;for(;0<H-te;)B=Se(B),H--;for(;0<te-H;)M=Se(M),te--;for(;H--;){if(B===M||M!==null&&B===M.alternate){Se=B;break t}B=Se(B),M=Se(M)}Se=null}else Se=null;W!==null&&nT(ie,Q,W,Se,!1),ge!==null&&ot!==null&&nT(ie,ot,ge,Se,!0)}}e:{if(Q=G?wn(G):window,W=Q.nodeName&&Q.nodeName.toLowerCase(),W==="select"||W==="input"&&Q.type==="file")var Qe=v_;else if(y_(Q))if(E_)Qe=Kw;else{Qe=Hw;var _e=Fw}else W=Q.nodeName,!W||W.toLowerCase()!=="input"||Q.type!=="checkbox"&&Q.type!=="radio"?G&&Qa(G.elementType)&&(Qe=v_):Qe=Gw;if(Qe&&(Qe=Qe(n,G))){__(ie,Qe,a,J);break e}_e&&_e(n,Q,G),n==="focusout"&&G&&Q.type==="number"&&G.memoizedProps.value!=null&&kl(Q,"number",Q.value)}switch(_e=G?wn(G):window,n){case"focusin":(y_(_e)||_e.contentEditable==="true")&&(to=_e,em=G,Yl=null);break;case"focusout":Yl=em=to=null;break;case"mousedown":tm=!0;break;case"contextmenu":case"mouseup":case"dragend":tm=!1,C_(ie,a,J);break;case"selectionchange":if(Yw)break;case"keydown":case"keyup":C_(ie,a,J)}var Pe;if($e)e:{switch(n){case"compositionstart":var je="onCompositionStart";break e;case"compositionend":je="onCompositionEnd";break e;case"compositionupdate":je="onCompositionUpdate";break e}je=void 0}else eo?Ws(n,a)&&(je="onCompositionEnd"):n==="keydown"&&a.keyCode===229&&(je="onCompositionStart");je&&(ki&&a.locale!=="ko"&&(eo||je!=="onCompositionStart"?je==="onCompositionEnd"&&eo&&(Pe=jl()):(Vi=J,zl="value"in Vi?Vi.value:Vi.textContent,eo=!0)),_e=Wh(G,je),0<_e.length&&(je=new Pi(je,n,null,a,J),ie.push({event:je,listeners:_e}),Pe?je.data=Pe:(Pe=Za(a),Pe!==null&&(je.data=Pe)))),(Pe=qn?Bw(n,a):zw(n,a))&&(je=Wh(G,"onBeforeInput"),0<je.length&&(_e=new Pi("onBeforeInput","beforeinput",null,a,J),ie.push({event:_e,listeners:je}),_e.data=Pe)),NI(ie,n,G,a,J)}eT(ie,s)})}function vu(n,s,a){return{instance:n,listener:s,currentTarget:a}}function Wh(n,s){for(var a=s+"Capture",u=[];n!==null;){var d=n,m=d.stateNode;if(d=d.tag,d!==5&&d!==26&&d!==27||m===null||(d=oi(n,a),d!=null&&u.unshift(vu(n,d,m)),d=oi(n,s),d!=null&&u.push(vu(n,d,m))),n.tag===3)return u;n=n.return}return[]}function PI(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function nT(n,s,a,u,d){for(var m=s._reactName,_=[];a!==null&&a!==u;){var b=a,N=b.alternate,G=b.stateNode;if(b=b.tag,N!==null&&N===u)break;b!==5&&b!==26&&b!==27||G===null||(N=G,d?(G=oi(a,m),G!=null&&_.unshift(vu(a,G,N))):d||(G=oi(a,m),G!=null&&_.push(vu(a,G,N)))),a=a.return}_.length!==0&&n.push({event:s,listeners:_})}var kI=/\r\n?/g,LI=/\u0000|\uFFFD/g;function iT(n){return(typeof n=="string"?n:""+n).replace(kI,`
`).replace(LI,"")}function rT(n,s){return s=iT(s),iT(n)===s}function at(n,s,a,u,d,m){switch(a){case"children":typeof u=="string"?s==="body"||s==="textarea"&&u===""||_n(n,u):(typeof u=="number"||typeof u=="bigint")&&s!=="body"&&_n(n,""+u);break;case"className":In(n,"class",u);break;case"tabIndex":In(n,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":In(n,a,u);break;case"style":Ul(n,u,m);break;case"data":if(s!=="object"){In(n,"data",u);break}case"src":case"href":if(u===""&&(s!=="a"||a!=="href")){n.removeAttribute(a);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){n.removeAttribute(a);break}u=Ya(""+u),n.setAttribute(a,u);break;case"action":case"formAction":if(typeof u=="function"){n.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(a==="formAction"?(s!=="input"&&at(n,s,"name",d.name,d,null),at(n,s,"formEncType",d.formEncType,d,null),at(n,s,"formMethod",d.formMethod,d,null),at(n,s,"formTarget",d.formTarget,d,null)):(at(n,s,"encType",d.encType,d,null),at(n,s,"method",d.method,d,null),at(n,s,"target",d.target,d,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){n.removeAttribute(a);break}u=Ya(""+u),n.setAttribute(a,u);break;case"onClick":u!=null&&(n.onclick=ai);break;case"onScroll":u!=null&&Be("scroll",n);break;case"onScrollEnd":u!=null&&Be("scrollend",n);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(i(61));if(a=u.__html,a!=null){if(d.children!=null)throw Error(i(60));n.innerHTML=a}}break;case"multiple":n.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":n.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){n.removeAttribute("xlink:href");break}a=Ya(""+u),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(a,""+u):n.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(a,""):n.removeAttribute(a);break;case"capture":case"download":u===!0?n.setAttribute(a,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(a,u):n.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?n.setAttribute(a,u):n.removeAttribute(a);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?n.removeAttribute(a):n.setAttribute(a,u);break;case"popover":Be("beforetoggle",n),Be("toggle",n),Ga(n,"popover",u);break;case"xlinkActuate":xt(n,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":xt(n,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":xt(n,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":xt(n,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":xt(n,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":xt(n,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":xt(n,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":xt(n,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":xt(n,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":Ga(n,"is",u);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Wc.get(a)||a,Ga(n,a,u))}}function Ip(n,s,a,u,d,m){switch(a){case"style":Ul(n,u,m);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(i(61));if(a=u.__html,a!=null){if(d.children!=null)throw Error(i(60));n.innerHTML=a}}break;case"children":typeof u=="string"?_n(n,u):(typeof u=="number"||typeof u=="bigint")&&_n(n,""+u);break;case"onScroll":u!=null&&Be("scroll",n);break;case"onScrollEnd":u!=null&&Be("scrollend",n);break;case"onClick":u!=null&&(n.onclick=ai);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Nl.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(d=a.endsWith("Capture"),s=a.slice(2,d?a.length-7:void 0),m=n[Kt]||null,m=m!=null?m[a]:null,typeof m=="function"&&n.removeEventListener(s,m,d),typeof u=="function")){typeof m!="function"&&m!==null&&(a in n?n[a]=null:n.hasAttribute(a)&&n.removeAttribute(a)),n.addEventListener(s,u,d);break e}a in n?n[a]=u:u===!0?n.setAttribute(a,""):Ga(n,a,u)}}}function nn(n,s,a){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Be("error",n),Be("load",n);var u=!1,d=!1,m;for(m in a)if(a.hasOwnProperty(m)){var _=a[m];if(_!=null)switch(m){case"src":u=!0;break;case"srcSet":d=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:at(n,s,m,_,a,null)}}d&&at(n,s,"srcSet",a.srcSet,a,null),u&&at(n,s,"src",a.src,a,null);return;case"input":Be("invalid",n);var b=m=_=d=null,N=null,G=null;for(u in a)if(a.hasOwnProperty(u)){var J=a[u];if(J!=null)switch(u){case"name":d=J;break;case"type":_=J;break;case"checked":N=J;break;case"defaultChecked":G=J;break;case"value":m=J;break;case"defaultValue":b=J;break;case"children":case"dangerouslySetInnerHTML":if(J!=null)throw Error(i(137,s));break;default:at(n,s,u,J,a,null)}}Yc(n,m,b,N,G,_,d,!1);return;case"select":Be("invalid",n),u=_=m=null;for(d in a)if(a.hasOwnProperty(d)&&(b=a[d],b!=null))switch(d){case"value":m=b;break;case"defaultValue":_=b;break;case"multiple":u=b;default:at(n,s,d,b,a,null)}s=m,a=_,n.multiple=!!u,s!=null?Pr(n,!!u,s,!1):a!=null&&Pr(n,!!u,a,!0);return;case"textarea":Be("invalid",n),m=d=u=null;for(_ in a)if(a.hasOwnProperty(_)&&(b=a[_],b!=null))switch(_){case"value":u=b;break;case"defaultValue":d=b;break;case"children":m=b;break;case"dangerouslySetInnerHTML":if(b!=null)throw Error(i(91));break;default:at(n,s,_,b,a,null)}kr(n,u,d,m);return;case"option":for(N in a)a.hasOwnProperty(N)&&(u=a[N],u!=null)&&(N==="selected"?n.selected=u&&typeof u!="function"&&typeof u!="symbol":at(n,s,N,u,a,null));return;case"dialog":Be("beforetoggle",n),Be("toggle",n),Be("cancel",n),Be("close",n);break;case"iframe":case"object":Be("load",n);break;case"video":case"audio":for(u=0;u<_u.length;u++)Be(_u[u],n);break;case"image":Be("error",n),Be("load",n);break;case"details":Be("toggle",n);break;case"embed":case"source":case"link":Be("error",n),Be("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(G in a)if(a.hasOwnProperty(G)&&(u=a[G],u!=null))switch(G){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:at(n,s,G,u,a,null)}return;default:if(Qa(s)){for(J in a)a.hasOwnProperty(J)&&(u=a[J],u!==void 0&&Ip(n,s,J,u,a,void 0));return}}for(b in a)a.hasOwnProperty(b)&&(u=a[b],u!=null&&at(n,s,b,u,a,null))}function UI(n,s,a,u){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var d=null,m=null,_=null,b=null,N=null,G=null,J=null;for(W in a){var ie=a[W];if(a.hasOwnProperty(W)&&ie!=null)switch(W){case"checked":break;case"value":break;case"defaultValue":N=ie;default:u.hasOwnProperty(W)||at(n,s,W,null,u,ie)}}for(var Q in u){var W=u[Q];if(ie=a[Q],u.hasOwnProperty(Q)&&(W!=null||ie!=null))switch(Q){case"type":m=W;break;case"name":d=W;break;case"checked":G=W;break;case"defaultChecked":J=W;break;case"value":_=W;break;case"defaultValue":b=W;break;case"children":case"dangerouslySetInnerHTML":if(W!=null)throw Error(i(137,s));break;default:W!==ie&&at(n,s,Q,W,u,ie)}}Ka(n,_,b,N,G,J,m,d);return;case"select":W=_=b=Q=null;for(m in a)if(N=a[m],a.hasOwnProperty(m)&&N!=null)switch(m){case"value":break;case"multiple":W=N;default:u.hasOwnProperty(m)||at(n,s,m,null,u,N)}for(d in u)if(m=u[d],N=a[d],u.hasOwnProperty(d)&&(m!=null||N!=null))switch(d){case"value":Q=m;break;case"defaultValue":b=m;break;case"multiple":_=m;default:m!==N&&at(n,s,d,m,u,N)}s=b,a=_,u=W,Q!=null?Pr(n,!!a,Q,!1):!!u!=!!a&&(s!=null?Pr(n,!!a,s,!0):Pr(n,!!a,a?[]:"",!1));return;case"textarea":W=Q=null;for(b in a)if(d=a[b],a.hasOwnProperty(b)&&d!=null&&!u.hasOwnProperty(b))switch(b){case"value":break;case"children":break;default:at(n,s,b,null,u,d)}for(_ in u)if(d=u[_],m=a[_],u.hasOwnProperty(_)&&(d!=null||m!=null))switch(_){case"value":Q=d;break;case"defaultValue":W=d;break;case"children":break;case"dangerouslySetInnerHTML":if(d!=null)throw Error(i(91));break;default:d!==m&&at(n,s,_,d,u,m)}$c(n,Q,W);return;case"option":for(var ge in a)Q=a[ge],a.hasOwnProperty(ge)&&Q!=null&&!u.hasOwnProperty(ge)&&(ge==="selected"?n.selected=!1:at(n,s,ge,null,u,Q));for(N in u)Q=u[N],W=a[N],u.hasOwnProperty(N)&&Q!==W&&(Q!=null||W!=null)&&(N==="selected"?n.selected=Q&&typeof Q!="function"&&typeof Q!="symbol":at(n,s,N,Q,u,W));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Se in a)Q=a[Se],a.hasOwnProperty(Se)&&Q!=null&&!u.hasOwnProperty(Se)&&at(n,s,Se,null,u,Q);for(G in u)if(Q=u[G],W=a[G],u.hasOwnProperty(G)&&Q!==W&&(Q!=null||W!=null))switch(G){case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(i(137,s));break;default:at(n,s,G,Q,u,W)}return;default:if(Qa(s)){for(var ot in a)Q=a[ot],a.hasOwnProperty(ot)&&Q!==void 0&&!u.hasOwnProperty(ot)&&Ip(n,s,ot,void 0,u,Q);for(J in u)Q=u[J],W=a[J],!u.hasOwnProperty(J)||Q===W||Q===void 0&&W===void 0||Ip(n,s,J,Q,u,W);return}}for(var B in a)Q=a[B],a.hasOwnProperty(B)&&Q!=null&&!u.hasOwnProperty(B)&&at(n,s,B,null,u,Q);for(ie in u)Q=u[ie],W=a[ie],!u.hasOwnProperty(ie)||Q===W||Q==null&&W==null||at(n,s,ie,Q,u,W)}function sT(n){switch(n){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function BI(){if(typeof performance.getEntriesByType=="function"){for(var n=0,s=0,a=performance.getEntriesByType("resource"),u=0;u<a.length;u++){var d=a[u],m=d.transferSize,_=d.initiatorType,b=d.duration;if(m&&b&&sT(_)){for(_=0,b=d.responseEnd,u+=1;u<a.length;u++){var N=a[u],G=N.startTime;if(G>b)break;var J=N.transferSize,ie=N.initiatorType;J&&sT(ie)&&(N=N.responseEnd,_+=J*(N<b?1:(b-G)/(N-G)))}if(--u,s+=8*(m+_)/(d.duration/1e3),n++,10<n)break}}if(0<n)return s/n/1e6}return navigator.connection&&(n=navigator.connection.downlink,typeof n=="number")?n:5}var Rp=null,Cp=null;function Jh(n){return n.nodeType===9?n:n.ownerDocument}function aT(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function oT(n,s){if(n===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&s==="foreignObject"?0:n}function xp(n,s){return n==="textarea"||n==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Dp=null;function zI(){var n=window.event;return n&&n.type==="popstate"?n===Dp?!1:(Dp=n,!0):(Dp=null,!1)}var lT=typeof setTimeout=="function"?setTimeout:void 0,jI=typeof clearTimeout=="function"?clearTimeout:void 0,uT=typeof Promise=="function"?Promise:void 0,qI=typeof queueMicrotask=="function"?queueMicrotask:typeof uT<"u"?function(n){return uT.resolve(null).then(n).catch(FI)}:lT;function FI(n){setTimeout(function(){throw n})}function ss(n){return n==="head"}function cT(n,s){var a=s,u=0;do{var d=a.nextSibling;if(n.removeChild(a),d&&d.nodeType===8)if(a=d.data,a==="/$"||a==="/&"){if(u===0){n.removeChild(d),xo(s);return}u--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")u++;else if(a==="html")Eu(n.ownerDocument.documentElement);else if(a==="head"){a=n.ownerDocument.head,Eu(a);for(var m=a.firstChild;m;){var _=m.nextSibling,b=m.nodeName;m[wi]||b==="SCRIPT"||b==="STYLE"||b==="LINK"&&m.rel.toLowerCase()==="stylesheet"||a.removeChild(m),m=_}}else a==="body"&&Eu(n.ownerDocument.body);a=d}while(a);xo(s)}function hT(n,s){var a=n;n=0;do{var u=a.nextSibling;if(a.nodeType===1?s?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(s?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),u&&u.nodeType===8)if(a=u.data,a==="/$"){if(n===0)break;n--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||n++;a=u}while(a)}function Np(n){var s=n.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var a=s;switch(s=s.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Np(a),Ha(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}n.removeChild(a)}}function HI(n,s,a,u){for(;n.nodeType===1;){var d=a;if(n.nodeName.toLowerCase()!==s.toLowerCase()){if(!u&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(u){if(!n[wi])switch(s){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(m=n.getAttribute("rel"),m==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(m!==d.rel||n.getAttribute("href")!==(d.href==null||d.href===""?null:d.href)||n.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin)||n.getAttribute("title")!==(d.title==null?null:d.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(m=n.getAttribute("src"),(m!==(d.src==null?null:d.src)||n.getAttribute("type")!==(d.type==null?null:d.type)||n.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin))&&m&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(s==="input"&&n.type==="hidden"){var m=d.name==null?null:""+d.name;if(d.type==="hidden"&&n.getAttribute("name")===m)return n}else return n;if(n=$n(n.nextSibling),n===null)break}return null}function GI(n,s,a){if(s==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!a||(n=$n(n.nextSibling),n===null))return null;return n}function dT(n,s){for(;n.nodeType!==8;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!s||(n=$n(n.nextSibling),n===null))return null;return n}function Vp(n){return n.data==="$?"||n.data==="$~"}function Op(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState!=="loading"}function KI(n,s){var a=n.ownerDocument;if(n.data==="$~")n._reactRetry=s;else if(n.data!=="$?"||a.readyState!=="loading")s();else{var u=function(){s(),a.removeEventListener("DOMContentLoaded",u)};a.addEventListener("DOMContentLoaded",u),n._reactRetry=u}}function $n(n){for(;n!=null;n=n.nextSibling){var s=n.nodeType;if(s===1||s===3)break;if(s===8){if(s=n.data,s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"||s==="F!"||s==="F")break;if(s==="/$"||s==="/&")return null}}return n}var Mp=null;function fT(n){n=n.nextSibling;for(var s=0;n;){if(n.nodeType===8){var a=n.data;if(a==="/$"||a==="/&"){if(s===0)return $n(n.nextSibling);s--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||s++}n=n.nextSibling}return null}function mT(n){n=n.previousSibling;for(var s=0;n;){if(n.nodeType===8){var a=n.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(s===0)return n;s--}else a!=="/$"&&a!=="/&"||s++}n=n.previousSibling}return null}function pT(n,s,a){switch(s=Jh(a),n){case"html":if(n=s.documentElement,!n)throw Error(i(452));return n;case"head":if(n=s.head,!n)throw Error(i(453));return n;case"body":if(n=s.body,!n)throw Error(i(454));return n;default:throw Error(i(451))}}function Eu(n){for(var s=n.attributes;s.length;)n.removeAttributeNode(s[0]);Ha(n)}var Xn=new Map,gT=new Set;function Zh(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var _r=ae.d;ae.d={f:QI,r:YI,D:$I,C:XI,L:WI,m:JI,X:eR,S:ZI,M:tR};function QI(){var n=_r.f(),s=Hh();return n||s}function YI(n){var s=Bn(n);s!==null&&s.tag===5&&s.type==="form"?Ov(s):_r.r(n)}var Io=typeof document>"u"?null:document;function yT(n,s,a){var u=Io;if(u&&typeof s=="string"&&s){var d=yn(s);d='link[rel="'+n+'"][href="'+d+'"]',typeof a=="string"&&(d+='[crossorigin="'+a+'"]'),gT.has(d)||(gT.add(d),n={rel:n,crossOrigin:a,href:s},u.querySelector(d)===null&&(s=u.createElement("link"),nn(s,"link",n),Ct(s),u.head.appendChild(s)))}}function $I(n){_r.D(n),yT("dns-prefetch",n,null)}function XI(n,s){_r.C(n,s),yT("preconnect",n,s)}function WI(n,s,a){_r.L(n,s,a);var u=Io;if(u&&n&&s){var d='link[rel="preload"][as="'+yn(s)+'"]';s==="image"&&a&&a.imageSrcSet?(d+='[imagesrcset="'+yn(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(d+='[imagesizes="'+yn(a.imageSizes)+'"]')):d+='[href="'+yn(n)+'"]';var m=d;switch(s){case"style":m=Ro(n);break;case"script":m=Co(n)}Xn.has(m)||(n=T({rel:"preload",href:s==="image"&&a&&a.imageSrcSet?void 0:n,as:s},a),Xn.set(m,n),u.querySelector(d)!==null||s==="style"&&u.querySelector(Tu(m))||s==="script"&&u.querySelector(bu(m))||(s=u.createElement("link"),nn(s,"link",n),Ct(s),u.head.appendChild(s)))}}function JI(n,s){_r.m(n,s);var a=Io;if(a&&n){var u=s&&typeof s.as=="string"?s.as:"script",d='link[rel="modulepreload"][as="'+yn(u)+'"][href="'+yn(n)+'"]',m=d;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=Co(n)}if(!Xn.has(m)&&(n=T({rel:"modulepreload",href:n},s),Xn.set(m,n),a.querySelector(d)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(bu(m)))return}u=a.createElement("link"),nn(u,"link",n),Ct(u),a.head.appendChild(u)}}}function ZI(n,s,a){_r.S(n,s,a);var u=Io;if(u&&n){var d=Ri(u).hoistableStyles,m=Ro(n);s=s||"default";var _=d.get(m);if(!_){var b={loading:0,preload:null};if(_=u.querySelector(Tu(m)))b.loading=5;else{n=T({rel:"stylesheet",href:n,"data-precedence":s},a),(a=Xn.get(m))&&Pp(n,a);var N=_=u.createElement("link");Ct(N),nn(N,"link",n),N._p=new Promise(function(G,J){N.onload=G,N.onerror=J}),N.addEventListener("load",function(){b.loading|=1}),N.addEventListener("error",function(){b.loading|=2}),b.loading|=4,ed(_,s,u)}_={type:"stylesheet",instance:_,count:1,state:b},d.set(m,_)}}}function eR(n,s){_r.X(n,s);var a=Io;if(a&&n){var u=Ri(a).hoistableScripts,d=Co(n),m=u.get(d);m||(m=a.querySelector(bu(d)),m||(n=T({src:n,async:!0},s),(s=Xn.get(d))&&kp(n,s),m=a.createElement("script"),Ct(m),nn(m,"link",n),a.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},u.set(d,m))}}function tR(n,s){_r.M(n,s);var a=Io;if(a&&n){var u=Ri(a).hoistableScripts,d=Co(n),m=u.get(d);m||(m=a.querySelector(bu(d)),m||(n=T({src:n,async:!0,type:"module"},s),(s=Xn.get(d))&&kp(n,s),m=a.createElement("script"),Ct(m),nn(m,"link",n),a.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},u.set(d,m))}}function _T(n,s,a,u){var d=(d=Re.current)?Zh(d):null;if(!d)throw Error(i(446));switch(n){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(s=Ro(a.href),a=Ri(d).hoistableStyles,u=a.get(s),u||(u={type:"style",instance:null,count:0,state:null},a.set(s,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){n=Ro(a.href);var m=Ri(d).hoistableStyles,_=m.get(n);if(_||(d=d.ownerDocument||d,_={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(n,_),(m=d.querySelector(Tu(n)))&&!m._p&&(_.instance=m,_.state.loading=5),Xn.has(n)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Xn.set(n,a),m||nR(d,n,a,_.state))),s&&u===null)throw Error(i(528,""));return _}if(s&&u!==null)throw Error(i(529,""));return null;case"script":return s=a.async,a=a.src,typeof a=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=Co(a),a=Ri(d).hoistableScripts,u=a.get(s),u||(u={type:"script",instance:null,count:0,state:null},a.set(s,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,n))}}function Ro(n){return'href="'+yn(n)+'"'}function Tu(n){return'link[rel="stylesheet"]['+n+"]"}function vT(n){return T({},n,{"data-precedence":n.precedence,precedence:null})}function nR(n,s,a,u){n.querySelector('link[rel="preload"][as="style"]['+s+"]")?u.loading=1:(s=n.createElement("link"),u.preload=s,s.addEventListener("load",function(){return u.loading|=1}),s.addEventListener("error",function(){return u.loading|=2}),nn(s,"link",a),Ct(s),n.head.appendChild(s))}function Co(n){return'[src="'+yn(n)+'"]'}function bu(n){return"script[async]"+n}function ET(n,s,a){if(s.count++,s.instance===null)switch(s.type){case"style":var u=n.querySelector('style[data-href~="'+yn(a.href)+'"]');if(u)return s.instance=u,Ct(u),u;var d=T({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return u=(n.ownerDocument||n).createElement("style"),Ct(u),nn(u,"style",d),ed(u,a.precedence,n),s.instance=u;case"stylesheet":d=Ro(a.href);var m=n.querySelector(Tu(d));if(m)return s.state.loading|=4,s.instance=m,Ct(m),m;u=vT(a),(d=Xn.get(d))&&Pp(u,d),m=(n.ownerDocument||n).createElement("link"),Ct(m);var _=m;return _._p=new Promise(function(b,N){_.onload=b,_.onerror=N}),nn(m,"link",u),s.state.loading|=4,ed(m,a.precedence,n),s.instance=m;case"script":return m=Co(a.src),(d=n.querySelector(bu(m)))?(s.instance=d,Ct(d),d):(u=a,(d=Xn.get(m))&&(u=T({},a),kp(u,d)),n=n.ownerDocument||n,d=n.createElement("script"),Ct(d),nn(d,"link",u),n.head.appendChild(d),s.instance=d);case"void":return null;default:throw Error(i(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(u=s.instance,s.state.loading|=4,ed(u,a.precedence,n));return s.instance}function ed(n,s,a){for(var u=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),d=u.length?u[u.length-1]:null,m=d,_=0;_<u.length;_++){var b=u[_];if(b.dataset.precedence===s)m=b;else if(m!==d)break}m?m.parentNode.insertBefore(n,m.nextSibling):(s=a.nodeType===9?a.head:a,s.insertBefore(n,s.firstChild))}function Pp(n,s){n.crossOrigin==null&&(n.crossOrigin=s.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=s.referrerPolicy),n.title==null&&(n.title=s.title)}function kp(n,s){n.crossOrigin==null&&(n.crossOrigin=s.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=s.referrerPolicy),n.integrity==null&&(n.integrity=s.integrity)}var td=null;function TT(n,s,a){if(td===null){var u=new Map,d=td=new Map;d.set(a,u)}else d=td,u=d.get(a),u||(u=new Map,d.set(a,u));if(u.has(n))return u;for(u.set(n,null),a=a.getElementsByTagName(n),d=0;d<a.length;d++){var m=a[d];if(!(m[wi]||m[Rt]||n==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var _=m.getAttribute(s)||"";_=n+_;var b=u.get(_);b?b.push(m):u.set(_,[m])}}return u}function bT(n,s,a){n=n.ownerDocument||n,n.head.insertBefore(a,s==="title"?n.querySelector("head > title"):null)}function iR(n,s,a){if(a===1||s.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;return s.rel==="stylesheet"?(n=s.disabled,typeof s.precedence=="string"&&n==null):!0;case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function ST(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}function rR(n,s,a,u){if(a.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var d=Ro(u.href),m=s.querySelector(Tu(d));if(m){s=m._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(n.count++,n=nd.bind(n),s.then(n,n)),a.state.loading|=4,a.instance=m,Ct(m);return}m=s.ownerDocument||s,u=vT(u),(d=Xn.get(d))&&Pp(u,d),m=m.createElement("link"),Ct(m);var _=m;_._p=new Promise(function(b,N){_.onload=b,_.onerror=N}),nn(m,"link",u),a.instance=m}n.stylesheets===null&&(n.stylesheets=new Map),n.stylesheets.set(a,s),(s=a.state.preload)&&(a.state.loading&3)===0&&(n.count++,a=nd.bind(n),s.addEventListener("load",a),s.addEventListener("error",a))}}var Lp=0;function sR(n,s){return n.stylesheets&&n.count===0&&rd(n,n.stylesheets),0<n.count||0<n.imgCount?function(a){var u=setTimeout(function(){if(n.stylesheets&&rd(n,n.stylesheets),n.unsuspend){var m=n.unsuspend;n.unsuspend=null,m()}},6e4+s);0<n.imgBytes&&Lp===0&&(Lp=62500*BI());var d=setTimeout(function(){if(n.waitingForImages=!1,n.count===0&&(n.stylesheets&&rd(n,n.stylesheets),n.unsuspend)){var m=n.unsuspend;n.unsuspend=null,m()}},(n.imgBytes>Lp?50:800)+s);return n.unsuspend=a,function(){n.unsuspend=null,clearTimeout(u),clearTimeout(d)}}:null}function nd(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)rd(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var id=null;function rd(n,s){n.stylesheets=null,n.unsuspend!==null&&(n.count++,id=new Map,s.forEach(aR,n),id=null,nd.call(n))}function aR(n,s){if(!(s.state.loading&4)){var a=id.get(n);if(a)var u=a.get(null);else{a=new Map,id.set(n,a);for(var d=n.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<d.length;m++){var _=d[m];(_.nodeName==="LINK"||_.getAttribute("media")!=="not all")&&(a.set(_.dataset.precedence,_),u=_)}u&&a.set(null,u)}d=s.instance,_=d.getAttribute("data-precedence"),m=a.get(_)||u,m===u&&a.set(null,d),a.set(_,d),this.count++,u=nd.bind(this),d.addEventListener("load",u),d.addEventListener("error",u),m?m.parentNode.insertBefore(d,m.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(d,n.firstChild)),s.state.loading|=4}}var Su={$$typeof:ee,Provider:null,Consumer:null,_currentValue:ve,_currentValue2:ve,_threadCount:0};function oR(n,s,a,u,d,m,_,b,N){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Si(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Si(0),this.hiddenUpdates=Si(null),this.identifierPrefix=u,this.onUncaughtError=d,this.onCaughtError=m,this.onRecoverableError=_,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=N,this.incompleteTransitions=new Map}function AT(n,s,a,u,d,m,_,b,N,G,J,ie){return n=new oR(n,s,a,_,N,G,J,ie,b),s=1,m===!0&&(s|=24),m=Cn(3,null,null,s),n.current=m,m.stateNode=n,s=gm(),s.refCount++,n.pooledCache=s,s.refCount++,m.memoizedState={element:u,isDehydrated:a,cache:s},Em(m),n}function wT(n){return n?(n=ro,n):ro}function IT(n,s,a,u,d,m){d=wT(d),u.context===null?u.context=d:u.pendingContext=d,u=Yr(s),u.payload={element:a},m=m===void 0?null:m,m!==null&&(u.callback=m),a=$r(n,u,s),a!==null&&(Sn(a,n,s),tu(a,n,s))}function RT(n,s){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var a=n.retryLane;n.retryLane=a!==0&&a<s?a:s}}function Up(n,s){RT(n,s),(n=n.alternate)&&RT(n,s)}function CT(n){if(n.tag===13||n.tag===31){var s=ea(n,67108864);s!==null&&Sn(s,n,67108864),Up(n,67108864)}}function xT(n){if(n.tag===13||n.tag===31){var s=On();s=qs(s);var a=ea(n,s);a!==null&&Sn(a,n,s),Up(n,s)}}var sd=!0;function lR(n,s,a,u){var d=$.T;$.T=null;var m=ae.p;try{ae.p=2,Bp(n,s,a,u)}finally{ae.p=m,$.T=d}}function uR(n,s,a,u){var d=$.T;$.T=null;var m=ae.p;try{ae.p=8,Bp(n,s,a,u)}finally{ae.p=m,$.T=d}}function Bp(n,s,a,u){if(sd){var d=zp(u);if(d===null)wp(n,s,u,ad,a),NT(n,u);else if(hR(d,n,s,a,u))u.stopPropagation();else if(NT(n,u),s&4&&-1<cR.indexOf(n)){for(;d!==null;){var m=Bn(d);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var _=Ti(m.pendingLanes);if(_!==0){var b=m;for(b.pendingLanes|=2,b.entangledLanes|=2;_;){var N=1<<31-Tt(_);b.entanglements[1]|=N,_&=~N}zi(m),(Xe&6)===0&&(qh=hn()+500,yu(0))}}break;case 31:case 13:b=ea(m,2),b!==null&&Sn(b,m,2),Hh(),Up(m,2)}if(m=zp(u),m===null&&wp(n,s,u,ad,a),m===d)break;d=m}d!==null&&u.stopPropagation()}else wp(n,s,u,null,a)}}function zp(n){return n=zn(n),jp(n)}var ad=null;function jp(n){if(ad=null,n=Ii(n),n!==null){var s=l(n);if(s===null)n=null;else{var a=s.tag;if(a===13){if(n=c(s),n!==null)return n;n=null}else if(a===31){if(n=f(s),n!==null)return n;n=null}else if(a===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;n=null}else s!==n&&(n=null)}}return ad=n,null}function DT(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Us()){case Il:return 2;case Rl:return 8;case Or:case Qf:return 32;case Uc:return 268435456;default:return 32}default:return 32}}var qp=!1,as=null,os=null,ls=null,Au=new Map,wu=new Map,us=[],cR="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function NT(n,s){switch(n){case"focusin":case"focusout":as=null;break;case"dragenter":case"dragleave":os=null;break;case"mouseover":case"mouseout":ls=null;break;case"pointerover":case"pointerout":Au.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":wu.delete(s.pointerId)}}function Iu(n,s,a,u,d,m){return n===null||n.nativeEvent!==m?(n={blockedOn:s,domEventName:a,eventSystemFlags:u,nativeEvent:m,targetContainers:[d]},s!==null&&(s=Bn(s),s!==null&&CT(s)),n):(n.eventSystemFlags|=u,s=n.targetContainers,d!==null&&s.indexOf(d)===-1&&s.push(d),n)}function hR(n,s,a,u,d){switch(s){case"focusin":return as=Iu(as,n,s,a,u,d),!0;case"dragenter":return os=Iu(os,n,s,a,u,d),!0;case"mouseover":return ls=Iu(ls,n,s,a,u,d),!0;case"pointerover":var m=d.pointerId;return Au.set(m,Iu(Au.get(m)||null,n,s,a,u,d)),!0;case"gotpointercapture":return m=d.pointerId,wu.set(m,Iu(wu.get(m)||null,n,s,a,u,d)),!0}return!1}function VT(n){var s=Ii(n.target);if(s!==null){var a=l(s);if(a!==null){if(s=a.tag,s===13){if(s=c(a),s!==null){n.blockedOn=s,ri(n.priority,function(){xT(a)});return}}else if(s===31){if(s=f(a),s!==null){n.blockedOn=s,ri(n.priority,function(){xT(a)});return}}else if(s===3&&a.stateNode.current.memoizedState.isDehydrated){n.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}n.blockedOn=null}function od(n){if(n.blockedOn!==null)return!1;for(var s=n.targetContainers;0<s.length;){var a=zp(n.nativeEvent);if(a===null){a=n.nativeEvent;var u=new a.constructor(a.type,a);Bl=u,a.target.dispatchEvent(u),Bl=null}else return s=Bn(a),s!==null&&CT(s),n.blockedOn=a,!1;s.shift()}return!0}function OT(n,s,a){od(n)&&a.delete(s)}function dR(){qp=!1,as!==null&&od(as)&&(as=null),os!==null&&od(os)&&(os=null),ls!==null&&od(ls)&&(ls=null),Au.forEach(OT),wu.forEach(OT)}function ld(n,s){n.blockedOn===s&&(n.blockedOn=null,qp||(qp=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,dR)))}var ud=null;function MT(n){ud!==n&&(ud=n,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){ud===n&&(ud=null);for(var s=0;s<n.length;s+=3){var a=n[s],u=n[s+1],d=n[s+2];if(typeof u!="function"){if(jp(u||a)===null)continue;break}var m=Bn(a);m!==null&&(n.splice(s,3),s-=3,zm(m,{pending:!0,data:d,method:a.method,action:u},u,d))}}))}function xo(n){function s(N){return ld(N,n)}as!==null&&ld(as,n),os!==null&&ld(os,n),ls!==null&&ld(ls,n),Au.forEach(s),wu.forEach(s);for(var a=0;a<us.length;a++){var u=us[a];u.blockedOn===n&&(u.blockedOn=null)}for(;0<us.length&&(a=us[0],a.blockedOn===null);)VT(a),a.blockedOn===null&&us.shift();if(a=(n.ownerDocument||n).$$reactFormReplay,a!=null)for(u=0;u<a.length;u+=3){var d=a[u],m=a[u+1],_=d[Kt]||null;if(typeof m=="function")_||MT(a);else if(_){var b=null;if(m&&m.hasAttribute("formAction")){if(d=m,_=m[Kt]||null)b=_.formAction;else if(jp(d)!==null)continue}else b=_.action;typeof b=="function"?a[u+1]=b:(a.splice(u,3),u-=3),MT(a)}}}function PT(){function n(m){m.canIntercept&&m.info==="react-transition"&&m.intercept({handler:function(){return new Promise(function(_){return d=_})},focusReset:"manual",scroll:"manual"})}function s(){d!==null&&(d(),d=null),u||setTimeout(a,20)}function a(){if(!u&&!navigation.transition){var m=navigation.currentEntry;m&&m.url!=null&&navigation.navigate(m.url,{state:m.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var u=!1,d=null;return navigation.addEventListener("navigate",n),navigation.addEventListener("navigatesuccess",s),navigation.addEventListener("navigateerror",s),setTimeout(a,100),function(){u=!0,navigation.removeEventListener("navigate",n),navigation.removeEventListener("navigatesuccess",s),navigation.removeEventListener("navigateerror",s),d!==null&&(d(),d=null)}}}function Fp(n){this._internalRoot=n}cd.prototype.render=Fp.prototype.render=function(n){var s=this._internalRoot;if(s===null)throw Error(i(409));var a=s.current,u=On();IT(a,u,n,s,null,null)},cd.prototype.unmount=Fp.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var s=n.containerInfo;IT(n.current,2,null,n,null,null),Hh(),s[Ai]=null}};function cd(n){this._internalRoot=n}cd.prototype.unstable_scheduleHydration=function(n){if(n){var s=Hc();n={blockedOn:null,target:n,priority:s};for(var a=0;a<us.length&&s!==0&&s<us[a].priority;a++);us.splice(a,0,n),a===0&&VT(n)}};var kT=e.version;if(kT!=="19.2.3")throw Error(i(527,kT,"19.2.3"));ae.findDOMNode=function(n){var s=n._reactInternals;if(s===void 0)throw typeof n.render=="function"?Error(i(188)):(n=Object.keys(n).join(","),Error(i(268,n)));return n=g(s),n=n!==null?E(n):null,n=n===null?null:n.stateNode,n};var fR={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:$,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var hd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!hd.isDisabled&&hd.supportsFiber)try{ni=hd.inject(fR),Wt=hd}catch{}}return Cu.createRoot=function(n,s){if(!o(n))throw Error(i(299));var a=!1,u="",d=Fv,m=Hv,_=Gv;return s!=null&&(s.unstable_strictMode===!0&&(a=!0),s.identifierPrefix!==void 0&&(u=s.identifierPrefix),s.onUncaughtError!==void 0&&(d=s.onUncaughtError),s.onCaughtError!==void 0&&(m=s.onCaughtError),s.onRecoverableError!==void 0&&(_=s.onRecoverableError)),s=AT(n,1,!1,null,null,a,u,null,d,m,_,PT),n[Ai]=s.current,Ap(n),new Fp(s)},Cu.hydrateRoot=function(n,s,a){if(!o(n))throw Error(i(299));var u=!1,d="",m=Fv,_=Hv,b=Gv,N=null;return a!=null&&(a.unstable_strictMode===!0&&(u=!0),a.identifierPrefix!==void 0&&(d=a.identifierPrefix),a.onUncaughtError!==void 0&&(m=a.onUncaughtError),a.onCaughtError!==void 0&&(_=a.onCaughtError),a.onRecoverableError!==void 0&&(b=a.onRecoverableError),a.formState!==void 0&&(N=a.formState)),s=AT(n,1,!0,s,a??null,u,d,N,m,_,b,PT),s.context=wT(null),a=s.current,u=On(),u=qs(u),d=Yr(u),d.callback=null,$r(a,d,u),a=u,s.current.lanes=a,zs(s,a),zi(s),n[Ai]=s.current,Ap(n),new cd(s)},Cu.version="19.2.3",Cu}var KT;function AR(){if(KT)return Kp.exports;KT=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),Kp.exports=SR(),Kp.exports}var wR=AR();const IR=r1(wR);var QT="popstate";function RR(r={}){function e(i,o){let{pathname:l,search:c,hash:f}=i.location;return Eg("",{pathname:l,search:c,hash:f},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function t(i,o){return typeof o=="string"?o:ec(o)}return xR(e,t,null,r)}function pt(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function ti(r,e){if(!r){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function CR(){return Math.random().toString(36).substring(2,10)}function YT(r,e){return{usr:r.state,key:r.key,idx:e}}function Eg(r,e,t=null,i){return{pathname:typeof r=="string"?r:r.pathname,search:"",hash:"",...typeof e=="string"?dl(e):e,state:t,key:e&&e.key||i||CR()}}function ec({pathname:r="/",search:e="",hash:t=""}){return e&&e!=="?"&&(r+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(r+=t.charAt(0)==="#"?t:"#"+t),r}function dl(r){let e={};if(r){let t=r.indexOf("#");t>=0&&(e.hash=r.substring(t),r=r.substring(0,t));let i=r.indexOf("?");i>=0&&(e.search=r.substring(i),r=r.substring(0,i)),r&&(e.pathname=r)}return e}function xR(r,e,t,i={}){let{window:o=document.defaultView,v5Compat:l=!1}=i,c=o.history,f="POP",p=null,g=E();g==null&&(g=0,c.replaceState({...c.state,idx:g},""));function E(){return(c.state||{idx:null}).idx}function T(){f="POP";let U=E(),F=U==null?null:U-g;g=U,p&&p({action:f,location:Y.location,delta:F})}function S(U,F){f="PUSH";let K=Eg(Y.location,U,F);g=E()+1;let ee=YT(K,g),he=Y.createHref(K);try{c.pushState(ee,"",he)}catch(de){if(de instanceof DOMException&&de.name==="DataCloneError")throw de;o.location.assign(he)}l&&p&&p({action:f,location:Y.location,delta:1})}function O(U,F){f="REPLACE";let K=Eg(Y.location,U,F);g=E();let ee=YT(K,g),he=Y.createHref(K);c.replaceState(ee,"",he),l&&p&&p({action:f,location:Y.location,delta:0})}function z(U){return DR(U)}let Y={get action(){return f},get location(){return r(o,c)},listen(U){if(p)throw new Error("A history only accepts one active listener");return o.addEventListener(QT,T),p=U,()=>{o.removeEventListener(QT,T),p=null}},createHref(U){return e(o,U)},createURL:z,encodeLocation(U){let F=z(U);return{pathname:F.pathname,search:F.search,hash:F.hash}},push:S,replace:O,go(U){return c.go(U)}};return Y}function DR(r,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),pt(t,"No window.location.(origin|href) available to create URL");let i=typeof r=="string"?r:ec(r);return i=i.replace(/ $/,"%20"),!e&&i.startsWith("//")&&(i=t+i),new URL(i,t)}function s1(r,e,t="/"){return NR(r,e,t,!1)}function NR(r,e,t,i){let o=typeof e=="string"?dl(e):e,l=Ar(o.pathname||"/",t);if(l==null)return null;let c=a1(r);VR(c);let f=null;for(let p=0;f==null&&p<c.length;++p){let g=FR(l);f=jR(c[p],g,i)}return f}function a1(r,e=[],t=[],i="",o=!1){let l=(c,f,p=o,g)=>{let E={relativePath:g===void 0?c.path||"":g,caseSensitive:c.caseSensitive===!0,childrenIndex:f,route:c};if(E.relativePath.startsWith("/")){if(!E.relativePath.startsWith(i)&&p)return;pt(E.relativePath.startsWith(i),`Absolute route path "${E.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),E.relativePath=E.relativePath.slice(i.length)}let T=br([i,E.relativePath]),S=t.concat(E);c.children&&c.children.length>0&&(pt(c.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${T}".`),a1(c.children,e,S,T,p)),!(c.path==null&&!c.index)&&e.push({path:T,score:BR(T,c.index),routesMeta:S})};return r.forEach((c,f)=>{if(c.path===""||!c.path?.includes("?"))l(c,f);else for(let p of o1(c.path))l(c,f,!0,p)}),e}function o1(r){let e=r.split("/");if(e.length===0)return[];let[t,...i]=e,o=t.endsWith("?"),l=t.replace(/\?$/,"");if(i.length===0)return o?[l,""]:[l];let c=o1(i.join("/")),f=[];return f.push(...c.map(p=>p===""?l:[l,p].join("/"))),o&&f.push(...c),f.map(p=>r.startsWith("/")&&p===""?"/":p)}function VR(r){r.sort((e,t)=>e.score!==t.score?t.score-e.score:zR(e.routesMeta.map(i=>i.childrenIndex),t.routesMeta.map(i=>i.childrenIndex)))}var OR=/^:[\w-]+$/,MR=3,PR=2,kR=1,LR=10,UR=-2,$T=r=>r==="*";function BR(r,e){let t=r.split("/"),i=t.length;return t.some($T)&&(i+=UR),e&&(i+=PR),t.filter(o=>!$T(o)).reduce((o,l)=>o+(OR.test(l)?MR:l===""?kR:LR),i)}function zR(r,e){return r.length===e.length&&r.slice(0,-1).every((i,o)=>i===e[o])?r[r.length-1]-e[e.length-1]:0}function jR(r,e,t=!1){let{routesMeta:i}=r,o={},l="/",c=[];for(let f=0;f<i.length;++f){let p=i[f],g=f===i.length-1,E=l==="/"?e:e.slice(l.length)||"/",T=Fd({path:p.relativePath,caseSensitive:p.caseSensitive,end:g},E),S=p.route;if(!T&&g&&t&&!i[i.length-1].route.index&&(T=Fd({path:p.relativePath,caseSensitive:p.caseSensitive,end:!1},E)),!T)return null;Object.assign(o,T.params),c.push({params:o,pathname:br([l,T.pathname]),pathnameBase:QR(br([l,T.pathnameBase])),route:S}),T.pathnameBase!=="/"&&(l=br([l,T.pathnameBase]))}return c}function Fd(r,e){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[t,i]=qR(r.path,r.caseSensitive,r.end),o=e.match(t);if(!o)return null;let l=o[0],c=l.replace(/(.)\/+$/,"$1"),f=o.slice(1);return{params:i.reduce((g,{paramName:E,isOptional:T},S)=>{if(E==="*"){let z=f[S]||"";c=l.slice(0,l.length-z.length).replace(/(.)\/+$/,"$1")}const O=f[S];return T&&!O?g[E]=void 0:g[E]=(O||"").replace(/%2F/g,"/"),g},{}),pathname:l,pathnameBase:c,pattern:r}}function qR(r,e=!1,t=!0){ti(r==="*"||!r.endsWith("*")||r.endsWith("/*"),`Route path "${r}" will be treated as if it were "${r.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${r.replace(/\*$/,"/*")}".`);let i=[],o="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,f,p)=>(i.push({paramName:f,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return r.endsWith("*")?(i.push({paramName:"*"}),o+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?o+="\\/*$":r!==""&&r!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),i]}function FR(r){try{return r.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return ti(!1,`The URL path "${r}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),r}}function Ar(r,e){if(e==="/")return r;if(!r.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,i=r.charAt(t);return i&&i!=="/"?null:r.slice(t)||"/"}var l1=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,HR=r=>l1.test(r);function GR(r,e="/"){let{pathname:t,search:i="",hash:o=""}=typeof r=="string"?dl(r):r,l;if(t)if(HR(t))l=t;else{if(t.includes("//")){let c=t;t=t.replace(/\/\/+/g,"/"),ti(!1,`Pathnames cannot have embedded double slashes - normalizing ${c} -> ${t}`)}t.startsWith("/")?l=XT(t.substring(1),"/"):l=XT(t,e)}else l=e;return{pathname:l,search:YR(i),hash:$R(o)}}function XT(r,e){let t=e.replace(/\/+$/,"").split("/");return r.split("/").forEach(o=>{o===".."?t.length>1&&t.pop():o!=="."&&t.push(o)}),t.length>1?t.join("/"):"/"}function Xp(r,e,t,i){return`Cannot include a '${r}' character in a manually specified \`to.${e}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function KR(r){return r.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function ry(r){let e=KR(r);return e.map((t,i)=>i===e.length-1?t.pathname:t.pathnameBase)}function sy(r,e,t,i=!1){let o;typeof r=="string"?o=dl(r):(o={...r},pt(!o.pathname||!o.pathname.includes("?"),Xp("?","pathname","search",o)),pt(!o.pathname||!o.pathname.includes("#"),Xp("#","pathname","hash",o)),pt(!o.search||!o.search.includes("#"),Xp("#","search","hash",o)));let l=r===""||o.pathname==="",c=l?"/":o.pathname,f;if(c==null)f=t;else{let T=e.length-1;if(!i&&c.startsWith("..")){let S=c.split("/");for(;S[0]==="..";)S.shift(),T-=1;o.pathname=S.join("/")}f=T>=0?e[T]:"/"}let p=GR(o,f),g=c&&c!=="/"&&c.endsWith("/"),E=(l||c===".")&&t.endsWith("/");return!p.pathname.endsWith("/")&&(g||E)&&(p.pathname+="/"),p}var br=r=>r.join("/").replace(/\/\/+/g,"/"),QR=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),YR=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,$R=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r,XR=class{constructor(r,e,t,i=!1){this.status=r,this.statusText=e||"",this.internal=i,t instanceof Error?(this.data=t.toString(),this.error=t):this.data=t}};function WR(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}function JR(r){return r.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var u1=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function c1(r,e){let t=r;if(typeof t!="string"||!l1.test(t))return{absoluteURL:void 0,isExternal:!1,to:t};let i=t,o=!1;if(u1)try{let l=new URL(window.location.href),c=t.startsWith("//")?new URL(l.protocol+t):new URL(t),f=Ar(c.pathname,e);c.origin===l.origin&&f!=null?t=f+c.search+c.hash:o=!0}catch{ti(!1,`<Link to="${t}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:i,isExternal:o,to:t}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var h1=["POST","PUT","PATCH","DELETE"];new Set(h1);var ZR=["GET",...h1];new Set(ZR);var fl=L.createContext(null);fl.displayName="DataRouter";var gf=L.createContext(null);gf.displayName="DataRouterState";var eC=L.createContext(!1),d1=L.createContext({isTransitioning:!1});d1.displayName="ViewTransition";var tC=L.createContext(new Map);tC.displayName="Fetchers";var nC=L.createContext(null);nC.displayName="Await";var Ln=L.createContext(null);Ln.displayName="Navigation";var vc=L.createContext(null);vc.displayName="Location";var _i=L.createContext({outlet:null,matches:[],isDataRoute:!1});_i.displayName="Route";var ay=L.createContext(null);ay.displayName="RouteError";var f1="REACT_ROUTER_ERROR",iC="REDIRECT",rC="ROUTE_ERROR_RESPONSE";function sC(r){if(r.startsWith(`${f1}:${iC}:{`))try{let e=JSON.parse(r.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function aC(r){if(r.startsWith(`${f1}:${rC}:{`))try{let e=JSON.parse(r.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new XR(e.status,e.statusText,e.data)}catch{}}function oC(r,{relative:e}={}){pt(ml(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:i}=L.useContext(Ln),{hash:o,pathname:l,search:c}=Tc(r,{relative:e}),f=l;return t!=="/"&&(f=l==="/"?t:br([t,l])),i.createHref({pathname:f,search:c,hash:o})}function ml(){return L.useContext(vc)!=null}function vi(){return pt(ml(),"useLocation() may be used only in the context of a <Router> component."),L.useContext(vc).location}var m1="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function p1(r){L.useContext(Ln).static||L.useLayoutEffect(r)}function Ec(){let{isDataRoute:r}=L.useContext(_i);return r?bC():lC()}function lC(){pt(ml(),"useNavigate() may be used only in the context of a <Router> component.");let r=L.useContext(fl),{basename:e,navigator:t}=L.useContext(Ln),{matches:i}=L.useContext(_i),{pathname:o}=vi(),l=JSON.stringify(ry(i)),c=L.useRef(!1);return p1(()=>{c.current=!0}),L.useCallback((p,g={})=>{if(ti(c.current,m1),!c.current)return;if(typeof p=="number"){t.go(p);return}let E=sy(p,JSON.parse(l),o,g.relative==="path");r==null&&e!=="/"&&(E.pathname=E.pathname==="/"?e:br([e,E.pathname])),(g.replace?t.replace:t.push)(E,g.state,g)},[e,t,l,o,r])}var uC=L.createContext(null);function cC(r){let e=L.useContext(_i).outlet;return L.useMemo(()=>e&&L.createElement(uC.Provider,{value:r},e),[e,r])}function Tc(r,{relative:e}={}){let{matches:t}=L.useContext(_i),{pathname:i}=vi(),o=JSON.stringify(ry(t));return L.useMemo(()=>sy(r,JSON.parse(o),i,e==="path"),[r,o,i,e])}function hC(r,e){return g1(r,e)}function g1(r,e,t,i,o){pt(ml(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:l}=L.useContext(Ln),{matches:c}=L.useContext(_i),f=c[c.length-1],p=f?f.params:{},g=f?f.pathname:"/",E=f?f.pathnameBase:"/",T=f&&f.route;{let K=T&&T.path||"";_1(g,!T||K.endsWith("*")||K.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${g}" (under <Route path="${K}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${K}"> to <Route path="${K==="/"?"*":`${K}/*`}">.`)}let S=vi(),O;if(e){let K=typeof e=="string"?dl(e):e;pt(E==="/"||K.pathname?.startsWith(E),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${E}" but pathname "${K.pathname}" was given in the \`location\` prop.`),O=K}else O=S;let z=O.pathname||"/",Y=z;if(E!=="/"){let K=E.replace(/^\//,"").split("/");Y="/"+z.replace(/^\//,"").split("/").slice(K.length).join("/")}let U=s1(r,{pathname:Y});ti(T||U!=null,`No routes matched location "${O.pathname}${O.search}${O.hash}" `),ti(U==null||U[U.length-1].route.element!==void 0||U[U.length-1].route.Component!==void 0||U[U.length-1].route.lazy!==void 0,`Matched leaf route at location "${O.pathname}${O.search}${O.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let F=gC(U&&U.map(K=>Object.assign({},K,{params:Object.assign({},p,K.params),pathname:br([E,l.encodeLocation?l.encodeLocation(K.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:K.pathname]),pathnameBase:K.pathnameBase==="/"?E:br([E,l.encodeLocation?l.encodeLocation(K.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:K.pathnameBase])})),c,t,i,o);return e&&F?L.createElement(vc.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...O},navigationType:"POP"}},F):F}function dC(){let r=TC(),e=WR(r)?`${r.status} ${r.statusText}`:r instanceof Error?r.message:JSON.stringify(r),t=r instanceof Error?r.stack:null,i="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:i},l={padding:"2px 4px",backgroundColor:i},c=null;return console.error("Error handled by React Router default ErrorBoundary:",r),c=L.createElement(L.Fragment,null,L.createElement("p",null," Hey developer "),L.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",L.createElement("code",{style:l},"ErrorBoundary")," or"," ",L.createElement("code",{style:l},"errorElement")," prop on your route.")),L.createElement(L.Fragment,null,L.createElement("h2",null,"Unexpected Application Error!"),L.createElement("h3",{style:{fontStyle:"italic"}},e),t?L.createElement("pre",{style:o},t):null,c)}var fC=L.createElement(dC,null),y1=class extends L.Component{constructor(r){super(r),this.state={location:r.location,revalidation:r.revalidation,error:r.error}}static getDerivedStateFromError(r){return{error:r}}static getDerivedStateFromProps(r,e){return e.location!==r.location||e.revalidation!=="idle"&&r.revalidation==="idle"?{error:r.error,location:r.location,revalidation:r.revalidation}:{error:r.error!==void 0?r.error:e.error,location:e.location,revalidation:r.revalidation||e.revalidation}}componentDidCatch(r,e){this.props.onError?this.props.onError(r,e):console.error("React Router caught the following error during render",r)}render(){let r=this.state.error;if(this.context&&typeof r=="object"&&r&&"digest"in r&&typeof r.digest=="string"){const t=aC(r.digest);t&&(r=t)}let e=r!==void 0?L.createElement(_i.Provider,{value:this.props.routeContext},L.createElement(ay.Provider,{value:r,children:this.props.component})):this.props.children;return this.context?L.createElement(mC,{error:r},e):e}};y1.contextType=eC;var Wp=new WeakMap;function mC({children:r,error:e}){let{basename:t}=L.useContext(Ln);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let i=sC(e.digest);if(i){let o=Wp.get(e);if(o)throw o;let l=c1(i.location,t);if(u1&&!Wp.get(e))if(l.isExternal||i.reloadDocument)window.location.href=l.absoluteURL||l.to;else{const c=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(l.to,{replace:i.replace}));throw Wp.set(e,c),c}return L.createElement("meta",{httpEquiv:"refresh",content:`0;url=${l.absoluteURL||l.to}`})}}return r}function pC({routeContext:r,match:e,children:t}){let i=L.useContext(fl);return i&&i.static&&i.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=e.route.id),L.createElement(_i.Provider,{value:r},t)}function gC(r,e=[],t=null,i=null,o=null){if(r==null){if(!t)return null;if(t.errors)r=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)r=t.matches;else return null}let l=r,c=t?.errors;if(c!=null){let E=l.findIndex(T=>T.route.id&&c?.[T.route.id]!==void 0);pt(E>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(c).join(",")}`),l=l.slice(0,Math.min(l.length,E+1))}let f=!1,p=-1;if(t)for(let E=0;E<l.length;E++){let T=l[E];if((T.route.HydrateFallback||T.route.hydrateFallbackElement)&&(p=E),T.route.id){let{loaderData:S,errors:O}=t,z=T.route.loader&&!S.hasOwnProperty(T.route.id)&&(!O||O[T.route.id]===void 0);if(T.route.lazy||z){f=!0,p>=0?l=l.slice(0,p+1):l=[l[0]];break}}}let g=t&&i?(E,T)=>{i(E,{location:t.location,params:t.matches?.[0]?.params??{},unstable_pattern:JR(t.matches),errorInfo:T})}:void 0;return l.reduceRight((E,T,S)=>{let O,z=!1,Y=null,U=null;t&&(O=c&&T.route.id?c[T.route.id]:void 0,Y=T.route.errorElement||fC,f&&(p<0&&S===0?(_1("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),z=!0,U=null):p===S&&(z=!0,U=T.route.hydrateFallbackElement||null)));let F=e.concat(l.slice(0,S+1)),K=()=>{let ee;return O?ee=Y:z?ee=U:T.route.Component?ee=L.createElement(T.route.Component,null):T.route.element?ee=T.route.element:ee=E,L.createElement(pC,{match:T,routeContext:{outlet:E,matches:F,isDataRoute:t!=null},children:ee})};return t&&(T.route.ErrorBoundary||T.route.errorElement||S===0)?L.createElement(y1,{location:t.location,revalidation:t.revalidation,component:Y,error:O,children:K(),routeContext:{outlet:null,matches:F,isDataRoute:!0},onError:g}):K()},null)}function oy(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function yC(r){let e=L.useContext(fl);return pt(e,oy(r)),e}function _C(r){let e=L.useContext(gf);return pt(e,oy(r)),e}function vC(r){let e=L.useContext(_i);return pt(e,oy(r)),e}function ly(r){let e=vC(r),t=e.matches[e.matches.length-1];return pt(t.route.id,`${r} can only be used on routes that contain a unique "id"`),t.route.id}function EC(){return ly("useRouteId")}function TC(){let r=L.useContext(ay),e=_C("useRouteError"),t=ly("useRouteError");return r!==void 0?r:e.errors?.[t]}function bC(){let{router:r}=yC("useNavigate"),e=ly("useNavigate"),t=L.useRef(!1);return p1(()=>{t.current=!0}),L.useCallback(async(o,l={})=>{ti(t.current,m1),t.current&&(typeof o=="number"?await r.navigate(o):await r.navigate(o,{fromRouteId:e,...l}))},[r,e])}var WT={};function _1(r,e,t){!e&&!WT[r]&&(WT[r]=!0,ti(!1,t))}L.memo(SC);function SC({routes:r,future:e,state:t,onError:i}){return g1(r,void 0,t,i,e)}function Tg({to:r,replace:e,state:t,relative:i}){pt(ml(),"<Navigate> may be used only in the context of a <Router> component.");let{static:o}=L.useContext(Ln);ti(!o,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:l}=L.useContext(_i),{pathname:c}=vi(),f=Ec(),p=sy(r,ry(l),c,i==="path"),g=JSON.stringify(p);return L.useEffect(()=>{f(JSON.parse(g),{replace:e,state:t,relative:i})},[f,g,i,e,t]),null}function v1(r){return cC(r.context)}function ji(r){pt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function AC({basename:r="/",children:e=null,location:t,navigationType:i="POP",navigator:o,static:l=!1,unstable_useTransitions:c}){pt(!ml(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let f=r.replace(/^\/*/,"/"),p=L.useMemo(()=>({basename:f,navigator:o,static:l,unstable_useTransitions:c,future:{}}),[f,o,l,c]);typeof t=="string"&&(t=dl(t));let{pathname:g="/",search:E="",hash:T="",state:S=null,key:O="default"}=t,z=L.useMemo(()=>{let Y=Ar(g,f);return Y==null?null:{location:{pathname:Y,search:E,hash:T,state:S,key:O},navigationType:i}},[f,g,E,T,S,O,i]);return ti(z!=null,`<Router basename="${f}"> is not able to match the URL "${g}${E}${T}" because it does not start with the basename, so the <Router> won't render anything.`),z==null?null:L.createElement(Ln.Provider,{value:p},L.createElement(vc.Provider,{children:e,value:z}))}function wC({children:r,location:e}){return hC(bg(r),e)}function bg(r,e=[]){let t=[];return L.Children.forEach(r,(i,o)=>{if(!L.isValidElement(i))return;let l=[...e,o];if(i.type===L.Fragment){t.push.apply(t,bg(i.props.children,l));return}pt(i.type===ji,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),pt(!i.props.index||!i.props.children,"An index route cannot have child routes.");let c={id:i.props.id||l.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,middleware:i.props.middleware,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(c.children=bg(i.props.children,l)),t.push(c)}),t}var Sd="get",Ad="application/x-www-form-urlencoded";function yf(r){return typeof HTMLElement<"u"&&r instanceof HTMLElement}function IC(r){return yf(r)&&r.tagName.toLowerCase()==="button"}function RC(r){return yf(r)&&r.tagName.toLowerCase()==="form"}function CC(r){return yf(r)&&r.tagName.toLowerCase()==="input"}function xC(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function DC(r,e){return r.button===0&&(!e||e==="_self")&&!xC(r)}var dd=null;function NC(){if(dd===null)try{new FormData(document.createElement("form"),0),dd=!1}catch{dd=!0}return dd}var VC=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Jp(r){return r!=null&&!VC.has(r)?(ti(!1,`"${r}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Ad}"`),null):r}function OC(r,e){let t,i,o,l,c;if(RC(r)){let f=r.getAttribute("action");i=f?Ar(f,e):null,t=r.getAttribute("method")||Sd,o=Jp(r.getAttribute("enctype"))||Ad,l=new FormData(r)}else if(IC(r)||CC(r)&&(r.type==="submit"||r.type==="image")){let f=r.form;if(f==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let p=r.getAttribute("formaction")||f.getAttribute("action");if(i=p?Ar(p,e):null,t=r.getAttribute("formmethod")||f.getAttribute("method")||Sd,o=Jp(r.getAttribute("formenctype"))||Jp(f.getAttribute("enctype"))||Ad,l=new FormData(f,r),!NC()){let{name:g,type:E,value:T}=r;if(E==="image"){let S=g?`${g}.`:"";l.append(`${S}x`,"0"),l.append(`${S}y`,"0")}else g&&l.append(g,T)}}else{if(yf(r))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=Sd,i=null,o=Ad,c=r}return l&&o==="text/plain"&&(c=l,l=void 0),{action:i,method:t.toLowerCase(),encType:o,formData:l,body:c}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function uy(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function MC(r,e,t){let i=typeof r=="string"?new URL(r,typeof window>"u"?"server://singlefetch/":window.location.origin):r;return i.pathname==="/"?i.pathname=`_root.${t}`:e&&Ar(i.pathname,e)==="/"?i.pathname=`${e.replace(/\/$/,"")}/_root.${t}`:i.pathname=`${i.pathname.replace(/\/$/,"")}.${t}`,i}async function PC(r,e){if(r.id in e)return e[r.id];try{let t=await import(r.module);return e[r.id]=t,t}catch(t){return console.error(`Error loading route module \`${r.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function kC(r){return r==null?!1:r.href==null?r.rel==="preload"&&typeof r.imageSrcSet=="string"&&typeof r.imageSizes=="string":typeof r.rel=="string"&&typeof r.href=="string"}async function LC(r,e,t){let i=await Promise.all(r.map(async o=>{let l=e.routes[o.route.id];if(l){let c=await PC(l,t);return c.links?c.links():[]}return[]}));return jC(i.flat(1).filter(kC).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function JT(r,e,t,i,o,l){let c=(p,g)=>t[g]?p.route.id!==t[g].route.id:!0,f=(p,g)=>t[g].pathname!==p.pathname||t[g].route.path?.endsWith("*")&&t[g].params["*"]!==p.params["*"];return l==="assets"?e.filter((p,g)=>c(p,g)||f(p,g)):l==="data"?e.filter((p,g)=>{let E=i.routes[p.route.id];if(!E||!E.hasLoader)return!1;if(c(p,g)||f(p,g))return!0;if(p.route.shouldRevalidate){let T=p.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:t[0]?.params||{},nextUrl:new URL(r,window.origin),nextParams:p.params,defaultShouldRevalidate:!0});if(typeof T=="boolean")return T}return!0}):[]}function UC(r,e,{includeHydrateFallback:t}={}){return BC(r.map(i=>{let o=e.routes[i.route.id];if(!o)return[];let l=[o.module];return o.clientActionModule&&(l=l.concat(o.clientActionModule)),o.clientLoaderModule&&(l=l.concat(o.clientLoaderModule)),t&&o.hydrateFallbackModule&&(l=l.concat(o.hydrateFallbackModule)),o.imports&&(l=l.concat(o.imports)),l}).flat(1))}function BC(r){return[...new Set(r)]}function zC(r){let e={},t=Object.keys(r).sort();for(let i of t)e[i]=r[i];return e}function jC(r,e){let t=new Set;return new Set(e),r.reduce((i,o)=>{let l=JSON.stringify(zC(o));return t.has(l)||(t.add(l),i.push({key:l,link:o})),i},[])}function E1(){let r=L.useContext(fl);return uy(r,"You must render this element inside a <DataRouterContext.Provider> element"),r}function qC(){let r=L.useContext(gf);return uy(r,"You must render this element inside a <DataRouterStateContext.Provider> element"),r}var cy=L.createContext(void 0);cy.displayName="FrameworkContext";function T1(){let r=L.useContext(cy);return uy(r,"You must render this element inside a <HydratedRouter> element"),r}function FC(r,e){let t=L.useContext(cy),[i,o]=L.useState(!1),[l,c]=L.useState(!1),{onFocus:f,onBlur:p,onMouseEnter:g,onMouseLeave:E,onTouchStart:T}=e,S=L.useRef(null);L.useEffect(()=>{if(r==="render"&&c(!0),r==="viewport"){let Y=F=>{F.forEach(K=>{c(K.isIntersecting)})},U=new IntersectionObserver(Y,{threshold:.5});return S.current&&U.observe(S.current),()=>{U.disconnect()}}},[r]),L.useEffect(()=>{if(i){let Y=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(Y)}}},[i]);let O=()=>{o(!0)},z=()=>{o(!1),c(!1)};return t?r!=="intent"?[l,S,{}]:[l,S,{onFocus:xu(f,O),onBlur:xu(p,z),onMouseEnter:xu(g,O),onMouseLeave:xu(E,z),onTouchStart:xu(T,O)}]:[!1,S,{}]}function xu(r,e){return t=>{r&&r(t),t.defaultPrevented||e(t)}}function HC({page:r,...e}){let{router:t}=E1(),i=L.useMemo(()=>s1(t.routes,r,t.basename),[t.routes,r,t.basename]);return i?L.createElement(KC,{page:r,matches:i,...e}):null}function GC(r){let{manifest:e,routeModules:t}=T1(),[i,o]=L.useState([]);return L.useEffect(()=>{let l=!1;return LC(r,e,t).then(c=>{l||o(c)}),()=>{l=!0}},[r,e,t]),i}function KC({page:r,matches:e,...t}){let i=vi(),{manifest:o,routeModules:l}=T1(),{basename:c}=E1(),{loaderData:f,matches:p}=qC(),g=L.useMemo(()=>JT(r,e,p,o,i,"data"),[r,e,p,o,i]),E=L.useMemo(()=>JT(r,e,p,o,i,"assets"),[r,e,p,o,i]),T=L.useMemo(()=>{if(r===i.pathname+i.search+i.hash)return[];let z=new Set,Y=!1;if(e.forEach(F=>{let K=o.routes[F.route.id];!K||!K.hasLoader||(!g.some(ee=>ee.route.id===F.route.id)&&F.route.id in f&&l[F.route.id]?.shouldRevalidate||K.hasClientLoader?Y=!0:z.add(F.route.id))}),z.size===0)return[];let U=MC(r,c,"data");return Y&&z.size>0&&U.searchParams.set("_routes",e.filter(F=>z.has(F.route.id)).map(F=>F.route.id).join(",")),[U.pathname+U.search]},[c,f,i,o,g,e,r,l]),S=L.useMemo(()=>UC(E,o),[E,o]),O=GC(E);return L.createElement(L.Fragment,null,T.map(z=>L.createElement("link",{key:z,rel:"prefetch",as:"fetch",href:z,...t})),S.map(z=>L.createElement("link",{key:z,rel:"modulepreload",href:z,...t})),O.map(({key:z,link:Y})=>L.createElement("link",{key:z,nonce:t.nonce,...Y})))}function QC(...r){return e=>{r.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var YC=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{YC&&(window.__reactRouterVersion="7.11.0")}catch{}function $C({basename:r,children:e,unstable_useTransitions:t,window:i}){let o=L.useRef();o.current==null&&(o.current=RR({window:i,v5Compat:!0}));let l=o.current,[c,f]=L.useState({action:l.action,location:l.location}),p=L.useCallback(g=>{t===!1?f(g):L.startTransition(()=>f(g))},[t]);return L.useLayoutEffect(()=>l.listen(p),[l,p]),L.createElement(AC,{basename:r,children:e,location:c.location,navigationType:c.action,navigator:l,unstable_useTransitions:t})}var b1=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,qi=L.forwardRef(function({onClick:e,discover:t="render",prefetch:i="none",relative:o,reloadDocument:l,replace:c,state:f,target:p,to:g,preventScrollReset:E,viewTransition:T,unstable_defaultShouldRevalidate:S,...O},z){let{basename:Y,unstable_useTransitions:U}=L.useContext(Ln),F=typeof g=="string"&&b1.test(g),K=c1(g,Y);g=K.to;let ee=oC(g,{relative:o}),[he,de,pe]=FC(i,O),x=ZC(g,{replace:c,state:f,target:p,preventScrollReset:E,relative:o,viewTransition:T,unstable_defaultShouldRevalidate:S,unstable_useTransitions:U});function R(D){e&&e(D),D.defaultPrevented||x(D)}let C=L.createElement("a",{...O,...pe,href:K.absoluteURL||ee,onClick:K.isExternal||l?e:R,ref:QC(z,de),target:p,"data-discover":!F&&t==="render"?"true":void 0});return he&&!F?L.createElement(L.Fragment,null,C,L.createElement(HC,{page:ee})):C});qi.displayName="Link";var XC=L.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:i="",end:o=!1,style:l,to:c,viewTransition:f,children:p,...g},E){let T=Tc(c,{relative:g.relative}),S=vi(),O=L.useContext(gf),{navigator:z,basename:Y}=L.useContext(Ln),U=O!=null&&rx(T)&&f===!0,F=z.encodeLocation?z.encodeLocation(T).pathname:T.pathname,K=S.pathname,ee=O&&O.navigation&&O.navigation.location?O.navigation.location.pathname:null;t||(K=K.toLowerCase(),ee=ee?ee.toLowerCase():null,F=F.toLowerCase()),ee&&Y&&(ee=Ar(ee,Y)||ee);const he=F!=="/"&&F.endsWith("/")?F.length-1:F.length;let de=K===F||!o&&K.startsWith(F)&&K.charAt(he)==="/",pe=ee!=null&&(ee===F||!o&&ee.startsWith(F)&&ee.charAt(F.length)==="/"),x={isActive:de,isPending:pe,isTransitioning:U},R=de?e:void 0,C;typeof i=="function"?C=i(x):C=[i,de?"active":null,pe?"pending":null,U?"transitioning":null].filter(Boolean).join(" ");let D=typeof l=="function"?l(x):l;return L.createElement(qi,{...g,"aria-current":R,className:C,ref:E,style:D,to:c,viewTransition:f},typeof p=="function"?p(x):p)});XC.displayName="NavLink";var WC=L.forwardRef(({discover:r="render",fetcherKey:e,navigate:t,reloadDocument:i,replace:o,state:l,method:c=Sd,action:f,onSubmit:p,relative:g,preventScrollReset:E,viewTransition:T,unstable_defaultShouldRevalidate:S,...O},z)=>{let{unstable_useTransitions:Y}=L.useContext(Ln),U=nx(),F=ix(f,{relative:g}),K=c.toLowerCase()==="get"?"get":"post",ee=typeof f=="string"&&b1.test(f),he=de=>{if(p&&p(de),de.defaultPrevented)return;de.preventDefault();let pe=de.nativeEvent.submitter,x=pe?.getAttribute("formmethod")||c,R=()=>U(pe||de.currentTarget,{fetcherKey:e,method:x,navigate:t,replace:o,state:l,relative:g,preventScrollReset:E,viewTransition:T,unstable_defaultShouldRevalidate:S});Y&&t!==!1?L.startTransition(()=>R()):R()};return L.createElement("form",{ref:z,method:K,action:F,onSubmit:i?p:he,...O,"data-discover":!ee&&r==="render"?"true":void 0})});WC.displayName="Form";function JC(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function S1(r){let e=L.useContext(fl);return pt(e,JC(r)),e}function ZC(r,{target:e,replace:t,state:i,preventScrollReset:o,relative:l,viewTransition:c,unstable_defaultShouldRevalidate:f,unstable_useTransitions:p}={}){let g=Ec(),E=vi(),T=Tc(r,{relative:l});return L.useCallback(S=>{if(DC(S,e)){S.preventDefault();let O=t!==void 0?t:ec(E)===ec(T),z=()=>g(r,{replace:O,state:i,preventScrollReset:o,relative:l,viewTransition:c,unstable_defaultShouldRevalidate:f});p?L.startTransition(()=>z()):z()}},[E,g,T,t,i,e,r,o,l,c,f,p])}var ex=0,tx=()=>`__${String(++ex)}__`;function nx(){let{router:r}=S1("useSubmit"),{basename:e}=L.useContext(Ln),t=EC(),i=r.fetch,o=r.navigate;return L.useCallback(async(l,c={})=>{let{action:f,method:p,encType:g,formData:E,body:T}=OC(l,e);if(c.navigate===!1){let S=c.fetcherKey||tx();await i(S,t,c.action||f,{unstable_defaultShouldRevalidate:c.unstable_defaultShouldRevalidate,preventScrollReset:c.preventScrollReset,formData:E,body:T,formMethod:c.method||p,formEncType:c.encType||g,flushSync:c.flushSync})}else await o(c.action||f,{unstable_defaultShouldRevalidate:c.unstable_defaultShouldRevalidate,preventScrollReset:c.preventScrollReset,formData:E,body:T,formMethod:c.method||p,formEncType:c.encType||g,replace:c.replace,state:c.state,fromRouteId:t,flushSync:c.flushSync,viewTransition:c.viewTransition})},[i,o,e,t])}function ix(r,{relative:e}={}){let{basename:t}=L.useContext(Ln),i=L.useContext(_i);pt(i,"useFormAction must be used inside a RouteContext");let[o]=i.matches.slice(-1),l={...Tc(r||".",{relative:e})},c=vi();if(r==null){l.search=c.search;let f=new URLSearchParams(l.search),p=f.getAll("index");if(p.some(E=>E==="")){f.delete("index"),p.filter(T=>T).forEach(T=>f.append("index",T));let E=f.toString();l.search=E?`?${E}`:""}}return(!r||r===".")&&o.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(l.pathname=l.pathname==="/"?t:br([t,l.pathname])),ec(l)}function rx(r,{relative:e}={}){let t=L.useContext(d1);pt(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=S1("useViewTransitionState"),o=Tc(r,{relative:e});if(!t.isTransitioning)return!1;let l=Ar(t.currentLocation.pathname,i)||t.currentLocation.pathname,c=Ar(t.nextLocation.pathname,i)||t.nextLocation.pathname;return Fd(o.pathname,c)!=null||Fd(o.pathname,l)!=null}const sx=()=>{};var ZT={};const A1=function(r){const e=[];let t=0;for(let i=0;i<r.length;i++){let o=r.charCodeAt(i);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&i+1<r.length&&(r.charCodeAt(i+1)&64512)===56320?(o=65536+((o&1023)<<10)+(r.charCodeAt(++i)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},ax=function(r){const e=[];let t=0,i=0;for(;t<r.length;){const o=r[t++];if(o<128)e[i++]=String.fromCharCode(o);else if(o>191&&o<224){const l=r[t++];e[i++]=String.fromCharCode((o&31)<<6|l&63)}else if(o>239&&o<365){const l=r[t++],c=r[t++],f=r[t++],p=((o&7)<<18|(l&63)<<12|(c&63)<<6|f&63)-65536;e[i++]=String.fromCharCode(55296+(p>>10)),e[i++]=String.fromCharCode(56320+(p&1023))}else{const l=r[t++],c=r[t++];e[i++]=String.fromCharCode((o&15)<<12|(l&63)<<6|c&63)}}return e.join("")},w1={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let o=0;o<r.length;o+=3){const l=r[o],c=o+1<r.length,f=c?r[o+1]:0,p=o+2<r.length,g=p?r[o+2]:0,E=l>>2,T=(l&3)<<4|f>>4;let S=(f&15)<<2|g>>6,O=g&63;p||(O=64,c||(S=64)),i.push(t[E],t[T],t[S],t[O])}return i.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(A1(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):ax(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let o=0;o<r.length;){const l=t[r.charAt(o++)],f=o<r.length?t[r.charAt(o)]:0;++o;const g=o<r.length?t[r.charAt(o)]:64;++o;const T=o<r.length?t[r.charAt(o)]:64;if(++o,l==null||f==null||g==null||T==null)throw new ox;const S=l<<2|f>>4;if(i.push(S),g!==64){const O=f<<4&240|g>>2;if(i.push(O),T!==64){const z=g<<6&192|T;i.push(z)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class ox extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const lx=function(r){const e=A1(r);return w1.encodeByteArray(e,!0)},Hd=function(r){return lx(r).replace(/\./g,"")},I1=function(r){try{return w1.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function R1(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const ux=()=>R1().__FIREBASE_DEFAULTS__,cx=()=>{if(typeof process>"u"||typeof ZT>"u")return;const r=ZT.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},hx=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&I1(r[1]);return e&&JSON.parse(e)},_f=()=>{try{return sx()||ux()||cx()||hx()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},C1=r=>_f()?.emulatorHosts?.[r],dx=r=>{const e=C1(r);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},x1=()=>_f()?.config,D1=r=>_f()?.[`_${r}`];class fx{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}function pl(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function N1(r){return(await fetch(r,{credentials:"include"})).ok}function mx(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",o=r.iat||0,l=r.sub||r.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c={iss:`https://securetoken.google.com/${i}`,aud:i,iat:o,exp:o+3600,auth_time:o,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}},...r};return[Hd(JSON.stringify(t)),Hd(JSON.stringify(c)),""].join(".")}const Hu={};function px(){const r={prod:[],emulator:[]};for(const e of Object.keys(Hu))Hu[e]?r.emulator.push(e):r.prod.push(e);return r}function gx(r){let e=document.getElementById(r),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),t=!0),{created:t,element:e}}let e0=!1;function V1(r,e){if(typeof window>"u"||typeof document>"u"||!pl(window.location.host)||Hu[r]===e||Hu[r]||e0)return;Hu[r]=e;function t(S){return`__firebase__banner__${S}`}const i="__firebase__banner",l=px().prod.length>0;function c(){const S=document.getElementById(i);S&&S.remove()}function f(S){S.style.display="flex",S.style.background="#7faaf0",S.style.position="fixed",S.style.bottom="5px",S.style.left="5px",S.style.padding=".5em",S.style.borderRadius="5px",S.style.alignItems="center"}function p(S,O){S.setAttribute("width","24"),S.setAttribute("id",O),S.setAttribute("height","24"),S.setAttribute("viewBox","0 0 24 24"),S.setAttribute("fill","none"),S.style.marginLeft="-6px"}function g(){const S=document.createElement("span");return S.style.cursor="pointer",S.style.marginLeft="16px",S.style.fontSize="24px",S.innerHTML=" &times;",S.onclick=()=>{e0=!0,c()},S}function E(S,O){S.setAttribute("id",O),S.innerText="Learn more",S.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",S.setAttribute("target","__blank"),S.style.paddingLeft="5px",S.style.textDecoration="underline"}function T(){const S=gx(i),O=t("text"),z=document.getElementById(O)||document.createElement("span"),Y=t("learnmore"),U=document.getElementById(Y)||document.createElement("a"),F=t("preprendIcon"),K=document.getElementById(F)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(S.created){const ee=S.element;f(ee),E(U,Y);const he=g();p(K,F),ee.append(K,z,U,he),document.body.appendChild(ee)}l?(z.innerText="Preview backend disconnected.",K.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(K.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,z.innerText="Preview backend running in this workspace."),z.setAttribute("id",O)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",T):T()}function Ft(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function yx(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ft())}function O1(){const r=_f()?.forceEnvironment;if(r==="node")return!0;if(r==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function _x(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function vx(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function Ex(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Tx(){const r=Ft();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function M1(){return!O1()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function P1(){return!O1()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function k1(){try{return typeof indexedDB=="object"}catch{return!1}}function bx(){return new Promise((r,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(i);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(i),r(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{e(o.error?.message||"")}}catch(t){e(t)}})}const Sx="FirebaseError";class xr extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=Sx,Object.setPrototypeOf(this,xr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,bc.prototype.create)}}class bc{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},o=`${this.service}/${e}`,l=this.errors[e],c=l?Ax(l,i):"Error",f=`${this.serviceName}: ${c} (${o}).`;return new xr(o,f,i)}}function Ax(r,e){return r.replace(wx,(t,i)=>{const o=e[i];return o!=null?String(o):`<${i}?>`})}const wx=/\{\$([^}]+)}/g;function Ix(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function Ia(r,e){if(r===e)return!0;const t=Object.keys(r),i=Object.keys(e);for(const o of t){if(!i.includes(o))return!1;const l=r[o],c=e[o];if(t0(l)&&t0(c)){if(!Ia(l,c))return!1}else if(l!==c)return!1}for(const o of i)if(!t.includes(o))return!1;return!0}function t0(r){return r!==null&&typeof r=="object"}function Sc(r){const e=[];for(const[t,i]of Object.entries(r))Array.isArray(i)?i.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function Lu(r){const e={};return r.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[o,l]=i.split("=");e[decodeURIComponent(o)]=decodeURIComponent(l)}}),e}function Uu(r){const e=r.indexOf("?");if(!e)return"";const t=r.indexOf("#",e);return r.substring(e,t>0?t:void 0)}function Rx(r,e){const t=new Cx(r,e);return t.subscribe.bind(t)}class Cx{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let o;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");xx(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:i},o.next===void 0&&(o.next=Zp),o.error===void 0&&(o.error=Zp),o.complete===void 0&&(o.complete=Zp);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function xx(r,e){if(typeof r!="object"||r===null)return!1;for(const t of e)if(t in r&&typeof r[t]=="function")return!0;return!1}function Zp(){}function Ht(r){return r&&r._delegate?r._delegate:r}class Ra{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const ma="[DEFAULT]";class Dx{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new fx;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&i.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),i=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Vx(e))try{this.getOrInitializeService({instanceIdentifier:ma})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:o});i.resolve(l)}catch{}}}}clearInstance(e=ma){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ma){return this.instances.has(e)}getOptions(e=ma){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[l,c]of this.instancesDeferred.entries()){const f=this.normalizeInstanceIdentifier(l);i===f&&c.resolve(o)}return o}onInit(e,t){const i=this.normalizeInstanceIdentifier(t),o=this.onInitCallbacks.get(i)??new Set;o.add(e),this.onInitCallbacks.set(i,o);const l=this.instances.get(i);return l&&e(l,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const o of i)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:Nx(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=ma){return this.component?this.component.multipleInstances?e:ma:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Nx(r){return r===ma?void 0:r}function Vx(r){return r.instantiationMode==="EAGER"}class Ox{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new Dx(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}var qe;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(qe||(qe={}));const Mx={debug:qe.DEBUG,verbose:qe.VERBOSE,info:qe.INFO,warn:qe.WARN,error:qe.ERROR,silent:qe.SILENT},Px=qe.INFO,kx={[qe.DEBUG]:"log",[qe.VERBOSE]:"log",[qe.INFO]:"info",[qe.WARN]:"warn",[qe.ERROR]:"error"},Lx=(r,e,...t)=>{if(e<r.logLevel)return;const i=new Date().toISOString(),o=kx[e];if(o)console[o](`[${i}]  ${r.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class hy{constructor(e){this.name=e,this._logLevel=Px,this._logHandler=Lx,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in qe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Mx[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,qe.DEBUG,...e),this._logHandler(this,qe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,qe.VERBOSE,...e),this._logHandler(this,qe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,qe.INFO,...e),this._logHandler(this,qe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,qe.WARN,...e),this._logHandler(this,qe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,qe.ERROR,...e),this._logHandler(this,qe.ERROR,...e)}}const Ux=(r,e)=>e.some(t=>r instanceof t);let n0,i0;function Bx(){return n0||(n0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function zx(){return i0||(i0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const L1=new WeakMap,Sg=new WeakMap,U1=new WeakMap,eg=new WeakMap,dy=new WeakMap;function jx(r){const e=new Promise((t,i)=>{const o=()=>{r.removeEventListener("success",l),r.removeEventListener("error",c)},l=()=>{t(Ts(r.result)),o()},c=()=>{i(r.error),o()};r.addEventListener("success",l),r.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&L1.set(t,r)}).catch(()=>{}),dy.set(e,r),e}function qx(r){if(Sg.has(r))return;const e=new Promise((t,i)=>{const o=()=>{r.removeEventListener("complete",l),r.removeEventListener("error",c),r.removeEventListener("abort",c)},l=()=>{t(),o()},c=()=>{i(r.error||new DOMException("AbortError","AbortError")),o()};r.addEventListener("complete",l),r.addEventListener("error",c),r.addEventListener("abort",c)});Sg.set(r,e)}let Ag={get(r,e,t){if(r instanceof IDBTransaction){if(e==="done")return Sg.get(r);if(e==="objectStoreNames")return r.objectStoreNames||U1.get(r);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Ts(r[e])},set(r,e,t){return r[e]=t,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function Fx(r){Ag=r(Ag)}function Hx(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=r.call(tg(this),e,...t);return U1.set(i,e.sort?e.sort():[e]),Ts(i)}:zx().includes(r)?function(...e){return r.apply(tg(this),e),Ts(L1.get(this))}:function(...e){return Ts(r.apply(tg(this),e))}}function Gx(r){return typeof r=="function"?Hx(r):(r instanceof IDBTransaction&&qx(r),Ux(r,Bx())?new Proxy(r,Ag):r)}function Ts(r){if(r instanceof IDBRequest)return jx(r);if(eg.has(r))return eg.get(r);const e=Gx(r);return e!==r&&(eg.set(r,e),dy.set(e,r)),e}const tg=r=>dy.get(r);function Kx(r,e,{blocked:t,upgrade:i,blocking:o,terminated:l}={}){const c=indexedDB.open(r,e),f=Ts(c);return i&&c.addEventListener("upgradeneeded",p=>{i(Ts(c.result),p.oldVersion,p.newVersion,Ts(c.transaction),p)}),t&&c.addEventListener("blocked",p=>t(p.oldVersion,p.newVersion,p)),f.then(p=>{l&&p.addEventListener("close",()=>l()),o&&p.addEventListener("versionchange",g=>o(g.oldVersion,g.newVersion,g))}).catch(()=>{}),f}const Qx=["get","getKey","getAll","getAllKeys","count"],Yx=["put","add","delete","clear"],ng=new Map;function r0(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(ng.get(e))return ng.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,o=Yx.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(o||Qx.includes(t)))return;const l=async function(c,...f){const p=this.transaction(c,o?"readwrite":"readonly");let g=p.store;return i&&(g=g.index(f.shift())),(await Promise.all([g[t](...f),o&&p.done]))[0]};return ng.set(e,l),l}Fx(r=>({...r,get:(e,t,i)=>r0(e,t)||r.get(e,t,i),has:(e,t)=>!!r0(e,t)||r.has(e,t)}));class $x{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(Xx(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function Xx(r){return r.getComponent()?.type==="VERSION"}const wg="@firebase/app",s0="0.14.6";const wr=new hy("@firebase/app"),Wx="@firebase/app-compat",Jx="@firebase/analytics-compat",Zx="@firebase/analytics",e2="@firebase/app-check-compat",t2="@firebase/app-check",n2="@firebase/auth",i2="@firebase/auth-compat",r2="@firebase/database",s2="@firebase/data-connect",a2="@firebase/database-compat",o2="@firebase/functions",l2="@firebase/functions-compat",u2="@firebase/installations",c2="@firebase/installations-compat",h2="@firebase/messaging",d2="@firebase/messaging-compat",f2="@firebase/performance",m2="@firebase/performance-compat",p2="@firebase/remote-config",g2="@firebase/remote-config-compat",y2="@firebase/storage",_2="@firebase/storage-compat",v2="@firebase/firestore",E2="@firebase/ai",T2="@firebase/firestore-compat",b2="firebase",S2="12.6.0";const Ig="[DEFAULT]",A2={[wg]:"fire-core",[Wx]:"fire-core-compat",[Zx]:"fire-analytics",[Jx]:"fire-analytics-compat",[t2]:"fire-app-check",[e2]:"fire-app-check-compat",[n2]:"fire-auth",[i2]:"fire-auth-compat",[r2]:"fire-rtdb",[s2]:"fire-data-connect",[a2]:"fire-rtdb-compat",[o2]:"fire-fn",[l2]:"fire-fn-compat",[u2]:"fire-iid",[c2]:"fire-iid-compat",[h2]:"fire-fcm",[d2]:"fire-fcm-compat",[f2]:"fire-perf",[m2]:"fire-perf-compat",[p2]:"fire-rc",[g2]:"fire-rc-compat",[y2]:"fire-gcs",[_2]:"fire-gcs-compat",[v2]:"fire-fst",[T2]:"fire-fst-compat",[E2]:"fire-vertex","fire-js":"fire-js",[b2]:"fire-js-all"};const Gd=new Map,w2=new Map,Rg=new Map;function a0(r,e){try{r.container.addComponent(e)}catch(t){wr.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,t)}}function Xo(r){const e=r.name;if(Rg.has(e))return wr.debug(`There were multiple attempts to register component ${e}.`),!1;Rg.set(e,r);for(const t of Gd.values())a0(t,r);for(const t of w2.values())a0(t,r);return!0}function fy(r,e){const t=r.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),r.container.getProvider(e)}function pi(r){return r==null?!1:r.settings!==void 0}const I2={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},bs=new bc("app","Firebase",I2);class R2{constructor(e,t,i){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Ra("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw bs.create("app-deleted",{appName:this._name})}}const gl=S2;function B1(r,e={}){let t=r;typeof e!="object"&&(e={name:e});const i={name:Ig,automaticDataCollectionEnabled:!0,...e},o=i.name;if(typeof o!="string"||!o)throw bs.create("bad-app-name",{appName:String(o)});if(t||(t=x1()),!t)throw bs.create("no-options");const l=Gd.get(o);if(l){if(Ia(t,l.options)&&Ia(i,l.config))return l;throw bs.create("duplicate-app",{appName:o})}const c=new Ox(o);for(const p of Rg.values())c.addComponent(p);const f=new R2(t,i,c);return Gd.set(o,f),f}function z1(r=Ig){const e=Gd.get(r);if(!e&&r===Ig&&x1())return B1();if(!e)throw bs.create("no-app",{appName:r});return e}function Ss(r,e,t){let i=A2[r]??r;t&&(i+=`-${t}`);const o=i.match(/\s|\//),l=e.match(/\s|\//);if(o||l){const c=[`Unable to register library "${i}" with version "${e}":`];o&&c.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&l&&c.push("and"),l&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),wr.warn(c.join(" "));return}Xo(new Ra(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}const C2="firebase-heartbeat-database",x2=1,tc="firebase-heartbeat-store";let ig=null;function j1(){return ig||(ig=Kx(C2,x2,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(tc)}catch(t){console.warn(t)}}}}).catch(r=>{throw bs.create("idb-open",{originalErrorMessage:r.message})})),ig}async function D2(r){try{const t=(await j1()).transaction(tc),i=await t.objectStore(tc).get(q1(r));return await t.done,i}catch(e){if(e instanceof xr)wr.warn(e.message);else{const t=bs.create("idb-get",{originalErrorMessage:e?.message});wr.warn(t.message)}}}async function o0(r,e){try{const i=(await j1()).transaction(tc,"readwrite");await i.objectStore(tc).put(e,q1(r)),await i.done}catch(t){if(t instanceof xr)wr.warn(t.message);else{const i=bs.create("idb-set",{originalErrorMessage:t?.message});wr.warn(i.message)}}}function q1(r){return`${r.name}!${r.options.appId}`}const N2=1024,V2=30;class O2{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new P2(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=l0();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:t}),this._heartbeatsCache.heartbeats.length>V2){const o=k2(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){wr.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=l0(),{heartbeatsToSend:t,unsentEntries:i}=M2(this._heartbeatsCache.heartbeats),o=Hd(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(e){return wr.warn(e),""}}}function l0(){return new Date().toISOString().substring(0,10)}function M2(r,e=N2){const t=[];let i=r.slice();for(const o of r){const l=t.find(c=>c.agent===o.agent);if(l){if(l.dates.push(o.date),u0(t)>e){l.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),u0(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class P2{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return k1()?bx().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await D2(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return o0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return o0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function u0(r){return Hd(JSON.stringify({version:2,heartbeats:r})).length}function k2(r){if(r.length===0)return-1;let e=0,t=r[0].date;for(let i=1;i<r.length;i++)r[i].date<t&&(t=r[i].date,e=i);return e}function L2(r){Xo(new Ra("platform-logger",e=>new $x(e),"PRIVATE")),Xo(new Ra("heartbeat",e=>new O2(e),"PRIVATE")),Ss(wg,s0,r),Ss(wg,s0,"esm2020"),Ss("fire-js","")}L2("");function F1(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const U2=F1,H1=new bc("auth","Firebase",F1());const Kd=new hy("@firebase/auth");function B2(r,...e){Kd.logLevel<=qe.WARN&&Kd.warn(`Auth (${gl}): ${r}`,...e)}function wd(r,...e){Kd.logLevel<=qe.ERROR&&Kd.error(`Auth (${gl}): ${r}`,...e)}function yi(r,...e){throw my(r,...e)}function Yi(r,...e){return my(r,...e)}function G1(r,e,t){const i={...U2(),[e]:t};return new bc("auth","Firebase",i).create(e,{appName:r.name})}function As(r){return G1(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function my(r,...e){if(typeof r!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=r.name),r._errorFactory.create(t,...i)}return H1.create(r,...e)}function Ae(r,e,...t){if(!r)throw my(e,...t)}function vr(r){const e="INTERNAL ASSERTION FAILED: "+r;throw wd(e),new Error(e)}function Ir(r,e){r||vr(e)}function Cg(){return typeof self<"u"&&self.location?.href||""}function z2(){return c0()==="http:"||c0()==="https:"}function c0(){return typeof self<"u"&&self.location?.protocol||null}function j2(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(z2()||vx()||"connection"in navigator)?navigator.onLine:!0}function q2(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}class Ac{constructor(e,t){this.shortDelay=e,this.longDelay=t,Ir(t>e,"Short delay should be less than long delay!"),this.isMobile=yx()||Ex()}get(){return j2()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function py(r,e){Ir(r.emulator,"Emulator should always be set here");const{url:t}=r.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}class K1{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;vr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;vr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;vr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const F2={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const H2=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],G2=new Ac(3e4,6e4);function Ua(r,e){return r.tenantId&&!e.tenantId?{...e,tenantId:r.tenantId}:e}async function Ms(r,e,t,i,o={}){return Q1(r,o,async()=>{let l={},c={};i&&(e==="GET"?c=i:l={body:JSON.stringify(i)});const f=Sc({key:r.config.apiKey,...c}).slice(1),p=await r._getAdditionalHeaders();p["Content-Type"]="application/json",r.languageCode&&(p["X-Firebase-Locale"]=r.languageCode);const g={method:e,headers:p,...l};return _x()||(g.referrerPolicy="no-referrer"),r.emulatorConfig&&pl(r.emulatorConfig.host)&&(g.credentials="include"),K1.fetch()(await Y1(r,r.config.apiHost,t,f),g)})}async function Q1(r,e,t){r._canInitEmulator=!1;const i={...F2,...e};try{const o=new Q2(r),l=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const c=await l.json();if("needConfirmation"in c)throw fd(r,"account-exists-with-different-credential",c);if(l.ok&&!("errorMessage"in c))return c;{const f=l.ok?c.errorMessage:c.error.message,[p,g]=f.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw fd(r,"credential-already-in-use",c);if(p==="EMAIL_EXISTS")throw fd(r,"email-already-in-use",c);if(p==="USER_DISABLED")throw fd(r,"user-disabled",c);const E=i[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(g)throw G1(r,E,g);yi(r,E)}}catch(o){if(o instanceof xr)throw o;yi(r,"network-request-failed",{message:String(o)})}}async function vf(r,e,t,i,o={}){const l=await Ms(r,e,t,i,o);return"mfaPendingCredential"in l&&yi(r,"multi-factor-auth-required",{_serverResponse:l}),l}async function Y1(r,e,t,i){const o=`${e}${t}?${i}`,l=r,c=l.config.emulator?py(r.config,o):`${r.config.apiScheme}://${o}`;return H2.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(c).toString():c}function K2(r){switch(r){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Q2{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(Yi(this.auth,"network-request-failed")),G2.get())})}}function fd(r,e,t){const i={appName:r.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const o=Yi(r,e,i);return o.customData._tokenResponse=t,o}function h0(r){return r!==void 0&&r.enterprise!==void 0}class Y2{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return K2(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function $2(r,e){return Ms(r,"GET","/v2/recaptchaConfig",Ua(r,e))}async function X2(r,e){return Ms(r,"POST","/v1/accounts:delete",e)}async function Qd(r,e){return Ms(r,"POST","/v1/accounts:lookup",e)}function Gu(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function W2(r,e=!1){const t=Ht(r),i=await t.getIdToken(e),o=gy(i);Ae(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const l=typeof o.firebase=="object"?o.firebase:void 0,c=l?.sign_in_provider;return{claims:o,token:i,authTime:Gu(rg(o.auth_time)),issuedAtTime:Gu(rg(o.iat)),expirationTime:Gu(rg(o.exp)),signInProvider:c||null,signInSecondFactor:l?.sign_in_second_factor||null}}function rg(r){return Number(r)*1e3}function gy(r){const[e,t,i]=r.split(".");if(e===void 0||t===void 0||i===void 0)return wd("JWT malformed, contained fewer than 3 sections"),null;try{const o=I1(t);return o?JSON.parse(o):(wd("Failed to decode base64 JWT payload"),null)}catch(o){return wd("Caught error parsing JWT payload as JSON",o?.toString()),null}}function d0(r){const e=gy(r);return Ae(e,"internal-error"),Ae(typeof e.exp<"u","internal-error"),Ae(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function nc(r,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof xr&&J2(i)&&r.auth.currentUser===r&&await r.auth.signOut(),i}}function J2({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}class Z2{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class xg{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Gu(this.lastLoginAt),this.creationTime=Gu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Yd(r){const e=r.auth,t=await r.getIdToken(),i=await nc(r,Qd(e,{idToken:t}));Ae(i?.users.length,e,"internal-error");const o=i.users[0];r._notifyReloadListener(o);const l=o.providerUserInfo?.length?$1(o.providerUserInfo):[],c=tD(r.providerData,l),f=r.isAnonymous,p=!(r.email&&o.passwordHash)&&!c?.length,g=f?p:!1,E={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:c,metadata:new xg(o.createdAt,o.lastLoginAt),isAnonymous:g};Object.assign(r,E)}async function eD(r){const e=Ht(r);await Yd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function tD(r,e){return[...r.filter(i=>!e.some(o=>o.providerId===i.providerId)),...e]}function $1(r){return r.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}async function nD(r,e){const t=await Q1(r,{},async()=>{const i=Sc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:l}=r.config,c=await Y1(r,o,"/v1/token",`key=${l}`),f=await r._getAdditionalHeaders();f["Content-Type"]="application/x-www-form-urlencoded";const p={method:"POST",headers:f,body:i};return r.emulatorConfig&&pl(r.emulatorConfig.host)&&(p.credentials="include"),K1.fetch()(c,p)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function iD(r,e){return Ms(r,"POST","/v2/accounts:revokeToken",Ua(r,e))}class Ho{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ae(e.idToken,"internal-error"),Ae(typeof e.idToken<"u","internal-error"),Ae(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):d0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ae(e.length!==0,"internal-error");const t=d0(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Ae(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:o,expiresIn:l}=await nD(e,t);this.updateTokensAndExpiration(i,o,Number(l))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:o,expirationTime:l}=t,c=new Ho;return i&&(Ae(typeof i=="string","internal-error",{appName:e}),c.refreshToken=i),o&&(Ae(typeof o=="string","internal-error",{appName:e}),c.accessToken=o),l&&(Ae(typeof l=="number","internal-error",{appName:e}),c.expirationTime=l),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ho,this.toJSON())}_performRefresh(){return vr("not implemented")}}function hs(r,e){Ae(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class gi{constructor({uid:e,auth:t,stsTokenManager:i,...o}){this.providerId="firebase",this.proactiveRefresh=new Z2(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new xg(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const t=await nc(this,this.stsTokenManager.getToken(this.auth,e));return Ae(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return W2(this,e)}reload(){return eD(this)}_assign(e){this!==e&&(Ae(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new gi({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Ae(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await Yd(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(pi(this.auth.app))return Promise.reject(As(this.auth));const e=await this.getIdToken();return await nc(this,X2(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const i=t.displayName??void 0,o=t.email??void 0,l=t.phoneNumber??void 0,c=t.photoURL??void 0,f=t.tenantId??void 0,p=t._redirectEventId??void 0,g=t.createdAt??void 0,E=t.lastLoginAt??void 0,{uid:T,emailVerified:S,isAnonymous:O,providerData:z,stsTokenManager:Y}=t;Ae(T&&Y,e,"internal-error");const U=Ho.fromJSON(this.name,Y);Ae(typeof T=="string",e,"internal-error"),hs(i,e.name),hs(o,e.name),Ae(typeof S=="boolean",e,"internal-error"),Ae(typeof O=="boolean",e,"internal-error"),hs(l,e.name),hs(c,e.name),hs(f,e.name),hs(p,e.name),hs(g,e.name),hs(E,e.name);const F=new gi({uid:T,auth:e,email:o,emailVerified:S,displayName:i,isAnonymous:O,photoURL:c,phoneNumber:l,tenantId:f,stsTokenManager:U,createdAt:g,lastLoginAt:E});return z&&Array.isArray(z)&&(F.providerData=z.map(K=>({...K}))),p&&(F._redirectEventId=p),F}static async _fromIdTokenResponse(e,t,i=!1){const o=new Ho;o.updateFromServerResponse(t);const l=new gi({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:i});return await Yd(l),l}static async _fromGetAccountInfoResponse(e,t,i){const o=t.users[0];Ae(o.localId!==void 0,"internal-error");const l=o.providerUserInfo!==void 0?$1(o.providerUserInfo):[],c=!(o.email&&o.passwordHash)&&!l?.length,f=new Ho;f.updateFromIdToken(i);const p=new gi({uid:o.localId,auth:e,stsTokenManager:f,isAnonymous:c}),g={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:l,metadata:new xg(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!l?.length};return Object.assign(p,g),p}}const f0=new Map;function Er(r){Ir(r instanceof Function,"Expected a class definition");let e=f0.get(r);return e?(Ir(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,f0.set(r,e),e)}class X1{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}X1.type="NONE";const m0=X1;function Id(r,e,t){return`firebase:${r}:${e}:${t}`}class Go{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:o,name:l}=this.auth;this.fullUserKey=Id(this.userKey,o.apiKey,l),this.fullPersistenceKey=Id("persistence",o.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Qd(this.auth,{idToken:e}).catch(()=>{});return t?gi._fromGetAccountInfoResponse(this.auth,t,e):null}return gi._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new Go(Er(m0),e,i);const o=(await Promise.all(t.map(async g=>{if(await g._isAvailable())return g}))).filter(g=>g);let l=o[0]||Er(m0);const c=Id(i,e.config.apiKey,e.name);let f=null;for(const g of t)try{const E=await g._get(c);if(E){let T;if(typeof E=="string"){const S=await Qd(e,{idToken:E}).catch(()=>{});if(!S)break;T=await gi._fromGetAccountInfoResponse(e,S,E)}else T=gi._fromJSON(e,E);g!==l&&(f=T),l=g;break}}catch{}const p=o.filter(g=>g._shouldAllowMigration);return!l._shouldAllowMigration||!p.length?new Go(l,e,i):(l=p[0],f&&await l._set(c,f.toJSON()),await Promise.all(t.map(async g=>{if(g!==l)try{await g._remove(c)}catch{}})),new Go(l,e,i))}}function p0(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(eS(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(W1(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(nS(e))return"Blackberry";if(iS(e))return"Webos";if(J1(e))return"Safari";if((e.includes("chrome/")||Z1(e))&&!e.includes("edge/"))return"Chrome";if(tS(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=r.match(t);if(i?.length===2)return i[1]}return"Other"}function W1(r=Ft()){return/firefox\//i.test(r)}function J1(r=Ft()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Z1(r=Ft()){return/crios\//i.test(r)}function eS(r=Ft()){return/iemobile/i.test(r)}function tS(r=Ft()){return/android/i.test(r)}function nS(r=Ft()){return/blackberry/i.test(r)}function iS(r=Ft()){return/webos/i.test(r)}function yy(r=Ft()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function rD(r=Ft()){return yy(r)&&!!window.navigator?.standalone}function sD(){return Tx()&&document.documentMode===10}function rS(r=Ft()){return yy(r)||tS(r)||iS(r)||nS(r)||/windows phone/i.test(r)||eS(r)}function sS(r,e=[]){let t;switch(r){case"Browser":t=p0(Ft());break;case"Worker":t=`${p0(Ft())}-${r}`;break;default:t=r}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${gl}/${i}`}class aD{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=l=>new Promise((c,f)=>{try{const p=e(l);c(p)}catch(p){f(p)}});i.onAbort=t,this.queue.push(i);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}}}async function oD(r,e={}){return Ms(r,"GET","/v2/passwordPolicy",Ua(r,e))}const lD=6;class uD{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??lD,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let o=0;o<e.length;o++)i=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,o,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}class cD{constructor(e,t,i,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new g0(this),this.idTokenSubscription=new g0(this),this.beforeStateQueue=new aD(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=H1,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Er(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Go.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Qd(this,{idToken:e}),i=await gi._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(pi(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(c,c))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let i=t,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=this.redirectUser?._redirectEventId,c=i?._redirectEventId,f=await this.tryRedirectSignIn(e);(!l||l===c)&&f?.user&&(i=f.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(i)}catch(l){i=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Ae(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Yd(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=q2()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(pi(this.app))return Promise.reject(As(this));const t=e?Ht(e):null;return t&&Ae(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Ae(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return pi(this.app)?Promise.reject(As(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return pi(this.app)?Promise.reject(As(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Er(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await oD(this),t=new uD(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new bc("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await iD(this,i)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Er(e)||this._popupRedirectResolver;Ae(t,this,"argument-error"),this.redirectPersistenceManager=await Go.create(this,[Er(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,o){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let c=!1;const f=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ae(f,this,"internal-error"),f.then(()=>{c||l(this.currentUser)}),typeof t=="function"){const p=e.addObserver(t,i,o);return()=>{c=!0,p()}}else{const p=e.addObserver(t);return()=>{c=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ae(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=sS(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){if(pi(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&B2(`Error while retrieving App Check token: ${e.error}`),e?.token}}function yl(r){return Ht(r)}class g0{constructor(e){this.auth=e,this.observer=null,this.addObserver=Rx(t=>this.observer=t)}get next(){return Ae(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Ef={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function hD(r){Ef=r}function aS(r){return Ef.loadJS(r)}function dD(){return Ef.recaptchaEnterpriseScript}function fD(){return Ef.gapiScript}function mD(r){return`__${r}${Math.floor(Math.random()*1e6)}`}class pD{constructor(){this.enterprise=new gD}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class gD{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const yD="recaptcha-enterprise",oS="NO_RECAPTCHA";class _D{constructor(e){this.type=yD,this.auth=yl(e)}async verify(e="verify",t=!1){async function i(l){if(!t){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(c,f)=>{$2(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(p=>{if(p.recaptchaKey===void 0)f(new Error("recaptcha Enterprise site key undefined"));else{const g=new Y2(p);return l.tenantId==null?l._agentRecaptchaConfig=g:l._tenantRecaptchaConfigs[l.tenantId]=g,c(g.siteKey)}}).catch(p=>{f(p)})})}function o(l,c,f){const p=window.grecaptcha;h0(p)?p.enterprise.ready(()=>{p.enterprise.execute(l,{action:e}).then(g=>{c(g)}).catch(()=>{c(oS)})}):f(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new pD().execute("siteKey",{action:"verify"}):new Promise((l,c)=>{i(this.auth).then(f=>{if(!t&&h0(window.grecaptcha))o(f,l,c);else{if(typeof window>"u"){c(new Error("RecaptchaVerifier is only supported in browser"));return}let p=dD();p.length!==0&&(p+=f),aS(p).then(()=>{o(f,l,c)}).catch(g=>{c(g)})}}).catch(f=>{c(f)})})}}async function y0(r,e,t,i=!1,o=!1){const l=new _D(r);let c;if(o)c=oS;else try{c=await l.verify(t)}catch{c=await l.verify(t,!0)}const f={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in f){const p=f.phoneEnrollmentInfo.phoneNumber,g=f.phoneEnrollmentInfo.recaptchaToken;Object.assign(f,{phoneEnrollmentInfo:{phoneNumber:p,recaptchaToken:g,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in f){const p=f.phoneSignInInfo.recaptchaToken;Object.assign(f,{phoneSignInInfo:{recaptchaToken:p,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return f}return i?Object.assign(f,{captchaResp:c}):Object.assign(f,{captchaResponse:c}),Object.assign(f,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(f,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),f}async function _0(r,e,t,i,o){if(r._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const l=await y0(r,e,t,t==="getOobCode");return i(r,l)}else return i(r,e).catch(async l=>{if(l.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const c=await y0(r,e,t,t==="getOobCode");return i(r,c)}else return Promise.reject(l)})}function vD(r,e){const t=fy(r,"auth");if(t.isInitialized()){const o=t.getImmediate(),l=t.getOptions();if(Ia(l,e??{}))return o;yi(o,"already-initialized")}return t.initialize({options:e})}function ED(r,e){const t=e?.persistence||[],i=(Array.isArray(t)?t:[t]).map(Er);e?.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(i,e?.popupRedirectResolver)}function TD(r,e,t){const i=yl(r);Ae(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const o=!1,l=lS(e),{host:c,port:f}=bD(e),p=f===null?"":`:${f}`,g={url:`${l}//${c}${p}/`},E=Object.freeze({host:c,port:f,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!i._canInitEmulator){Ae(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),Ae(Ia(g,i.config.emulator)&&Ia(E,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=g,i.emulatorConfig=E,i.settings.appVerificationDisabledForTesting=!0,pl(c)?(N1(`${l}//${c}${p}`),V1("Auth",!0)):SD()}function lS(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function bD(r){const e=lS(r),t=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(i);if(o){const l=o[1];return{host:l,port:v0(i.substr(l.length+1))}}else{const[l,c]=i.split(":");return{host:l,port:v0(c)}}}function v0(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function SD(){function r(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}class _y{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return vr("not implemented")}_getIdTokenResponse(e){return vr("not implemented")}_linkToIdToken(e,t){return vr("not implemented")}_getReauthenticationResolver(e){return vr("not implemented")}}async function AD(r,e){return Ms(r,"POST","/v1/accounts:signUp",e)}async function wD(r,e){return vf(r,"POST","/v1/accounts:signInWithPassword",Ua(r,e))}async function ID(r,e){return vf(r,"POST","/v1/accounts:signInWithEmailLink",Ua(r,e))}async function RD(r,e){return vf(r,"POST","/v1/accounts:signInWithEmailLink",Ua(r,e))}class ic extends _y{constructor(e,t,i,o=null){super("password",i),this._email=e,this._password=t,this._tenantId=o}static _fromEmailAndPassword(e,t){return new ic(e,t,"password")}static _fromEmailAndCode(e,t,i=null){return new ic(e,t,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return _0(e,t,"signInWithPassword",wD);case"emailLink":return ID(e,{email:this._email,oobCode:this._password});default:yi(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const i={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return _0(e,i,"signUpPassword",AD);case"emailLink":return RD(e,{idToken:t,email:this._email,oobCode:this._password});default:yi(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function Ko(r,e){return vf(r,"POST","/v1/accounts:signInWithIdp",Ua(r,e))}const CD="http://localhost";class Ca extends _y{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Ca(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):yi("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:o,...l}=t;if(!i||!o)return null;const c=new Ca(i,o);return c.idToken=l.idToken||void 0,c.accessToken=l.accessToken||void 0,c.secret=l.secret,c.nonce=l.nonce,c.pendingToken=l.pendingToken||null,c}_getIdTokenResponse(e){const t=this.buildRequest();return Ko(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,Ko(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Ko(e,t)}buildRequest(){const e={requestUri:CD,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Sc(t)}return e}}function xD(r){switch(r){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function DD(r){const e=Lu(Uu(r)).link,t=e?Lu(Uu(e)).deep_link_id:null,i=Lu(Uu(r)).deep_link_id;return(i?Lu(Uu(i)).link:null)||i||t||e||r}class vy{constructor(e){const t=Lu(Uu(e)),i=t.apiKey??null,o=t.oobCode??null,l=xD(t.mode??null);Ae(i&&o&&l,"argument-error"),this.apiKey=i,this.operation=l,this.code=o,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=DD(e);try{return new vy(t)}catch{return null}}}class _l{constructor(){this.providerId=_l.PROVIDER_ID}static credential(e,t){return ic._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const i=vy.parseLink(t);return Ae(i,"argument-error"),ic._fromEmailAndCode(e,i.code,i.tenantId)}}_l.PROVIDER_ID="password";_l.EMAIL_PASSWORD_SIGN_IN_METHOD="password";_l.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class uS{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class wc extends uS{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class ps extends wc{constructor(){super("facebook.com")}static credential(e){return Ca._fromParams({providerId:ps.PROVIDER_ID,signInMethod:ps.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ps.credentialFromTaggedObject(e)}static credentialFromError(e){return ps.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ps.credential(e.oauthAccessToken)}catch{return null}}}ps.FACEBOOK_SIGN_IN_METHOD="facebook.com";ps.PROVIDER_ID="facebook.com";class gs extends wc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Ca._fromParams({providerId:gs.PROVIDER_ID,signInMethod:gs.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return gs.credentialFromTaggedObject(e)}static credentialFromError(e){return gs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return gs.credential(t,i)}catch{return null}}}gs.GOOGLE_SIGN_IN_METHOD="google.com";gs.PROVIDER_ID="google.com";class ys extends wc{constructor(){super("github.com")}static credential(e){return Ca._fromParams({providerId:ys.PROVIDER_ID,signInMethod:ys.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ys.credentialFromTaggedObject(e)}static credentialFromError(e){return ys.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ys.credential(e.oauthAccessToken)}catch{return null}}}ys.GITHUB_SIGN_IN_METHOD="github.com";ys.PROVIDER_ID="github.com";class _s extends wc{constructor(){super("twitter.com")}static credential(e,t){return Ca._fromParams({providerId:_s.PROVIDER_ID,signInMethod:_s.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return _s.credentialFromTaggedObject(e)}static credentialFromError(e){return _s.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return _s.credential(t,i)}catch{return null}}}_s.TWITTER_SIGN_IN_METHOD="twitter.com";_s.PROVIDER_ID="twitter.com";class Wo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,o=!1){const l=await gi._fromIdTokenResponse(e,i,o),c=E0(i);return new Wo({user:l,providerId:c,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const o=E0(i);return new Wo({user:e,providerId:o,_tokenResponse:i,operationType:t})}}function E0(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}class $d extends xr{constructor(e,t,i,o){super(t.code,t.message),this.operationType=i,this.user=o,Object.setPrototypeOf(this,$d.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,o){return new $d(e,t,i,o)}}function cS(r,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(r):t._getIdTokenResponse(r)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?$d._fromErrorAndOperation(r,l,e,i):l})}async function ND(r,e,t=!1){const i=await nc(r,e._linkToIdToken(r.auth,await r.getIdToken()),t);return Wo._forOperation(r,"link",i)}async function VD(r,e,t=!1){const{auth:i}=r;if(pi(i.app))return Promise.reject(As(i));const o="reauthenticate";try{const l=await nc(r,cS(i,o,e,r),t);Ae(l.idToken,i,"internal-error");const c=gy(l.idToken);Ae(c,i,"internal-error");const{sub:f}=c;return Ae(r.uid===f,i,"user-mismatch"),Wo._forOperation(r,o,l)}catch(l){throw l?.code==="auth/user-not-found"&&yi(i,"user-mismatch"),l}}async function hS(r,e,t=!1){if(pi(r.app))return Promise.reject(As(r));const i="signIn",o=await cS(r,i,e),l=await Wo._fromIdTokenResponse(r,i,o);return t||await r._updateCurrentUser(l.user),l}async function OD(r,e){return hS(yl(r),e)}async function MD(r){const e=yl(r);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}function PD(r,e,t){return pi(r.app)?Promise.reject(As(r)):OD(Ht(r),_l.credential(e,t)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&MD(r),i})}function kD(r,e,t,i){return Ht(r).onIdTokenChanged(e,t,i)}function LD(r,e,t){return Ht(r).beforeAuthStateChanged(e,t)}function UD(r,e,t,i){return Ht(r).onAuthStateChanged(e,t,i)}function BD(r){return Ht(r).signOut()}const Xd="__sak";class dS{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Xd,"1"),this.storage.removeItem(Xd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const zD=1e3,jD=10;class fS extends dS{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=rS(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),o=this.localCache[t];i!==o&&e(t,o,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((c,f,p)=>{this.notifyListeners(c,p)});return}const i=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const c=this.storage.getItem(i);!t&&this.localCache[i]===c||this.notifyListeners(i,c)},l=this.storage.getItem(i);sD()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,jD):o()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},zD)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}fS.type="LOCAL";const qD=fS;class mS extends dS{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}mS.type="SESSION";const pS=mS;function FD(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}class Tf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const i=new Tf(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:o,data:l}=t.data,c=this.handlersMap[o];if(!c?.size)return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:o});const f=Array.from(c).map(async g=>g(t.origin,l)),p=await FD(f);t.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:p})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Tf.receivers=[];function Ey(r="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return r+t}class HD{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let l,c;return new Promise((f,p)=>{const g=Ey("",20);o.port1.start();const E=setTimeout(()=>{p(new Error("unsupported_event"))},i);c={messageChannel:o,onMessage(T){const S=T;if(S.data.eventId===g)switch(S.data.status){case"ack":clearTimeout(E),l=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),f(S.data.response);break;default:clearTimeout(E),clearTimeout(l),p(new Error("invalid_response"));break}}},this.handlers.add(c),o.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:g,data:t},[o.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}function $i(){return window}function GD(r){$i().location.href=r}function gS(){return typeof $i().WorkerGlobalScope<"u"&&typeof $i().importScripts=="function"}async function KD(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function QD(){return navigator?.serviceWorker?.controller||null}function YD(){return gS()?self:null}const yS="firebaseLocalStorageDb",$D=1,Wd="firebaseLocalStorage",_S="fbase_key";class Ic{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function bf(r,e){return r.transaction([Wd],e?"readwrite":"readonly").objectStore(Wd)}function XD(){const r=indexedDB.deleteDatabase(yS);return new Ic(r).toPromise()}function Dg(){const r=indexedDB.open(yS,$D);return new Promise((e,t)=>{r.addEventListener("error",()=>{t(r.error)}),r.addEventListener("upgradeneeded",()=>{const i=r.result;try{i.createObjectStore(Wd,{keyPath:_S})}catch(o){t(o)}}),r.addEventListener("success",async()=>{const i=r.result;i.objectStoreNames.contains(Wd)?e(i):(i.close(),await XD(),e(await Dg()))})})}async function T0(r,e,t){const i=bf(r,!0).put({[_S]:e,value:t});return new Ic(i).toPromise()}async function WD(r,e){const t=bf(r,!1).get(e),i=await new Ic(t).toPromise();return i===void 0?null:i.value}function b0(r,e){const t=bf(r,!0).delete(e);return new Ic(t).toPromise()}const JD=800,ZD=3;class vS{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Dg(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>ZD)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return gS()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Tf._getInstance(YD()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await KD(),!this.activeServiceWorker)return;this.sender=new HD(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||QD()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Dg();return await T0(e,Xd,"1"),await b0(e,Xd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>T0(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>WD(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>b0(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const l=bf(o,!1).getAll();return new Ic(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:o,value:l}of e)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(l)&&(this.notifyListeners(o,l),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),JD)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}vS.type="LOCAL";const eN=vS;new Ac(3e4,6e4);function tN(r,e){return e?Er(e):(Ae(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}class Ty extends _y{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ko(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Ko(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Ko(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function nN(r){return hS(r.auth,new Ty(r),r.bypassAuthState)}function iN(r){const{auth:e,user:t}=r;return Ae(t,e,"internal-error"),VD(t,new Ty(r),r.bypassAuthState)}async function rN(r){const{auth:e,user:t}=r;return Ae(t,e,"internal-error"),ND(t,new Ty(r),r.bypassAuthState)}class ES{constructor(e,t,i,o,l=!1){this.auth=e,this.resolver=i,this.user=o,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:o,tenantId:l,error:c,type:f}=e;if(c){this.reject(c);return}const p={auth:this.auth,requestUri:t,sessionId:i,tenantId:l||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(f)(p))}catch(g){this.reject(g)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return nN;case"linkViaPopup":case"linkViaRedirect":return rN;case"reauthViaPopup":case"reauthViaRedirect":return iN;default:yi(this.auth,"internal-error")}}resolve(e){Ir(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ir(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const sN=new Ac(2e3,1e4);class Fo extends ES{constructor(e,t,i,o,l){super(e,t,o,l),this.provider=i,this.authWindow=null,this.pollId=null,Fo.currentPopupAction&&Fo.currentPopupAction.cancel(),Fo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ae(e,this.auth,"internal-error"),e}async onExecution(){Ir(this.filter.length===1,"Popup operations only handle one event");const e=Ey();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Yi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Yi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Fo.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Yi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,sN.get())};e()}}Fo.currentPopupAction=null;const aN="pendingRedirect",Rd=new Map;class oN extends ES{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=Rd.get(this.auth._key());if(!e){try{const i=await lN(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}Rd.set(this.auth._key(),e)}return this.bypassAuthState||Rd.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function lN(r,e){const t=hN(e),i=cN(r);if(!await i._isAvailable())return!1;const o=await i._get(t)==="true";return await i._remove(t),o}function uN(r,e){Rd.set(r._key(),e)}function cN(r){return Er(r._redirectPersistence)}function hN(r){return Id(aN,r.config.apiKey,r.name)}async function dN(r,e,t=!1){if(pi(r.app))return Promise.reject(As(r));const i=yl(r),o=tN(i,e),c=await new oN(i,o,t).execute();return c&&!t&&(delete c.user._redirectEventId,await i._persistUserIfCurrent(c.user),await i._setRedirectUser(null,e)),c}const fN=600*1e3;class mN{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!pN(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!TS(e)){const i=e.error.code?.split("auth/")[1]||"internal-error";t.onError(Yi(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=fN&&this.cachedEventUids.clear(),this.cachedEventUids.has(S0(e))}saveEventToCache(e){this.cachedEventUids.add(S0(e)),this.lastProcessedEventTime=Date.now()}}function S0(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function TS({type:r,error:e}){return r==="unknown"&&e?.code==="auth/no-auth-event"}function pN(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return TS(r);default:return!1}}async function gN(r,e={}){return Ms(r,"GET","/v1/projects",e)}const yN=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,_N=/^https?/;async function vN(r){if(r.config.emulator)return;const{authorizedDomains:e}=await gN(r);for(const t of e)try{if(EN(t))return}catch{}yi(r,"unauthorized-domain")}function EN(r){const e=Cg(),{protocol:t,hostname:i}=new URL(e);if(r.startsWith("chrome-extension://")){const c=new URL(r);return c.hostname===""&&i===""?t==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&c.hostname===i}if(!_N.test(t))return!1;if(yN.test(r))return i===r;const o=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}const TN=new Ac(3e4,6e4);function A0(){const r=$i().___jsl;if(r?.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let t=0;t<r.CP.length;t++)r.CP[t]=null}}function bN(r){return new Promise((e,t)=>{function i(){A0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{A0(),t(Yi(r,"network-request-failed"))},timeout:TN.get()})}if($i().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if($i().gapi?.load)i();else{const o=mD("iframefcb");return $i()[o]=()=>{gapi.load?i():t(Yi(r,"network-request-failed"))},aS(`${fD()}?onload=${o}`).catch(l=>t(l))}}).catch(e=>{throw Cd=null,e})}let Cd=null;function SN(r){return Cd=Cd||bN(r),Cd}const AN=new Ac(5e3,15e3),wN="__/auth/iframe",IN="emulator/auth/iframe",RN={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},CN=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function xN(r){const e=r.config;Ae(e.authDomain,r,"auth-domain-config-required");const t=e.emulator?py(e,IN):`https://${r.config.authDomain}/${wN}`,i={apiKey:e.apiKey,appName:r.name,v:gl},o=CN.get(r.config.apiHost);o&&(i.eid=o);const l=r._getFrameworks();return l.length&&(i.fw=l.join(",")),`${t}?${Sc(i).slice(1)}`}async function DN(r){const e=await SN(r),t=$i().gapi;return Ae(t,r,"internal-error"),e.open({where:document.body,url:xN(r),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:RN,dontclear:!0},i=>new Promise(async(o,l)=>{await i.restyle({setHideOnLeave:!1});const c=Yi(r,"network-request-failed"),f=$i().setTimeout(()=>{l(c)},AN.get());function p(){$i().clearTimeout(f),o(i)}i.ping(p).then(p,()=>{l(c)})}))}const NN={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},VN=500,ON=600,MN="_blank",PN="http://localhost";class w0{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function kN(r,e,t,i=VN,o=ON){const l=Math.max((window.screen.availHeight-o)/2,0).toString(),c=Math.max((window.screen.availWidth-i)/2,0).toString();let f="";const p={...NN,width:i.toString(),height:o.toString(),top:l,left:c},g=Ft().toLowerCase();t&&(f=Z1(g)?MN:t),W1(g)&&(e=e||PN,p.scrollbars="yes");const E=Object.entries(p).reduce((S,[O,z])=>`${S}${O}=${z},`,"");if(rD(g)&&f!=="_self")return LN(e||"",f),new w0(null);const T=window.open(e||"",f,E);Ae(T,r,"popup-blocked");try{T.focus()}catch{}return new w0(T)}function LN(r,e){const t=document.createElement("a");t.href=r,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}const UN="__/auth/handler",BN="emulator/auth/handler",zN=encodeURIComponent("fac");async function I0(r,e,t,i,o,l){Ae(r.config.authDomain,r,"auth-domain-config-required"),Ae(r.config.apiKey,r,"invalid-api-key");const c={apiKey:r.config.apiKey,appName:r.name,authType:t,redirectUrl:i,v:gl,eventId:o};if(e instanceof uS){e.setDefaultLanguage(r.languageCode),c.providerId=e.providerId||"",Ix(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[E,T]of Object.entries({}))c[E]=T}if(e instanceof wc){const E=e.getScopes().filter(T=>T!=="");E.length>0&&(c.scopes=E.join(","))}r.tenantId&&(c.tid=r.tenantId);const f=c;for(const E of Object.keys(f))f[E]===void 0&&delete f[E];const p=await r._getAppCheckToken(),g=p?`#${zN}=${encodeURIComponent(p)}`:"";return`${jN(r)}?${Sc(f).slice(1)}${g}`}function jN({config:r}){return r.emulator?py(r,BN):`https://${r.authDomain}/${UN}`}const sg="webStorageSupport";class qN{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=pS,this._completeRedirectFn=dN,this._overrideRedirectResult=uN}async _openPopup(e,t,i,o){Ir(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const l=await I0(e,t,i,Cg(),o);return kN(e,l,Ey())}async _openRedirect(e,t,i,o){await this._originValidation(e);const l=await I0(e,t,i,Cg(),o);return GD(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:l}=this.eventManagers[t];return o?Promise.resolve(o):(Ir(l,"If manager is not set, promise should be"),l)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await DN(e),i=new mN(e);return t.register("authEvent",o=>(Ae(o?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(sg,{type:sg},o=>{const l=o?.[0]?.[sg];l!==void 0&&t(!!l),yi(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=vN(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return rS()||J1()||yy()}}const FN=qN;var R0="@firebase/auth",C0="1.12.0";class HN{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ae(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function GN(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function KN(r){Xo(new Ra("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:c,authDomain:f}=i.options;Ae(c&&!c.includes(":"),"invalid-api-key",{appName:i.name});const p={apiKey:c,authDomain:f,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:sS(r)},g=new cD(i,o,l,p);return ED(g,t),g},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),Xo(new Ra("auth-internal",e=>{const t=yl(e.getProvider("auth").getImmediate());return(i=>new HN(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ss(R0,C0,GN(r)),Ss(R0,C0,"esm2020")}const QN=300,YN=D1("authIdTokenMaxAge")||QN;let x0=null;const $N=r=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>YN)return;const o=t?.token;x0!==o&&(x0=o,await fetch(r,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function XN(r=z1()){const e=fy(r,"auth");if(e.isInitialized())return e.getImmediate();const t=vD(r,{popupRedirectResolver:FN,persistence:[eN,qD,pS]}),i=D1("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(i,location.origin);if(location.origin===l.origin){const c=$N(l.toString());LD(t,c,()=>c(t.currentUser)),kD(t,f=>c(f))}}const o=C1("auth");return o&&TD(t,`http://${o}`),t}function WN(){return document.getElementsByTagName("head")?.[0]??document}hD({loadJS(r){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",r),i.onload=e,i.onerror=o=>{const l=Yi("internal-error");l.customData=o,t(l)},i.type="text/javascript",i.charset="UTF-8",WN().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});KN("Browser");var JN="firebase",ZN="12.7.0";Ss(JN,ZN,"app");var D0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var ws,bS;(function(){var r;function e(x,R){function C(){}C.prototype=R.prototype,x.F=R.prototype,x.prototype=new C,x.prototype.constructor=x,x.D=function(D,V,k){for(var I=Array(arguments.length-2),fe=2;fe<arguments.length;fe++)I[fe-2]=arguments[fe];return R.prototype[V].apply(D,I)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,t),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(x,R,C){C||(C=0);const D=Array(16);if(typeof R=="string")for(var V=0;V<16;++V)D[V]=R.charCodeAt(C++)|R.charCodeAt(C++)<<8|R.charCodeAt(C++)<<16|R.charCodeAt(C++)<<24;else for(V=0;V<16;++V)D[V]=R[C++]|R[C++]<<8|R[C++]<<16|R[C++]<<24;R=x.g[0],C=x.g[1],V=x.g[2];let k=x.g[3],I;I=R+(k^C&(V^k))+D[0]+3614090360&4294967295,R=C+(I<<7&4294967295|I>>>25),I=k+(V^R&(C^V))+D[1]+3905402710&4294967295,k=R+(I<<12&4294967295|I>>>20),I=V+(C^k&(R^C))+D[2]+606105819&4294967295,V=k+(I<<17&4294967295|I>>>15),I=C+(R^V&(k^R))+D[3]+3250441966&4294967295,C=V+(I<<22&4294967295|I>>>10),I=R+(k^C&(V^k))+D[4]+4118548399&4294967295,R=C+(I<<7&4294967295|I>>>25),I=k+(V^R&(C^V))+D[5]+1200080426&4294967295,k=R+(I<<12&4294967295|I>>>20),I=V+(C^k&(R^C))+D[6]+2821735955&4294967295,V=k+(I<<17&4294967295|I>>>15),I=C+(R^V&(k^R))+D[7]+4249261313&4294967295,C=V+(I<<22&4294967295|I>>>10),I=R+(k^C&(V^k))+D[8]+1770035416&4294967295,R=C+(I<<7&4294967295|I>>>25),I=k+(V^R&(C^V))+D[9]+2336552879&4294967295,k=R+(I<<12&4294967295|I>>>20),I=V+(C^k&(R^C))+D[10]+4294925233&4294967295,V=k+(I<<17&4294967295|I>>>15),I=C+(R^V&(k^R))+D[11]+2304563134&4294967295,C=V+(I<<22&4294967295|I>>>10),I=R+(k^C&(V^k))+D[12]+1804603682&4294967295,R=C+(I<<7&4294967295|I>>>25),I=k+(V^R&(C^V))+D[13]+4254626195&4294967295,k=R+(I<<12&4294967295|I>>>20),I=V+(C^k&(R^C))+D[14]+2792965006&4294967295,V=k+(I<<17&4294967295|I>>>15),I=C+(R^V&(k^R))+D[15]+1236535329&4294967295,C=V+(I<<22&4294967295|I>>>10),I=R+(V^k&(C^V))+D[1]+4129170786&4294967295,R=C+(I<<5&4294967295|I>>>27),I=k+(C^V&(R^C))+D[6]+3225465664&4294967295,k=R+(I<<9&4294967295|I>>>23),I=V+(R^C&(k^R))+D[11]+643717713&4294967295,V=k+(I<<14&4294967295|I>>>18),I=C+(k^R&(V^k))+D[0]+3921069994&4294967295,C=V+(I<<20&4294967295|I>>>12),I=R+(V^k&(C^V))+D[5]+3593408605&4294967295,R=C+(I<<5&4294967295|I>>>27),I=k+(C^V&(R^C))+D[10]+38016083&4294967295,k=R+(I<<9&4294967295|I>>>23),I=V+(R^C&(k^R))+D[15]+3634488961&4294967295,V=k+(I<<14&4294967295|I>>>18),I=C+(k^R&(V^k))+D[4]+3889429448&4294967295,C=V+(I<<20&4294967295|I>>>12),I=R+(V^k&(C^V))+D[9]+568446438&4294967295,R=C+(I<<5&4294967295|I>>>27),I=k+(C^V&(R^C))+D[14]+3275163606&4294967295,k=R+(I<<9&4294967295|I>>>23),I=V+(R^C&(k^R))+D[3]+4107603335&4294967295,V=k+(I<<14&4294967295|I>>>18),I=C+(k^R&(V^k))+D[8]+1163531501&4294967295,C=V+(I<<20&4294967295|I>>>12),I=R+(V^k&(C^V))+D[13]+2850285829&4294967295,R=C+(I<<5&4294967295|I>>>27),I=k+(C^V&(R^C))+D[2]+4243563512&4294967295,k=R+(I<<9&4294967295|I>>>23),I=V+(R^C&(k^R))+D[7]+1735328473&4294967295,V=k+(I<<14&4294967295|I>>>18),I=C+(k^R&(V^k))+D[12]+2368359562&4294967295,C=V+(I<<20&4294967295|I>>>12),I=R+(C^V^k)+D[5]+4294588738&4294967295,R=C+(I<<4&4294967295|I>>>28),I=k+(R^C^V)+D[8]+2272392833&4294967295,k=R+(I<<11&4294967295|I>>>21),I=V+(k^R^C)+D[11]+1839030562&4294967295,V=k+(I<<16&4294967295|I>>>16),I=C+(V^k^R)+D[14]+4259657740&4294967295,C=V+(I<<23&4294967295|I>>>9),I=R+(C^V^k)+D[1]+2763975236&4294967295,R=C+(I<<4&4294967295|I>>>28),I=k+(R^C^V)+D[4]+1272893353&4294967295,k=R+(I<<11&4294967295|I>>>21),I=V+(k^R^C)+D[7]+4139469664&4294967295,V=k+(I<<16&4294967295|I>>>16),I=C+(V^k^R)+D[10]+3200236656&4294967295,C=V+(I<<23&4294967295|I>>>9),I=R+(C^V^k)+D[13]+681279174&4294967295,R=C+(I<<4&4294967295|I>>>28),I=k+(R^C^V)+D[0]+3936430074&4294967295,k=R+(I<<11&4294967295|I>>>21),I=V+(k^R^C)+D[3]+3572445317&4294967295,V=k+(I<<16&4294967295|I>>>16),I=C+(V^k^R)+D[6]+76029189&4294967295,C=V+(I<<23&4294967295|I>>>9),I=R+(C^V^k)+D[9]+3654602809&4294967295,R=C+(I<<4&4294967295|I>>>28),I=k+(R^C^V)+D[12]+3873151461&4294967295,k=R+(I<<11&4294967295|I>>>21),I=V+(k^R^C)+D[15]+530742520&4294967295,V=k+(I<<16&4294967295|I>>>16),I=C+(V^k^R)+D[2]+3299628645&4294967295,C=V+(I<<23&4294967295|I>>>9),I=R+(V^(C|~k))+D[0]+4096336452&4294967295,R=C+(I<<6&4294967295|I>>>26),I=k+(C^(R|~V))+D[7]+1126891415&4294967295,k=R+(I<<10&4294967295|I>>>22),I=V+(R^(k|~C))+D[14]+2878612391&4294967295,V=k+(I<<15&4294967295|I>>>17),I=C+(k^(V|~R))+D[5]+4237533241&4294967295,C=V+(I<<21&4294967295|I>>>11),I=R+(V^(C|~k))+D[12]+1700485571&4294967295,R=C+(I<<6&4294967295|I>>>26),I=k+(C^(R|~V))+D[3]+2399980690&4294967295,k=R+(I<<10&4294967295|I>>>22),I=V+(R^(k|~C))+D[10]+4293915773&4294967295,V=k+(I<<15&4294967295|I>>>17),I=C+(k^(V|~R))+D[1]+2240044497&4294967295,C=V+(I<<21&4294967295|I>>>11),I=R+(V^(C|~k))+D[8]+1873313359&4294967295,R=C+(I<<6&4294967295|I>>>26),I=k+(C^(R|~V))+D[15]+4264355552&4294967295,k=R+(I<<10&4294967295|I>>>22),I=V+(R^(k|~C))+D[6]+2734768916&4294967295,V=k+(I<<15&4294967295|I>>>17),I=C+(k^(V|~R))+D[13]+1309151649&4294967295,C=V+(I<<21&4294967295|I>>>11),I=R+(V^(C|~k))+D[4]+4149444226&4294967295,R=C+(I<<6&4294967295|I>>>26),I=k+(C^(R|~V))+D[11]+3174756917&4294967295,k=R+(I<<10&4294967295|I>>>22),I=V+(R^(k|~C))+D[2]+718787259&4294967295,V=k+(I<<15&4294967295|I>>>17),I=C+(k^(V|~R))+D[9]+3951481745&4294967295,x.g[0]=x.g[0]+R&4294967295,x.g[1]=x.g[1]+(V+(I<<21&4294967295|I>>>11))&4294967295,x.g[2]=x.g[2]+V&4294967295,x.g[3]=x.g[3]+k&4294967295}i.prototype.v=function(x,R){R===void 0&&(R=x.length);const C=R-this.blockSize,D=this.C;let V=this.h,k=0;for(;k<R;){if(V==0)for(;k<=C;)o(this,x,k),k+=this.blockSize;if(typeof x=="string"){for(;k<R;)if(D[V++]=x.charCodeAt(k++),V==this.blockSize){o(this,D),V=0;break}}else for(;k<R;)if(D[V++]=x[k++],V==this.blockSize){o(this,D),V=0;break}}this.h=V,this.o+=R},i.prototype.A=function(){var x=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);x[0]=128;for(var R=1;R<x.length-8;++R)x[R]=0;R=this.o*8;for(var C=x.length-8;C<x.length;++C)x[C]=R&255,R/=256;for(this.v(x),x=Array(16),R=0,C=0;C<4;++C)for(let D=0;D<32;D+=8)x[R++]=this.g[C]>>>D&255;return x};function l(x,R){var C=f;return Object.prototype.hasOwnProperty.call(C,x)?C[x]:C[x]=R(x)}function c(x,R){this.h=R;const C=[];let D=!0;for(let V=x.length-1;V>=0;V--){const k=x[V]|0;D&&k==R||(C[V]=k,D=!1)}this.g=C}var f={};function p(x){return-128<=x&&x<128?l(x,function(R){return new c([R|0],R<0?-1:0)}):new c([x|0],x<0?-1:0)}function g(x){if(isNaN(x)||!isFinite(x))return T;if(x<0)return U(g(-x));const R=[];let C=1;for(let D=0;x>=C;D++)R[D]=x/C|0,C*=4294967296;return new c(R,0)}function E(x,R){if(x.length==0)throw Error("number format error: empty string");if(R=R||10,R<2||36<R)throw Error("radix out of range: "+R);if(x.charAt(0)=="-")return U(E(x.substring(1),R));if(x.indexOf("-")>=0)throw Error('number format error: interior "-" character');const C=g(Math.pow(R,8));let D=T;for(let k=0;k<x.length;k+=8){var V=Math.min(8,x.length-k);const I=parseInt(x.substring(k,k+V),R);V<8?(V=g(Math.pow(R,V)),D=D.j(V).add(g(I))):(D=D.j(C),D=D.add(g(I)))}return D}var T=p(0),S=p(1),O=p(16777216);r=c.prototype,r.m=function(){if(Y(this))return-U(this).m();let x=0,R=1;for(let C=0;C<this.g.length;C++){const D=this.i(C);x+=(D>=0?D:4294967296+D)*R,R*=4294967296}return x},r.toString=function(x){if(x=x||10,x<2||36<x)throw Error("radix out of range: "+x);if(z(this))return"0";if(Y(this))return"-"+U(this).toString(x);const R=g(Math.pow(x,6));var C=this;let D="";for(;;){const V=he(C,R).g;C=F(C,V.j(R));let k=((C.g.length>0?C.g[0]:C.h)>>>0).toString(x);if(C=V,z(C))return k+D;for(;k.length<6;)k="0"+k;D=k+D}},r.i=function(x){return x<0?0:x<this.g.length?this.g[x]:this.h};function z(x){if(x.h!=0)return!1;for(let R=0;R<x.g.length;R++)if(x.g[R]!=0)return!1;return!0}function Y(x){return x.h==-1}r.l=function(x){return x=F(this,x),Y(x)?-1:z(x)?0:1};function U(x){const R=x.g.length,C=[];for(let D=0;D<R;D++)C[D]=~x.g[D];return new c(C,~x.h).add(S)}r.abs=function(){return Y(this)?U(this):this},r.add=function(x){const R=Math.max(this.g.length,x.g.length),C=[];let D=0;for(let V=0;V<=R;V++){let k=D+(this.i(V)&65535)+(x.i(V)&65535),I=(k>>>16)+(this.i(V)>>>16)+(x.i(V)>>>16);D=I>>>16,k&=65535,I&=65535,C[V]=I<<16|k}return new c(C,C[C.length-1]&-2147483648?-1:0)};function F(x,R){return x.add(U(R))}r.j=function(x){if(z(this)||z(x))return T;if(Y(this))return Y(x)?U(this).j(U(x)):U(U(this).j(x));if(Y(x))return U(this.j(U(x)));if(this.l(O)<0&&x.l(O)<0)return g(this.m()*x.m());const R=this.g.length+x.g.length,C=[];for(var D=0;D<2*R;D++)C[D]=0;for(D=0;D<this.g.length;D++)for(let V=0;V<x.g.length;V++){const k=this.i(D)>>>16,I=this.i(D)&65535,fe=x.i(V)>>>16,Ie=x.i(V)&65535;C[2*D+2*V]+=I*Ie,K(C,2*D+2*V),C[2*D+2*V+1]+=k*Ie,K(C,2*D+2*V+1),C[2*D+2*V+1]+=I*fe,K(C,2*D+2*V+1),C[2*D+2*V+2]+=k*fe,K(C,2*D+2*V+2)}for(x=0;x<R;x++)C[x]=C[2*x+1]<<16|C[2*x];for(x=R;x<2*R;x++)C[x]=0;return new c(C,0)};function K(x,R){for(;(x[R]&65535)!=x[R];)x[R+1]+=x[R]>>>16,x[R]&=65535,R++}function ee(x,R){this.g=x,this.h=R}function he(x,R){if(z(R))throw Error("division by zero");if(z(x))return new ee(T,T);if(Y(x))return R=he(U(x),R),new ee(U(R.g),U(R.h));if(Y(R))return R=he(x,U(R)),new ee(U(R.g),R.h);if(x.g.length>30){if(Y(x)||Y(R))throw Error("slowDivide_ only works with positive integers.");for(var C=S,D=R;D.l(x)<=0;)C=de(C),D=de(D);var V=pe(C,1),k=pe(D,1);for(D=pe(D,2),C=pe(C,2);!z(D);){var I=k.add(D);I.l(x)<=0&&(V=V.add(C),k=I),D=pe(D,1),C=pe(C,1)}return R=F(x,V.j(R)),new ee(V,R)}for(V=T;x.l(R)>=0;){for(C=Math.max(1,Math.floor(x.m()/R.m())),D=Math.ceil(Math.log(C)/Math.LN2),D=D<=48?1:Math.pow(2,D-48),k=g(C),I=k.j(R);Y(I)||I.l(x)>0;)C-=D,k=g(C),I=k.j(R);z(k)&&(k=S),V=V.add(k),x=F(x,I)}return new ee(V,x)}r.B=function(x){return he(this,x).h},r.and=function(x){const R=Math.max(this.g.length,x.g.length),C=[];for(let D=0;D<R;D++)C[D]=this.i(D)&x.i(D);return new c(C,this.h&x.h)},r.or=function(x){const R=Math.max(this.g.length,x.g.length),C=[];for(let D=0;D<R;D++)C[D]=this.i(D)|x.i(D);return new c(C,this.h|x.h)},r.xor=function(x){const R=Math.max(this.g.length,x.g.length),C=[];for(let D=0;D<R;D++)C[D]=this.i(D)^x.i(D);return new c(C,this.h^x.h)};function de(x){const R=x.g.length+1,C=[];for(let D=0;D<R;D++)C[D]=x.i(D)<<1|x.i(D-1)>>>31;return new c(C,x.h)}function pe(x,R){const C=R>>5;R%=32;const D=x.g.length-C,V=[];for(let k=0;k<D;k++)V[k]=R>0?x.i(k+C)>>>R|x.i(k+C+1)<<32-R:x.i(k+C);return new c(V,x.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,bS=i,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.B,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=g,c.fromString=E,ws=c}).apply(typeof D0<"u"?D0:typeof self<"u"?self:typeof window<"u"?window:{});var md=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var SS,Bu,AS,xd,Ng,wS,IS,RS;(function(){var r,e=Object.defineProperty;function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof md=="object"&&md];for(var y=0;y<h.length;++y){var v=h[y];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var i=t(this);function o(h,y){if(y)e:{var v=i;h=h.split(".");for(var w=0;w<h.length-1;w++){var q=h[w];if(!(q in v))break e;v=v[q]}h=h[h.length-1],w=v[h],y=y(w),y!=w&&y!=null&&e(v,h,{configurable:!0,writable:!0,value:y})}}o("Symbol.dispose",function(h){return h||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(h){return h||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(h){return h||function(y){var v=[],w;for(w in y)Object.prototype.hasOwnProperty.call(y,w)&&v.push([w,y[w]]);return v}});var l=l||{},c=this||self;function f(h){var y=typeof h;return y=="object"&&h!=null||y=="function"}function p(h,y,v){return h.call.apply(h.bind,arguments)}function g(h,y,v){return g=p,g.apply(null,arguments)}function E(h,y){var v=Array.prototype.slice.call(arguments,1);return function(){var w=v.slice();return w.push.apply(w,arguments),h.apply(this,w)}}function T(h,y){function v(){}v.prototype=y.prototype,h.Z=y.prototype,h.prototype=new v,h.prototype.constructor=h,h.Ob=function(w,q,X){for(var oe=Array(arguments.length-2),Oe=2;Oe<arguments.length;Oe++)oe[Oe-2]=arguments[Oe];return y.prototype[q].apply(w,oe)}}var S=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?h=>h&&AsyncContext.Snapshot.wrap(h):h=>h;function O(h){const y=h.length;if(y>0){const v=Array(y);for(let w=0;w<y;w++)v[w]=h[w];return v}return[]}function z(h,y){for(let w=1;w<arguments.length;w++){const q=arguments[w];var v=typeof q;if(v=v!="object"?v:q?Array.isArray(q)?"array":v:"null",v=="array"||v=="object"&&typeof q.length=="number"){v=h.length||0;const X=q.length||0;h.length=v+X;for(let oe=0;oe<X;oe++)h[v+oe]=q[oe]}else h.push(q)}}class Y{constructor(y,v){this.i=y,this.j=v,this.h=0,this.g=null}get(){let y;return this.h>0?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function U(h){c.setTimeout(()=>{throw h},0)}function F(){var h=x;let y=null;return h.g&&(y=h.g,h.g=h.g.next,h.g||(h.h=null),y.next=null),y}class K{constructor(){this.h=this.g=null}add(y,v){const w=ee.get();w.set(y,v),this.h?this.h.next=w:this.g=w,this.h=w}}var ee=new Y(()=>new he,h=>h.reset());class he{constructor(){this.next=this.g=this.h=null}set(y,v){this.h=y,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let de,pe=!1,x=new K,R=()=>{const h=Promise.resolve(void 0);de=()=>{h.then(C)}};function C(){for(var h;h=F();){try{h.h.call(h.g)}catch(v){U(v)}var y=ee;y.j(h),y.h<100&&(y.h++,h.next=y.g,y.g=h)}pe=!1}function D(){this.u=this.u,this.C=this.C}D.prototype.u=!1,D.prototype.dispose=function(){this.u||(this.u=!0,this.N())},D.prototype[Symbol.dispose]=function(){this.dispose()},D.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function V(h,y){this.type=h,this.g=this.target=y,this.defaultPrevented=!1}V.prototype.h=function(){this.defaultPrevented=!0};var k=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var h=!1,y=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const v=()=>{};c.addEventListener("test",v,y),c.removeEventListener("test",v,y)}catch{}return h})();function I(h){return/^[\s\xa0]*$/.test(h)}function fe(h,y){V.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h&&this.init(h,y)}T(fe,V),fe.prototype.init=function(h,y){const v=this.type=h.type,w=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;this.target=h.target||h.srcElement,this.g=y,y=h.relatedTarget,y||(v=="mouseover"?y=h.fromElement:v=="mouseout"&&(y=h.toElement)),this.relatedTarget=y,w?(this.clientX=w.clientX!==void 0?w.clientX:w.pageX,this.clientY=w.clientY!==void 0?w.clientY:w.pageY,this.screenX=w.screenX||0,this.screenY=w.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=h.pointerType,this.state=h.state,this.i=h,h.defaultPrevented&&fe.Z.h.call(this)},fe.prototype.h=function(){fe.Z.h.call(this);const h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var Ie="closure_listenable_"+(Math.random()*1e6|0),$=0;function ae(h,y,v,w,q){this.listener=h,this.proxy=null,this.src=y,this.type=v,this.capture=!!w,this.ha=q,this.key=++$,this.da=this.fa=!1}function ve(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function Le(h,y,v){for(const w in h)y.call(v,h[w],w,h)}function Ge(h,y){for(const v in h)y.call(void 0,h[v],v,h)}function P(h){const y={};for(const v in h)y[v]=h[v];return y}const ne="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ue(h,y){let v,w;for(let q=1;q<arguments.length;q++){w=arguments[q];for(v in w)h[v]=w[v];for(let X=0;X<ne.length;X++)v=ne[X],Object.prototype.hasOwnProperty.call(w,v)&&(h[v]=w[v])}}function me(h){this.src=h,this.g={},this.h=0}me.prototype.add=function(h,y,v,w,q){const X=h.toString();h=this.g[X],h||(h=this.g[X]=[],this.h++);const oe=Re(h,y,w,q);return oe>-1?(y=h[oe],v||(y.fa=!1)):(y=new ae(y,this.src,X,!!w,q),y.fa=v,h.push(y)),y};function we(h,y){const v=y.type;if(v in h.g){var w=h.g[v],q=Array.prototype.indexOf.call(w,y,void 0),X;(X=q>=0)&&Array.prototype.splice.call(w,q,1),X&&(ve(y),h.g[v].length==0&&(delete h.g[v],h.h--))}}function Re(h,y,v,w){for(let q=0;q<h.length;++q){const X=h[q];if(!X.da&&X.listener==y&&X.capture==!!v&&X.ha==w)return q}return-1}var re="closure_lm_"+(Math.random()*1e6|0),Ve={};function Ce(h,y,v,w,q){if(Array.isArray(y)){for(let X=0;X<y.length;X++)Ce(h,y[X],v,w,q);return null}return v=wl(v),h&&h[Ie]?h.J(y,v,f(w)?!!w.capture:!1,q):Ut(h,y,v,!1,w,q)}function Ut(h,y,v,w,q,X){if(!y)throw Error("Invalid event type");const oe=f(q)?!!q.capture:!!q;let Oe=Ls(h);if(Oe||(h[re]=Oe=new me(h)),v=Oe.add(y,v,w,oe,X),v.proxy)return v;if(w=Zi(),v.proxy=w,w.src=h,w.listener=v,h.addEventListener)k||(q=oe),q===void 0&&(q=!1),h.addEventListener(y.toString(),w,q);else if(h.attachEvent)h.attachEvent(zt(y.toString()),w);else if(h.addListener&&h.removeListener)h.addListener(w);else throw Error("addEventListener and attachEvent are unavailable.");return v}function Zi(){function h(v){return y.call(h.src,h.listener,v)}const y=Sl;return h}function ut(h,y,v,w,q){if(Array.isArray(y))for(var X=0;X<y.length;X++)ut(h,y[X],v,w,q);else w=f(w)?!!w.capture:!!w,v=wl(v),h&&h[Ie]?(h=h.i,X=String(y).toString(),X in h.g&&(y=h.g[X],v=Re(y,v,w,q),v>-1&&(ve(y[v]),Array.prototype.splice.call(y,v,1),y.length==0&&(delete h.g[X],h.h--)))):h&&(h=Ls(h))&&(y=h.g[y.toString()],h=-1,y&&(h=Re(y,v,w,q)),(v=h>-1?y[h]:null)&&Bt(v))}function Bt(h){if(typeof h!="number"&&h&&!h.da){var y=h.src;if(y&&y[Ie])we(y.i,h);else{var v=h.type,w=h.proxy;y.removeEventListener?y.removeEventListener(v,w,h.capture):y.detachEvent?y.detachEvent(zt(v),w):y.addListener&&y.removeListener&&y.removeListener(w),(v=Ls(y))?(we(v,h),v.h==0&&(v.src=null,y[re]=null)):ve(h)}}}function zt(h){return h in Ve?Ve[h]:Ve[h]="on"+h}function Sl(h,y){if(h.da)h=!0;else{y=new fe(y,this);const v=h.listener,w=h.ha||h.src;h.fa&&Bt(h),h=v.call(w,y)}return h}function Ls(h){return h=h[re],h instanceof me?h:null}var Al="__closure_events_fn_"+(Math.random()*1e9>>>0);function wl(h){return typeof h=="function"?h:(h[Al]||(h[Al]=function(y){return h.handleEvent(y)}),h[Al])}function wt(){D.call(this),this.i=new me(this),this.M=this,this.G=null}T(wt,D),wt.prototype[Ie]=!0,wt.prototype.removeEventListener=function(h,y,v,w){ut(this,h,y,v,w)};function jt(h,y){var v,w=h.G;if(w)for(v=[];w;w=w.G)v.push(w);if(h=h.M,w=y.type||y,typeof y=="string")y=new V(y,h);else if(y instanceof V)y.target=y.target||h;else{var q=y;y=new V(w,h),ue(y,q)}q=!0;let X,oe;if(v)for(oe=v.length-1;oe>=0;oe--)X=y.g=v[oe],q=Vr(X,w,!0,y)&&q;if(X=y.g=h,q=Vr(X,w,!0,y)&&q,q=Vr(X,w,!1,y)&&q,v)for(oe=0;oe<v.length;oe++)X=y.g=v[oe],q=Vr(X,w,!1,y)&&q}wt.prototype.N=function(){if(wt.Z.N.call(this),this.i){var h=this.i;for(const y in h.g){const v=h.g[y];for(let w=0;w<v.length;w++)ve(v[w]);delete h.g[y],h.h--}}this.G=null},wt.prototype.J=function(h,y,v,w){return this.i.add(String(h),y,!1,v,w)},wt.prototype.K=function(h,y,v,w){return this.i.add(String(h),y,!0,v,w)};function Vr(h,y,v,w){if(y=h.i.g[String(y)],!y)return!0;y=y.concat();let q=!0;for(let X=0;X<y.length;++X){const oe=y[X];if(oe&&!oe.da&&oe.capture==v){const Oe=oe.listener,bt=oe.ha||oe.src;oe.fa&&we(h.i,oe),q=Oe.call(bt,w)!==!1&&q}}return q&&!w.defaultPrevented}function Kf(h,y){if(typeof h!="function")if(h&&typeof h.handleEvent=="function")h=g(h.handleEvent,h);else throw Error("Invalid listener argument");return Number(y)>2147483647?-1:c.setTimeout(h,y||0)}function Lc(h){h.g=Kf(()=>{h.g=null,h.i&&(h.i=!1,Lc(h))},h.l);const y=h.h;h.h=null,h.m.apply(null,y)}class hn extends D{constructor(y,v){super(),this.m=y,this.l=v,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:Lc(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Us(h){D.call(this),this.h=h,this.g={}}T(Us,D);var Il=[];function Rl(h){Le(h.g,function(y,v){this.g.hasOwnProperty(v)&&Bt(y)},h),h.g={}}Us.prototype.N=function(){Us.Z.N.call(this),Rl(this)},Us.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Or=c.JSON.stringify,Qf=c.JSON.parse,Uc=class{stringify(h){return c.JSON.stringify(h,void 0)}parse(h){return c.JSON.parse(h,void 0)}};function Bc(){}function zc(){}var ni={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Wt(){V.call(this,"d")}T(Wt,V);function Un(){V.call(this,"c")}T(Un,V);var Tt={},jc=null;function qa(){return jc=jc||new wt}Tt.Ia="serverreachability";function qc(h){V.call(this,Tt.Ia,h)}T(qc,V);function Ei(h){const y=qa();jt(y,new qc(y))}Tt.STAT_EVENT="statevent";function Bs(h,y){V.call(this,Tt.STAT_EVENT,h),this.stat=y}T(Bs,V);function It(h){const y=qa();jt(y,new Bs(y,h))}Tt.Ja="timingevent";function Ti(h,y){V.call(this,Tt.Ja,h),this.size=y}T(Ti,V);function bi(h,y){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){h()},y)}function ii(){this.g=!0}ii.prototype.ua=function(){this.g=!1};function Yf(h,y,v,w,q,X){h.info(function(){if(h.g)if(X){var oe="",Oe=X.split("&");for(let $e=0;$e<Oe.length;$e++){var bt=Oe[$e].split("=");if(bt.length>1){const dt=bt[0];bt=bt[1];const qn=dt.split("_");oe=qn.length>=2&&qn[1]=="type"?oe+(dt+"="+bt+"&"):oe+(dt+"=redacted&")}}}else oe=null;else oe=X;return"XMLHTTP REQ ("+w+") [attempt "+q+"]: "+y+`
`+v+`
`+oe})}function Fc(h,y,v,w,q,X,oe){h.info(function(){return"XMLHTTP RESP ("+w+") [ attempt "+q+"]: "+y+`
`+v+`
`+X+" "+oe})}function Si(h,y,v,w){h.info(function(){return"XMLHTTP TEXT ("+y+"): "+$f(h,v)+(w?" "+w:"")})}function zs(h,y){h.info(function(){return"TIMEOUT: "+y})}ii.prototype.info=function(){};function $f(h,y){if(!h.g)return y;if(!y)return null;try{const X=JSON.parse(y);if(X){for(h=0;h<X.length;h++)if(Array.isArray(X[h])){var v=X[h];if(!(v.length<2)){var w=v[1];if(Array.isArray(w)&&!(w.length<1)){var q=w[0];if(q!="noop"&&q!="stop"&&q!="close")for(let oe=1;oe<w.length;oe++)w[oe]=""}}}}return Or(X)}catch{return y}}var js={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Cl={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},xl;function qs(){}T(qs,Bc),qs.prototype.g=function(){return new XMLHttpRequest},xl=new qs;function er(h){return encodeURIComponent(String(h))}function Hc(h){var y=1;h=h.split(":");const v=[];for(;y>0&&h.length;)v.push(h.shift()),y--;return h.length&&v.push(h.join(":")),v}function ri(h,y,v,w){this.j=h,this.i=y,this.l=v,this.S=w||1,this.V=new Us(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new si}function si(){this.i=null,this.g="",this.h=!1}var Rt={},Kt={};function Ai(h,y,v){h.M=1,h.A=Fs(xt(y)),h.u=v,h.R=!0,Fa(h,null)}function Fa(h,y){h.F=Date.now(),wi(h),h.B=xt(h.A);var v=h.B,w=h.S;Array.isArray(w)||(w=[String(w)]),Qa(v.i,"t",w),h.C=0,v=h.j.L,h.h=new si,h.g=sh(h.j,v?y:null,!h.u),h.P>0&&(h.O=new hn(g(h.Y,h,h.g),h.P)),y=h.V,v=h.g,w=h.ba;var q="readystatechange";Array.isArray(q)||(q&&(Il[0]=q.toString()),q=Il);for(let X=0;X<q.length;X++){const oe=Ce(v,q[X],w||y.handleEvent,!1,y.h||y);if(!oe)break;y.g[oe.key]=oe}y=h.J?P(h.J):{},h.u?(h.v||(h.v="POST"),y["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.B,h.v,h.u,y)):(h.v="GET",h.g.ea(h.B,h.v,null,y)),Ei(),Yf(h.i,h.v,h.B,h.l,h.S,h.u)}ri.prototype.ba=function(h){h=h.target;const y=this.O;y&&li(h)==3?y.j():this.Y(h)},ri.prototype.Y=function(h){try{if(h==this.g)e:{const Oe=li(this.g),bt=this.g.ya(),$e=this.g.ca();if(!(Oe<3)&&(Oe!=3||this.g&&(this.h.h||this.g.la()||Jt(this.g)))){this.K||Oe!=4||bt==7||(bt==8||$e<=0?Ei(3):Ei(2)),Ii(this);var y=this.g.ca();this.X=y;var v=Xf(this);if(this.o=y==200,Fc(this.i,this.v,this.B,this.l,this.S,Oe,y),this.o){if(this.U&&!this.L){t:{if(this.g){var w,q=this.g;if((w=q.g?q.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!I(w)){var X=w;break t}}X=null}if(h=X)Si(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Ri(this,h);else{this.o=!1,this.m=3,It(12),wn(this),Bn(this);break e}}if(this.R){h=!0;let dt;for(;!this.K&&this.C<v.length;)if(dt=Kc(this,v),dt==Kt){Oe==4&&(this.m=4,It(14),h=!1),Si(this.i,this.l,null,"[Incomplete Response]");break}else if(dt==Rt){this.m=4,It(15),Si(this.i,this.l,v,"[Invalid Chunk]"),h=!1;break}else Si(this.i,this.l,dt,null),Ri(this,dt);if(Gc(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Oe!=4||v.length!=0||this.h.h||(this.m=1,It(16),h=!1),this.o=this.o&&h,!h)Si(this.i,this.l,v,"[Invalid Chunked Response]"),wn(this),Bn(this);else if(v.length>0&&!this.W){this.W=!0;var oe=this.j;oe.g==this&&oe.aa&&!oe.P&&(oe.j.info("Great, no buffering proxy detected. Bytes received: "+v.length),Hl(oe),oe.P=!0,It(11))}}else Si(this.i,this.l,v,null),Ri(this,v);Oe==4&&wn(this),this.o&&!this.K&&(Oe==4?th(this.j,this):(this.o=!1,wi(this)))}else nr(this.g),y==400&&v.indexOf("Unknown SID")>0?(this.m=3,It(12)):(this.m=0,It(13)),wn(this),Bn(this)}}}catch{}};function Xf(h){if(!Gc(h))return h.g.la();const y=Jt(h.g);if(y==="")return"";let v="";const w=y.length,q=li(h.g)==4;if(!h.h.i){if(typeof TextDecoder>"u")return wn(h),Bn(h),"";h.h.i=new c.TextDecoder}for(let X=0;X<w;X++)h.h.h=!0,v+=h.h.i.decode(y[X],{stream:!(q&&X==w-1)});return y.length=0,h.h.g+=v,h.C=0,h.h.g}function Gc(h){return h.g?h.v=="GET"&&h.M!=2&&h.j.Aa:!1}function Kc(h,y){var v=h.C,w=y.indexOf(`
`,v);return w==-1?Kt:(v=Number(y.substring(v,w)),isNaN(v)?Rt:(w+=1,w+v>y.length?Kt:(y=y.slice(w,w+v),h.C=w+v,y)))}ri.prototype.cancel=function(){this.K=!0,wn(this)};function wi(h){h.T=Date.now()+h.H,Ha(h,h.H)}function Ha(h,y){if(h.D!=null)throw Error("WatchDog timer not null");h.D=bi(g(h.aa,h),y)}function Ii(h){h.D&&(c.clearTimeout(h.D),h.D=null)}ri.prototype.aa=function(){this.D=null;const h=Date.now();h-this.T>=0?(zs(this.i,this.B),this.M!=2&&(Ei(),It(17)),wn(this),this.m=2,Bn(this)):Ha(this,this.T-h)};function Bn(h){h.j.I==0||h.K||th(h.j,h)}function wn(h){Ii(h);var y=h.O;y&&typeof y.dispose=="function"&&y.dispose(),h.O=null,Rl(h.V),h.g&&(y=h.g,h.g=null,y.abort(),y.dispose())}function Ri(h,y){try{var v=h.j;if(v.I!=0&&(v.g==h||xi(v.h,h))){if(!h.L&&xi(v.h,h)&&v.I==3){try{var w=v.Ba.g.parse(y)}catch{w=null}if(Array.isArray(w)&&w.length==3){var q=w;if(q[0]==0){e:if(!v.v){if(v.g)if(v.g.F+3e3<h.F)Ja(v),jr(v);else break e;Xs(v),It(18)}}else v.xa=q[1],0<v.xa-v.K&&q[2]<37500&&v.F&&v.A==0&&!v.C&&(v.C=bi(g(v.Va,v),6e3));Ci(v.h)<=1&&v.ta&&(v.ta=void 0)}else Pi(v,11)}else if((h.L||v.g==h)&&Ja(v),!I(y))for(q=v.Ba.g.parse(y),y=0;y<q.length;y++){let $e=q[y];const dt=$e[0];if(!(dt<=v.K))if(v.K=dt,$e=$e[1],v.I==2)if($e[0]=="c"){v.M=$e[1],v.ba=$e[2];const qn=$e[3];qn!=null&&(v.ka=qn,v.j.info("VER="+v.ka));const ki=$e[4];ki!=null&&(v.za=ki,v.j.info("SVER="+v.za));const ui=$e[5];ui!=null&&typeof ui=="number"&&ui>0&&(w=1.5*ui,v.O=w,v.j.info("backChannelRequestTimeoutMs_="+w)),w=v;const ci=h.g;if(ci){const Ws=ci.g?ci.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ws){var X=w.h;X.g||Ws.indexOf("spdy")==-1&&Ws.indexOf("quic")==-1&&Ws.indexOf("h2")==-1||(X.j=X.l,X.g=new Set,X.h&&(Vl(X,X.h),X.h=null))}if(w.G){const Za=ci.g?ci.g.getResponseHeader("X-HTTP-Session-Id"):null;Za&&(w.wa=Za,Je(w.J,w.G,Za))}}v.I=3,v.l&&v.l.ra(),v.aa&&(v.T=Date.now()-h.F,v.j.info("Handshake RTT: "+v.T+"ms")),w=v;var oe=h;if(w.na=rh(w,w.L?w.ba:null,w.W),oe.L){Ol(w.h,oe);var Oe=oe,bt=w.O;bt&&(Oe.H=bt),Oe.D&&(Ii(Oe),wi(Oe)),w.g=oe}else Zc(w);v.i.length>0&&Mi(v)}else $e[0]!="stop"&&$e[0]!="close"||Pi(v,7);else v.I==3&&($e[0]=="stop"||$e[0]=="close"?$e[0]=="stop"?Pi(v,7):ql(v):$e[0]!="noop"&&v.l&&v.l.qa($e),v.A=0)}}Ei(4)}catch{}}var Ct=class{constructor(h,y){this.g=h,this.map=y}};function Dl(h){this.l=h||10,c.PerformanceNavigationTiming?(h=c.performance.getEntriesByType("navigation"),h=h.length>0&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Nl(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function Ci(h){return h.h?1:h.g?h.g.size:0}function xi(h,y){return h.h?h.h==y:h.g?h.g.has(y):!1}function Vl(h,y){h.g?h.g.add(y):h.h=y}function Ol(h,y){h.h&&h.h==y?h.h=null:h.g&&h.g.has(y)&&h.g.delete(y)}Dl.prototype.cancel=function(){if(this.i=Ml(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function Ml(h){if(h.h!=null)return h.i.concat(h.h.G);if(h.g!=null&&h.g.size!==0){let y=h.i;for(const v of h.g.values())y=y.concat(v.G);return y}return O(h.i)}var Qc=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ga(h,y){if(h){h=h.split("&");for(let v=0;v<h.length;v++){const w=h[v].indexOf("=");let q,X=null;w>=0?(q=h[v].substring(0,w),X=h[v].substring(w+1)):q=h[v],y(q,X?decodeURIComponent(X.replace(/\+/g," ")):"")}}}function In(h){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let y;h instanceof In?(this.l=h.l,Qt(this,h.j),this.o=h.o,this.g=h.g,Mr(this,h.u),this.h=h.h,Pl(this,Wc(h.i)),this.m=h.m):h&&(y=String(h).match(Qc))?(this.l=!1,Qt(this,y[1]||"",!0),this.o=Di(y[2]||""),this.g=Di(y[3]||"",!0),Mr(this,y[4]),this.h=Di(y[5]||"",!0),Pl(this,y[6]||"",!0),this.m=Di(y[7]||"")):(this.l=!1,this.i=new kr(null,this.l))}In.prototype.toString=function(){const h=[];var y=this.j;y&&h.push(Hs(y,Ka,!0),":");var v=this.g;return(v||y=="file")&&(h.push("//"),(y=this.o)&&h.push(Hs(y,Ka,!0),"@"),h.push(er(v).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.u,v!=null&&h.push(":",String(v))),(v=this.h)&&(this.g&&v.charAt(0)!="/"&&h.push("/"),h.push(Hs(v,v.charAt(0)=="/"?kl:Yc,!0))),(v=this.i.toString())&&h.push("?",v),(v=this.m)&&h.push("#",Hs(v,$c)),h.join("")},In.prototype.resolve=function(h){const y=xt(this);let v=!!h.j;v?Qt(y,h.j):v=!!h.o,v?y.o=h.o:v=!!h.g,v?y.g=h.g:v=h.u!=null;var w=h.h;if(v)Mr(y,h.u);else if(v=!!h.h){if(w.charAt(0)!="/")if(this.g&&!this.h)w="/"+w;else{var q=y.h.lastIndexOf("/");q!=-1&&(w=y.h.slice(0,q+1)+w)}if(q=w,q==".."||q==".")w="";else if(q.indexOf("./")!=-1||q.indexOf("/.")!=-1){w=q.lastIndexOf("/",0)==0,q=q.split("/");const X=[];for(let oe=0;oe<q.length;){const Oe=q[oe++];Oe=="."?w&&oe==q.length&&X.push(""):Oe==".."?((X.length>1||X.length==1&&X[0]!="")&&X.pop(),w&&oe==q.length&&X.push("")):(X.push(Oe),w=!0)}w=X.join("/")}else w=q}return v?y.h=w:v=h.i.toString()!=="",v?Pl(y,Wc(h.i)):v=!!h.m,v&&(y.m=h.m),y};function xt(h){return new In(h)}function Qt(h,y,v){h.j=v?Di(y,!0):y,h.j&&(h.j=h.j.replace(/:$/,""))}function Mr(h,y){if(y){if(y=Number(y),isNaN(y)||y<0)throw Error("Bad port number "+y);h.u=y}else h.u=null}function Pl(h,y,v){y instanceof kr?(h.i=y,Ya(h.i,h.l)):(v||(y=Hs(y,Pr)),h.i=new kr(y,h.l))}function Je(h,y,v){h.i.set(y,v)}function Fs(h){return Je(h,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),h}function Di(h,y){return h?y?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function Hs(h,y,v){return typeof h=="string"?(h=encodeURI(h).replace(y,yn),v&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function yn(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var Ka=/[#\/\?@]/g,Yc=/[#\?:]/g,kl=/[#\?]/g,Pr=/[#\?@]/g,$c=/#/g;function kr(h,y){this.h=this.g=null,this.i=h||null,this.j=!!y}function _n(h){h.g||(h.g=new Map,h.h=0,h.i&&Ga(h.i,function(y,v){h.add(decodeURIComponent(y.replace(/\+/g," ")),v)}))}r=kr.prototype,r.add=function(h,y){_n(this),this.i=null,h=Lr(this,h);let v=this.g.get(h);return v||this.g.set(h,v=[]),v.push(y),this.h+=1,this};function Xc(h,y){_n(h),y=Lr(h,y),h.g.has(y)&&(h.i=null,h.h-=h.g.get(y).length,h.g.delete(y))}function Ll(h,y){return _n(h),y=Lr(h,y),h.g.has(y)}r.forEach=function(h,y){_n(this),this.g.forEach(function(v,w){v.forEach(function(q){h.call(y,q,w,this)},this)},this)};function Ul(h,y){_n(h);let v=[];if(typeof y=="string")Ll(h,y)&&(v=v.concat(h.g.get(Lr(h,y))));else for(h=Array.from(h.g.values()),y=0;y<h.length;y++)v=v.concat(h[y]);return v}r.set=function(h,y){return _n(this),this.i=null,h=Lr(this,h),Ll(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[y]),this.h+=1,this},r.get=function(h,y){return h?(h=Ul(this,h),h.length>0?String(h[0]):y):y};function Qa(h,y,v){Xc(h,y),v.length>0&&(h.i=null,h.g.set(Lr(h,y),O(v)),h.h+=v.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],y=Array.from(this.g.keys());for(let w=0;w<y.length;w++){var v=y[w];const q=er(v);v=Ul(this,v);for(let X=0;X<v.length;X++){let oe=q;v[X]!==""&&(oe+="="+er(v[X])),h.push(oe)}}return this.i=h.join("&")};function Wc(h){const y=new kr;return y.i=h.i,h.g&&(y.g=new Map(h.g),y.h=h.h),y}function Lr(h,y){return y=String(y),h.j&&(y=y.toLowerCase()),y}function Ya(h,y){y&&!h.j&&(_n(h),h.i=null,h.g.forEach(function(v,w){const q=w.toLowerCase();w!=q&&(Xc(this,w),Qa(this,q,v))},h)),h.j=y}function ai(h,y){const v=new ii;if(c.Image){const w=new Image;w.onload=E(zn,v,"TestLoadImage: loaded",!0,y,w),w.onerror=E(zn,v,"TestLoadImage: error",!1,y,w),w.onabort=E(zn,v,"TestLoadImage: abort",!1,y,w),w.ontimeout=E(zn,v,"TestLoadImage: timeout",!1,y,w),c.setTimeout(function(){w.ontimeout&&w.ontimeout()},1e4),w.src=h}else y(!1)}function Bl(h,y){const v=new ii,w=new AbortController,q=setTimeout(()=>{w.abort(),zn(v,"TestPingServer: timeout",!1,y)},1e4);fetch(h,{signal:w.signal}).then(X=>{clearTimeout(q),X.ok?zn(v,"TestPingServer: ok",!0,y):zn(v,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(q),zn(v,"TestPingServer: error",!1,y)})}function zn(h,y,v,w,q){try{q&&(q.onload=null,q.onerror=null,q.onabort=null,q.ontimeout=null),w(v)}catch{}}function Ur(){this.g=new Uc}function Ni(h){this.i=h.Sb||null,this.h=h.ab||!1}T(Ni,Bc),Ni.prototype.g=function(){return new Gs(this.i,this.h)};function Gs(h,y){wt.call(this),this.H=h,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}T(Gs,wt),r=Gs.prototype,r.open=function(h,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=h,this.D=y,this.readyState=1,oi(this)},r.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const y={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};h&&(y.body=h),(this.H||c).fetch(new Request(this.D,y)).then(this.Pa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Br(this)),this.readyState=0},r.Pa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,oi(this)),this.g&&(this.readyState=3,oi(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;$a(this)}else h.text().then(this.Oa.bind(this),this.ga.bind(this))};function $a(h){h.j.read().then(h.Ma.bind(h)).catch(h.ga.bind(h))}r.Ma=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var y=h.value?h.value:new Uint8Array(0);(y=this.B.decode(y,{stream:!h.done}))&&(this.response=this.responseText+=y)}h.done?Br(this):oi(this),this.readyState==3&&$a(this)}},r.Oa=function(h){this.g&&(this.response=this.responseText=h,Br(this))},r.Na=function(h){this.g&&(this.response=h,Br(this))},r.ga=function(){this.g&&Br(this)};function Br(h){h.readyState=4,h.l=null,h.j=null,h.B=null,oi(h)}r.setRequestHeader=function(h,y){this.A.append(h,y)},r.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],y=this.h.entries();for(var v=y.next();!v.done;)v=v.value,h.push(v[0]+": "+v[1]),v=y.next();return h.join(`\r
`)};function oi(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(Gs.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function jn(h){let y="";return Le(h,function(v,w){y+=w,y+=":",y+=v,y+=`\r
`}),y}function Ks(h,y,v){e:{for(w in v){var w=!1;break e}w=!0}w||(v=jn(v),typeof h=="string"?v!=null&&er(v):Je(h,y,v))}function rt(h){wt.call(this),this.headers=new Map,this.L=h||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}T(rt,wt);var Vi=/^https?$/i,zl=["POST","PUT"];r=rt.prototype,r.Fa=function(h){this.H=h},r.ea=function(h,y,v,w){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);y=y?y.toUpperCase():"GET",this.D=h,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():xl.g(),this.g.onreadystatechange=S(g(this.Ca,this));try{this.B=!0,this.g.open(y,String(h),!0),this.B=!1}catch(X){Qs(this,X);return}if(h=v||"",v=new Map(this.headers),w)if(Object.getPrototypeOf(w)===Object.prototype)for(var q in w)v.set(q,w[q]);else if(typeof w.keys=="function"&&typeof w.get=="function")for(const X of w.keys())v.set(X,w.get(X));else throw Error("Unknown input type for opt_headers: "+String(w));w=Array.from(v.keys()).find(X=>X.toLowerCase()=="content-type"),q=c.FormData&&h instanceof c.FormData,!(Array.prototype.indexOf.call(zl,y,void 0)>=0)||w||q||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[X,oe]of v)this.g.setRequestHeader(X,oe);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(h),this.v=!1}catch(X){Qs(this,X)}};function Qs(h,y){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=y,h.o=5,jl(h),tr(h)}function jl(h){h.A||(h.A=!0,jt(h,"complete"),jt(h,"error"))}r.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=h||7,jt(this,"complete"),jt(this,"abort"),tr(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),tr(this,!0)),rt.Z.N.call(this)},r.Ca=function(){this.u||(this.B||this.v||this.j?Ys(this):this.Xa())},r.Xa=function(){Ys(this)};function Ys(h){if(h.h&&typeof l<"u"){if(h.v&&li(h)==4)setTimeout(h.Ca.bind(h),0);else if(jt(h,"readystatechange"),li(h)==4){h.h=!1;try{const X=h.ca();e:switch(X){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var v;if(!(v=y)){var w;if(w=X===0){let oe=String(h.D).match(Qc)[1]||null;!oe&&c.self&&c.self.location&&(oe=c.self.location.protocol.slice(0,-1)),w=!Vi.test(oe?oe.toLowerCase():"")}v=w}if(v)jt(h,"complete"),jt(h,"success");else{h.o=6;try{var q=li(h)>2?h.g.statusText:""}catch{q=""}h.l=q+" ["+h.ca()+"]",jl(h)}}finally{tr(h)}}}}function tr(h,y){if(h.g){h.m&&(clearTimeout(h.m),h.m=null);const v=h.g;h.g=null,y||jt(h,"ready");try{v.onreadystatechange=null}catch{}}}r.isActive=function(){return!!this.g};function li(h){return h.g?h.g.readyState:0}r.ca=function(){try{return li(this)>2?this.g.status:-1}catch{return-1}},r.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.La=function(h){if(this.g){var y=this.g.responseText;return h&&y.indexOf(h)==0&&(y=y.substring(h.length)),Qf(y)}};function Jt(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.F){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function nr(h){const y={};h=(h.g&&li(h)>=2&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let w=0;w<h.length;w++){if(I(h[w]))continue;var v=Hc(h[w]);const q=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();const X=y[q]||[];y[q]=X,X.push(v)}Ge(y,function(w){return w.join(", ")})}r.ya=function(){return this.o},r.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Oi(h,y,v){return v&&v.internalChannelParams&&v.internalChannelParams[h]||y}function zr(h){this.za=0,this.i=[],this.j=new ii,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Oi("failFast",!1,h),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Oi("baseRetryDelayMs",5e3,h),this.Za=Oi("retryDelaySeedMs",1e4,h),this.Ta=Oi("forwardChannelMaxRetries",2,h),this.va=Oi("forwardChannelRequestTimeoutMs",2e4,h),this.ma=h&&h.xmlHttpFactory||void 0,this.Ua=h&&h.Rb||void 0,this.Aa=h&&h.useFetchStreams||!1,this.O=void 0,this.L=h&&h.supportsCrossDomainXhr||!1,this.M="",this.h=new Dl(h&&h.concurrentRequestLimit),this.Ba=new Ur,this.S=h&&h.fastHandshake||!1,this.R=h&&h.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=h&&h.Pb||!1,h&&h.ua&&this.j.ua(),h&&h.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&h&&h.detectBufferingProxy||!1,this.ia=void 0,h&&h.longPollingTimeout&&h.longPollingTimeout>0&&(this.ia=h.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}r=zr.prototype,r.ka=8,r.I=1,r.connect=function(h,y,v,w){It(0),this.W=h,this.H=y||{},v&&w!==void 0&&(this.H.OSID=v,this.H.OAID=w),this.F=this.X,this.J=rh(this,null,this.W),Mi(this)};function ql(h){if(Xa(h),h.I==3){var y=h.V++,v=xt(h.J);if(Je(v,"SID",h.M),Je(v,"RID",y),Je(v,"TYPE","terminate"),$s(h,v),y=new ri(h,h.j,y),y.M=2,y.A=Fs(xt(v)),v=!1,c.navigator&&c.navigator.sendBeacon)try{v=c.navigator.sendBeacon(y.A.toString(),"")}catch{}!v&&c.Image&&(new Image().src=y.A,v=!0),v||(y.g=sh(y.j,null),y.g.ea(y.A)),y.F=Date.now(),wi(y)}ih(h)}function jr(h){h.g&&(Hl(h),h.g.cancel(),h.g=null)}function Xa(h){jr(h),h.v&&(c.clearTimeout(h.v),h.v=null),Ja(h),h.h.cancel(),h.m&&(typeof h.m=="number"&&c.clearTimeout(h.m),h.m=null)}function Mi(h){if(!Nl(h.h)&&!h.m){h.m=!0;var y=h.Ea;de||R(),pe||(de(),pe=!0),x.add(y,h),h.D=0}}function Wa(h,y){return Ci(h.h)>=h.h.j-(h.m?1:0)?!1:h.m?(h.i=y.G.concat(h.i),!0):h.I==1||h.I==2||h.D>=(h.Sa?0:h.Ta)?!1:(h.m=bi(g(h.Ea,h,y),nh(h,h.D)),h.D++,!0)}r.Ea=function(h){if(this.m)if(this.m=null,this.I==1){if(!h){this.V=Math.floor(Math.random()*1e5),h=this.V++;const q=new ri(this,this.j,h);let X=this.o;if(this.U&&(X?(X=P(X),ue(X,this.U)):X=this.U),this.u!==null||this.R||(q.J=X,X=null),this.S)e:{for(var y=0,v=0;v<this.i.length;v++){t:{var w=this.i[v];if("__data__"in w.map&&(w=w.map.__data__,typeof w=="string")){w=w.length;break t}w=void 0}if(w===void 0)break;if(y+=w,y>4096){y=v;break e}if(y===4096||v===this.i.length-1){y=v+1;break e}}y=1e3}else y=1e3;y=Jc(this,q,y),v=xt(this.J),Je(v,"RID",h),Je(v,"CVER",22),this.G&&Je(v,"X-HTTP-Session-Id",this.G),$s(this,v),X&&(this.R?y="headers="+er(jn(X))+"&"+y:this.u&&Ks(v,this.u,X)),Vl(this.h,q),this.Ra&&Je(v,"TYPE","init"),this.S?(Je(v,"$req",y),Je(v,"SID","null"),q.U=!0,Ai(q,v,null)):Ai(q,v,y),this.I=2}}else this.I==3&&(h?Fl(this,h):this.i.length==0||Nl(this.h)||Fl(this))};function Fl(h,y){var v;y?v=y.l:v=h.V++;const w=xt(h.J);Je(w,"SID",h.M),Je(w,"RID",v),Je(w,"AID",h.K),$s(h,w),h.u&&h.o&&Ks(w,h.u,h.o),v=new ri(h,h.j,v,h.D+1),h.u===null&&(v.J=h.o),y&&(h.i=y.G.concat(h.i)),y=Jc(h,v,1e3),v.H=Math.round(h.va*.5)+Math.round(h.va*.5*Math.random()),Vl(h.h,v),Ai(v,w,y)}function $s(h,y){h.H&&Le(h.H,function(v,w){Je(y,w,v)}),h.l&&Le({},function(v,w){Je(y,w,v)})}function Jc(h,y,v){v=Math.min(h.i.length,v);const w=h.l?g(h.l.Ka,h.l,h):null;e:{var q=h.i;let Oe=-1;for(;;){const bt=["count="+v];Oe==-1?v>0?(Oe=q[0].g,bt.push("ofs="+Oe)):Oe=0:bt.push("ofs="+Oe);let $e=!0;for(let dt=0;dt<v;dt++){var X=q[dt].g;const qn=q[dt].map;if(X-=Oe,X<0)Oe=Math.max(0,q[dt].g-100),$e=!1;else try{X="req"+X+"_"||"";try{var oe=qn instanceof Map?qn:Object.entries(qn);for(const[ki,ui]of oe){let ci=ui;f(ui)&&(ci=Or(ui)),bt.push(X+ki+"="+encodeURIComponent(ci))}}catch(ki){throw bt.push(X+"type="+encodeURIComponent("_badmap")),ki}}catch{w&&w(qn)}}if($e){oe=bt.join("&");break e}}oe=void 0}return h=h.i.splice(0,v),y.G=h,oe}function Zc(h){if(!h.g&&!h.v){h.Y=1;var y=h.Da;de||R(),pe||(de(),pe=!0),x.add(y,h),h.A=0}}function Xs(h){return h.g||h.v||h.A>=3?!1:(h.Y++,h.v=bi(g(h.Da,h),nh(h,h.A)),h.A++,!0)}r.Da=function(){if(this.v=null,eh(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var h=4*this.T;this.j.info("BP detection timer enabled: "+h),this.B=bi(g(this.Wa,this),h)}},r.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,It(10),jr(this),eh(this))};function Hl(h){h.B!=null&&(c.clearTimeout(h.B),h.B=null)}function eh(h){h.g=new ri(h,h.j,"rpc",h.Y),h.u===null&&(h.g.J=h.o),h.g.P=0;var y=xt(h.na);Je(y,"RID","rpc"),Je(y,"SID",h.M),Je(y,"AID",h.K),Je(y,"CI",h.F?"0":"1"),!h.F&&h.ia&&Je(y,"TO",h.ia),Je(y,"TYPE","xmlhttp"),$s(h,y),h.u&&h.o&&Ks(y,h.u,h.o),h.O&&(h.g.H=h.O);var v=h.g;h=h.ba,v.M=1,v.A=Fs(xt(y)),v.u=null,v.R=!0,Fa(v,h)}r.Va=function(){this.C!=null&&(this.C=null,jr(this),Xs(this),It(19))};function Ja(h){h.C!=null&&(c.clearTimeout(h.C),h.C=null)}function th(h,y){var v=null;if(h.g==y){Ja(h),Hl(h),h.g=null;var w=2}else if(xi(h.h,y))v=y.G,Ol(h.h,y),w=1;else return;if(h.I!=0){if(y.o)if(w==1){v=y.u?y.u.length:0,y=Date.now()-y.F;var q=h.D;w=qa(),jt(w,new Ti(w,v)),Mi(h)}else Zc(h);else if(q=y.m,q==3||q==0&&y.X>0||!(w==1&&Wa(h,y)||w==2&&Xs(h)))switch(v&&v.length>0&&(y=h.h,y.i=y.i.concat(v)),q){case 1:Pi(h,5);break;case 4:Pi(h,10);break;case 3:Pi(h,6);break;default:Pi(h,2)}}}function nh(h,y){let v=h.Qa+Math.floor(Math.random()*h.Za);return h.isActive()||(v*=2),v*y}function Pi(h,y){if(h.j.info("Error code "+y),y==2){var v=g(h.bb,h),w=h.Ua;const q=!w;w=new In(w||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||Qt(w,"https"),Fs(w),q?ai(w.toString(),v):Bl(w.toString(),v)}else It(2);h.I=0,h.l&&h.l.pa(y),ih(h),Xa(h)}r.bb=function(h){h?(this.j.info("Successfully pinged google.com"),It(2)):(this.j.info("Failed to ping google.com"),It(1))};function ih(h){if(h.I=0,h.ja=[],h.l){const y=Ml(h.h);(y.length!=0||h.i.length!=0)&&(z(h.ja,y),z(h.ja,h.i),h.h.i.length=0,O(h.i),h.i.length=0),h.l.oa()}}function rh(h,y,v){var w=v instanceof In?xt(v):new In(v);if(w.g!="")y&&(w.g=y+"."+w.g),Mr(w,w.u);else{var q=c.location;w=q.protocol,y=y?y+"."+q.hostname:q.hostname,q=+q.port;const X=new In(null);w&&Qt(X,w),y&&(X.g=y),q&&Mr(X,q),v&&(X.h=v),w=X}return v=h.G,y=h.wa,v&&y&&Je(w,v,y),Je(w,"VER",h.ka),$s(h,w),w}function sh(h,y,v){if(y&&!h.L)throw Error("Can't create secondary domain capable XhrIo object.");return y=h.Aa&&!h.ma?new rt(new Ni({ab:v})):new rt(h.ma),y.Fa(h.L),y}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function ah(){}r=ah.prototype,r.ra=function(){},r.qa=function(){},r.pa=function(){},r.oa=function(){},r.isActive=function(){return!0},r.Ka=function(){};function qr(){}qr.prototype.g=function(h,y){return new dn(h,y)};function dn(h,y){wt.call(this),this.g=new zr(y),this.l=h,this.h=y&&y.messageUrlParams||null,h=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(h?h["X-WebChannel-Content-Type"]=y.messageContentType:h={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.sa&&(h?h["X-WebChannel-Client-Profile"]=y.sa:h={"X-WebChannel-Client-Profile":y.sa}),this.g.U=h,(h=y&&y.Qb)&&!I(h)&&(this.g.u=h),this.A=y&&y.supportsCrossDomainXhr||!1,this.v=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!I(y)&&(this.g.G=y,h=this.h,h!==null&&y in h&&(h=this.h,y in h&&delete h[y])),this.j=new ir(this)}T(dn,wt),dn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},dn.prototype.close=function(){ql(this.g)},dn.prototype.o=function(h){var y=this.g;if(typeof h=="string"){var v={};v.__data__=h,h=v}else this.v&&(v={},v.__data__=Or(h),h=v);y.i.push(new Ct(y.Ya++,h)),y.I==3&&Mi(y)},dn.prototype.N=function(){this.g.l=null,delete this.j,ql(this.g),delete this.g,dn.Z.N.call(this)};function oh(h){Wt.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var y=h.__sm__;if(y){e:{for(const v in y){h=v;break e}h=void 0}(this.i=h)&&(h=this.i,y=y!==null&&h in y?y[h]:void 0),this.data=y}else this.data=h}T(oh,Wt);function lh(){Un.call(this),this.status=1}T(lh,Un);function ir(h){this.g=h}T(ir,ah),ir.prototype.ra=function(){jt(this.g,"a")},ir.prototype.qa=function(h){jt(this.g,new oh(h))},ir.prototype.pa=function(h){jt(this.g,new lh)},ir.prototype.oa=function(){jt(this.g,"b")},qr.prototype.createWebChannel=qr.prototype.g,dn.prototype.send=dn.prototype.o,dn.prototype.open=dn.prototype.m,dn.prototype.close=dn.prototype.close,RS=function(){return new qr},IS=function(){return qa()},wS=Tt,Ng={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},js.NO_ERROR=0,js.TIMEOUT=8,js.HTTP_ERROR=6,xd=js,Cl.COMPLETE="complete",AS=Cl,zc.EventType=ni,ni.OPEN="a",ni.CLOSE="b",ni.ERROR="c",ni.MESSAGE="d",wt.prototype.listen=wt.prototype.J,Bu=zc,rt.prototype.listenOnce=rt.prototype.K,rt.prototype.getLastError=rt.prototype.Ha,rt.prototype.getLastErrorCode=rt.prototype.ya,rt.prototype.getStatus=rt.prototype.ca,rt.prototype.getResponseJson=rt.prototype.La,rt.prototype.getResponseText=rt.prototype.la,rt.prototype.send=rt.prototype.ea,rt.prototype.setWithCredentials=rt.prototype.Fa,SS=rt}).apply(typeof md<"u"?md:typeof self<"u"?self:typeof window<"u"?window:{});const N0="@firebase/firestore",V0="4.9.3";class rn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}rn.UNAUTHENTICATED=new rn(null),rn.GOOGLE_CREDENTIALS=new rn("google-credentials-uid"),rn.FIRST_PARTY=new rn("first-party-uid"),rn.MOCK_USER=new rn("mock-user");let vl="12.7.0";const xa=new hy("@firebase/firestore");function Uo(){return xa.logLevel}function se(r,...e){if(xa.logLevel<=qe.DEBUG){const t=e.map(by);xa.debug(`Firestore (${vl}): ${r}`,...t)}}function mn(r,...e){if(xa.logLevel<=qe.ERROR){const t=e.map(by);xa.error(`Firestore (${vl}): ${r}`,...t)}}function Da(r,...e){if(xa.logLevel<=qe.WARN){const t=e.map(by);xa.warn(`Firestore (${vl}): ${r}`,...t)}}function by(r){if(typeof r=="string")return r;try{return(function(t){return JSON.stringify(t)})(r)}catch{return r}}function ye(r,e,t){let i="Unexpected state";typeof e=="string"?i=e:t=e,CS(r,i,t)}function CS(r,e,t){let i=`FIRESTORE (${vl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(t!==void 0)try{i+=" CONTEXT: "+JSON.stringify(t)}catch{i+=" CONTEXT: "+t}throw mn(i),new Error(i)}function Ee(r,e,t,i){let o="Unexpected state";typeof t=="string"?o=t:i=t,r||CS(e,o,i)}function De(r,e){return r}const Z={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class le extends xr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Is{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class xS{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class eV{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(rn.UNAUTHENTICATED)))}shutdown(){}}class tV{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class nV{constructor(e){this.t=e,this.currentUser=rn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Ee(this.o===void 0,42304);let i=this.i;const o=p=>this.i!==i?(i=this.i,t(p)):Promise.resolve();let l=new Is;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Is,e.enqueueRetryable((()=>o(this.currentUser)))};const c=()=>{const p=l;e.enqueueRetryable((async()=>{await p.promise,await o(this.currentUser)}))},f=p=>{se("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((p=>f(p))),setTimeout((()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?f(p):(se("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Is)}}),0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((i=>this.i!==e?(se("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Ee(typeof i.accessToken=="string",31837,{l:i}),new xS(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ee(e===null||typeof e=="string",2055,{h:e}),new rn(e)}}class iV{constructor(e,t,i){this.P=e,this.T=t,this.I=i,this.type="FirstParty",this.user=rn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class rV{constructor(e,t,i){this.P=e,this.T=t,this.I=i}getToken(){return Promise.resolve(new iV(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(rn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class O0{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class sV{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,pi(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Ee(this.o===void 0,3512);const i=l=>{l.error!=null&&se("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const c=l.token!==this.m;return this.m=l.token,se("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>i(l)))};const o=l=>{se("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>o(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?o(l):se("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new O0(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Ee(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new O0(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function aV(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<r;i++)t[i]=Math.floor(256*Math.random());return t}class Sy{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const o=aV(40);for(let l=0;l<o.length;++l)i.length<20&&o[l]<t&&(i+=e.charAt(o[l]%62))}return i}}function xe(r,e){return r<e?-1:r>e?1:0}function Vg(r,e){const t=Math.min(r.length,e.length);for(let i=0;i<t;i++){const o=r.charAt(i),l=e.charAt(i);if(o!==l)return ag(o)===ag(l)?xe(o,l):ag(o)?1:-1}return xe(r.length,e.length)}const oV=55296,lV=57343;function ag(r){const e=r.charCodeAt(0);return e>=oV&&e<=lV}function Jo(r,e,t){return r.length===e.length&&r.every(((i,o)=>t(i,e[o])))}function DS(r){return r+"\0"}const M0="__name__";class Hi{constructor(e,t,i){t===void 0?t=0:t>e.length&&ye(637,{offset:t,range:e.length}),i===void 0?i=e.length-t:i>e.length-t&&ye(1746,{length:i,range:e.length-t}),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return Hi.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Hi?e.forEach((i=>{t.push(i)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let o=0;o<i;o++){const l=Hi.compareSegments(e.get(o),t.get(o));if(l!==0)return l}return xe(e.length,t.length)}static compareSegments(e,t){const i=Hi.isNumericId(e),o=Hi.isNumericId(t);return i&&!o?-1:!i&&o?1:i&&o?Hi.extractNumericId(e).compare(Hi.extractNumericId(t)):Vg(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ws.fromString(e.substring(4,e.length-2))}}class We extends Hi{construct(e,t,i){return new We(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new le(Z.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter((o=>o.length>0)))}return new We(t)}static emptyPath(){return new We([])}}const uV=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class yt extends Hi{construct(e,t,i){return new yt(e,t,i)}static isValidIdentifier(e){return uV.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),yt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===M0}static keyField(){return new yt([M0])}static fromServerFormat(e){const t=[];let i="",o=0;const l=()=>{if(i.length===0)throw new le(Z.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let c=!1;for(;o<e.length;){const f=e[o];if(f==="\\"){if(o+1===e.length)throw new le(Z.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[o+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new le(Z.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=p,o+=2}else f==="`"?(c=!c,o++):f!=="."||c?(i+=f,o++):(l(),o++)}if(l(),c)throw new le(Z.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new yt(t)}static emptyPath(){return new yt([])}}class ce{constructor(e){this.path=e}static fromPath(e){return new ce(We.fromString(e))}static fromName(e){return new ce(We.fromString(e).popFirst(5))}static empty(){return new ce(We.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&We.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return We.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ce(new We(e.slice()))}}function NS(r,e,t){if(!t)throw new le(Z.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function cV(r,e,t,i){if(e===!0&&i===!0)throw new le(Z.INVALID_ARGUMENT,`${r} and ${t} cannot be used together.`)}function P0(r){if(!ce.isDocumentKey(r))throw new le(Z.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function k0(r){if(ce.isDocumentKey(r))throw new le(Z.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function VS(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function Sf(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":ye(12329,{type:typeof r})}function Sr(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new le(Z.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Sf(r);throw new le(Z.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return r}function Pt(r,e){const t={typeString:r};return e&&(t.value=e),t}function Rc(r,e){if(!VS(r))throw new le(Z.INVALID_ARGUMENT,"JSON must be an object");let t;for(const i in e)if(e[i]){const o=e[i].typeString,l="value"in e[i]?{value:e[i].value}:void 0;if(!(i in r)){t=`JSON missing required field: '${i}'`;break}const c=r[i];if(o&&typeof c!==o){t=`JSON field '${i}' must be a ${o}.`;break}if(l!==void 0&&c!==l.value){t=`Expected '${i}' field to equal '${l.value}'`;break}}if(t)throw new le(Z.INVALID_ARGUMENT,t);return!0}const L0=-62135596800,U0=1e6;class tt{static now(){return tt.fromMillis(Date.now())}static fromDate(e){return tt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*U0);return new tt(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new le(Z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new le(Z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<L0)throw new le(Z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new le(Z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/U0}_compareTo(e){return this.seconds===e.seconds?xe(this.nanoseconds,e.nanoseconds):xe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:tt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Rc(e,tt._jsonSchema))return new tt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-L0;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}tt._jsonSchemaVersion="firestore/timestamp/1.0",tt._jsonSchema={type:Pt("string",tt._jsonSchemaVersion),seconds:Pt("number"),nanoseconds:Pt("number")};class be{static fromTimestamp(e){return new be(e)}static min(){return new be(new tt(0,0))}static max(){return new be(new tt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const rc=-1;class Jd{constructor(e,t,i,o){this.indexId=e,this.collectionGroup=t,this.fields=i,this.indexState=o}}function Og(r){return r.fields.find((e=>e.kind===2))}function pa(r){return r.fields.filter((e=>e.kind!==2))}Jd.UNKNOWN_ID=-1;class Dd{constructor(e,t){this.fieldPath=e,this.kind=t}}class sc{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new sc(0,kn.min())}}function hV(r,e){const t=r.toTimestamp().seconds,i=r.toTimestamp().nanoseconds+1,o=be.fromTimestamp(i===1e9?new tt(t+1,0):new tt(t,i));return new kn(o,ce.empty(),e)}function OS(r){return new kn(r.readTime,r.key,rc)}class kn{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new kn(be.min(),ce.empty(),rc)}static max(){return new kn(be.max(),ce.empty(),rc)}}function Ay(r,e){let t=r.readTime.compareTo(e.readTime);return t!==0?t:(t=ce.comparator(r.documentKey,e.documentKey),t!==0?t:xe(r.largestBatchId,e.largestBatchId))}const MS="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class PS{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function Ba(r){if(r.code!==Z.FAILED_PRECONDITION||r.message!==MS)throw r;se("LocalStore","Unexpectedly lost primary lease")}class j{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ye(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new j(((i,o)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(i,o)},this.catchCallback=l=>{this.wrapFailure(t,l).next(i,o)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof j?t:j.resolve(t)}catch(t){return j.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):j.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):j.reject(t)}static resolve(e){return new j(((t,i)=>{t(e)}))}static reject(e){return new j(((t,i)=>{i(e)}))}static waitFor(e){return new j(((t,i)=>{let o=0,l=0,c=!1;e.forEach((f=>{++o,f.next((()=>{++l,c&&l===o&&t()}),(p=>i(p)))})),c=!0,l===o&&t()}))}static or(e){let t=j.resolve(!1);for(const i of e)t=t.next((o=>o?j.resolve(o):i()));return t}static forEach(e,t){const i=[];return e.forEach(((o,l)=>{i.push(t.call(this,o,l))})),this.waitFor(i)}static mapArray(e,t){return new j(((i,o)=>{const l=e.length,c=new Array(l);let f=0;for(let p=0;p<l;p++){const g=p;t(e[g]).next((E=>{c[g]=E,++f,f===l&&i(c)}),(E=>o(E)))}}))}static doWhile(e,t){return new j(((i,o)=>{const l=()=>{e()===!0?t().next((()=>{l()}),o):i()};l()}))}}const Mn="SimpleDb";class Af{static open(e,t,i,o){try{return new Af(t,e.transaction(o,i))}catch(l){throw new Ku(t,l)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.S=new Is,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{t.error?this.S.reject(new Ku(e,t.error)):this.S.resolve()},this.transaction.onerror=i=>{const o=wy(i.target.error);this.S.reject(new Ku(e,o))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(se(Mn,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const t=this.transaction.objectStore(e);return new fV(t)}}class Rs{static delete(e){return se(Mn,"Removing database:",e),ya(R1().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!k1())return!1;if(Rs.F())return!0;const e=Ft(),t=Rs.M(e),i=0<t&&t<10,o=kS(e),l=0<o&&o<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||i||l)}static F(){return typeof process<"u"&&process.__PRIVATE_env?.__PRIVATE_USE_MOCK_PERSISTENCE==="YES"}static O(e,t){return e.store(t)}static M(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),i=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(i)}constructor(e,t,i){this.name=e,this.version=t,this.N=i,this.B=null,Rs.M(Ft())===12.2&&mn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||(se(Mn,"Opening database:",this.name),this.db=await new Promise(((t,i)=>{const o=indexedDB.open(this.name,this.version);o.onsuccess=l=>{const c=l.target.result;t(c)},o.onblocked=()=>{i(new Ku(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},o.onerror=l=>{const c=l.target.error;c.name==="VersionError"?i(new le(Z.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):c.name==="InvalidStateError"?i(new le(Z.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+c)):i(new Ku(e,c))},o.onupgradeneeded=l=>{se(Mn,'Database "'+this.name+'" requires upgrade from version:',l.oldVersion);const c=l.target.result;this.N.k(c,o.transaction,l.oldVersion,this.version).next((()=>{se(Mn,"Database upgrade to version "+this.version+" complete")}))}}))),this.q&&(this.db.onversionchange=t=>this.q(t)),this.db}$(e){this.q=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,i,o){const l=t==="readonly";let c=0;for(;;){++c;try{this.db=await this.L(e);const f=Af.open(this.db,e,l?"readonly":"readwrite",i),p=o(f).next((g=>(f.C(),g))).catch((g=>(f.abort(g),j.reject(g)))).toPromise();return p.catch((()=>{})),await f.D,p}catch(f){const p=f,g=p.name!=="FirebaseError"&&c<3;if(se(Mn,"Transaction failed with error:",p.message,"Retrying:",g),this.close(),!g)return Promise.reject(p)}}}close(){this.db&&this.db.close(),this.db=void 0}}function kS(r){const e=r.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class dV{constructor(e){this.U=e,this.K=!1,this.W=null}get isDone(){return this.K}get G(){return this.W}set cursor(e){this.U=e}done(){this.K=!0}j(e){this.W=e}delete(){return ya(this.U.delete())}}class Ku extends le{constructor(e,t){super(Z.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Ps(r){return r.name==="IndexedDbTransactionError"}class fV{constructor(e){this.store=e}put(e,t){let i;return t!==void 0?(se(Mn,"PUT",this.store.name,e,t),i=this.store.put(t,e)):(se(Mn,"PUT",this.store.name,"<auto-key>",e),i=this.store.put(e)),ya(i)}add(e){return se(Mn,"ADD",this.store.name,e,e),ya(this.store.add(e))}get(e){return ya(this.store.get(e)).next((t=>(t===void 0&&(t=null),se(Mn,"GET",this.store.name,e,t),t)))}delete(e){return se(Mn,"DELETE",this.store.name,e),ya(this.store.delete(e))}count(){return se(Mn,"COUNT",this.store.name),ya(this.store.count())}J(e,t){const i=this.options(e,t),o=i.index?this.store.index(i.index):this.store;if(typeof o.getAll=="function"){const l=o.getAll(i.range);return new j(((c,f)=>{l.onerror=p=>{f(p.target.error)},l.onsuccess=p=>{c(p.target.result)}}))}{const l=this.cursor(i),c=[];return this.H(l,((f,p)=>{c.push(p)})).next((()=>c))}}Y(e,t){const i=this.store.getAll(e,t===null?void 0:t);return new j(((o,l)=>{i.onerror=c=>{l(c.target.error)},i.onsuccess=c=>{o(c.target.result)}}))}Z(e,t){se(Mn,"DELETE ALL",this.store.name);const i=this.options(e,t);i.X=!1;const o=this.cursor(i);return this.H(o,((l,c,f)=>f.delete()))}ee(e,t){let i;t?i=e:(i={},t=e);const o=this.cursor(i);return this.H(o,t)}te(e){const t=this.cursor({});return new j(((i,o)=>{t.onerror=l=>{const c=wy(l.target.error);o(c)},t.onsuccess=l=>{const c=l.target.result;c?e(c.primaryKey,c.value).next((f=>{f?c.continue():i()})):i()}}))}H(e,t){const i=[];return new j(((o,l)=>{e.onerror=c=>{l(c.target.error)},e.onsuccess=c=>{const f=c.target.result;if(!f)return void o();const p=new dV(f),g=t(f.primaryKey,f.value,p);if(g instanceof j){const E=g.catch((T=>(p.done(),j.reject(T))));i.push(E)}p.isDone?o():p.G===null?f.continue():f.continue(p.G)}})).next((()=>j.waitFor(i)))}options(e,t){let i;return e!==void 0&&(typeof e=="string"?i=e:t=e),{index:i,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const i=this.store.index(e.index);return e.X?i.openKeyCursor(e.range,t):i.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function ya(r){return new j(((e,t)=>{r.onsuccess=i=>{const o=i.target.result;e(o)},r.onerror=i=>{const o=wy(i.target.error);t(o)}}))}let B0=!1;function wy(r){const e=Rs.M(Ft());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(r.message.indexOf(t)>=0){const i=new le("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return B0||(B0=!0,setTimeout((()=>{throw i}),0)),i}}return r}const Qu="IndexBackfiller";class mV{constructor(e,t){this.asyncQueue=e,this.ne=t,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){se(Qu,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{const t=await this.ne.ie();se(Qu,`Documents written: ${t}`)}catch(t){Ps(t)?se(Qu,"Ignoring IndexedDB error during index backfill: ",t):await Ba(t)}await this.re(6e4)}))}}class pV{constructor(e,t){this.localStore=e,this.persistence=t}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(t=>this.se(t,e)))}se(e,t){const i=new Set;let o=t,l=!0;return j.doWhile((()=>l===!0&&o>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((c=>{if(c!==null&&!i.has(c))return se(Qu,`Processing collection: ${c}`),this.oe(e,c,o).next((f=>{o-=f,i.add(c)}));l=!1})))).next((()=>t-o))}oe(e,t,i){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((o=>this.localStore.localDocuments.getNextDocuments(e,t,o,i).next((l=>{const c=l.changes;return this.localStore.indexManager.updateIndexEntries(e,c).next((()=>this._e(o,l))).next((f=>(se(Qu,`Updating offset: ${f}`),this.localStore.indexManager.updateCollectionGroup(e,t,f)))).next((()=>c.size))}))))}_e(e,t){let i=e;return t.changes.forEach(((o,l)=>{const c=OS(l);Ay(c,i)>0&&(i=c)})),new kn(i.readTime,i.documentKey,Math.max(t.batchId,e.largestBatchId))}}class Zn{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>t.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Zn.ce=-1;const ba=-1;function wf(r){return r==null}function ac(r){return r===0&&1/r==-1/0}function gV(r){return typeof r=="number"&&Number.isInteger(r)&&!ac(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}const Zd="";function cn(r){let e="";for(let t=0;t<r.length;t++)e.length>0&&(e=z0(e)),e=yV(r.get(t),e);return z0(e)}function yV(r,e){let t=e;const i=r.length;for(let o=0;o<i;o++){const l=r.charAt(o);switch(l){case"\0":t+="";break;case Zd:t+="";break;default:t+=l}}return t}function z0(r){return r+Zd+""}function Gi(r){const e=r.length;if(Ee(e>=2,64408,{path:r}),e===2)return Ee(r.charAt(0)===Zd&&r.charAt(1)==="",56145,{path:r}),We.emptyPath();const t=e-2,i=[];let o="";for(let l=0;l<e;){const c=r.indexOf(Zd,l);switch((c<0||c>t)&&ye(50515,{path:r}),r.charAt(c+1)){case"":const f=r.substring(l,c);let p;o.length===0?p=f:(o+=f,p=o,o=""),i.push(p);break;case"":o+=r.substring(l,c),o+="\0";break;case"":o+=r.substring(l,c+1);break;default:ye(61167,{path:r})}l=c+2}return new We(i)}const ga="remoteDocuments",Cc="owner",Do="owner",oc="mutationQueues",_V="userId",mi="mutations",j0="batchId",Ta="userMutationsIndex",q0=["userId","batchId"];function Nd(r,e){return[r,cn(e)]}function LS(r,e,t){return[r,cn(e),t]}const vV={},Zo="documentMutations",ef="remoteDocumentsV14",EV=["prefixPath","collectionGroup","readTime","documentId"],Vd="documentKeyIndex",TV=["prefixPath","collectionGroup","documentId"],US="collectionGroupIndex",bV=["collectionGroup","readTime","prefixPath","documentId"],lc="remoteDocumentGlobal",Mg="remoteDocumentGlobalKey",el="targets",BS="queryTargetsIndex",SV=["canonicalId","targetId"],tl="targetDocuments",AV=["targetId","path"],Iy="documentTargetsIndex",wV=["path","targetId"],tf="targetGlobalKey",Sa="targetGlobal",uc="collectionParents",IV=["collectionId","parent"],nl="clientMetadata",RV="clientId",If="bundles",CV="bundleId",Rf="namedQueries",xV="name",Ry="indexConfiguration",DV="indexId",Pg="collectionGroupIndex",NV="collectionGroup",Yu="indexState",VV=["indexId","uid"],zS="sequenceNumberIndex",OV=["uid","sequenceNumber"],$u="indexEntries",MV=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],jS="documentKeyIndex",PV=["indexId","uid","orderedDocumentKey"],Cf="documentOverlays",kV=["userId","collectionPath","documentId"],kg="collectionPathOverlayIndex",LV=["userId","collectionPath","largestBatchId"],qS="collectionGroupOverlayIndex",UV=["userId","collectionGroup","largestBatchId"],Cy="globals",BV="name",FS=[oc,mi,Zo,ga,el,Cc,Sa,tl,nl,lc,uc,If,Rf],zV=[...FS,Cf],HS=[oc,mi,Zo,ef,el,Cc,Sa,tl,nl,lc,uc,If,Rf,Cf],GS=HS,xy=[...GS,Ry,Yu,$u],jV=xy,KS=[...xy,Cy],qV=KS;class Lg extends PS{constructor(e,t){super(),this.le=e,this.currentSequenceNumber=t}}function Gt(r,e){const t=De(r);return Rs.O(t.le,e)}function F0(r){let e=0;for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e++;return e}function ks(r,e){for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e(t,r[t])}function QS(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}class gt{constructor(e,t){this.comparator=e,this.root=t||sn.EMPTY}insert(e,t){return new gt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,sn.BLACK,null,null))}remove(e){return new gt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,sn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const o=this.comparator(e,i.key);if(o===0)return t+i.left.size;o<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,i)=>(e(t,i),!1)))}toString(){const e=[];return this.inorderTraversal(((t,i)=>(e.push(`${t}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new pd(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new pd(this.root,e,this.comparator,!1)}getReverseIterator(){return new pd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new pd(this.root,e,this.comparator,!0)}}class pd{constructor(e,t,i,o){this.isReverse=o,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?i(e.key,t):1,t&&o&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class sn{constructor(e,t,i,o,l){this.key=e,this.value=t,this.color=i??sn.RED,this.left=o??sn.EMPTY,this.right=l??sn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,o,l){return new sn(e??this.key,t??this.value,i??this.color,o??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let o=this;const l=i(e,o.key);return o=l<0?o.copy(null,null,null,o.left.insert(e,t,i),null):l===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,i)),o.fixUp()}removeMin(){if(this.left.isEmpty())return sn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return sn.EMPTY;i=o.right.min(),o=o.copy(i.key,i.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,sn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,sn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ye(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ye(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ye(27949);return e+(this.isRed()?0:1)}}sn.EMPTY=null,sn.RED=!0,sn.BLACK=!1;sn.EMPTY=new class{constructor(){this.size=0}get key(){throw ye(57766)}get value(){throw ye(16141)}get color(){throw ye(16727)}get left(){throw ye(29726)}get right(){throw ye(36894)}copy(e,t,i,o,l){return this}insert(e,t,i){return new sn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class it{constructor(e){this.comparator=e,this.data=new gt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,i)=>(e(t),!1)))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const o=i.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new H0(this.data.getIterator())}getIteratorFrom(e){return new H0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((i=>{t=t.add(i)})),t}isEqual(e){if(!(e instanceof it)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=i.getNext().key;if(this.comparator(o,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new it(this.comparator);return t.data=e,t}}class H0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function No(r){return r.hasNext()?r.getNext():void 0}class An{constructor(e){this.fields=e,e.sort(yt.comparator)}static empty(){return new An([])}unionWith(e){let t=new it(yt.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new An(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Jo(this.fields,e.fields,((t,i)=>t.isEqual(i)))}}class YS extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Lt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(o){try{return atob(o)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new YS("Invalid base64 string: "+l):l}})(e);return new Lt(t)}static fromUint8Array(e){const t=(function(o){let l="";for(let c=0;c<o.length;++c)l+=String.fromCharCode(o[c]);return l})(e);return new Lt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const i=new Uint8Array(t.length);for(let o=0;o<t.length;o++)i[o]=t.charCodeAt(o);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return xe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Lt.EMPTY_BYTE_STRING=new Lt("");const FV=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Rr(r){if(Ee(!!r,39018),typeof r=="string"){let e=0;const t=FV.exec(r);if(Ee(!!t,46558,{timestamp:r}),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const i=new Date(r);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:mt(r.seconds),nanos:mt(r.nanos)}}function mt(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function Cr(r){return typeof r=="string"?Lt.fromBase64String(r):Lt.fromUint8Array(r)}const $S="server_timestamp",XS="__type__",WS="__previous_value__",JS="__local_write_time__";function Dy(r){return(r?.mapValue?.fields||{})[XS]?.stringValue===$S}function xf(r){const e=r.mapValue.fields[WS];return Dy(e)?xf(e):e}function cc(r){const e=Rr(r.mapValue.fields[JS].timestampValue);return new tt(e.seconds,e.nanos)}class HV{constructor(e,t,i,o,l,c,f,p,g,E){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=o,this.ssl=l,this.forceLongPolling=c,this.autoDetectLongPolling=f,this.longPollingOptions=p,this.useFetchStreams=g,this.isUsingEmulator=E}}const nf="(default)";class Na{constructor(e,t){this.projectId=e,this.database=t||nf}static empty(){return new Na("","")}get isDefaultDatabase(){return this.database===nf}isEqual(e){return e instanceof Na&&e.projectId===this.projectId&&e.database===this.database}}const Ny="__type__",ZS="__max__",Es={mapValue:{fields:{__type__:{stringValue:ZS}}}},Vy="__vector__",il="value",Od={nullValue:"NULL_VALUE"};function xs(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?Dy(r)?4:eA(r)?9007199254740991:Df(r)?10:11:ye(28295,{value:r})}function Ji(r,e){if(r===e)return!0;const t=xs(r);if(t!==xs(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return cc(r).isEqual(cc(e));case 3:return(function(o,l){if(typeof o.timestampValue=="string"&&typeof l.timestampValue=="string"&&o.timestampValue.length===l.timestampValue.length)return o.timestampValue===l.timestampValue;const c=Rr(o.timestampValue),f=Rr(l.timestampValue);return c.seconds===f.seconds&&c.nanos===f.nanos})(r,e);case 5:return r.stringValue===e.stringValue;case 6:return(function(o,l){return Cr(o.bytesValue).isEqual(Cr(l.bytesValue))})(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return(function(o,l){return mt(o.geoPointValue.latitude)===mt(l.geoPointValue.latitude)&&mt(o.geoPointValue.longitude)===mt(l.geoPointValue.longitude)})(r,e);case 2:return(function(o,l){if("integerValue"in o&&"integerValue"in l)return mt(o.integerValue)===mt(l.integerValue);if("doubleValue"in o&&"doubleValue"in l){const c=mt(o.doubleValue),f=mt(l.doubleValue);return c===f?ac(c)===ac(f):isNaN(c)&&isNaN(f)}return!1})(r,e);case 9:return Jo(r.arrayValue.values||[],e.arrayValue.values||[],Ji);case 10:case 11:return(function(o,l){const c=o.mapValue.fields||{},f=l.mapValue.fields||{};if(F0(c)!==F0(f))return!1;for(const p in c)if(c.hasOwnProperty(p)&&(f[p]===void 0||!Ji(c[p],f[p])))return!1;return!0})(r,e);default:return ye(52216,{left:r})}}function hc(r,e){return(r.values||[]).find((t=>Ji(t,e)))!==void 0}function Ds(r,e){if(r===e)return 0;const t=xs(r),i=xs(e);if(t!==i)return xe(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return xe(r.booleanValue,e.booleanValue);case 2:return(function(l,c){const f=mt(l.integerValue||l.doubleValue),p=mt(c.integerValue||c.doubleValue);return f<p?-1:f>p?1:f===p?0:isNaN(f)?isNaN(p)?0:-1:1})(r,e);case 3:return G0(r.timestampValue,e.timestampValue);case 4:return G0(cc(r),cc(e));case 5:return Vg(r.stringValue,e.stringValue);case 6:return(function(l,c){const f=Cr(l),p=Cr(c);return f.compareTo(p)})(r.bytesValue,e.bytesValue);case 7:return(function(l,c){const f=l.split("/"),p=c.split("/");for(let g=0;g<f.length&&g<p.length;g++){const E=xe(f[g],p[g]);if(E!==0)return E}return xe(f.length,p.length)})(r.referenceValue,e.referenceValue);case 8:return(function(l,c){const f=xe(mt(l.latitude),mt(c.latitude));return f!==0?f:xe(mt(l.longitude),mt(c.longitude))})(r.geoPointValue,e.geoPointValue);case 9:return K0(r.arrayValue,e.arrayValue);case 10:return(function(l,c){const f=l.fields||{},p=c.fields||{},g=f[il]?.arrayValue,E=p[il]?.arrayValue,T=xe(g?.values?.length||0,E?.values?.length||0);return T!==0?T:K0(g,E)})(r.mapValue,e.mapValue);case 11:return(function(l,c){if(l===Es.mapValue&&c===Es.mapValue)return 0;if(l===Es.mapValue)return 1;if(c===Es.mapValue)return-1;const f=l.fields||{},p=Object.keys(f),g=c.fields||{},E=Object.keys(g);p.sort(),E.sort();for(let T=0;T<p.length&&T<E.length;++T){const S=Vg(p[T],E[T]);if(S!==0)return S;const O=Ds(f[p[T]],g[E[T]]);if(O!==0)return O}return xe(p.length,E.length)})(r.mapValue,e.mapValue);default:throw ye(23264,{he:t})}}function G0(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return xe(r,e);const t=Rr(r),i=Rr(e),o=xe(t.seconds,i.seconds);return o!==0?o:xe(t.nanos,i.nanos)}function K0(r,e){const t=r.values||[],i=e.values||[];for(let o=0;o<t.length&&o<i.length;++o){const l=Ds(t[o],i[o]);if(l)return l}return xe(t.length,i.length)}function rl(r){return Ug(r)}function Ug(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?(function(t){const i=Rr(t);return`time(${i.seconds},${i.nanos})`})(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?(function(t){return Cr(t).toBase64()})(r.bytesValue):"referenceValue"in r?(function(t){return ce.fromName(t).toString()})(r.referenceValue):"geoPointValue"in r?(function(t){return`geo(${t.latitude},${t.longitude})`})(r.geoPointValue):"arrayValue"in r?(function(t){let i="[",o=!0;for(const l of t.values||[])o?o=!1:i+=",",i+=Ug(l);return i+"]"})(r.arrayValue):"mapValue"in r?(function(t){const i=Object.keys(t.fields||{}).sort();let o="{",l=!0;for(const c of i)l?l=!1:o+=",",o+=`${c}:${Ug(t.fields[c])}`;return o+"}"})(r.mapValue):ye(61005,{value:r})}function Md(r){switch(xs(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=xf(r);return e?16+Md(e):16;case 5:return 2*r.stringValue.length;case 6:return Cr(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((o,l)=>o+Md(l)),0)})(r.arrayValue);case 10:case 11:return(function(i){let o=0;return ks(i.fields,((l,c)=>{o+=l.length+Md(c)})),o})(r.mapValue);default:throw ye(13486,{value:r})}}function dc(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function Bg(r){return!!r&&"integerValue"in r}function fc(r){return!!r&&"arrayValue"in r}function Q0(r){return!!r&&"nullValue"in r}function Y0(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function Pd(r){return!!r&&"mapValue"in r}function Df(r){return(r?.mapValue?.fields||{})[Ny]?.stringValue===Vy}function Xu(r){if(r.geoPointValue)return{geoPointValue:{...r.geoPointValue}};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:{...r.timestampValue}};if(r.mapValue){const e={mapValue:{fields:{}}};return ks(r.mapValue.fields,((t,i)=>e.mapValue.fields[t]=Xu(i))),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(r.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Xu(r.arrayValue.values[t]);return e}return{...r}}function eA(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===ZS}const tA={mapValue:{fields:{[Ny]:{stringValue:Vy},[il]:{arrayValue:{}}}}};function GV(r){return"nullValue"in r?Od:"booleanValue"in r?{booleanValue:!1}:"integerValue"in r||"doubleValue"in r?{doubleValue:NaN}:"timestampValue"in r?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in r?{stringValue:""}:"bytesValue"in r?{bytesValue:""}:"referenceValue"in r?dc(Na.empty(),ce.empty()):"geoPointValue"in r?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in r?{arrayValue:{}}:"mapValue"in r?Df(r)?tA:{mapValue:{}}:ye(35942,{value:r})}function KV(r){return"nullValue"in r?{booleanValue:!1}:"booleanValue"in r?{doubleValue:NaN}:"integerValue"in r||"doubleValue"in r?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in r?{stringValue:""}:"stringValue"in r?{bytesValue:""}:"bytesValue"in r?dc(Na.empty(),ce.empty()):"referenceValue"in r?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in r?{arrayValue:{}}:"arrayValue"in r?tA:"mapValue"in r?Df(r)?{mapValue:{}}:Es:ye(61959,{value:r})}function $0(r,e){const t=Ds(r.value,e.value);return t!==0?t:r.inclusive&&!e.inclusive?-1:!r.inclusive&&e.inclusive?1:0}function X0(r,e){const t=Ds(r.value,e.value);return t!==0?t:r.inclusive&&!e.inclusive?1:!r.inclusive&&e.inclusive?-1:0}class un{constructor(e){this.value=e}static empty(){return new un({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!Pd(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Xu(t)}setAll(e){let t=yt.emptyPath(),i={},o=[];e.forEach(((c,f)=>{if(!t.isImmediateParentOf(f)){const p=this.getFieldsMap(t);this.applyChanges(p,i,o),i={},o=[],t=f.popLast()}c?i[f.lastSegment()]=Xu(c):o.push(f.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,i,o)}delete(e){const t=this.field(e.popLast());Pd(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ji(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let o=t.mapValue.fields[e.get(i)];Pd(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,i){ks(t,((o,l)=>e[o]=l));for(const o of i)delete e[o]}clone(){return new un(Xu(this.value))}}function nA(r){const e=[];return ks(r.fields,((t,i)=>{const o=new yt([t]);if(Pd(i)){const l=nA(i.mapValue).fields;if(l.length===0)e.push(o);else for(const c of l)e.push(o.child(c))}else e.push(o)})),new An(e)}class Et{constructor(e,t,i,o,l,c,f){this.key=e,this.documentType=t,this.version=i,this.readTime=o,this.createTime=l,this.data=c,this.documentState=f}static newInvalidDocument(e){return new Et(e,0,be.min(),be.min(),be.min(),un.empty(),0)}static newFoundDocument(e,t,i,o){return new Et(e,1,t,be.min(),i,o,0)}static newNoDocument(e,t){return new Et(e,2,t,be.min(),be.min(),un.empty(),0)}static newUnknownDocument(e,t){return new Et(e,3,t,be.min(),be.min(),un.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(be.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=un.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=un.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=be.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Et&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Et(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class sl{constructor(e,t){this.position=e,this.inclusive=t}}function W0(r,e,t){let i=0;for(let o=0;o<r.position.length;o++){const l=e[o],c=r.position[o];if(l.field.isKeyField()?i=ce.comparator(ce.fromName(c.referenceValue),t.key):i=Ds(c,t.data.field(l.field)),l.dir==="desc"&&(i*=-1),i!==0)break}return i}function J0(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let t=0;t<r.position.length;t++)if(!Ji(r.position[t],e.position[t]))return!1;return!0}class mc{constructor(e,t="asc"){this.field=e,this.dir=t}}function QV(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}class iA{}class Fe extends iA{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new YV(e,t,i):t==="array-contains"?new WV(e,i):t==="in"?new uA(e,i):t==="not-in"?new JV(e,i):t==="array-contains-any"?new ZV(e,i):new Fe(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new $V(e,i):new XV(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Ds(t,this.value)):t!==null&&xs(this.value)===xs(t)&&this.matchesComparison(Ds(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ye(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class nt extends iA{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new nt(e,t)}matches(e){return al(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function al(r){return r.op==="and"}function zg(r){return r.op==="or"}function Oy(r){return rA(r)&&al(r)}function rA(r){for(const e of r.filters)if(e instanceof nt)return!1;return!0}function jg(r){if(r instanceof Fe)return r.field.canonicalString()+r.op.toString()+rl(r.value);if(Oy(r))return r.filters.map((e=>jg(e))).join(",");{const e=r.filters.map((t=>jg(t))).join(",");return`${r.op}(${e})`}}function sA(r,e){return r instanceof Fe?(function(i,o){return o instanceof Fe&&i.op===o.op&&i.field.isEqual(o.field)&&Ji(i.value,o.value)})(r,e):r instanceof nt?(function(i,o){return o instanceof nt&&i.op===o.op&&i.filters.length===o.filters.length?i.filters.reduce(((l,c,f)=>l&&sA(c,o.filters[f])),!0):!1})(r,e):void ye(19439)}function aA(r,e){const t=r.filters.concat(e);return nt.create(t,r.op)}function oA(r){return r instanceof Fe?(function(t){return`${t.field.canonicalString()} ${t.op} ${rl(t.value)}`})(r):r instanceof nt?(function(t){return t.op.toString()+" {"+t.getFilters().map(oA).join(" ,")+"}"})(r):"Filter"}class YV extends Fe{constructor(e,t,i){super(e,t,i),this.key=ce.fromName(i.referenceValue)}matches(e){const t=ce.comparator(e.key,this.key);return this.matchesComparison(t)}}class $V extends Fe{constructor(e,t){super(e,"in",t),this.keys=lA("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class XV extends Fe{constructor(e,t){super(e,"not-in",t),this.keys=lA("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function lA(r,e){return(e.arrayValue?.values||[]).map((t=>ce.fromName(t.referenceValue)))}class WV extends Fe{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return fc(t)&&hc(t.arrayValue,this.value)}}class uA extends Fe{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&hc(this.value.arrayValue,t)}}class JV extends Fe{constructor(e,t){super(e,"not-in",t)}matches(e){if(hc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!hc(this.value.arrayValue,t)}}class ZV extends Fe{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!fc(t)||!t.arrayValue.values)&&t.arrayValue.values.some((i=>hc(this.value.arrayValue,i)))}}class eO{constructor(e,t=null,i=[],o=[],l=null,c=null,f=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=o,this.limit=l,this.startAt=c,this.endAt=f,this.Te=null}}function qg(r,e=null,t=[],i=[],o=null,l=null,c=null){return new eO(r,e,t,i,o,l,c)}function Va(r){const e=De(r);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((i=>jg(i))).join(","),t+="|ob:",t+=e.orderBy.map((i=>(function(l){return l.field.canonicalString()+l.dir})(i))).join(","),wf(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((i=>rl(i))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((i=>rl(i))).join(",")),e.Te=t}return e.Te}function xc(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<r.orderBy.length;t++)if(!QV(r.orderBy[t],e.orderBy[t]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let t=0;t<r.filters.length;t++)if(!sA(r.filters[t],e.filters[t]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!J0(r.startAt,e.startAt)&&J0(r.endAt,e.endAt)}function rf(r){return ce.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}function sf(r,e){return r.filters.filter((t=>t instanceof Fe&&t.field.isEqual(e)))}function Z0(r,e,t){let i=Od,o=!0;for(const l of sf(r,e)){let c=Od,f=!0;switch(l.op){case"<":case"<=":c=GV(l.value);break;case"==":case"in":case">=":c=l.value;break;case">":c=l.value,f=!1;break;case"!=":case"not-in":c=Od}$0({value:i,inclusive:o},{value:c,inclusive:f})<0&&(i=c,o=f)}if(t!==null){for(let l=0;l<r.orderBy.length;++l)if(r.orderBy[l].field.isEqual(e)){const c=t.position[l];$0({value:i,inclusive:o},{value:c,inclusive:t.inclusive})<0&&(i=c,o=t.inclusive);break}}return{value:i,inclusive:o}}function eb(r,e,t){let i=Es,o=!0;for(const l of sf(r,e)){let c=Es,f=!0;switch(l.op){case">=":case">":c=KV(l.value),f=!1;break;case"==":case"in":case"<=":c=l.value;break;case"<":c=l.value,f=!1;break;case"!=":case"not-in":c=Es}X0({value:i,inclusive:o},{value:c,inclusive:f})>0&&(i=c,o=f)}if(t!==null){for(let l=0;l<r.orderBy.length;++l)if(r.orderBy[l].field.isEqual(e)){const c=t.position[l];X0({value:i,inclusive:o},{value:c,inclusive:t.inclusive})>0&&(i=c,o=t.inclusive);break}}return{value:i,inclusive:o}}class El{constructor(e,t=null,i=[],o=[],l=null,c="F",f=null,p=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=o,this.limit=l,this.limitType=c,this.startAt=f,this.endAt=p,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function tO(r,e,t,i,o,l,c,f){return new El(r,e,t,i,o,l,c,f)}function Nf(r){return new El(r)}function tb(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function cA(r){return r.collectionGroup!==null}function Wu(r){const e=De(r);if(e.Ie===null){e.Ie=[];const t=new Set;for(const l of e.explicitOrderBy)e.Ie.push(l),t.add(l.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let f=new it(yt.comparator);return c.filters.forEach((p=>{p.getFlattenedFilters().forEach((g=>{g.isInequality()&&(f=f.add(g.field))}))})),f})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Ie.push(new mc(l,i))})),t.has(yt.keyField().canonicalString())||e.Ie.push(new mc(yt.keyField(),i))}return e.Ie}function ei(r){const e=De(r);return e.Ee||(e.Ee=nO(e,Wu(r))),e.Ee}function nO(r,e){if(r.limitType==="F")return qg(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map((o=>{const l=o.dir==="desc"?"asc":"desc";return new mc(o.field,l)}));const t=r.endAt?new sl(r.endAt.position,r.endAt.inclusive):null,i=r.startAt?new sl(r.startAt.position,r.startAt.inclusive):null;return qg(r.path,r.collectionGroup,e,r.filters,r.limit,t,i)}}function Fg(r,e){const t=r.filters.concat([e]);return new El(r.path,r.collectionGroup,r.explicitOrderBy.slice(),t,r.limit,r.limitType,r.startAt,r.endAt)}function Hg(r,e,t){return new El(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,t,r.startAt,r.endAt)}function Vf(r,e){return xc(ei(r),ei(e))&&r.limitType===e.limitType}function hA(r){return`${Va(ei(r))}|lt:${r.limitType}`}function Bo(r){return`Query(target=${(function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map((o=>oA(o))).join(", ")}]`),wf(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map((o=>(function(c){return`${c.field.canonicalString()} (${c.dir})`})(o))).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map((o=>rl(o))).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map((o=>rl(o))).join(",")),`Target(${i})`})(ei(r))}; limitType=${r.limitType})`}function Dc(r,e){return e.isFoundDocument()&&(function(i,o){const l=o.key.path;return i.collectionGroup!==null?o.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(l):ce.isDocumentKey(i.path)?i.path.isEqual(l):i.path.isImmediateParentOf(l)})(r,e)&&(function(i,o){for(const l of Wu(i))if(!l.field.isKeyField()&&o.data.field(l.field)===null)return!1;return!0})(r,e)&&(function(i,o){for(const l of i.filters)if(!l.matches(o))return!1;return!0})(r,e)&&(function(i,o){return!(i.startAt&&!(function(c,f,p){const g=W0(c,f,p);return c.inclusive?g<=0:g<0})(i.startAt,Wu(i),o)||i.endAt&&!(function(c,f,p){const g=W0(c,f,p);return c.inclusive?g>=0:g>0})(i.endAt,Wu(i),o))})(r,e)}function iO(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function dA(r){return(e,t)=>{let i=!1;for(const o of Wu(r)){const l=rO(o,e,t);if(l!==0)return l;i=i||o.field.isKeyField()}return 0}}function rO(r,e,t){const i=r.field.isKeyField()?ce.comparator(e.key,t.key):(function(l,c,f){const p=c.data.field(l),g=f.data.field(l);return p!==null&&g!==null?Ds(p,g):ye(42886)})(r.field,e,t);switch(r.dir){case"asc":return i;case"desc":return-1*i;default:return ye(19790,{direction:r.dir})}}class Dr{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[o,l]of i)if(this.equalsFn(o,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),o=this.inner[i];if(o===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let l=0;l<o.length;l++)if(this.equalsFn(o[l][0],e))return void(o[l]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return i.length===1?delete this.inner[t]:i.splice(o,1),this.innerSize--,!0;return!1}forEach(e){ks(this.inner,((t,i)=>{for(const[o,l]of i)e(o,l)}))}isEmpty(){return QS(this.inner)}size(){return this.innerSize}}const sO=new gt(ce.comparator);function Pn(){return sO}const fA=new gt(ce.comparator);function zu(...r){let e=fA;for(const t of r)e=e.insert(t.key,t);return e}function mA(r){let e=fA;return r.forEach(((t,i)=>e=e.insert(t,i.overlayedDocument))),e}function Ki(){return Ju()}function pA(){return Ju()}function Ju(){return new Dr((r=>r.toString()),((r,e)=>r.isEqual(e)))}const aO=new gt(ce.comparator),oO=new it(ce.comparator);function ke(...r){let e=oO;for(const t of r)e=e.add(t);return e}const lO=new it(xe);function uO(){return lO}function My(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ac(e)?"-0":e}}function gA(r){return{integerValue:""+r}}function cO(r,e){return gV(e)?gA(e):My(r,e)}class Of{constructor(){this._=void 0}}function hO(r,e,t){return r instanceof ol?(function(o,l){const c={fields:{[XS]:{stringValue:$S},[JS]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return l&&Dy(l)&&(l=xf(l)),l&&(c.fields[WS]=l),{mapValue:c}})(t,e):r instanceof ll?_A(r,e):r instanceof ul?vA(r,e):(function(o,l){const c=yA(o,l),f=nb(c)+nb(o.Ae);return Bg(c)&&Bg(o.Ae)?gA(f):My(o.serializer,f)})(r,e)}function dO(r,e,t){return r instanceof ll?_A(r,e):r instanceof ul?vA(r,e):t}function yA(r,e){return r instanceof pc?(function(i){return Bg(i)||(function(l){return!!l&&"doubleValue"in l})(i)})(e)?e:{integerValue:0}:null}class ol extends Of{}class ll extends Of{constructor(e){super(),this.elements=e}}function _A(r,e){const t=EA(e);for(const i of r.elements)t.some((o=>Ji(o,i)))||t.push(i);return{arrayValue:{values:t}}}class ul extends Of{constructor(e){super(),this.elements=e}}function vA(r,e){let t=EA(e);for(const i of r.elements)t=t.filter((o=>!Ji(o,i)));return{arrayValue:{values:t}}}class pc extends Of{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function nb(r){return mt(r.integerValue||r.doubleValue)}function EA(r){return fc(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}class TA{constructor(e,t){this.field=e,this.transform=t}}function fO(r,e){return r.field.isEqual(e.field)&&(function(i,o){return i instanceof ll&&o instanceof ll||i instanceof ul&&o instanceof ul?Jo(i.elements,o.elements,Ji):i instanceof pc&&o instanceof pc?Ji(i.Ae,o.Ae):i instanceof ol&&o instanceof ol})(r.transform,e.transform)}class mO{constructor(e,t){this.version=e,this.transformResults=t}}class pn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new pn}static exists(e){return new pn(void 0,e)}static updateTime(e){return new pn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function kd(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class Mf{}function bA(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new Pf(r.key,pn.none()):new Tl(r.key,r.data,pn.none());{const t=r.data,i=un.empty();let o=new it(yt.comparator);for(let l of e.fields)if(!o.has(l)){let c=t.field(l);c===null&&l.length>1&&(l=l.popLast(),c=t.field(l)),c===null?i.delete(l):i.set(l,c),o=o.add(l)}return new Nr(r.key,i,new An(o.toArray()),pn.none())}}function pO(r,e,t){r instanceof Tl?(function(o,l,c){const f=o.value.clone(),p=rb(o.fieldTransforms,l,c.transformResults);f.setAll(p),l.convertToFoundDocument(c.version,f).setHasCommittedMutations()})(r,e,t):r instanceof Nr?(function(o,l,c){if(!kd(o.precondition,l))return void l.convertToUnknownDocument(c.version);const f=rb(o.fieldTransforms,l,c.transformResults),p=l.data;p.setAll(SA(o)),p.setAll(f),l.convertToFoundDocument(c.version,p).setHasCommittedMutations()})(r,e,t):(function(o,l,c){l.convertToNoDocument(c.version).setHasCommittedMutations()})(0,e,t)}function Zu(r,e,t,i){return r instanceof Tl?(function(l,c,f,p){if(!kd(l.precondition,c))return f;const g=l.value.clone(),E=sb(l.fieldTransforms,p,c);return g.setAll(E),c.convertToFoundDocument(c.version,g).setHasLocalMutations(),null})(r,e,t,i):r instanceof Nr?(function(l,c,f,p){if(!kd(l.precondition,c))return f;const g=sb(l.fieldTransforms,p,c),E=c.data;return E.setAll(SA(l)),E.setAll(g),c.convertToFoundDocument(c.version,E).setHasLocalMutations(),f===null?null:f.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((T=>T.field)))})(r,e,t,i):(function(l,c,f){return kd(l.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):f})(r,e,t)}function gO(r,e){let t=null;for(const i of r.fieldTransforms){const o=e.data.field(i.field),l=yA(i.transform,o||null);l!=null&&(t===null&&(t=un.empty()),t.set(i.field,l))}return t||null}function ib(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!(function(i,o){return i===void 0&&o===void 0||!(!i||!o)&&Jo(i,o,((l,c)=>fO(l,c)))})(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class Tl extends Mf{constructor(e,t,i,o=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Nr extends Mf{constructor(e,t,i,o,l=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=o,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function SA(r){const e=new Map;return r.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const i=r.data.field(t);e.set(t,i)}})),e}function rb(r,e,t){const i=new Map;Ee(r.length===t.length,32656,{Re:t.length,Ve:r.length});for(let o=0;o<t.length;o++){const l=r[o],c=l.transform,f=e.data.field(l.field);i.set(l.field,dO(c,f,t[o]))}return i}function sb(r,e,t){const i=new Map;for(const o of r){const l=o.transform,c=t.data.field(o.field);i.set(o.field,hO(l,c,e))}return i}class Pf extends Mf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class AA extends Mf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Py{constructor(e,t,i,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=o}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const l=this.mutations[o];l.key.isEqual(e.key)&&pO(l,e,i[o])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=Zu(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=Zu(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=pA();return this.mutations.forEach((o=>{const l=e.get(o.key),c=l.overlayedDocument;let f=this.applyToLocalView(c,l.mutatedFields);f=t.has(o.key)?null:f;const p=bA(c,f);p!==null&&i.set(o.key,p),c.isValidDocument()||c.convertToNoDocument(be.min())})),i}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),ke())}isEqual(e){return this.batchId===e.batchId&&Jo(this.mutations,e.mutations,((t,i)=>ib(t,i)))&&Jo(this.baseMutations,e.baseMutations,((t,i)=>ib(t,i)))}}class ky{constructor(e,t,i,o){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=o}static from(e,t,i){Ee(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let o=(function(){return aO})();const l=e.mutations;for(let c=0;c<l.length;c++)o=o.insert(l[c].key,i[c].version);return new ky(e,t,i,o)}}class Ly{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class yO{constructor(e,t){this.count=e,this.unchangedNames=t}}var Mt,Ke;function _O(r){switch(r){case Z.OK:return ye(64938);case Z.CANCELLED:case Z.UNKNOWN:case Z.DEADLINE_EXCEEDED:case Z.RESOURCE_EXHAUSTED:case Z.INTERNAL:case Z.UNAVAILABLE:case Z.UNAUTHENTICATED:return!1;case Z.INVALID_ARGUMENT:case Z.NOT_FOUND:case Z.ALREADY_EXISTS:case Z.PERMISSION_DENIED:case Z.FAILED_PRECONDITION:case Z.ABORTED:case Z.OUT_OF_RANGE:case Z.UNIMPLEMENTED:case Z.DATA_LOSS:return!0;default:return ye(15467,{code:r})}}function wA(r){if(r===void 0)return mn("GRPC error has no .code"),Z.UNKNOWN;switch(r){case Mt.OK:return Z.OK;case Mt.CANCELLED:return Z.CANCELLED;case Mt.UNKNOWN:return Z.UNKNOWN;case Mt.DEADLINE_EXCEEDED:return Z.DEADLINE_EXCEEDED;case Mt.RESOURCE_EXHAUSTED:return Z.RESOURCE_EXHAUSTED;case Mt.INTERNAL:return Z.INTERNAL;case Mt.UNAVAILABLE:return Z.UNAVAILABLE;case Mt.UNAUTHENTICATED:return Z.UNAUTHENTICATED;case Mt.INVALID_ARGUMENT:return Z.INVALID_ARGUMENT;case Mt.NOT_FOUND:return Z.NOT_FOUND;case Mt.ALREADY_EXISTS:return Z.ALREADY_EXISTS;case Mt.PERMISSION_DENIED:return Z.PERMISSION_DENIED;case Mt.FAILED_PRECONDITION:return Z.FAILED_PRECONDITION;case Mt.ABORTED:return Z.ABORTED;case Mt.OUT_OF_RANGE:return Z.OUT_OF_RANGE;case Mt.UNIMPLEMENTED:return Z.UNIMPLEMENTED;case Mt.DATA_LOSS:return Z.DATA_LOSS;default:return ye(39323,{code:r})}}(Ke=Mt||(Mt={}))[Ke.OK=0]="OK",Ke[Ke.CANCELLED=1]="CANCELLED",Ke[Ke.UNKNOWN=2]="UNKNOWN",Ke[Ke.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ke[Ke.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ke[Ke.NOT_FOUND=5]="NOT_FOUND",Ke[Ke.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ke[Ke.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ke[Ke.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ke[Ke.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ke[Ke.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ke[Ke.ABORTED=10]="ABORTED",Ke[Ke.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ke[Ke.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ke[Ke.INTERNAL=13]="INTERNAL",Ke[Ke.UNAVAILABLE=14]="UNAVAILABLE",Ke[Ke.DATA_LOSS=15]="DATA_LOSS";function vO(){return new TextEncoder}const EO=new ws([4294967295,4294967295],0);function ab(r){const e=vO().encode(r),t=new bS;return t.update(e),new Uint8Array(t.digest())}function ob(r){const e=new DataView(r.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),o=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new ws([t,i],0),new ws([o,l],0)]}class Uy{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new ju(`Invalid padding: ${t}`);if(i<0)throw new ju(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new ju(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new ju(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=ws.fromNumber(this.ge)}ye(e,t,i){let o=e.add(t.multiply(ws.fromNumber(i)));return o.compare(EO)===1&&(o=new ws([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=ab(e),[i,o]=ob(t);for(let l=0;l<this.hashCount;l++){const c=this.ye(i,o,l);if(!this.we(c))return!1}return!0}static create(e,t,i){const o=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),c=new Uy(l,o,t);return i.forEach((f=>c.insert(f))),c}insert(e){if(this.ge===0)return;const t=ab(e),[i,o]=ob(t);for(let l=0;l<this.hashCount;l++){const c=this.ye(i,o,l);this.Se(c)}}Se(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class ju extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class kf{constructor(e,t,i,o,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=o,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const o=new Map;return o.set(e,Nc.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new kf(be.min(),o,new gt(xe),Pn(),ke())}}class Nc{constructor(e,t,i,o,l){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=o,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new Nc(i,t,ke(),ke(),ke())}}class Ld{constructor(e,t,i,o){this.be=e,this.removedTargetIds=t,this.key=i,this.De=o}}class IA{constructor(e,t){this.targetId=e,this.Ce=t}}class RA{constructor(e,t,i=Lt.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=o}}class lb{constructor(){this.ve=0,this.Fe=ub(),this.Me=Lt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=ke(),t=ke(),i=ke();return this.Fe.forEach(((o,l)=>{switch(l){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:i=i.add(o);break;default:ye(38017,{changeType:l})}})),new Nc(this.Me,this.xe,e,t,i)}qe(){this.Oe=!1,this.Fe=ub()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Ee(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class TO{constructor(e){this.Ge=e,this.ze=new Map,this.je=Pn(),this.Je=gd(),this.He=gd(),this.Ye=new gt(xe)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const i=this.nt(t);switch(e.state){case 0:this.rt(t)&&i.Le(e.resumeToken);break;case 1:i.Ke(),i.Ne||i.qe(),i.Le(e.resumeToken);break;case 2:i.Ke(),i.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(i.We(),i.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),i.Le(e.resumeToken));break;default:ye(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((i,o)=>{this.rt(o)&&t(o)}))}st(e){const t=e.targetId,i=e.Ce.count,o=this.ot(t);if(o){const l=o.target;if(rf(l))if(i===0){const c=new ce(l.path);this.et(t,c,Et.newNoDocument(c,be.min()))}else Ee(i===1,20013,{expectedCount:i});else{const c=this._t(t);if(c!==i){const f=this.ut(e),p=f?this.ct(f,e,c):1;if(p!==0){this.it(t);const g=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,g)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:o=0},hashCount:l=0}=t;let c,f;try{c=Cr(i).toUint8Array()}catch(p){if(p instanceof YS)return Da("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{f=new Uy(c,o,l)}catch(p){return Da(p instanceof ju?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return f.ge===0?null:f}ct(e,t,i){return t.Ce.count===i-this.Pt(e,t.targetId)?0:2}Pt(e,t){const i=this.Ge.getRemoteKeysForTarget(t);let o=0;return i.forEach((l=>{const c=this.Ge.ht(),f=`projects/${c.projectId}/databases/${c.database}/documents/${l.path.canonicalString()}`;e.mightContain(f)||(this.et(t,l,null),o++)})),o}Tt(e){const t=new Map;this.ze.forEach(((l,c)=>{const f=this.ot(c);if(f){if(l.current&&rf(f.target)){const p=new ce(f.target.path);this.It(p).has(c)||this.Et(c,p)||this.et(c,p,Et.newNoDocument(p,e))}l.Be&&(t.set(c,l.ke()),l.qe())}}));let i=ke();this.He.forEach(((l,c)=>{let f=!0;c.forEachWhile((p=>{const g=this.ot(p);return!g||g.purpose==="TargetPurposeLimboResolution"||(f=!1,!1)})),f&&(i=i.add(l))})),this.je.forEach(((l,c)=>c.setReadTime(e)));const o=new kf(e,t,this.Ye,this.je,i);return this.je=Pn(),this.Je=gd(),this.He=gd(),this.Ye=new gt(xe),o}Xe(e,t){if(!this.rt(e))return;const i=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,i),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,i){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,t)?o.Qe(t,1):o.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),i&&(this.je=this.je.insert(t,i))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new lb,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new it(xe),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new it(xe),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||se("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new lb),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function gd(){return new gt(ce.comparator)}function ub(){return new gt(ce.comparator)}const bO={asc:"ASCENDING",desc:"DESCENDING"},SO={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},AO={and:"AND",or:"OR"};class wO{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Gg(r,e){return r.useProto3Json||wf(e)?e:{value:e}}function cl(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function CA(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function IO(r,e){return cl(r,e.toTimestamp())}function gn(r){return Ee(!!r,49232),be.fromTimestamp((function(t){const i=Rr(t);return new tt(i.seconds,i.nanos)})(r))}function By(r,e){return Kg(r,e).canonicalString()}function Kg(r,e){const t=(function(o){return new We(["projects",o.projectId,"databases",o.database])})(r).child("documents");return e===void 0?t:t.child(e)}function xA(r){const e=We.fromString(r);return Ee(UA(e),10190,{key:e.toString()}),e}function af(r,e){return By(r.databaseId,e.path)}function Aa(r,e){const t=xA(e);if(t.get(1)!==r.databaseId.projectId)throw new le(Z.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+r.databaseId.projectId);if(t.get(3)!==r.databaseId.database)throw new le(Z.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+r.databaseId.database);return new ce(VA(t))}function DA(r,e){return By(r.databaseId,e)}function NA(r){const e=xA(r);return e.length===4?We.emptyPath():VA(e)}function Qg(r){return new We(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function VA(r){return Ee(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function cb(r,e,t){return{name:af(r,e),fields:t.value.mapValue.fields}}function RO(r,e,t){const i=Aa(r,e.name),o=gn(e.updateTime),l=e.createTime?gn(e.createTime):be.min(),c=new un({mapValue:{fields:e.fields}}),f=Et.newFoundDocument(i,o,l,c);return t&&f.setHasCommittedMutations(),t?f.setHasCommittedMutations():f}function CO(r,e){let t;if("targetChange"in e){e.targetChange;const i=(function(g){return g==="NO_CHANGE"?0:g==="ADD"?1:g==="REMOVE"?2:g==="CURRENT"?3:g==="RESET"?4:ye(39313,{state:g})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],l=(function(g,E){return g.useProto3Json?(Ee(E===void 0||typeof E=="string",58123),Lt.fromBase64String(E||"")):(Ee(E===void 0||E instanceof Buffer||E instanceof Uint8Array,16193),Lt.fromUint8Array(E||new Uint8Array))})(r,e.targetChange.resumeToken),c=e.targetChange.cause,f=c&&(function(g){const E=g.code===void 0?Z.UNKNOWN:wA(g.code);return new le(E,g.message||"")})(c);t=new RA(i,o,l,f||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const o=Aa(r,i.document.name),l=gn(i.document.updateTime),c=i.document.createTime?gn(i.document.createTime):be.min(),f=new un({mapValue:{fields:i.document.fields}}),p=Et.newFoundDocument(o,l,c,f),g=i.targetIds||[],E=i.removedTargetIds||[];t=new Ld(g,E,p.key,p)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const o=Aa(r,i.document),l=i.readTime?gn(i.readTime):be.min(),c=Et.newNoDocument(o,l),f=i.removedTargetIds||[];t=new Ld([],f,c.key,c)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const o=Aa(r,i.document),l=i.removedTargetIds||[];t=new Ld([],l,o,null)}else{if(!("filter"in e))return ye(11601,{Rt:e});{e.filter;const i=e.filter;i.targetId;const{count:o=0,unchangedNames:l}=i,c=new yO(o,l),f=i.targetId;t=new IA(f,c)}}return t}function of(r,e){let t;if(e instanceof Tl)t={update:cb(r,e.key,e.value)};else if(e instanceof Pf)t={delete:af(r,e.key)};else if(e instanceof Nr)t={update:cb(r,e.key,e.data),updateMask:MO(e.fieldMask)};else{if(!(e instanceof AA))return ye(16599,{Vt:e.type});t={verify:af(r,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((i=>(function(l,c){const f=c.transform;if(f instanceof ol)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(f instanceof ll)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:f.elements}};if(f instanceof ul)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:f.elements}};if(f instanceof pc)return{fieldPath:c.field.canonicalString(),increment:f.Ae};throw ye(20930,{transform:c.transform})})(0,i)))),e.precondition.isNone||(t.currentDocument=(function(o,l){return l.updateTime!==void 0?{updateTime:IO(o,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:ye(27497)})(r,e.precondition)),t}function Yg(r,e){const t=e.currentDocument?(function(l){return l.updateTime!==void 0?pn.updateTime(gn(l.updateTime)):l.exists!==void 0?pn.exists(l.exists):pn.none()})(e.currentDocument):pn.none(),i=e.updateTransforms?e.updateTransforms.map((o=>(function(c,f){let p=null;if("setToServerValue"in f)Ee(f.setToServerValue==="REQUEST_TIME",16630,{proto:f}),p=new ol;else if("appendMissingElements"in f){const E=f.appendMissingElements.values||[];p=new ll(E)}else if("removeAllFromArray"in f){const E=f.removeAllFromArray.values||[];p=new ul(E)}else"increment"in f?p=new pc(c,f.increment):ye(16584,{proto:f});const g=yt.fromServerFormat(f.fieldPath);return new TA(g,p)})(r,o))):[];if(e.update){e.update.name;const o=Aa(r,e.update.name),l=new un({mapValue:{fields:e.update.fields}});if(e.updateMask){const c=(function(p){const g=p.fieldPaths||[];return new An(g.map((E=>yt.fromServerFormat(E))))})(e.updateMask);return new Nr(o,l,c,t,i)}return new Tl(o,l,t,i)}if(e.delete){const o=Aa(r,e.delete);return new Pf(o,t)}if(e.verify){const o=Aa(r,e.verify);return new AA(o,t)}return ye(1463,{proto:e})}function xO(r,e){return r&&r.length>0?(Ee(e!==void 0,14353),r.map((t=>(function(o,l){let c=o.updateTime?gn(o.updateTime):gn(l);return c.isEqual(be.min())&&(c=gn(l)),new mO(c,o.transformResults||[])})(t,e)))):[]}function OA(r,e){return{documents:[DA(r,e.path)]}}function MA(r,e){const t={structuredQuery:{}},i=e.path;let o;e.collectionGroup!==null?(o=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=DA(r,o);const l=(function(g){if(g.length!==0)return LA(nt.create(g,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const c=(function(g){if(g.length!==0)return g.map((E=>(function(S){return{field:zo(S.field),direction:NO(S.dir)}})(E)))})(e.orderBy);c&&(t.structuredQuery.orderBy=c);const f=Gg(r,e.limit);return f!==null&&(t.structuredQuery.limit=f),e.startAt&&(t.structuredQuery.startAt=(function(g){return{before:g.inclusive,values:g.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(g){return{before:!g.inclusive,values:g.position}})(e.endAt)),{ft:t,parent:o}}function PA(r){let e=NA(r.parent);const t=r.structuredQuery,i=t.from?t.from.length:0;let o=null;if(i>0){Ee(i===1,65062);const E=t.from[0];E.allDescendants?o=E.collectionId:e=e.child(E.collectionId)}let l=[];t.where&&(l=(function(T){const S=kA(T);return S instanceof nt&&Oy(S)?S.getFilters():[S]})(t.where));let c=[];t.orderBy&&(c=(function(T){return T.map((S=>(function(z){return new mc(jo(z.field),(function(U){switch(U){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(z.direction))})(S)))})(t.orderBy));let f=null;t.limit&&(f=(function(T){let S;return S=typeof T=="object"?T.value:T,wf(S)?null:S})(t.limit));let p=null;t.startAt&&(p=(function(T){const S=!!T.before,O=T.values||[];return new sl(O,S)})(t.startAt));let g=null;return t.endAt&&(g=(function(T){const S=!T.before,O=T.values||[];return new sl(O,S)})(t.endAt)),tO(e,o,c,l,f,"F",p,g)}function DO(r,e){const t=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ye(28987,{purpose:o})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function kA(r){return r.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=jo(t.unaryFilter.field);return Fe.create(i,"==",{doubleValue:NaN});case"IS_NULL":const o=jo(t.unaryFilter.field);return Fe.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=jo(t.unaryFilter.field);return Fe.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=jo(t.unaryFilter.field);return Fe.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ye(61313);default:return ye(60726)}})(r):r.fieldFilter!==void 0?(function(t){return Fe.create(jo(t.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ye(58110);default:return ye(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(r):r.compositeFilter!==void 0?(function(t){return nt.create(t.compositeFilter.filters.map((i=>kA(i))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return ye(1026)}})(t.compositeFilter.op))})(r):ye(30097,{filter:r})}function NO(r){return bO[r]}function VO(r){return SO[r]}function OO(r){return AO[r]}function zo(r){return{fieldPath:r.canonicalString()}}function jo(r){return yt.fromServerFormat(r.fieldPath)}function LA(r){return r instanceof Fe?(function(t){if(t.op==="=="){if(Y0(t.value))return{unaryFilter:{field:zo(t.field),op:"IS_NAN"}};if(Q0(t.value))return{unaryFilter:{field:zo(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Y0(t.value))return{unaryFilter:{field:zo(t.field),op:"IS_NOT_NAN"}};if(Q0(t.value))return{unaryFilter:{field:zo(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:zo(t.field),op:VO(t.op),value:t.value}}})(r):r instanceof nt?(function(t){const i=t.getFilters().map((o=>LA(o)));return i.length===1?i[0]:{compositeFilter:{op:OO(t.op),filters:i}}})(r):ye(54877,{filter:r})}function MO(r){const e=[];return r.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function UA(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}class Tr{constructor(e,t,i,o,l=be.min(),c=be.min(),f=Lt.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=o,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=f,this.expectedCount=p}withSequenceNumber(e){return new Tr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Tr(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Tr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Tr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class BA{constructor(e){this.yt=e}}function PO(r,e){let t;if(e.document)t=RO(r.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const i=ce.fromSegments(e.noDocument.path),o=Ma(e.noDocument.readTime);t=Et.newNoDocument(i,o),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return ye(56709);{const i=ce.fromSegments(e.unknownDocument.path),o=Ma(e.unknownDocument.version);t=Et.newUnknownDocument(i,o)}}return e.readTime&&t.setReadTime((function(o){const l=new tt(o[0],o[1]);return be.fromTimestamp(l)})(e.readTime)),t}function hb(r,e){const t=e.key,i={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:lf(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())i.document=(function(l,c){return{name:af(l,c.key),fields:c.data.value.mapValue.fields,updateTime:cl(l,c.version.toTimestamp()),createTime:cl(l,c.createTime.toTimestamp())}})(r.yt,e);else if(e.isNoDocument())i.noDocument={path:t.path.toArray(),readTime:Oa(e.version)};else{if(!e.isUnknownDocument())return ye(57904,{document:e});i.unknownDocument={path:t.path.toArray(),version:Oa(e.version)}}return i}function lf(r){const e=r.toTimestamp();return[e.seconds,e.nanoseconds]}function Oa(r){const e=r.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Ma(r){const e=new tt(r.seconds,r.nanoseconds);return be.fromTimestamp(e)}function _a(r,e){const t=(e.baseMutations||[]).map((l=>Yg(r.yt,l)));for(let l=0;l<e.mutations.length-1;++l){const c=e.mutations[l];if(l+1<e.mutations.length&&e.mutations[l+1].transform!==void 0){const f=e.mutations[l+1];c.updateTransforms=f.transform.fieldTransforms,e.mutations.splice(l+1,1),++l}}const i=e.mutations.map((l=>Yg(r.yt,l))),o=tt.fromMillis(e.localWriteTimeMs);return new Py(e.batchId,o,t,i)}function qu(r){const e=Ma(r.readTime),t=r.lastLimboFreeSnapshotVersion!==void 0?Ma(r.lastLimboFreeSnapshotVersion):be.min();let i;return i=(function(l){return l.documents!==void 0})(r.query)?(function(l){const c=l.documents.length;return Ee(c===1,1966,{count:c}),ei(Nf(NA(l.documents[0])))})(r.query):(function(l){return ei(PA(l))})(r.query),new Tr(i,r.targetId,"TargetPurposeListen",r.lastListenSequenceNumber,e,t,Lt.fromBase64String(r.resumeToken))}function zA(r,e){const t=Oa(e.snapshotVersion),i=Oa(e.lastLimboFreeSnapshotVersion);let o;o=rf(e.target)?OA(r.yt,e.target):MA(r.yt,e.target).ft;const l=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Va(e.target),readTime:t,resumeToken:l,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:o}}function jA(r){const e=PA({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?Hg(e,e.limit,"L"):e}function og(r,e){return new Ly(e.largestBatchId,Yg(r.yt,e.overlayMutation))}function db(r,e){const t=e.path.lastSegment();return[r,cn(e.path.popLast()),t]}function fb(r,e,t,i){return{indexId:r,uid:e,sequenceNumber:t,readTime:Oa(i.readTime),documentKey:cn(i.documentKey.path),largestBatchId:i.largestBatchId}}class kO{getBundleMetadata(e,t){return mb(e).get(t).next((i=>{if(i)return(function(l){return{id:l.bundleId,createTime:Ma(l.createTime),version:l.version}})(i)}))}saveBundleMetadata(e,t){return mb(e).put((function(o){return{bundleId:o.id,createTime:Oa(gn(o.createTime)),version:o.version}})(t))}getNamedQuery(e,t){return pb(e).get(t).next((i=>{if(i)return(function(l){return{name:l.name,query:jA(l.bundledQuery),readTime:Ma(l.readTime)}})(i)}))}saveNamedQuery(e,t){return pb(e).put((function(o){return{name:o.name,readTime:Oa(gn(o.readTime)),bundledQuery:o.bundledQuery}})(t))}}function mb(r){return Gt(r,If)}function pb(r){return Gt(r,Rf)}class Lf{constructor(e,t){this.serializer=e,this.userId=t}static wt(e,t){const i=t.uid||"";return new Lf(e,i)}getOverlay(e,t){return Du(e).get(db(this.userId,t)).next((i=>i?og(this.serializer,i):null))}getOverlays(e,t){const i=Ki();return j.forEach(t,(o=>this.getOverlay(e,o).next((l=>{l!==null&&i.set(o,l)})))).next((()=>i))}saveOverlays(e,t,i){const o=[];return i.forEach(((l,c)=>{const f=new Ly(t,c);o.push(this.St(e,f))})),j.waitFor(o)}removeOverlaysForBatchId(e,t,i){const o=new Set;t.forEach((c=>o.add(cn(c.getCollectionPath()))));const l=[];return o.forEach((c=>{const f=IDBKeyRange.bound([this.userId,c,i],[this.userId,c,i+1],!1,!0);l.push(Du(e).Z(kg,f))})),j.waitFor(l)}getOverlaysForCollection(e,t,i){const o=Ki(),l=cn(t),c=IDBKeyRange.bound([this.userId,l,i],[this.userId,l,Number.POSITIVE_INFINITY],!0);return Du(e).J(kg,c).next((f=>{for(const p of f){const g=og(this.serializer,p);o.set(g.getKey(),g)}return o}))}getOverlaysForCollectionGroup(e,t,i,o){const l=Ki();let c;const f=IDBKeyRange.bound([this.userId,t,i],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Du(e).ee({index:qS,range:f},((p,g,E)=>{const T=og(this.serializer,g);l.size()<o||T.largestBatchId===c?(l.set(T.getKey(),T),c=T.largestBatchId):E.done()})).next((()=>l))}St(e,t){return Du(e).put((function(o,l,c){const[f,p,g]=db(l,c.mutation.key);return{userId:l,collectionPath:p,documentId:g,collectionGroup:c.mutation.key.getCollectionGroup(),largestBatchId:c.largestBatchId,overlayMutation:of(o.yt,c.mutation)}})(this.serializer,this.userId,t))}}function Du(r){return Gt(r,Cf)}class LO{bt(e){return Gt(e,Cy)}getSessionToken(e){return this.bt(e).get("sessionToken").next((t=>{const i=t?.value;return i?Lt.fromUint8Array(i):Lt.EMPTY_BYTE_STRING}))}setSessionToken(e,t){return this.bt(e).put({name:"sessionToken",value:t.toUint8Array()})}}class va{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(mt(e.integerValue));else if("doubleValue"in e){const i=mt(e.doubleValue);isNaN(i)?this.Ft(t,13):(this.Ft(t,15),ac(i)?t.Mt(0):t.Mt(i))}else if("timestampValue"in e){let i=e.timestampValue;this.Ft(t,20),typeof i=="string"&&(i=Rr(i)),t.xt(`${i.seconds||""}`),t.Mt(i.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(Cr(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){const i=e.geoPointValue;this.Ft(t,45),t.Mt(i.latitude||0),t.Mt(i.longitude||0)}else"mapValue"in e?eA(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):Df(e)?this.kt(e.mapValue,t):(this.qt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.Qt(e.arrayValue,t),this.Nt(t)):ye(19022,{$t:e})}Ot(e,t){this.Ft(t,25),this.Ut(e,t)}Ut(e,t){t.xt(e)}qt(e,t){const i=e.fields||{};this.Ft(t,55);for(const o of Object.keys(i))this.Ot(o,t),this.Ct(i[o],t)}kt(e,t){const i=e.fields||{};this.Ft(t,53);const o=il,l=i[o].arrayValue?.values?.length||0;this.Ft(t,15),t.Mt(mt(l)),this.Ot(o,t),this.Ct(i[o],t)}Qt(e,t){const i=e.values||[];this.Ft(t,50);for(const o of i)this.Ct(o,t)}Lt(e,t){this.Ft(t,37),ce.fromName(e).path.forEach((i=>{this.Ft(t,60),this.Ut(i,t)}))}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}}va.Kt=new va;const Vo=255;function UO(r){if(r===0)return 8;let e=0;return r>>4||(e+=4,r<<=4),r>>6||(e+=2,r<<=2),r>>7||(e+=1),e}function gb(r){const e=64-(function(i){let o=0;for(let l=0;l<8;++l){const c=UO(255&i[l]);if(o+=c,c!==8)break}return o})(r);return Math.ceil(e/8)}class BO{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Wt(e){const t=e[Symbol.iterator]();let i=t.next();for(;!i.done;)this.Gt(i.value),i=t.next();this.zt()}jt(e){const t=e[Symbol.iterator]();let i=t.next();for(;!i.done;)this.Jt(i.value),i=t.next();this.Ht()}Yt(e){for(const t of e){const i=t.charCodeAt(0);if(i<128)this.Gt(i);else if(i<2048)this.Gt(960|i>>>6),this.Gt(128|63&i);else if(t<"\uD800"||"\uDBFF"<t)this.Gt(480|i>>>12),this.Gt(128|63&i>>>6),this.Gt(128|63&i);else{const o=t.codePointAt(0);this.Gt(240|o>>>18),this.Gt(128|63&o>>>12),this.Gt(128|63&o>>>6),this.Gt(128|63&o)}}this.zt()}Zt(e){for(const t of e){const i=t.charCodeAt(0);if(i<128)this.Jt(i);else if(i<2048)this.Jt(960|i>>>6),this.Jt(128|63&i);else if(t<"\uD800"||"\uDBFF"<t)this.Jt(480|i>>>12),this.Jt(128|63&i>>>6),this.Jt(128|63&i);else{const o=t.codePointAt(0);this.Jt(240|o>>>18),this.Jt(128|63&o>>>12),this.Jt(128|63&o>>>6),this.Jt(128|63&o)}}this.Ht()}Xt(e){const t=this.en(e),i=gb(t);this.tn(1+i),this.buffer[this.position++]=255&i;for(let o=t.length-i;o<t.length;++o)this.buffer[this.position++]=255&t[o]}nn(e){const t=this.en(e),i=gb(t);this.tn(1+i),this.buffer[this.position++]=~(255&i);for(let o=t.length-i;o<t.length;++o)this.buffer[this.position++]=~(255&t[o])}rn(){this.sn(Vo),this.sn(255)}_n(){this.an(Vo),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const t=(function(l){const c=new DataView(new ArrayBuffer(8));return c.setFloat64(0,l,!1),new Uint8Array(c.buffer)})(e),i=!!(128&t[0]);t[0]^=i?255:128;for(let o=1;o<t.length;++o)t[o]^=i?255:0;return t}Gt(e){const t=255&e;t===0?(this.sn(0),this.sn(255)):t===Vo?(this.sn(Vo),this.sn(0)):this.sn(t)}Jt(e){const t=255&e;t===0?(this.an(0),this.an(255)):t===Vo?(this.an(Vo),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Ht(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const t=e+this.position;if(t<=this.buffer.length)return;let i=2*this.buffer.length;i<t&&(i=t);const o=new Uint8Array(i);o.set(this.buffer),this.buffer=o}}class zO{constructor(e){this.cn=e}Bt(e){this.cn.Wt(e)}xt(e){this.cn.Yt(e)}Mt(e){this.cn.Xt(e)}vt(){this.cn.rn()}}class jO{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class Nu{constructor(){this.cn=new BO,this.ln=new zO(this.cn),this.hn=new jO(this.cn)}seed(e){this.cn.seed(e)}Pn(e){return e===0?this.ln:this.hn}un(){return this.cn.un()}reset(){this.cn.reset()}}class Ea{constructor(e,t,i,o){this.Tn=e,this.In=t,this.En=i,this.dn=o}An(){const e=this.dn.length,t=e===0||this.dn[e-1]===255?e+1:e,i=new Uint8Array(t);return i.set(this.dn,0),t!==e?i.set([0],this.dn.length):++i[i.length-1],new Ea(this.Tn,this.In,this.En,i)}Rn(e,t,i){return{indexId:this.Tn,uid:e,arrayValue:Ud(this.En),directionalValue:Ud(this.dn),orderedDocumentKey:Ud(t),documentKey:i.path.toArray()}}Vn(e,t,i){const o=this.Rn(e,t,i);return[o.indexId,o.uid,o.arrayValue,o.directionalValue,o.orderedDocumentKey,o.documentKey]}}function ds(r,e){let t=r.Tn-e.Tn;return t!==0?t:(t=yb(r.En,e.En),t!==0?t:(t=yb(r.dn,e.dn),t!==0?t:ce.comparator(r.In,e.In)))}function yb(r,e){for(let t=0;t<r.length&&t<e.length;++t){const i=r[t]-e[t];if(i!==0)return i}return r.length-e.length}function Ud(r){return P1()?(function(t){let i="";for(let o=0;o<t.length;o++)i+=String.fromCharCode(t[o]);return i})(r):r}function _b(r){return typeof r!="string"?r:(function(t){const i=new Uint8Array(t.length);for(let o=0;o<t.length;o++)i[o]=t.charCodeAt(o);return i})(r)}class vb{constructor(e){this.mn=new it(((t,i)=>yt.comparator(t.field,i.field))),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.fn=e.orderBy,this.gn=[];for(const t of e.filters){const i=t;i.isInequality()?this.mn=this.mn.add(i):this.gn.push(i)}}get pn(){return this.mn.size>1}yn(e){if(Ee(e.collectionGroup===this.collectionId,49279),this.pn)return!1;const t=Og(e);if(t!==void 0&&!this.wn(t))return!1;const i=pa(e);let o=new Set,l=0,c=0;for(;l<i.length&&this.wn(i[l]);++l)o=o.add(i[l].fieldPath.canonicalString());if(l===i.length)return!0;if(this.mn.size>0){const f=this.mn.getIterator().getNext();if(!o.has(f.field.canonicalString())){const p=i[l];if(!this.Sn(f,p)||!this.bn(this.fn[c++],p))return!1}++l}for(;l<i.length;++l){const f=i[l];if(c>=this.fn.length||!this.bn(this.fn[c++],f))return!1}return!0}Dn(){if(this.pn)return null;let e=new it(yt.comparator);const t=[];for(const i of this.gn)if(!i.field.isKeyField())if(i.op==="array-contains"||i.op==="array-contains-any")t.push(new Dd(i.field,2));else{if(e.has(i.field))continue;e=e.add(i.field),t.push(new Dd(i.field,0))}for(const i of this.fn)i.field.isKeyField()||e.has(i.field)||(e=e.add(i.field),t.push(new Dd(i.field,i.dir==="asc"?0:1)));return new Jd(Jd.UNKNOWN_ID,this.collectionId,t,sc.empty())}wn(e){for(const t of this.gn)if(this.Sn(t,e))return!0;return!1}Sn(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;const i=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===i}bn(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}}function qA(r){if(Ee(r instanceof Fe||r instanceof nt,20012),r instanceof Fe){if(r instanceof uA){const t=r.value.arrayValue?.values?.map((i=>Fe.create(r.field,"==",i)))||[];return nt.create(t,"or")}return r}const e=r.filters.map((t=>qA(t)));return nt.create(e,r.op)}function qO(r){if(r.getFilters().length===0)return[];const e=Wg(qA(r));return Ee(FA(e),7391),$g(e)||Xg(e)?[e]:e.getFilters()}function $g(r){return r instanceof Fe}function Xg(r){return r instanceof nt&&Oy(r)}function FA(r){return $g(r)||Xg(r)||(function(t){if(t instanceof nt&&zg(t)){for(const i of t.getFilters())if(!$g(i)&&!Xg(i))return!1;return!0}return!1})(r)}function Wg(r){if(Ee(r instanceof Fe||r instanceof nt,34018),r instanceof Fe)return r;if(r.filters.length===1)return Wg(r.filters[0]);const e=r.filters.map((i=>Wg(i)));let t=nt.create(e,r.op);return t=uf(t),FA(t)?t:(Ee(t instanceof nt,64498),Ee(al(t),40251),Ee(t.filters.length>1,57927),t.filters.reduce(((i,o)=>zy(i,o))))}function zy(r,e){let t;return Ee(r instanceof Fe||r instanceof nt,38388),Ee(e instanceof Fe||e instanceof nt,25473),t=r instanceof Fe?e instanceof Fe?(function(o,l){return nt.create([o,l],"and")})(r,e):Eb(r,e):e instanceof Fe?Eb(e,r):(function(o,l){if(Ee(o.filters.length>0&&l.filters.length>0,48005),al(o)&&al(l))return aA(o,l.getFilters());const c=zg(o)?o:l,f=zg(o)?l:o,p=c.filters.map((g=>zy(g,f)));return nt.create(p,"or")})(r,e),uf(t)}function Eb(r,e){if(al(e))return aA(e,r.getFilters());{const t=e.filters.map((i=>zy(r,i)));return nt.create(t,"or")}}function uf(r){if(Ee(r instanceof Fe||r instanceof nt,11850),r instanceof Fe)return r;const e=r.getFilters();if(e.length===1)return uf(e[0]);if(rA(r))return r;const t=e.map((o=>uf(o))),i=[];return t.forEach((o=>{o instanceof Fe?i.push(o):o instanceof nt&&(o.op===r.op?i.push(...o.filters):i.push(o))})),i.length===1?i[0]:nt.create(i,r.op)}class FO{constructor(){this.Cn=new jy}addToCollectionParentIndex(e,t){return this.Cn.add(t),j.resolve()}getCollectionParents(e,t){return j.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return j.resolve()}deleteFieldIndex(e,t){return j.resolve()}deleteAllFieldIndexes(e){return j.resolve()}createTargetIndexes(e,t){return j.resolve()}getDocumentsMatchingTarget(e,t){return j.resolve(null)}getIndexType(e,t){return j.resolve(0)}getFieldIndexes(e,t){return j.resolve([])}getNextCollectionGroupToUpdate(e){return j.resolve(null)}getMinOffset(e,t){return j.resolve(kn.min())}getMinOffsetFromCollectionGroup(e,t){return j.resolve(kn.min())}updateCollectionGroup(e,t,i){return j.resolve()}updateIndexEntries(e,t){return j.resolve()}}class jy{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t]||new it(We.comparator),l=!o.has(i);return this.index[t]=o.add(i),l}has(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t];return o&&o.has(i)}getEntries(e){return(this.index[e]||new it(We.comparator)).toArray()}}const Tb="IndexedDbIndexManager",yd=new Uint8Array(0);class HO{constructor(e,t){this.databaseId=t,this.vn=new jy,this.Fn=new Dr((i=>Va(i)),((i,o)=>xc(i,o))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.vn.has(t)){const i=t.lastSegment(),o=t.popLast();e.addOnCommittedListener((()=>{this.vn.add(t)}));const l={collectionId:i,parent:cn(o)};return bb(e).put(l)}return j.resolve()}getCollectionParents(e,t){const i=[],o=IDBKeyRange.bound([t,""],[DS(t),""],!1,!0);return bb(e).J(o).next((l=>{for(const c of l){if(c.collectionId!==t)break;i.push(Gi(c.parent))}return i}))}addFieldIndex(e,t){const i=Vu(e),o=(function(f){return{indexId:f.indexId,collectionGroup:f.collectionGroup,fields:f.fields.map((p=>[p.fieldPath.canonicalString(),p.kind]))}})(t);delete o.indexId;const l=i.add(o);if(t.indexState){const c=Mo(e);return l.next((f=>{c.put(fb(f,this.uid,t.indexState.sequenceNumber,t.indexState.offset))}))}return l.next()}deleteFieldIndex(e,t){const i=Vu(e),o=Mo(e),l=Oo(e);return i.delete(t.indexId).next((()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>l.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const t=Vu(e),i=Oo(e),o=Mo(e);return t.Z().next((()=>i.Z())).next((()=>o.Z()))}createTargetIndexes(e,t){return j.forEach(this.Mn(t),(i=>this.getIndexType(e,i).next((o=>{if(o===0||o===1){const l=new vb(i).Dn();if(l!=null)return this.addFieldIndex(e,l)}}))))}getDocumentsMatchingTarget(e,t){const i=Oo(e);let o=!0;const l=new Map;return j.forEach(this.Mn(t),(c=>this.xn(e,c).next((f=>{o&&(o=!!f),l.set(c,f)})))).next((()=>{if(o){let c=ke();const f=[];return j.forEach(l,((p,g)=>{se(Tb,`Using index ${(function(ee){return`id=${ee.indexId}|cg=${ee.collectionGroup}|f=${ee.fields.map((he=>`${he.fieldPath}:${he.kind}`)).join(",")}`})(p)} to execute ${Va(t)}`);const E=(function(ee,he){const de=Og(he);if(de===void 0)return null;for(const pe of sf(ee,de.fieldPath))switch(pe.op){case"array-contains-any":return pe.value.arrayValue.values||[];case"array-contains":return[pe.value]}return null})(g,p),T=(function(ee,he){const de=new Map;for(const pe of pa(he))for(const x of sf(ee,pe.fieldPath))switch(x.op){case"==":case"in":de.set(pe.fieldPath.canonicalString(),x.value);break;case"not-in":case"!=":return de.set(pe.fieldPath.canonicalString(),x.value),Array.from(de.values())}return null})(g,p),S=(function(ee,he){const de=[];let pe=!0;for(const x of pa(he)){const R=x.kind===0?Z0(ee,x.fieldPath,ee.startAt):eb(ee,x.fieldPath,ee.startAt);de.push(R.value),pe&&(pe=R.inclusive)}return new sl(de,pe)})(g,p),O=(function(ee,he){const de=[];let pe=!0;for(const x of pa(he)){const R=x.kind===0?eb(ee,x.fieldPath,ee.endAt):Z0(ee,x.fieldPath,ee.endAt);de.push(R.value),pe&&(pe=R.inclusive)}return new sl(de,pe)})(g,p),z=this.On(p,g,S),Y=this.On(p,g,O),U=this.Nn(p,g,T),F=this.Bn(p.indexId,E,z,S.inclusive,Y,O.inclusive,U);return j.forEach(F,(K=>i.Y(K,t.limit).next((ee=>{ee.forEach((he=>{const de=ce.fromSegments(he.documentKey);c.has(de)||(c=c.add(de),f.push(de))}))}))))})).next((()=>f))}return j.resolve(null)}))}Mn(e){let t=this.Fn.get(e);return t||(e.filters.length===0?t=[e]:t=qO(nt.create(e.filters,"and")).map((i=>qg(e.path,e.collectionGroup,e.orderBy,i.getFilters(),e.limit,e.startAt,e.endAt))),this.Fn.set(e,t),t)}Bn(e,t,i,o,l,c,f){const p=(t!=null?t.length:1)*Math.max(i.length,l.length),g=p/(t!=null?t.length:1),E=[];for(let T=0;T<p;++T){const S=t?this.Ln(t[T/g]):yd,O=this.kn(e,S,i[T%g],o),z=this.qn(e,S,l[T%g],c),Y=f.map((U=>this.kn(e,S,U,!0)));E.push(...this.createRange(O,z,Y))}return E}kn(e,t,i,o){const l=new Ea(e,ce.empty(),t,i);return o?l:l.An()}qn(e,t,i,o){const l=new Ea(e,ce.empty(),t,i);return o?l.An():l}xn(e,t){const i=new vb(t),o=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,o).next((l=>{let c=null;for(const f of l)i.yn(f)&&(!c||f.fields.length>c.fields.length)&&(c=f);return c}))}getIndexType(e,t){let i=2;const o=this.Mn(t);return j.forEach(o,(l=>this.xn(e,l).next((c=>{c?i!==0&&c.fields.length<(function(p){let g=new it(yt.comparator),E=!1;for(const T of p.filters)for(const S of T.getFlattenedFilters())S.field.isKeyField()||(S.op==="array-contains"||S.op==="array-contains-any"?E=!0:g=g.add(S.field));for(const T of p.orderBy)T.field.isKeyField()||(g=g.add(T.field));return g.size+(E?1:0)})(l)&&(i=1):i=0})))).next((()=>(function(c){return c.limit!==null})(t)&&o.length>1&&i===2?1:i))}Qn(e,t){const i=new Nu;for(const o of pa(e)){const l=t.data.field(o.fieldPath);if(l==null)return null;const c=i.Pn(o.kind);va.Kt.Dt(l,c)}return i.un()}Ln(e){const t=new Nu;return va.Kt.Dt(e,t.Pn(0)),t.un()}$n(e,t){const i=new Nu;return va.Kt.Dt(dc(this.databaseId,t),i.Pn((function(l){const c=pa(l);return c.length===0?0:c[c.length-1].kind})(e))),i.un()}Nn(e,t,i){if(i===null)return[];let o=[];o.push(new Nu);let l=0;for(const c of pa(e)){const f=i[l++];for(const p of o)if(this.Un(t,c.fieldPath)&&fc(f))o=this.Kn(o,c,f);else{const g=p.Pn(c.kind);va.Kt.Dt(f,g)}}return this.Wn(o)}On(e,t,i){return this.Nn(e,t,i.position)}Wn(e){const t=[];for(let i=0;i<e.length;++i)t[i]=e[i].un();return t}Kn(e,t,i){const o=[...e],l=[];for(const c of i.arrayValue.values||[])for(const f of o){const p=new Nu;p.seed(f.un()),va.Kt.Dt(c,p.Pn(t.kind)),l.push(p)}return l}Un(e,t){return!!e.filters.find((i=>i instanceof Fe&&i.field.isEqual(t)&&(i.op==="in"||i.op==="not-in")))}getFieldIndexes(e,t){const i=Vu(e),o=Mo(e);return(t?i.J(Pg,IDBKeyRange.bound(t,t)):i.J()).next((l=>{const c=[];return j.forEach(l,(f=>o.get([f.indexId,this.uid]).next((p=>{c.push((function(E,T){const S=T?new sc(T.sequenceNumber,new kn(Ma(T.readTime),new ce(Gi(T.documentKey)),T.largestBatchId)):sc.empty(),O=E.fields.map((([z,Y])=>new Dd(yt.fromServerFormat(z),Y)));return new Jd(E.indexId,E.collectionGroup,O,S)})(f,p))})))).next((()=>c))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((t=>t.length===0?null:(t.sort(((i,o)=>{const l=i.indexState.sequenceNumber-o.indexState.sequenceNumber;return l!==0?l:xe(i.collectionGroup,o.collectionGroup)})),t[0].collectionGroup)))}updateCollectionGroup(e,t,i){const o=Vu(e),l=Mo(e);return this.Gn(e).next((c=>o.J(Pg,IDBKeyRange.bound(t,t)).next((f=>j.forEach(f,(p=>l.put(fb(p.indexId,this.uid,c,i))))))))}updateIndexEntries(e,t){const i=new Map;return j.forEach(t,((o,l)=>{const c=i.get(o.collectionGroup);return(c?j.resolve(c):this.getFieldIndexes(e,o.collectionGroup)).next((f=>(i.set(o.collectionGroup,f),j.forEach(f,(p=>this.zn(e,o,p).next((g=>{const E=this.jn(l,p);return g.isEqual(E)?j.resolve():this.Jn(e,l,p,g,E)})))))))}))}Hn(e,t,i,o){return Oo(e).put(o.Rn(this.uid,this.$n(i,t.key),t.key))}Yn(e,t,i,o){return Oo(e).delete(o.Vn(this.uid,this.$n(i,t.key),t.key))}zn(e,t,i){const o=Oo(e);let l=new it(ds);return o.ee({index:jS,range:IDBKeyRange.only([i.indexId,this.uid,Ud(this.$n(i,t))])},((c,f)=>{l=l.add(new Ea(i.indexId,t,_b(f.arrayValue),_b(f.directionalValue)))})).next((()=>l))}jn(e,t){let i=new it(ds);const o=this.Qn(t,e);if(o==null)return i;const l=Og(t);if(l!=null){const c=e.data.field(l.fieldPath);if(fc(c))for(const f of c.arrayValue.values||[])i=i.add(new Ea(t.indexId,e.key,this.Ln(f),o))}else i=i.add(new Ea(t.indexId,e.key,yd,o));return i}Jn(e,t,i,o,l){se(Tb,"Updating index entries for document '%s'",t.key);const c=[];return(function(p,g,E,T,S){const O=p.getIterator(),z=g.getIterator();let Y=No(O),U=No(z);for(;Y||U;){let F=!1,K=!1;if(Y&&U){const ee=E(Y,U);ee<0?K=!0:ee>0&&(F=!0)}else Y!=null?K=!0:F=!0;F?(T(U),U=No(z)):K?(S(Y),Y=No(O)):(Y=No(O),U=No(z))}})(o,l,ds,(f=>{c.push(this.Hn(e,t,i,f))}),(f=>{c.push(this.Yn(e,t,i,f))})),j.waitFor(c)}Gn(e){let t=1;return Mo(e).ee({index:zS,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((i,o,l)=>{l.done(),t=o.sequenceNumber+1})).next((()=>t))}createRange(e,t,i){i=i.sort(((c,f)=>ds(c,f))).filter(((c,f,p)=>!f||ds(c,p[f-1])!==0));const o=[];o.push(e);for(const c of i){const f=ds(c,e),p=ds(c,t);if(f===0)o[0]=e.An();else if(f>0&&p<0)o.push(c),o.push(c.An());else if(p>0)break}o.push(t);const l=[];for(let c=0;c<o.length;c+=2){if(this.Zn(o[c],o[c+1]))return[];const f=o[c].Vn(this.uid,yd,ce.empty()),p=o[c+1].Vn(this.uid,yd,ce.empty());l.push(IDBKeyRange.bound(f,p))}return l}Zn(e,t){return ds(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(Sb)}getMinOffset(e,t){return j.mapArray(this.Mn(t),(i=>this.xn(e,i).next((o=>o||ye(44426))))).next(Sb)}}function bb(r){return Gt(r,uc)}function Oo(r){return Gt(r,$u)}function Vu(r){return Gt(r,Ry)}function Mo(r){return Gt(r,Yu)}function Sb(r){Ee(r.length!==0,28825);let e=r[0].indexState.offset,t=e.largestBatchId;for(let i=1;i<r.length;i++){const o=r[i].indexState.offset;Ay(o,e)<0&&(e=o),t<o.largestBatchId&&(t=o.largestBatchId)}return new kn(e.readTime,e.documentKey,t)}const Ab={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},HA=41943040;class ln{static withCacheSize(e){return new ln(e,ln.DEFAULT_COLLECTION_PERCENTILE,ln.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}function GA(r,e,t){const i=r.store(mi),o=r.store(Zo),l=[],c=IDBKeyRange.only(t.batchId);let f=0;const p=i.ee({range:c},((E,T,S)=>(f++,S.delete())));l.push(p.next((()=>{Ee(f===1,47070,{batchId:t.batchId})})));const g=[];for(const E of t.mutations){const T=LS(e,E.key.path,t.batchId);l.push(o.delete(T)),g.push(E.key)}return j.waitFor(l).next((()=>g))}function cf(r){if(!r)return 0;let e;if(r.document)e=r.document;else if(r.unknownDocument)e=r.unknownDocument;else{if(!r.noDocument)throw ye(14731);e=r.noDocument}return JSON.stringify(e).length}ln.DEFAULT_COLLECTION_PERCENTILE=10,ln.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ln.DEFAULT=new ln(HA,ln.DEFAULT_COLLECTION_PERCENTILE,ln.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ln.DISABLED=new ln(-1,0,0);class Uf{constructor(e,t,i,o){this.userId=e,this.serializer=t,this.indexManager=i,this.referenceDelegate=o,this.Xn={}}static wt(e,t,i,o){Ee(e.uid!=="",64387);const l=e.isAuthenticated()?e.uid:"";return new Uf(l,t,i,o)}checkEmpty(e){let t=!0;const i=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return fs(e).ee({index:Ta,range:i},((o,l,c)=>{t=!1,c.done()})).next((()=>t))}addMutationBatch(e,t,i,o){const l=qo(e),c=fs(e);return c.add({}).next((f=>{Ee(typeof f=="number",49019);const p=new Py(f,t,i,o),g=(function(O,z,Y){const U=Y.baseMutations.map((K=>of(O.yt,K))),F=Y.mutations.map((K=>of(O.yt,K)));return{userId:z,batchId:Y.batchId,localWriteTimeMs:Y.localWriteTime.toMillis(),baseMutations:U,mutations:F}})(this.serializer,this.userId,p),E=[];let T=new it(((S,O)=>xe(S.canonicalString(),O.canonicalString())));for(const S of o){const O=LS(this.userId,S.key.path,f);T=T.add(S.key.path.popLast()),E.push(c.put(g)),E.push(l.put(O,vV))}return T.forEach((S=>{E.push(this.indexManager.addToCollectionParentIndex(e,S))})),e.addOnCommittedListener((()=>{this.Xn[f]=p.keys()})),j.waitFor(E).next((()=>p))}))}lookupMutationBatch(e,t){return fs(e).get(t).next((i=>i?(Ee(i.userId===this.userId,48,"Unexpected user for mutation batch",{userId:i.userId,batchId:t}),_a(this.serializer,i)):null))}er(e,t){return this.Xn[t]?j.resolve(this.Xn[t]):this.lookupMutationBatch(e,t).next((i=>{if(i){const o=i.keys();return this.Xn[t]=o,o}return null}))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,o=IDBKeyRange.lowerBound([this.userId,i]);let l=null;return fs(e).ee({index:Ta,range:o},((c,f,p)=>{f.userId===this.userId&&(Ee(f.batchId>=i,47524,{tr:i}),l=_a(this.serializer,f)),p.done()})).next((()=>l))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let i=ba;return fs(e).ee({index:Ta,range:t,reverse:!0},((o,l,c)=>{i=l.batchId,c.done()})).next((()=>i))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,ba],[this.userId,Number.POSITIVE_INFINITY]);return fs(e).J(Ta,t).next((i=>i.map((o=>_a(this.serializer,o)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const i=Nd(this.userId,t.path),o=IDBKeyRange.lowerBound(i),l=[];return qo(e).ee({range:o},((c,f,p)=>{const[g,E,T]=c,S=Gi(E);if(g===this.userId&&t.path.isEqual(S))return fs(e).get(T).next((O=>{if(!O)throw ye(61480,{nr:c,batchId:T});Ee(O.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:O.userId,batchId:T}),l.push(_a(this.serializer,O))}));p.done()})).next((()=>l))}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new it(xe);const o=[];return t.forEach((l=>{const c=Nd(this.userId,l.path),f=IDBKeyRange.lowerBound(c),p=qo(e).ee({range:f},((g,E,T)=>{const[S,O,z]=g,Y=Gi(O);S===this.userId&&l.path.isEqual(Y)?i=i.add(z):T.done()}));o.push(p)})),j.waitFor(o).next((()=>this.rr(e,i)))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,o=i.length+1,l=Nd(this.userId,i),c=IDBKeyRange.lowerBound(l);let f=new it(xe);return qo(e).ee({range:c},((p,g,E)=>{const[T,S,O]=p,z=Gi(S);T===this.userId&&i.isPrefixOf(z)?z.length===o&&(f=f.add(O)):E.done()})).next((()=>this.rr(e,f)))}rr(e,t){const i=[],o=[];return t.forEach((l=>{o.push(fs(e).get(l).next((c=>{if(c===null)throw ye(35274,{batchId:l});Ee(c.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:c.userId,batchId:l}),i.push(_a(this.serializer,c))})))})),j.waitFor(o).next((()=>i))}removeMutationBatch(e,t){return GA(e.le,this.userId,t).next((i=>(e.addOnCommittedListener((()=>{this.ir(t.batchId)})),j.forEach(i,(o=>this.referenceDelegate.markPotentiallyOrphaned(e,o))))))}ir(e){delete this.Xn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return j.resolve();const i=IDBKeyRange.lowerBound((function(c){return[c]})(this.userId)),o=[];return qo(e).ee({range:i},((l,c,f)=>{if(l[0]===this.userId){const p=Gi(l[1]);o.push(p)}else f.done()})).next((()=>{Ee(o.length===0,56720,{sr:o.map((l=>l.canonicalString()))})}))}))}containsKey(e,t){return KA(e,this.userId,t)}_r(e){return QA(e).get(this.userId).next((t=>t||{userId:this.userId,lastAcknowledgedBatchId:ba,lastStreamToken:""}))}}function KA(r,e,t){const i=Nd(e,t.path),o=i[1],l=IDBKeyRange.lowerBound(i);let c=!1;return qo(r).ee({range:l,X:!0},((f,p,g)=>{const[E,T,S]=f;E===e&&T===o&&(c=!0),g.done()})).next((()=>c))}function fs(r){return Gt(r,mi)}function qo(r){return Gt(r,Zo)}function QA(r){return Gt(r,oc)}class Pa{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Pa(0)}static cr(){return new Pa(-1)}}class GO{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.lr(e).next((t=>{const i=new Pa(t.highestTargetId);return t.highestTargetId=i.next(),this.hr(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.lr(e).next((t=>be.fromTimestamp(new tt(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.lr(e).next((t=>t.highestListenSequenceNumber))}setTargetsMetadata(e,t,i){return this.lr(e).next((o=>(o.highestListenSequenceNumber=t,i&&(o.lastRemoteSnapshotVersion=i.toTimestamp()),t>o.highestListenSequenceNumber&&(o.highestListenSequenceNumber=t),this.hr(e,o))))}addTargetData(e,t){return this.Pr(e,t).next((()=>this.lr(e).next((i=>(i.targetCount+=1,this.Tr(t,i),this.hr(e,i))))))}updateTargetData(e,t){return this.Pr(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>Po(e).delete(t.targetId))).next((()=>this.lr(e))).next((i=>(Ee(i.targetCount>0,8065),i.targetCount-=1,this.hr(e,i))))}removeTargets(e,t,i){let o=0;const l=[];return Po(e).ee(((c,f)=>{const p=qu(f);p.sequenceNumber<=t&&i.get(p.targetId)===null&&(o++,l.push(this.removeTargetData(e,p)))})).next((()=>j.waitFor(l))).next((()=>o))}forEachTarget(e,t){return Po(e).ee(((i,o)=>{const l=qu(o);t(l)}))}lr(e){return wb(e).get(tf).next((t=>(Ee(t!==null,2888),t)))}hr(e,t){return wb(e).put(tf,t)}Pr(e,t){return Po(e).put(zA(this.serializer,t))}Tr(e,t){let i=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,i=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,i=!0),i}getTargetCount(e){return this.lr(e).next((t=>t.targetCount))}getTargetData(e,t){const i=Va(t),o=IDBKeyRange.bound([i,Number.NEGATIVE_INFINITY],[i,Number.POSITIVE_INFINITY]);let l=null;return Po(e).ee({range:o,index:BS},((c,f,p)=>{const g=qu(f);xc(t,g.target)&&(l=g,p.done())})).next((()=>l))}addMatchingKeys(e,t,i){const o=[],l=vs(e);return t.forEach((c=>{const f=cn(c.path);o.push(l.put({targetId:i,path:f})),o.push(this.referenceDelegate.addReference(e,i,c))})),j.waitFor(o)}removeMatchingKeys(e,t,i){const o=vs(e);return j.forEach(t,(l=>{const c=cn(l.path);return j.waitFor([o.delete([i,c]),this.referenceDelegate.removeReference(e,i,l)])}))}removeMatchingKeysForTargetId(e,t){const i=vs(e),o=IDBKeyRange.bound([t],[t+1],!1,!0);return i.delete(o)}getMatchingKeysForTargetId(e,t){const i=IDBKeyRange.bound([t],[t+1],!1,!0),o=vs(e);let l=ke();return o.ee({range:i,X:!0},((c,f,p)=>{const g=Gi(c[1]),E=new ce(g);l=l.add(E)})).next((()=>l))}containsKey(e,t){const i=cn(t.path),o=IDBKeyRange.bound([i],[DS(i)],!1,!0);let l=0;return vs(e).ee({index:Iy,X:!0,range:o},(([c,f],p,g)=>{c!==0&&(l++,g.done())})).next((()=>l>0))}At(e,t){return Po(e).get(t).next((i=>i?qu(i):null))}}function Po(r){return Gt(r,el)}function wb(r){return Gt(r,Sa)}function vs(r){return Gt(r,tl)}const Ib="LruGarbageCollector",KO=1048576;function Rb([r,e],[t,i]){const o=xe(r,t);return o===0?xe(e,i):o}class QO{constructor(e){this.Ir=e,this.buffer=new it(Rb),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();Rb(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class YA{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){se(Ib,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Ps(t)?se(Ib,"Ignoring IndexedDB error during garbage collection: ",t):await Ba(t)}await this.Vr(3e5)}))}}class YO{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((i=>Math.floor(t/100*i)))}nthSequenceNumber(e,t){if(t===0)return j.resolve(Zn.ce);const i=new QO(t);return this.mr.forEachTarget(e,(o=>i.Ar(o.sequenceNumber))).next((()=>this.mr.pr(e,(o=>i.Ar(o))))).next((()=>i.maxValue))}removeTargets(e,t,i){return this.mr.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(se("LruGarbageCollector","Garbage collection skipped; disabled"),j.resolve(Ab)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(se("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Ab):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let i,o,l,c,f,p,g;const E=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((T=>(T>this.params.maximumSequenceNumbersToCollect?(se("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${T}`),o=this.params.maximumSequenceNumbersToCollect):o=T,c=Date.now(),this.nthSequenceNumber(e,o)))).next((T=>(i=T,f=Date.now(),this.removeTargets(e,i,t)))).next((T=>(l=T,p=Date.now(),this.removeOrphanedDocuments(e,i)))).next((T=>(g=Date.now(),Uo()<=qe.DEBUG&&se("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-E}ms
	Determined least recently used ${o} in `+(f-c)+`ms
	Removed ${l} targets in `+(p-f)+`ms
	Removed ${T} documents in `+(g-p)+`ms
Total Duration: ${g-E}ms`),j.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:l,documentsRemoved:T}))))}}function $A(r,e){return new YO(r,e)}class $O{constructor(e,t){this.db=e,this.garbageCollector=$A(this,t)}gr(e){const t=this.wr(e);return this.db.getTargetCache().getTargetCount(e).next((i=>t.next((o=>i+o))))}wr(e){let t=0;return this.pr(e,(i=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}pr(e,t){return this.Sr(e,((i,o)=>t(o)))}addReference(e,t,i){return _d(e,i)}removeReference(e,t,i){return _d(e,i)}removeTargets(e,t,i){return this.db.getTargetCache().removeTargets(e,t,i)}markPotentiallyOrphaned(e,t){return _d(e,t)}br(e,t){return(function(o,l){let c=!1;return QA(o).te((f=>KA(o,f,l).next((p=>(p&&(c=!0),j.resolve(!p)))))).next((()=>c))})(e,t)}removeOrphanedDocuments(e,t){const i=this.db.getRemoteDocumentCache().newChangeBuffer(),o=[];let l=0;return this.Sr(e,((c,f)=>{if(f<=t){const p=this.br(e,c).next((g=>{if(!g)return l++,i.getEntry(e,c).next((()=>(i.removeEntry(c,be.min()),vs(e).delete((function(T){return[0,cn(T.path)]})(c)))))}));o.push(p)}})).next((()=>j.waitFor(o))).next((()=>i.apply(e))).next((()=>l))}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,i)}updateLimboDocument(e,t){return _d(e,t)}Sr(e,t){const i=vs(e);let o,l=Zn.ce;return i.ee({index:Iy},(([c,f],{path:p,sequenceNumber:g})=>{c===0?(l!==Zn.ce&&t(new ce(Gi(o)),l),l=g,o=p):l=Zn.ce})).next((()=>{l!==Zn.ce&&t(new ce(Gi(o)),l)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function _d(r,e){return vs(r).put((function(i,o){return{targetId:0,path:cn(i.path),sequenceNumber:o}})(e,r.currentSequenceNumber))}class XA{constructor(){this.changes=new Dr((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Et.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?j.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class XO{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,i){return fa(e).put(i)}removeEntry(e,t,i){return fa(e).delete((function(l,c){const f=l.path.toArray();return[f.slice(0,f.length-2),f[f.length-2],lf(c),f[f.length-1]]})(t,i))}updateMetadata(e,t){return this.getMetadata(e).next((i=>(i.byteSize+=t,this.Dr(e,i))))}getEntry(e,t){let i=Et.newInvalidDocument(t);return fa(e).ee({index:Vd,range:IDBKeyRange.only(Ou(t))},((o,l)=>{i=this.Cr(t,l)})).next((()=>i))}vr(e,t){let i={size:0,document:Et.newInvalidDocument(t)};return fa(e).ee({index:Vd,range:IDBKeyRange.only(Ou(t))},((o,l)=>{i={document:this.Cr(t,l),size:cf(l)}})).next((()=>i))}getEntries(e,t){let i=Pn();return this.Fr(e,t,((o,l)=>{const c=this.Cr(o,l);i=i.insert(o,c)})).next((()=>i))}Mr(e,t){let i=Pn(),o=new gt(ce.comparator);return this.Fr(e,t,((l,c)=>{const f=this.Cr(l,c);i=i.insert(l,f),o=o.insert(l,cf(c))})).next((()=>({documents:i,Or:o})))}Fr(e,t,i){if(t.isEmpty())return j.resolve();let o=new it(Db);t.forEach((p=>o=o.add(p)));const l=IDBKeyRange.bound(Ou(o.first()),Ou(o.last())),c=o.getIterator();let f=c.getNext();return fa(e).ee({index:Vd,range:l},((p,g,E)=>{const T=ce.fromSegments([...g.prefixPath,g.collectionGroup,g.documentId]);for(;f&&Db(f,T)<0;)i(f,null),f=c.getNext();f&&f.isEqual(T)&&(i(f,g),f=c.hasNext()?c.getNext():null),f?E.j(Ou(f)):E.done()})).next((()=>{for(;f;)i(f,null),f=c.hasNext()?c.getNext():null}))}getDocumentsMatchingQuery(e,t,i,o,l){const c=t.path,f=[c.popLast().toArray(),c.lastSegment(),lf(i.readTime),i.documentKey.path.isEmpty()?"":i.documentKey.path.lastSegment()],p=[c.popLast().toArray(),c.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return fa(e).J(IDBKeyRange.bound(f,p,!0)).next((g=>{l?.incrementDocumentReadCount(g.length);let E=Pn();for(const T of g){const S=this.Cr(ce.fromSegments(T.prefixPath.concat(T.collectionGroup,T.documentId)),T);S.isFoundDocument()&&(Dc(t,S)||o.has(S.key))&&(E=E.insert(S.key,S))}return E}))}getAllFromCollectionGroup(e,t,i,o){let l=Pn();const c=xb(t,i),f=xb(t,kn.max());return fa(e).ee({index:US,range:IDBKeyRange.bound(c,f,!0)},((p,g,E)=>{const T=this.Cr(ce.fromSegments(g.prefixPath.concat(g.collectionGroup,g.documentId)),g);l=l.insert(T.key,T),l.size===o&&E.done()})).next((()=>l))}newChangeBuffer(e){return new WO(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((t=>t.byteSize))}getMetadata(e){return Cb(e).get(Mg).next((t=>(Ee(!!t,20021),t)))}Dr(e,t){return Cb(e).put(Mg,t)}Cr(e,t){if(t){const i=PO(this.serializer,t);if(!(i.isNoDocument()&&i.version.isEqual(be.min())))return i}return Et.newInvalidDocument(e)}}function WA(r){return new XO(r)}class WO extends XA{constructor(e,t){super(),this.Nr=e,this.trackRemovals=t,this.Br=new Dr((i=>i.toString()),((i,o)=>i.isEqual(o)))}applyChanges(e){const t=[];let i=0,o=new it(((l,c)=>xe(l.canonicalString(),c.canonicalString())));return this.changes.forEach(((l,c)=>{const f=this.Br.get(l);if(t.push(this.Nr.removeEntry(e,l,f.readTime)),c.isValidDocument()){const p=hb(this.Nr.serializer,c);o=o.add(l.path.popLast());const g=cf(p);i+=g-f.size,t.push(this.Nr.addEntry(e,l,p))}else if(i-=f.size,this.trackRemovals){const p=hb(this.Nr.serializer,c.convertToNoDocument(be.min()));t.push(this.Nr.addEntry(e,l,p))}})),o.forEach((l=>{t.push(this.Nr.indexManager.addToCollectionParentIndex(e,l))})),t.push(this.Nr.updateMetadata(e,i)),j.waitFor(t)}getFromCache(e,t){return this.Nr.vr(e,t).next((i=>(this.Br.set(t,{size:i.size,readTime:i.document.readTime}),i.document)))}getAllFromCache(e,t){return this.Nr.Mr(e,t).next((({documents:i,Or:o})=>(o.forEach(((l,c)=>{this.Br.set(l,{size:c,readTime:i.get(l).readTime})})),i)))}}function Cb(r){return Gt(r,lc)}function fa(r){return Gt(r,ef)}function Ou(r){const e=r.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function xb(r,e){const t=e.documentKey.path.toArray();return[r,lf(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function Db(r,e){const t=r.path.toArray(),i=e.path.toArray();let o=0;for(let l=0;l<t.length-2&&l<i.length-2;++l)if(o=xe(t[l],i[l]),o)return o;return o=xe(t.length,i.length),o||(o=xe(t[t.length-2],i[i.length-2]),o||xe(t[t.length-1],i[i.length-1]))}class JO{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class JA{constructor(e,t,i,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=o}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next((o=>(i=o,this.remoteDocumentCache.getEntry(e,t)))).next((o=>(i!==null&&Zu(i.mutation,o,An.empty(),tt.now()),o)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.getLocalViewOfDocuments(e,i,ke()).next((()=>i))))}getLocalViewOfDocuments(e,t,i=ke()){const o=Ki();return this.populateOverlays(e,o,t).next((()=>this.computeViews(e,t,o,i).next((l=>{let c=zu();return l.forEach(((f,p)=>{c=c.insert(f,p.overlayedDocument)})),c}))))}getOverlayedDocuments(e,t){const i=Ki();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,ke())))}populateOverlays(e,t,i){const o=[];return i.forEach((l=>{t.has(l)||o.push(l)})),this.documentOverlayCache.getOverlays(e,o).next((l=>{l.forEach(((c,f)=>{t.set(c,f)}))}))}computeViews(e,t,i,o){let l=Pn();const c=Ju(),f=(function(){return Ju()})();return t.forEach(((p,g)=>{const E=i.get(g.key);o.has(g.key)&&(E===void 0||E.mutation instanceof Nr)?l=l.insert(g.key,g):E!==void 0?(c.set(g.key,E.mutation.getFieldMask()),Zu(E.mutation,g,E.mutation.getFieldMask(),tt.now())):c.set(g.key,An.empty())})),this.recalculateAndSaveOverlays(e,l).next((p=>(p.forEach(((g,E)=>c.set(g,E))),t.forEach(((g,E)=>f.set(g,new JO(E,c.get(g)??null)))),f)))}recalculateAndSaveOverlays(e,t){const i=Ju();let o=new gt(((c,f)=>c-f)),l=ke();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((c=>{for(const f of c)f.keys().forEach((p=>{const g=t.get(p);if(g===null)return;let E=i.get(p)||An.empty();E=f.applyToLocalView(g,E),i.set(p,E);const T=(o.get(f.batchId)||ke()).add(p);o=o.insert(f.batchId,T)}))})).next((()=>{const c=[],f=o.getReverseIterator();for(;f.hasNext();){const p=f.getNext(),g=p.key,E=p.value,T=pA();E.forEach((S=>{if(!l.has(S)){const O=bA(t.get(S),i.get(S));O!==null&&T.set(S,O),l=l.add(S)}})),c.push(this.documentOverlayCache.saveOverlays(e,g,T))}return j.waitFor(c)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,t,i,o){return(function(c){return ce.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):cA(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,o):this.getDocumentsMatchingCollectionQuery(e,t,i,o)}getNextDocuments(e,t,i,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,o).next((l=>{const c=o-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,o-l.size):j.resolve(Ki());let f=rc,p=l;return c.next((g=>j.forEach(g,((E,T)=>(f<T.largestBatchId&&(f=T.largestBatchId),l.get(E)?j.resolve():this.remoteDocumentCache.getEntry(e,E).next((S=>{p=p.insert(E,S)}))))).next((()=>this.populateOverlays(e,g,l))).next((()=>this.computeViews(e,p,g,ke()))).next((E=>({batchId:f,changes:mA(E)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ce(t)).next((i=>{let o=zu();return i.isFoundDocument()&&(o=o.insert(i.key,i)),o}))}getDocumentsMatchingCollectionGroupQuery(e,t,i,o){const l=t.collectionGroup;let c=zu();return this.indexManager.getCollectionParents(e,l).next((f=>j.forEach(f,(p=>{const g=(function(T,S){return new El(S,null,T.explicitOrderBy.slice(),T.filters.slice(),T.limit,T.limitType,T.startAt,T.endAt)})(t,p.child(l));return this.getDocumentsMatchingCollectionQuery(e,g,i,o).next((E=>{E.forEach(((T,S)=>{c=c.insert(T,S)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(e,t,i,o){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next((c=>(l=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,l,o)))).next((c=>{l.forEach(((p,g)=>{const E=g.getKey();c.get(E)===null&&(c=c.insert(E,Et.newInvalidDocument(E)))}));let f=zu();return c.forEach(((p,g)=>{const E=l.get(p);E!==void 0&&Zu(E.mutation,g,An.empty(),tt.now()),Dc(t,g)&&(f=f.insert(p,g))})),f}))}}class ZO{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return j.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(o){return{id:o.id,version:o.version,createTime:gn(o.createTime)}})(t)),j.resolve()}getNamedQuery(e,t){return j.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(o){return{name:o.name,query:jA(o.bundledQuery),readTime:gn(o.readTime)}})(t)),j.resolve()}}class e4{constructor(){this.overlays=new gt(ce.comparator),this.qr=new Map}getOverlay(e,t){return j.resolve(this.overlays.get(t))}getOverlays(e,t){const i=Ki();return j.forEach(t,(o=>this.getOverlay(e,o).next((l=>{l!==null&&i.set(o,l)})))).next((()=>i))}saveOverlays(e,t,i){return i.forEach(((o,l)=>{this.St(e,t,l)})),j.resolve()}removeOverlaysForBatchId(e,t,i){const o=this.qr.get(i);return o!==void 0&&(o.forEach((l=>this.overlays=this.overlays.remove(l))),this.qr.delete(i)),j.resolve()}getOverlaysForCollection(e,t,i){const o=Ki(),l=t.length+1,c=new ce(t.child("")),f=this.overlays.getIteratorFrom(c);for(;f.hasNext();){const p=f.getNext().value,g=p.getKey();if(!t.isPrefixOf(g.path))break;g.path.length===l&&p.largestBatchId>i&&o.set(p.getKey(),p)}return j.resolve(o)}getOverlaysForCollectionGroup(e,t,i,o){let l=new gt(((g,E)=>g-E));const c=this.overlays.getIterator();for(;c.hasNext();){const g=c.getNext().value;if(g.getKey().getCollectionGroup()===t&&g.largestBatchId>i){let E=l.get(g.largestBatchId);E===null&&(E=Ki(),l=l.insert(g.largestBatchId,E)),E.set(g.getKey(),g)}}const f=Ki(),p=l.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach(((g,E)=>f.set(g,E))),!(f.size()>=o)););return j.resolve(f)}St(e,t,i){const o=this.overlays.get(i.key);if(o!==null){const c=this.qr.get(o.largestBatchId).delete(i.key);this.qr.set(o.largestBatchId,c)}this.overlays=this.overlays.insert(i.key,new Ly(t,i));let l=this.qr.get(t);l===void 0&&(l=ke(),this.qr.set(t,l)),this.qr.set(t,l.add(i.key))}}class t4{constructor(){this.sessionToken=Lt.EMPTY_BYTE_STRING}getSessionToken(e){return j.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,j.resolve()}}class qy{constructor(){this.Qr=new it($t.$r),this.Ur=new it($t.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const i=new $t(e,t);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(e,t){e.forEach((i=>this.addReference(i,t)))}removeReference(e,t){this.Gr(new $t(e,t))}zr(e,t){e.forEach((i=>this.removeReference(i,t)))}jr(e){const t=new ce(new We([])),i=new $t(t,e),o=new $t(t,e+1),l=[];return this.Ur.forEachInRange([i,o],(c=>{this.Gr(c),l.push(c.key)})),l}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new ce(new We([])),i=new $t(t,e),o=new $t(t,e+1);let l=ke();return this.Ur.forEachInRange([i,o],(c=>{l=l.add(c.key)})),l}containsKey(e){const t=new $t(e,0),i=this.Qr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class $t{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return ce.comparator(e.key,t.key)||xe(e.Yr,t.Yr)}static Kr(e,t){return xe(e.Yr,t.Yr)||ce.comparator(e.key,t.key)}}class n4{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new it($t.$r)}checkEmpty(e){return j.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,o){const l=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new Py(l,t,i,o);this.mutationQueue.push(c);for(const f of o)this.Zr=this.Zr.add(new $t(f.key,l)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast());return j.resolve(c)}lookupMutationBatch(e,t){return j.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,o=this.ei(i),l=o<0?0:o;return j.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return j.resolve(this.mutationQueue.length===0?ba:this.tr-1)}getAllMutationBatches(e){return j.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new $t(t,0),o=new $t(t,Number.POSITIVE_INFINITY),l=[];return this.Zr.forEachInRange([i,o],(c=>{const f=this.Xr(c.Yr);l.push(f)})),j.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new it(xe);return t.forEach((o=>{const l=new $t(o,0),c=new $t(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([l,c],(f=>{i=i.add(f.Yr)}))})),j.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,o=i.length+1;let l=i;ce.isDocumentKey(l)||(l=l.child(""));const c=new $t(new ce(l),0);let f=new it(xe);return this.Zr.forEachWhile((p=>{const g=p.key.path;return!!i.isPrefixOf(g)&&(g.length===o&&(f=f.add(p.Yr)),!0)}),c),j.resolve(this.ti(f))}ti(e){const t=[];return e.forEach((i=>{const o=this.Xr(i);o!==null&&t.push(o)})),t}removeMutationBatch(e,t){Ee(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Zr;return j.forEach(t.mutations,(o=>{const l=new $t(o.key,t.batchId);return i=i.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Zr=i}))}ir(e){}containsKey(e,t){const i=new $t(t,0),o=this.Zr.firstAfterOrEqual(i);return j.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,j.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class i4{constructor(e){this.ri=e,this.docs=(function(){return new gt(ce.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,o=this.docs.get(i),l=o?o.size:0,c=this.ri(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:c}),this.size+=c-l,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return j.resolve(i?i.document.mutableCopy():Et.newInvalidDocument(t))}getEntries(e,t){let i=Pn();return t.forEach((o=>{const l=this.docs.get(o);i=i.insert(o,l?l.document.mutableCopy():Et.newInvalidDocument(o))})),j.resolve(i)}getDocumentsMatchingQuery(e,t,i,o){let l=Pn();const c=t.path,f=new ce(c.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(f);for(;p.hasNext();){const{key:g,value:{document:E}}=p.getNext();if(!c.isPrefixOf(g.path))break;g.path.length>c.length+1||Ay(OS(E),i)<=0||(o.has(E.key)||Dc(t,E))&&(l=l.insert(E.key,E.mutableCopy()))}return j.resolve(l)}getAllFromCollectionGroup(e,t,i,o){ye(9500)}ii(e,t){return j.forEach(this.docs,(i=>t(i)))}newChangeBuffer(e){return new r4(this)}getSize(e){return j.resolve(this.size)}}class r4 extends XA{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((i,o)=>{o.isValidDocument()?t.push(this.Nr.addEntry(e,o)):this.Nr.removeEntry(i)})),j.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}class s4{constructor(e){this.persistence=e,this.si=new Dr((t=>Va(t)),xc),this.lastRemoteSnapshotVersion=be.min(),this.highestTargetId=0,this.oi=0,this._i=new qy,this.targetCount=0,this.ai=Pa.ur()}forEachTarget(e,t){return this.si.forEach(((i,o)=>t(o))),j.resolve()}getLastRemoteSnapshotVersion(e){return j.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return j.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),j.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.oi&&(this.oi=t),j.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new Pa(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,j.resolve()}updateTargetData(e,t){return this.Pr(t),j.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,j.resolve()}removeTargets(e,t,i){let o=0;const l=[];return this.si.forEach(((c,f)=>{f.sequenceNumber<=t&&i.get(f.targetId)===null&&(this.si.delete(c),l.push(this.removeMatchingKeysForTargetId(e,f.targetId)),o++)})),j.waitFor(l).next((()=>o))}getTargetCount(e){return j.resolve(this.targetCount)}getTargetData(e,t){const i=this.si.get(t)||null;return j.resolve(i)}addMatchingKeys(e,t,i){return this._i.Wr(t,i),j.resolve()}removeMatchingKeys(e,t,i){this._i.zr(t,i);const o=this.persistence.referenceDelegate,l=[];return o&&t.forEach((c=>{l.push(o.markPotentiallyOrphaned(e,c))})),j.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),j.resolve()}getMatchingKeysForTargetId(e,t){const i=this._i.Hr(t);return j.resolve(i)}containsKey(e,t){return j.resolve(this._i.containsKey(t))}}class Fy{constructor(e,t){this.ui={},this.overlays={},this.ci=new Zn(0),this.li=!1,this.li=!0,this.hi=new t4,this.referenceDelegate=e(this),this.Pi=new s4(this),this.indexManager=new FO,this.remoteDocumentCache=(function(o){return new i4(o)})((i=>this.referenceDelegate.Ti(i))),this.serializer=new BA(t),this.Ii=new ZO(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new e4,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.ui[e.toKey()];return i||(i=new n4(t,this.referenceDelegate),this.ui[e.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,i){se("MemoryPersistence","Starting transaction:",e);const o=new a4(this.ci.next());return this.referenceDelegate.Ei(),i(o).next((l=>this.referenceDelegate.di(o).next((()=>l)))).toPromise().then((l=>(o.raiseOnCommittedEvent(),l)))}Ai(e,t){return j.or(Object.values(this.ui).map((i=>()=>i.containsKey(e,t))))}}class a4 extends PS{constructor(e){super(),this.currentSequenceNumber=e}}class Bf{constructor(e){this.persistence=e,this.Ri=new qy,this.Vi=null}static mi(e){return new Bf(e)}get fi(){if(this.Vi)return this.Vi;throw ye(60996)}addReference(e,t,i){return this.Ri.addReference(i,t),this.fi.delete(i.toString()),j.resolve()}removeReference(e,t,i){return this.Ri.removeReference(i,t),this.fi.add(i.toString()),j.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),j.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((o=>this.fi.add(o.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next((o=>{o.forEach((l=>this.fi.add(l.toString())))})).next((()=>i.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return j.forEach(this.fi,(i=>{const o=ce.fromPath(i);return this.gi(e,o).next((l=>{l||t.removeEntry(o,be.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((i=>{i?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return j.or([()=>j.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class hf{constructor(e,t){this.persistence=e,this.pi=new Dr((i=>cn(i.path)),((i,o)=>i.isEqual(o))),this.garbageCollector=$A(this,t)}static mi(e,t){return new hf(e,t)}Ei(){}di(e){return j.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>t.next((o=>i+o))))}wr(e){let t=0;return this.pr(e,(i=>{t++})).next((()=>t))}pr(e,t){return j.forEach(this.pi,((i,o)=>this.br(e,i,o).next((l=>l?j.resolve():t(o)))))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0;const o=this.persistence.getRemoteDocumentCache(),l=o.newChangeBuffer();return o.ii(e,(c=>this.br(e,c,t).next((f=>{f||(i++,l.removeEntry(c,be.min()))})))).next((()=>l.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),j.resolve()}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.pi.set(i,e.currentSequenceNumber),j.resolve()}removeReference(e,t,i){return this.pi.set(i,e.currentSequenceNumber),j.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),j.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Md(e.data.value)),t}br(e,t,i){return j.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.pi.get(t);return j.resolve(o!==void 0&&o>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class o4{constructor(e){this.serializer=e}k(e,t,i,o){const l=new Af("createOrUpgrade",t);i<1&&o>=1&&((function(p){p.createObjectStore(Cc)})(e),(function(p){p.createObjectStore(oc,{keyPath:_V}),p.createObjectStore(mi,{keyPath:j0,autoIncrement:!0}).createIndex(Ta,q0,{unique:!0}),p.createObjectStore(Zo)})(e),Nb(e),(function(p){p.createObjectStore(ga)})(e));let c=j.resolve();return i<3&&o>=3&&(i!==0&&((function(p){p.deleteObjectStore(tl),p.deleteObjectStore(el),p.deleteObjectStore(Sa)})(e),Nb(e)),c=c.next((()=>(function(p){const g=p.store(Sa),E={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:be.min().toTimestamp(),targetCount:0};return g.put(tf,E)})(l)))),i<4&&o>=4&&(i!==0&&(c=c.next((()=>(function(p,g){return g.store(mi).J().next((T=>{p.deleteObjectStore(mi),p.createObjectStore(mi,{keyPath:j0,autoIncrement:!0}).createIndex(Ta,q0,{unique:!0});const S=g.store(mi),O=T.map((z=>S.put(z)));return j.waitFor(O)}))})(e,l)))),c=c.next((()=>{(function(p){p.createObjectStore(nl,{keyPath:RV})})(e)}))),i<5&&o>=5&&(c=c.next((()=>this.yi(l)))),i<6&&o>=6&&(c=c.next((()=>((function(p){p.createObjectStore(lc)})(e),this.wi(l))))),i<7&&o>=7&&(c=c.next((()=>this.Si(l)))),i<8&&o>=8&&(c=c.next((()=>this.bi(e,l)))),i<9&&o>=9&&(c=c.next((()=>{(function(p){p.objectStoreNames.contains("remoteDocumentChanges")&&p.deleteObjectStore("remoteDocumentChanges")})(e)}))),i<10&&o>=10&&(c=c.next((()=>this.Di(l)))),i<11&&o>=11&&(c=c.next((()=>{(function(p){p.createObjectStore(If,{keyPath:CV})})(e),(function(p){p.createObjectStore(Rf,{keyPath:xV})})(e)}))),i<12&&o>=12&&(c=c.next((()=>{(function(p){const g=p.createObjectStore(Cf,{keyPath:kV});g.createIndex(kg,LV,{unique:!1}),g.createIndex(qS,UV,{unique:!1})})(e)}))),i<13&&o>=13&&(c=c.next((()=>(function(p){const g=p.createObjectStore(ef,{keyPath:EV});g.createIndex(Vd,TV),g.createIndex(US,bV)})(e))).next((()=>this.Ci(e,l))).next((()=>e.deleteObjectStore(ga)))),i<14&&o>=14&&(c=c.next((()=>this.Fi(e,l)))),i<15&&o>=15&&(c=c.next((()=>(function(p){p.createObjectStore(Ry,{keyPath:DV,autoIncrement:!0}).createIndex(Pg,NV,{unique:!1}),p.createObjectStore(Yu,{keyPath:VV}).createIndex(zS,OV,{unique:!1}),p.createObjectStore($u,{keyPath:MV}).createIndex(jS,PV,{unique:!1})})(e)))),i<16&&o>=16&&(c=c.next((()=>{t.objectStore(Yu).clear()})).next((()=>{t.objectStore($u).clear()}))),i<17&&o>=17&&(c=c.next((()=>{(function(p){p.createObjectStore(Cy,{keyPath:BV})})(e)}))),i<18&&o>=18&&P1()&&(c=c.next((()=>{t.objectStore(Yu).clear()})).next((()=>{t.objectStore($u).clear()}))),c}wi(e){let t=0;return e.store(ga).ee(((i,o)=>{t+=cf(o)})).next((()=>{const i={byteSize:t};return e.store(lc).put(Mg,i)}))}yi(e){const t=e.store(oc),i=e.store(mi);return t.J().next((o=>j.forEach(o,(l=>{const c=IDBKeyRange.bound([l.userId,ba],[l.userId,l.lastAcknowledgedBatchId]);return i.J(Ta,c).next((f=>j.forEach(f,(p=>{Ee(p.userId===l.userId,18650,"Cannot process batch from unexpected user",{batchId:p.batchId});const g=_a(this.serializer,p);return GA(e,l.userId,g).next((()=>{}))}))))}))))}Si(e){const t=e.store(tl),i=e.store(ga);return e.store(Sa).get(tf).next((o=>{const l=[];return i.ee(((c,f)=>{const p=new We(c),g=(function(T){return[0,cn(T)]})(p);l.push(t.get(g).next((E=>E?j.resolve():(T=>t.put({targetId:0,path:cn(T),sequenceNumber:o.highestListenSequenceNumber}))(p))))})).next((()=>j.waitFor(l)))}))}bi(e,t){e.createObjectStore(uc,{keyPath:IV});const i=t.store(uc),o=new jy,l=c=>{if(o.add(c)){const f=c.lastSegment(),p=c.popLast();return i.put({collectionId:f,parent:cn(p)})}};return t.store(ga).ee({X:!0},((c,f)=>{const p=new We(c);return l(p.popLast())})).next((()=>t.store(Zo).ee({X:!0},(([c,f,p],g)=>{const E=Gi(f);return l(E.popLast())}))))}Di(e){const t=e.store(el);return t.ee(((i,o)=>{const l=qu(o),c=zA(this.serializer,l);return t.put(c)}))}Ci(e,t){const i=t.store(ga),o=[];return i.ee(((l,c)=>{const f=t.store(ef),p=(function(T){return T.document?new ce(We.fromString(T.document.name).popFirst(5)):T.noDocument?ce.fromSegments(T.noDocument.path):T.unknownDocument?ce.fromSegments(T.unknownDocument.path):ye(36783)})(c).path.toArray(),g={prefixPath:p.slice(0,p.length-2),collectionGroup:p[p.length-2],documentId:p[p.length-1],readTime:c.readTime||[0,0],unknownDocument:c.unknownDocument,noDocument:c.noDocument,document:c.document,hasCommittedMutations:!!c.hasCommittedMutations};o.push(f.put(g))})).next((()=>j.waitFor(o)))}Fi(e,t){const i=t.store(mi),o=WA(this.serializer),l=new Fy(Bf.mi,this.serializer.yt);return i.J().next((c=>{const f=new Map;return c.forEach((p=>{let g=f.get(p.userId)??ke();_a(this.serializer,p).keys().forEach((E=>g=g.add(E))),f.set(p.userId,g)})),j.forEach(f,((p,g)=>{const E=new rn(g),T=Lf.wt(this.serializer,E),S=l.getIndexManager(E),O=Uf.wt(E,this.serializer,S,l.referenceDelegate);return new JA(o,O,T,S).recalculateAndSaveOverlaysForDocumentKeys(new Lg(t,Zn.ce),p).next()}))}))}}function Nb(r){r.createObjectStore(tl,{keyPath:AV}).createIndex(Iy,wV,{unique:!0}),r.createObjectStore(el,{keyPath:"targetId"}).createIndex(BS,SV,{unique:!0}),r.createObjectStore(Sa)}const ms="IndexedDbPersistence",lg=18e5,ug=5e3,cg="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",l4="main";class Hy{constructor(e,t,i,o,l,c,f,p,g,E,T=18){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=i,this.Mi=l,this.window=c,this.document=f,this.xi=g,this.Oi=E,this.Ni=T,this.ci=null,this.li=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Bi=null,this.inForeground=!1,this.Li=null,this.ki=null,this.qi=Number.NEGATIVE_INFINITY,this.Qi=S=>Promise.resolve(),!Hy.v())throw new le(Z.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new $O(this,o),this.$i=t+l4,this.serializer=new BA(p),this.Ui=new Rs(this.$i,this.Ni,new o4(this.serializer)),this.hi=new LO,this.Pi=new GO(this.referenceDelegate,this.serializer),this.remoteDocumentCache=WA(this.serializer),this.Ii=new kO,this.window&&this.window.localStorage?this.Ki=this.window.localStorage:(this.Ki=null,E===!1&&mn(ms,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Wi().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new le(Z.FAILED_PRECONDITION,cg);return this.Gi(),this.zi(),this.ji(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.Pi.getHighestSequenceNumber(e)))})).then((e=>{this.ci=new Zn(e,this.xi)})).then((()=>{this.li=!0})).catch((e=>(this.Ui&&this.Ui.close(),Promise.reject(e))))}Ji(e){return this.Qi=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ui.$((async t=>{t.newVersion===null&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Mi.enqueueAndForget((async()=>{this.started&&await this.Wi()})))}Wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>vd(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.Hi(e).next((t=>{t||(this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))))}))})).next((()=>this.Yi(e))).next((t=>this.isPrimary&&!t?this.Zi(e).next((()=>!1)):!!t&&this.Xi(e).next((()=>!0)))))).catch((e=>{if(Ps(e))return se(ms,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return se(ms,"Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.Mi.enqueueRetryable((()=>this.Qi(e))),this.isPrimary=e}))}Hi(e){return Mu(e).get(Do).next((t=>j.resolve(this.es(t))))}ts(e){return vd(e).delete(this.clientId)}async ns(){if(this.isPrimary&&!this.rs(this.qi,lg)){this.qi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(t=>{const i=Gt(t,nl);return i.J().next((o=>{const l=this.ss(o,lg),c=o.filter((f=>l.indexOf(f)===-1));return j.forEach(c,(f=>i.delete(f.clientId))).next((()=>c))}))})).catch((()=>[]));if(this.Ki)for(const t of e)this.Ki.removeItem(this._s(t.clientId))}}ji(){this.ki=this.Mi.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.Wi().then((()=>this.ns())).then((()=>this.ji()))))}es(e){return!!e&&e.ownerId===this.clientId}Yi(e){return this.Oi?j.resolve(!0):Mu(e).get(Do).next((t=>{if(t!==null&&this.rs(t.leaseTimestampMs,ug)&&!this.us(t.ownerId)){if(this.es(t)&&this.networkEnabled)return!0;if(!this.es(t)){if(!t.allowTabSynchronization)throw new le(Z.FAILED_PRECONDITION,cg);return!1}}return!(!this.networkEnabled||!this.inForeground)||vd(e).J().next((i=>this.ss(i,ug).find((o=>{if(this.clientId!==o.clientId){const l=!this.networkEnabled&&o.networkEnabled,c=!this.inForeground&&o.inForeground,f=this.networkEnabled===o.networkEnabled;if(l||c&&f)return!0}return!1}))===void 0))})).next((t=>(this.isPrimary!==t&&se(ms,`Client ${t?"is":"is not"} eligible for a primary lease.`),t)))}async shutdown(){this.li=!1,this.cs(),this.ki&&(this.ki.cancel(),this.ki=null),this.ls(),this.hs(),await this.Ui.runTransaction("shutdown","readwrite",[Cc,nl],(e=>{const t=new Lg(e,Zn.ce);return this.Zi(t).next((()=>this.ts(t)))})),this.Ui.close(),this.Ps()}ss(e,t){return e.filter((i=>this.rs(i.updateTimeMs,t)&&!this.us(i.clientId)))}Ts(){return this.runTransaction("getActiveClients","readonly",(e=>vd(e).J().next((t=>this.ss(t,lg).map((i=>i.clientId))))))}get started(){return this.li}getGlobalsCache(){return this.hi}getMutationQueue(e,t){return Uf.wt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new HO(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return Lf.wt(this.serializer,e)}getBundleCache(){return this.Ii}runTransaction(e,t,i){se(ms,"Starting transaction:",e);const o=t==="readonly"?"readonly":"readwrite",l=(function(p){return p===18?qV:p===17?KS:p===16?jV:p===15?xy:p===14?GS:p===13?HS:p===12?zV:p===11?FS:void ye(60245)})(this.Ni);let c;return this.Ui.runTransaction(e,o,l,(f=>(c=new Lg(f,this.ci?this.ci.next():Zn.ce),t==="readwrite-primary"?this.Hi(c).next((p=>!!p||this.Yi(c))).next((p=>{if(!p)throw mn(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))),new le(Z.FAILED_PRECONDITION,MS);return i(c)})).next((p=>this.Xi(c).next((()=>p)))):this.Is(c).next((()=>i(c)))))).then((f=>(c.raiseOnCommittedEvent(),f)))}Is(e){return Mu(e).get(Do).next((t=>{if(t!==null&&this.rs(t.leaseTimestampMs,ug)&&!this.us(t.ownerId)&&!this.es(t)&&!(this.Oi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new le(Z.FAILED_PRECONDITION,cg)}))}Xi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Mu(e).put(Do,t)}static v(){return Rs.v()}Zi(e){const t=Mu(e);return t.get(Do).next((i=>this.es(i)?(se(ms,"Releasing primary lease."),t.delete(Do)):j.resolve()))}rs(e,t){const i=Date.now();return!(e<i-t)&&(!(e>i)||(mn(`Detected an update time that is in the future: ${e} > ${i}`),!1))}Gi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Li=()=>{this.Mi.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.Wi())))},this.document.addEventListener("visibilitychange",this.Li),this.inForeground=this.document.visibilityState==="visible")}ls(){this.Li&&(this.document.removeEventListener("visibilitychange",this.Li),this.Li=null)}zi(){typeof this.window?.addEventListener=="function"&&(this.Bi=()=>{this.cs();const e=/(?:Version|Mobile)\/1[456]/;M1()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.Mi.enterRestrictedMode(!0),this.Mi.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Bi))}hs(){this.Bi&&(this.window.removeEventListener("pagehide",this.Bi),this.Bi=null)}us(e){try{const t=this.Ki?.getItem(this._s(e))!==null;return se(ms,`Client '${e}' ${t?"is":"is not"} zombied in LocalStorage`),t}catch(t){return mn(ms,"Failed to get zombied client id.",t),!1}}cs(){if(this.Ki)try{this.Ki.setItem(this._s(this.clientId),String(Date.now()))}catch(e){mn("Failed to set zombie client id.",e)}}Ps(){if(this.Ki)try{this.Ki.removeItem(this._s(this.clientId))}catch{}}_s(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Mu(r){return Gt(r,Cc)}function vd(r){return Gt(r,nl)}function u4(r,e){let t=r.projectId;return r.isDefaultDatabase||(t+="."+r.database),"firestore/"+e+"/"+t+"/"}class Gy{constructor(e,t,i,o){this.targetId=e,this.fromCache=t,this.Es=i,this.ds=o}static As(e,t){let i=ke(),o=ke();for(const l of t.docChanges)switch(l.type){case 0:i=i.add(l.doc.key);break;case 1:o=o.add(l.doc.key)}return new Gy(e,t.fromCache,i,o)}}class c4{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class ZA{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return M1()?8:kS(Ft())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,i,o){const l={result:null};return this.ys(e,t).next((c=>{l.result=c})).next((()=>{if(!l.result)return this.ws(e,t,o,i).next((c=>{l.result=c}))})).next((()=>{if(l.result)return;const c=new c4;return this.Ss(e,t,c).next((f=>{if(l.result=f,this.Vs)return this.bs(e,t,c,f.size)}))})).next((()=>l.result))}bs(e,t,i,o){return i.documentReadCount<this.fs?(Uo()<=qe.DEBUG&&se("QueryEngine","SDK will not create cache indexes for query:",Bo(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),j.resolve()):(Uo()<=qe.DEBUG&&se("QueryEngine","Query:",Bo(t),"scans",i.documentReadCount,"local documents and returns",o,"documents as results."),i.documentReadCount>this.gs*o?(Uo()<=qe.DEBUG&&se("QueryEngine","The SDK decides to create cache indexes for query:",Bo(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ei(t))):j.resolve())}ys(e,t){if(tb(t))return j.resolve(null);let i=ei(t);return this.indexManager.getIndexType(e,i).next((o=>o===0?null:(t.limit!==null&&o===1&&(t=Hg(t,null,"F"),i=ei(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next((l=>{const c=ke(...l);return this.ps.getDocuments(e,c).next((f=>this.indexManager.getMinOffset(e,i).next((p=>{const g=this.Ds(t,f);return this.Cs(t,g,c,p.readTime)?this.ys(e,Hg(t,null,"F")):this.vs(e,g,t,p)}))))})))))}ws(e,t,i,o){return tb(t)||o.isEqual(be.min())?j.resolve(null):this.ps.getDocuments(e,i).next((l=>{const c=this.Ds(t,l);return this.Cs(t,c,i,o)?j.resolve(null):(Uo()<=qe.DEBUG&&se("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Bo(t)),this.vs(e,c,t,hV(o,rc)).next((f=>f)))}))}Ds(e,t){let i=new it(dA(e));return t.forEach(((o,l)=>{Dc(e,l)&&(i=i.add(l))})),i}Cs(e,t,i,o){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(o)>0)}Ss(e,t,i){return Uo()<=qe.DEBUG&&se("QueryEngine","Using full collection scan to execute query:",Bo(t)),this.ps.getDocumentsMatchingQuery(e,t,kn.min(),i)}vs(e,t,i,o){return this.ps.getDocumentsMatchingQuery(e,i,o).next((l=>(t.forEach((c=>{l=l.insert(c.key,c)})),l)))}}const Ky="LocalStore",h4=3e8;class d4{constructor(e,t,i,o){this.persistence=e,this.Fs=t,this.serializer=o,this.Ms=new gt(xe),this.xs=new Dr((l=>Va(l)),xc),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(i)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new JA(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function ew(r,e,t,i){return new d4(r,e,t,i)}async function tw(r,e){const t=De(r);return await t.persistence.runTransaction("Handle user change","readonly",(i=>{let o;return t.mutationQueue.getAllMutationBatches(i).next((l=>(o=l,t.Bs(e),t.mutationQueue.getAllMutationBatches(i)))).next((l=>{const c=[],f=[];let p=ke();for(const g of o){c.push(g.batchId);for(const E of g.mutations)p=p.add(E.key)}for(const g of l){f.push(g.batchId);for(const E of g.mutations)p=p.add(E.key)}return t.localDocuments.getDocuments(i,p).next((g=>({Ls:g,removedBatchIds:c,addedBatchIds:f})))}))}))}function f4(r,e){const t=De(r);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const o=e.batch.keys(),l=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(f,p,g,E){const T=g.batch,S=T.keys();let O=j.resolve();return S.forEach((z=>{O=O.next((()=>E.getEntry(p,z))).next((Y=>{const U=g.docVersions.get(z);Ee(U!==null,48541),Y.version.compareTo(U)<0&&(T.applyToRemoteDocument(Y,g),Y.isValidDocument()&&(Y.setReadTime(g.commitVersion),E.addEntry(Y)))}))})),O.next((()=>f.mutationQueue.removeMutationBatch(p,T)))})(t,i,e,l).next((()=>l.apply(i))).next((()=>t.mutationQueue.performConsistencyCheck(i))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(i,o,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(f){let p=ke();for(let g=0;g<f.mutationResults.length;++g)f.mutationResults[g].transformResults.length>0&&(p=p.add(f.batch.mutations[g].key));return p})(e)))).next((()=>t.localDocuments.getDocuments(i,o)))}))}function nw(r){const e=De(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function m4(r,e){const t=De(r),i=e.snapshotVersion;let o=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const c=t.Ns.newChangeBuffer({trackRemovals:!0});o=t.Ms;const f=[];e.targetChanges.forEach(((E,T)=>{const S=o.get(T);if(!S)return;f.push(t.Pi.removeMatchingKeys(l,E.removedDocuments,T).next((()=>t.Pi.addMatchingKeys(l,E.addedDocuments,T))));let O=S.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(T)!==null?O=O.withResumeToken(Lt.EMPTY_BYTE_STRING,be.min()).withLastLimboFreeSnapshotVersion(be.min()):E.resumeToken.approximateByteSize()>0&&(O=O.withResumeToken(E.resumeToken,i)),o=o.insert(T,O),(function(Y,U,F){return Y.resumeToken.approximateByteSize()===0||U.snapshotVersion.toMicroseconds()-Y.snapshotVersion.toMicroseconds()>=h4?!0:F.addedDocuments.size+F.modifiedDocuments.size+F.removedDocuments.size>0})(S,O,E)&&f.push(t.Pi.updateTargetData(l,O))}));let p=Pn(),g=ke();if(e.documentUpdates.forEach((E=>{e.resolvedLimboDocuments.has(E)&&f.push(t.persistence.referenceDelegate.updateLimboDocument(l,E))})),f.push(p4(l,c,e.documentUpdates).next((E=>{p=E.ks,g=E.qs}))),!i.isEqual(be.min())){const E=t.Pi.getLastRemoteSnapshotVersion(l).next((T=>t.Pi.setTargetsMetadata(l,l.currentSequenceNumber,i)));f.push(E)}return j.waitFor(f).next((()=>c.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,p,g))).next((()=>p))})).then((l=>(t.Ms=o,l)))}function p4(r,e,t){let i=ke(),o=ke();return t.forEach((l=>i=i.add(l))),e.getEntries(r,i).next((l=>{let c=Pn();return t.forEach(((f,p)=>{const g=l.get(f);p.isFoundDocument()!==g.isFoundDocument()&&(o=o.add(f)),p.isNoDocument()&&p.version.isEqual(be.min())?(e.removeEntry(f,p.readTime),c=c.insert(f,p)):!g.isValidDocument()||p.version.compareTo(g.version)>0||p.version.compareTo(g.version)===0&&g.hasPendingWrites?(e.addEntry(p),c=c.insert(f,p)):se(Ky,"Ignoring outdated watch update for ",f,". Current version:",g.version," Watch version:",p.version)})),{ks:c,qs:o}}))}function g4(r,e){const t=De(r);return t.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=ba),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function y4(r,e){const t=De(r);return t.persistence.runTransaction("Allocate target","readwrite",(i=>{let o;return t.Pi.getTargetData(i,e).next((l=>l?(o=l,j.resolve(o)):t.Pi.allocateTargetId(i).next((c=>(o=new Tr(e,c,"TargetPurposeListen",i.currentSequenceNumber),t.Pi.addTargetData(i,o).next((()=>o)))))))})).then((i=>{const o=t.Ms.get(i.targetId);return(o===null||i.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(i.targetId,i),t.xs.set(e,i.targetId)),i}))}async function Jg(r,e,t){const i=De(r),o=i.Ms.get(e),l=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",l,(c=>i.persistence.referenceDelegate.removeTarget(c,o)))}catch(c){if(!Ps(c))throw c;se(Ky,`Failed to update sequence numbers for target ${e}: ${c}`)}i.Ms=i.Ms.remove(e),i.xs.delete(o.target)}function Vb(r,e,t){const i=De(r);let o=be.min(),l=ke();return i.persistence.runTransaction("Execute query","readwrite",(c=>(function(p,g,E){const T=De(p),S=T.xs.get(E);return S!==void 0?j.resolve(T.Ms.get(S)):T.Pi.getTargetData(g,E)})(i,c,ei(e)).next((f=>{if(f)return o=f.lastLimboFreeSnapshotVersion,i.Pi.getMatchingKeysForTargetId(c,f.targetId).next((p=>{l=p}))})).next((()=>i.Fs.getDocumentsMatchingQuery(c,e,t?o:be.min(),t?l:ke()))).next((f=>(_4(i,iO(e),f),{documents:f,Qs:l})))))}function _4(r,e,t){let i=r.Os.get(e)||be.min();t.forEach(((o,l)=>{l.readTime.compareTo(i)>0&&(i=l.readTime)})),r.Os.set(e,i)}class Ob{constructor(){this.activeTargetIds=uO()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class iw{constructor(){this.Mo=new Ob,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,i){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Ob,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class v4{Oo(e){}shutdown(){}}const Mb="ConnectivityMonitor";class Pb{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){se(Mb,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){se(Mb,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let Ed=null;function Zg(){return Ed===null?Ed=(function(){return 268435456+Math.round(2147483648*Math.random())})():Ed++,"0x"+Ed.toString(16)}const hg="RestConnection",E4={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class T4{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${i}/databases/${o}`,this.Wo=this.databaseId.database===nf?`project_id=${i}`:`project_id=${i}&database_id=${o}`}Go(e,t,i,o,l){const c=Zg(),f=this.zo(e,t.toUriEncodedString());se(hg,`Sending RPC '${e}' ${c}:`,f,i);const p={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(p,o,l);const{host:g}=new URL(f),E=pl(g);return this.Jo(e,f,p,i,E).then((T=>(se(hg,`Received RPC '${e}' ${c}: `,T),T)),(T=>{throw Da(hg,`RPC '${e}' ${c} failed with error: `,T,"url: ",f,"request:",i),T}))}Ho(e,t,i,o,l,c){return this.Go(e,t,i,o,l)}jo(e,t,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+vl})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((o,l)=>e[l]=o)),i&&i.headers.forEach(((o,l)=>e[l]=o))}zo(e,t){const i=E4[e];return`${this.Uo}/v1/${t}:${i}`}terminate(){}}class b4{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const on="WebChannelConnection";class S4 extends T4{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,i,o,l){const c=Zg();return new Promise(((f,p)=>{const g=new SS;g.setWithCredentials(!0),g.listenOnce(AS.COMPLETE,(()=>{try{switch(g.getLastErrorCode()){case xd.NO_ERROR:const T=g.getResponseJson();se(on,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(T)),f(T);break;case xd.TIMEOUT:se(on,`RPC '${e}' ${c} timed out`),p(new le(Z.DEADLINE_EXCEEDED,"Request time out"));break;case xd.HTTP_ERROR:const S=g.getStatus();if(se(on,`RPC '${e}' ${c} failed with status:`,S,"response text:",g.getResponseText()),S>0){let O=g.getResponseJson();Array.isArray(O)&&(O=O[0]);const z=O?.error;if(z&&z.status&&z.message){const Y=(function(F){const K=F.toLowerCase().replace(/_/g,"-");return Object.values(Z).indexOf(K)>=0?K:Z.UNKNOWN})(z.status);p(new le(Y,z.message))}else p(new le(Z.UNKNOWN,"Server responded with status "+g.getStatus()))}else p(new le(Z.UNAVAILABLE,"Connection failed."));break;default:ye(9055,{l_:e,streamId:c,h_:g.getLastErrorCode(),P_:g.getLastError()})}}finally{se(on,`RPC '${e}' ${c} completed.`)}}));const E=JSON.stringify(o);se(on,`RPC '${e}' ${c} sending request:`,o),g.send(t,"POST",E,i,15)}))}T_(e,t,i){const o=Zg(),l=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=RS(),f=IS(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},g=this.longPollingOptions.timeoutSeconds;g!==void 0&&(p.longPollingTimeout=Math.round(1e3*g)),this.useFetchStreams&&(p.useFetchStreams=!0),this.jo(p.initMessageHeaders,t,i),p.encodeInitMessageHeaders=!0;const E=l.join("");se(on,`Creating RPC '${e}' stream ${o}: ${E}`,p);const T=c.createWebChannel(E,p);this.I_(T);let S=!1,O=!1;const z=new b4({Yo:U=>{O?se(on,`Not sending because RPC '${e}' stream ${o} is closed:`,U):(S||(se(on,`Opening RPC '${e}' stream ${o} transport.`),T.open(),S=!0),se(on,`RPC '${e}' stream ${o} sending:`,U),T.send(U))},Zo:()=>T.close()}),Y=(U,F,K)=>{U.listen(F,(ee=>{try{K(ee)}catch(he){setTimeout((()=>{throw he}),0)}}))};return Y(T,Bu.EventType.OPEN,(()=>{O||(se(on,`RPC '${e}' stream ${o} transport opened.`),z.o_())})),Y(T,Bu.EventType.CLOSE,(()=>{O||(O=!0,se(on,`RPC '${e}' stream ${o} transport closed`),z.a_(),this.E_(T))})),Y(T,Bu.EventType.ERROR,(U=>{O||(O=!0,Da(on,`RPC '${e}' stream ${o} transport errored. Name:`,U.name,"Message:",U.message),z.a_(new le(Z.UNAVAILABLE,"The operation could not be completed")))})),Y(T,Bu.EventType.MESSAGE,(U=>{if(!O){const F=U.data[0];Ee(!!F,16349);const K=F,ee=K?.error||K[0]?.error;if(ee){se(on,`RPC '${e}' stream ${o} received error:`,ee);const he=ee.status;let de=(function(R){const C=Mt[R];if(C!==void 0)return wA(C)})(he),pe=ee.message;de===void 0&&(de=Z.INTERNAL,pe="Unknown error status: "+he+" with message "+ee.message),O=!0,z.a_(new le(de,pe)),T.close()}else se(on,`RPC '${e}' stream ${o} received:`,F),z.u_(F)}})),Y(f,wS.STAT_EVENT,(U=>{U.stat===Ng.PROXY?se(on,`RPC '${e}' stream ${o} detected buffering proxy`):U.stat===Ng.NOPROXY&&se(on,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{z.__()}),0),z}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function A4(){return typeof window<"u"?window:null}function Bd(){return typeof document<"u"?document:null}function zf(r){return new wO(r,!0)}class rw{constructor(e,t,i=1e3,o=1.5,l=6e4){this.Mi=e,this.timerId=t,this.d_=i,this.A_=o,this.R_=l,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),o=Math.max(0,t-i);o>0&&se("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const kb="PersistentStream";class sw{constructor(e,t,i,o,l,c,f,p){this.Mi=e,this.S_=i,this.b_=o,this.connection=l,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=f,this.listener=p,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new rw(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===Z.RESOURCE_EXHAUSTED?(mn(t.toString()),mn("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===Z.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,o])=>{this.D_===t&&this.G_(i,o)}),(i=>{e((()=>{const o=new le(Z.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(o)}))}))}G_(e,t){const i=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{i((()=>this.listener.Xo()))})),this.stream.t_((()=>{i((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{i((()=>this.z_(o)))})),this.stream.onMessage((o=>{i((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return se(kb,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(se(kb,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class w4 extends sw{constructor(e,t,i,o,l,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,o,c),this.serializer=l}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=CO(this.serializer,e),i=(function(l){if(!("targetChange"in l))return be.min();const c=l.targetChange;return c.targetIds&&c.targetIds.length?be.min():c.readTime?gn(c.readTime):be.min()})(e);return this.listener.H_(t,i)}Y_(e){const t={};t.database=Qg(this.serializer),t.addTarget=(function(l,c){let f;const p=c.target;if(f=rf(p)?{documents:OA(l,p)}:{query:MA(l,p).ft},f.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){f.resumeToken=CA(l,c.resumeToken);const g=Gg(l,c.expectedCount);g!==null&&(f.expectedCount=g)}else if(c.snapshotVersion.compareTo(be.min())>0){f.readTime=cl(l,c.snapshotVersion.toTimestamp());const g=Gg(l,c.expectedCount);g!==null&&(f.expectedCount=g)}return f})(this.serializer,e);const i=DO(this.serializer,e);i&&(t.labels=i),this.q_(t)}Z_(e){const t={};t.database=Qg(this.serializer),t.removeTarget=e,this.q_(t)}}class I4 extends sw{constructor(e,t,i,o,l,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,o,c),this.serializer=l}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return Ee(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ee(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Ee(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=xO(e.writeResults,e.commitTime),i=gn(e.commitTime);return this.listener.na(i,t)}ra(){const e={};e.database=Qg(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((i=>of(this.serializer,i)))};this.q_(t)}}class R4{}class C4 extends R4{constructor(e,t,i,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new le(Z.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,i,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,c])=>this.connection.Go(e,Kg(t,i),o,l,c))).catch((l=>{throw l.name==="FirebaseError"?(l.code===Z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new le(Z.UNKNOWN,l.toString())}))}Ho(e,t,i,o,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,f])=>this.connection.Ho(e,Kg(t,i),o,c,f,l))).catch((c=>{throw c.name==="FirebaseError"?(c.code===Z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new le(Z.UNKNOWN,c.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class x4{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(mn(t),this.aa=!1):se("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const ka="RemoteStore";class D4{constructor(e,t,i,o,l){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=l,this.Aa.Oo((c=>{i.enqueueAndForget((async()=>{za(this)&&(se(ka,"Restarting streams for network reachability change."),await(async function(p){const g=De(p);g.Ea.add(4),await Vc(g),g.Ra.set("Unknown"),g.Ea.delete(4),await jf(g)})(this))}))})),this.Ra=new x4(i,o)}}async function jf(r){if(za(r))for(const e of r.da)await e(!0)}async function Vc(r){for(const e of r.da)await e(!1)}function aw(r,e){const t=De(r);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),Xy(t)?$y(t):bl(t).O_()&&Yy(t,e))}function Qy(r,e){const t=De(r),i=bl(t);t.Ia.delete(e),i.O_()&&ow(t,e),t.Ia.size===0&&(i.O_()?i.L_():za(t)&&t.Ra.set("Unknown"))}function Yy(r,e){if(r.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(be.min())>0){const t=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}bl(r).Y_(e)}function ow(r,e){r.Va.Ue(e),bl(r).Z_(e)}function $y(r){r.Va=new TO({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),At:e=>r.Ia.get(e)||null,ht:()=>r.datastore.serializer.databaseId}),bl(r).start(),r.Ra.ua()}function Xy(r){return za(r)&&!bl(r).x_()&&r.Ia.size>0}function za(r){return De(r).Ea.size===0}function lw(r){r.Va=void 0}async function N4(r){r.Ra.set("Online")}async function V4(r){r.Ia.forEach(((e,t)=>{Yy(r,e)}))}async function O4(r,e){lw(r),Xy(r)?(r.Ra.ha(e),$y(r)):r.Ra.set("Unknown")}async function M4(r,e,t){if(r.Ra.set("Online"),e instanceof RA&&e.state===2&&e.cause)try{await(async function(o,l){const c=l.cause;for(const f of l.targetIds)o.Ia.has(f)&&(await o.remoteSyncer.rejectListen(f,c),o.Ia.delete(f),o.Va.removeTarget(f))})(r,e)}catch(i){se(ka,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await df(r,i)}else if(e instanceof Ld?r.Va.Ze(e):e instanceof IA?r.Va.st(e):r.Va.tt(e),!t.isEqual(be.min()))try{const i=await nw(r.localStore);t.compareTo(i)>=0&&await(function(l,c){const f=l.Va.Tt(c);return f.targetChanges.forEach(((p,g)=>{if(p.resumeToken.approximateByteSize()>0){const E=l.Ia.get(g);E&&l.Ia.set(g,E.withResumeToken(p.resumeToken,c))}})),f.targetMismatches.forEach(((p,g)=>{const E=l.Ia.get(p);if(!E)return;l.Ia.set(p,E.withResumeToken(Lt.EMPTY_BYTE_STRING,E.snapshotVersion)),ow(l,p);const T=new Tr(E.target,p,g,E.sequenceNumber);Yy(l,T)})),l.remoteSyncer.applyRemoteEvent(f)})(r,t)}catch(i){se(ka,"Failed to raise snapshot:",i),await df(r,i)}}async function df(r,e,t){if(!Ps(e))throw e;r.Ea.add(1),await Vc(r),r.Ra.set("Offline"),t||(t=()=>nw(r.localStore)),r.asyncQueue.enqueueRetryable((async()=>{se(ka,"Retrying IndexedDB access"),await t(),r.Ea.delete(1),await jf(r)}))}function uw(r,e){return e().catch((t=>df(r,t,e)))}async function Oc(r){const e=De(r),t=Ns(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:ba;for(;P4(e);)try{const o=await g4(e.localStore,i);if(o===null){e.Ta.length===0&&t.L_();break}i=o.batchId,k4(e,o)}catch(o){await df(e,o)}cw(e)&&hw(e)}function P4(r){return za(r)&&r.Ta.length<10}function k4(r,e){r.Ta.push(e);const t=Ns(r);t.O_()&&t.X_&&t.ea(e.mutations)}function cw(r){return za(r)&&!Ns(r).x_()&&r.Ta.length>0}function hw(r){Ns(r).start()}async function L4(r){Ns(r).ra()}async function U4(r){const e=Ns(r);for(const t of r.Ta)e.ea(t.mutations)}async function B4(r,e,t){const i=r.Ta.shift(),o=ky.from(i,e,t);await uw(r,(()=>r.remoteSyncer.applySuccessfulWrite(o))),await Oc(r)}async function z4(r,e){e&&Ns(r).X_&&await(async function(i,o){if((function(c){return _O(c)&&c!==Z.ABORTED})(o.code)){const l=i.Ta.shift();Ns(i).B_(),await uw(i,(()=>i.remoteSyncer.rejectFailedWrite(l.batchId,o))),await Oc(i)}})(r,e),cw(r)&&hw(r)}async function Lb(r,e){const t=De(r);t.asyncQueue.verifyOperationInProgress(),se(ka,"RemoteStore received new credentials");const i=za(t);t.Ea.add(3),await Vc(t),i&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await jf(t)}async function j4(r,e){const t=De(r);e?(t.Ea.delete(2),await jf(t)):e||(t.Ea.add(2),await Vc(t),t.Ra.set("Unknown"))}function bl(r){return r.ma||(r.ma=(function(t,i,o){const l=De(t);return l.sa(),new w4(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)})(r.datastore,r.asyncQueue,{Xo:N4.bind(null,r),t_:V4.bind(null,r),r_:O4.bind(null,r),H_:M4.bind(null,r)}),r.da.push((async e=>{e?(r.ma.B_(),Xy(r)?$y(r):r.Ra.set("Unknown")):(await r.ma.stop(),lw(r))}))),r.ma}function Ns(r){return r.fa||(r.fa=(function(t,i,o){const l=De(t);return l.sa(),new I4(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)})(r.datastore,r.asyncQueue,{Xo:()=>Promise.resolve(),t_:L4.bind(null,r),r_:z4.bind(null,r),ta:U4.bind(null,r),na:B4.bind(null,r)}),r.da.push((async e=>{e?(r.fa.B_(),await Oc(r)):(await r.fa.stop(),r.Ta.length>0&&(se(ka,`Stopping write stream with ${r.Ta.length} pending writes`),r.Ta=[]))}))),r.fa}class Wy{constructor(e,t,i,o,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=o,this.removalCallback=l,this.deferred=new Is,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,o,l){const c=Date.now()+i,f=new Wy(e,t,c,o,l);return f.start(i),f}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new le(Z.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Jy(r,e){if(mn("AsyncQueue",`${e}: ${r}`),Ps(r))return new le(Z.UNAVAILABLE,`${e}: ${r}`);throw r}class Qo{static emptySet(e){return new Qo(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||ce.comparator(t.key,i.key):(t,i)=>ce.comparator(t.key,i.key),this.keyedMap=zu(),this.sortedSet=new gt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,i)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Qo)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=i.getNext().key;if(!o.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new Qo;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}class Ub{constructor(){this.ga=new gt(ce.comparator)}track(e){const t=e.doc.key,i=this.ga.get(t);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(t,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(t):e.type===1&&i.type===2?this.ga=this.ga.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):ye(63341,{Rt:e,pa:i}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,i)=>{e.push(i)})),e}}class hl{constructor(e,t,i,o,l,c,f,p,g){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=o,this.mutatedKeys=l,this.fromCache=c,this.syncStateChanged=f,this.excludesMetadataChanges=p,this.hasCachedResults=g}static fromInitialDocuments(e,t,i,o,l){const c=[];return t.forEach((f=>{c.push({type:0,doc:f})})),new hl(e,t,Qo.emptySet(t),c,i,o,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Vf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==i[o].type||!t[o].doc.isEqual(i[o].doc))return!1;return!0}}class q4{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class F4{constructor(){this.queries=Bb(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,i){const o=De(t),l=o.queries;o.queries=Bb(),l.forEach(((c,f)=>{for(const p of f.Sa)p.onError(i)}))})(this,new le(Z.ABORTED,"Firestore shutting down"))}}function Bb(){return new Dr((r=>hA(r)),Vf)}async function H4(r,e){const t=De(r);let i=3;const o=e.query;let l=t.queries.get(o);l?!l.ba()&&e.Da()&&(i=2):(l=new q4,i=e.Da()?0:1);try{switch(i){case 0:l.wa=await t.onListen(o,!0);break;case 1:l.wa=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(c){const f=Jy(c,`Initialization of query '${Bo(e.query)}' failed`);return void e.onError(f)}t.queries.set(o,l),l.Sa.push(e),e.va(t.onlineState),l.wa&&e.Fa(l.wa)&&Zy(t)}async function G4(r,e){const t=De(r),i=e.query;let o=3;const l=t.queries.get(i);if(l){const c=l.Sa.indexOf(e);c>=0&&(l.Sa.splice(c,1),l.Sa.length===0?o=e.Da()?0:1:!l.ba()&&e.Da()&&(o=2))}switch(o){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function K4(r,e){const t=De(r);let i=!1;for(const o of e){const l=o.query,c=t.queries.get(l);if(c){for(const f of c.Sa)f.Fa(o)&&(i=!0);c.wa=o}}i&&Zy(t)}function Q4(r,e,t){const i=De(r),o=i.queries.get(e);if(o)for(const l of o.Sa)l.onError(t);i.queries.delete(e)}function Zy(r){r.Ca.forEach((e=>{e.next()}))}var ey,zb;(zb=ey||(ey={})).Ma="default",zb.Cache="cache";class Y4{constructor(e,t,i){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const o of e.docChanges)o.type!==3&&i.push(o);e=new hl(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const i=t!=="Offline";return(!this.options.qa||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=hl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==ey.Cache}}class dw{constructor(e){this.key=e}}class fw{constructor(e){this.key=e}}class $4{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=ke(),this.mutatedKeys=ke(),this.eu=dA(e),this.tu=new Qo(this.eu)}get nu(){return this.Ya}ru(e,t){const i=t?t.iu:new Ub,o=t?t.tu:this.tu;let l=t?t.mutatedKeys:this.mutatedKeys,c=o,f=!1;const p=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,g=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((E,T)=>{const S=o.get(E),O=Dc(this.query,T)?T:null,z=!!S&&this.mutatedKeys.has(S.key),Y=!!O&&(O.hasLocalMutations||this.mutatedKeys.has(O.key)&&O.hasCommittedMutations);let U=!1;S&&O?S.data.isEqual(O.data)?z!==Y&&(i.track({type:3,doc:O}),U=!0):this.su(S,O)||(i.track({type:2,doc:O}),U=!0,(p&&this.eu(O,p)>0||g&&this.eu(O,g)<0)&&(f=!0)):!S&&O?(i.track({type:0,doc:O}),U=!0):S&&!O&&(i.track({type:1,doc:S}),U=!0,(p||g)&&(f=!0)),U&&(O?(c=c.add(O),l=Y?l.add(E):l.delete(E)):(c=c.delete(E),l=l.delete(E)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const E=this.query.limitType==="F"?c.last():c.first();c=c.delete(E.key),l=l.delete(E.key),i.track({type:1,doc:E})}return{tu:c,iu:i,Cs:f,mutatedKeys:l}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,o){const l=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const c=e.iu.ya();c.sort(((E,T)=>(function(O,z){const Y=U=>{switch(U){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ye(20277,{Rt:U})}};return Y(O)-Y(z)})(E.type,T.type)||this.eu(E.doc,T.doc))),this.ou(i),o=o??!1;const f=t&&!o?this._u():[],p=this.Xa.size===0&&this.current&&!o?1:0,g=p!==this.Za;return this.Za=p,c.length!==0||g?{snapshot:new hl(this.query,e.tu,l,c,e.mutatedKeys,p===0,g,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:f}:{au:f}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Ub,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=ke(),this.tu.forEach((i=>{this.uu(i.key)&&(this.Xa=this.Xa.add(i.key))}));const t=[];return e.forEach((i=>{this.Xa.has(i)||t.push(new fw(i))})),this.Xa.forEach((i=>{e.has(i)||t.push(new dw(i))})),t}cu(e){this.Ya=e.Qs,this.Xa=ke();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return hl.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const e_="SyncEngine";class X4{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class W4{constructor(e){this.key=e,this.hu=!1}}class J4{constructor(e,t,i,o,l,c){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=o,this.currentUser=l,this.maxConcurrentLimboResolutions=c,this.Pu={},this.Tu=new Dr((f=>hA(f)),Vf),this.Iu=new Map,this.Eu=new Set,this.du=new gt(ce.comparator),this.Au=new Map,this.Ru=new qy,this.Vu={},this.mu=new Map,this.fu=Pa.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function Z4(r,e,t=!0){const i=vw(r);let o;const l=i.Tu.get(e);return l?(i.sharedClientState.addLocalQueryTarget(l.targetId),o=l.view.lu()):o=await mw(i,e,t,!0),o}async function eM(r,e){const t=vw(r);await mw(t,e,!0,!1)}async function mw(r,e,t,i){const o=await y4(r.localStore,ei(e)),l=o.targetId,c=r.sharedClientState.addLocalQueryTarget(l,t);let f;return i&&(f=await tM(r,e,l,c==="current",o.resumeToken)),r.isPrimaryClient&&t&&aw(r.remoteStore,o),f}async function tM(r,e,t,i,o){r.pu=(T,S,O)=>(async function(Y,U,F,K){let ee=U.view.ru(F);ee.Cs&&(ee=await Vb(Y.localStore,U.query,!1).then((({documents:x})=>U.view.ru(x,ee))));const he=K&&K.targetChanges.get(U.targetId),de=K&&K.targetMismatches.get(U.targetId)!=null,pe=U.view.applyChanges(ee,Y.isPrimaryClient,he,de);return qb(Y,U.targetId,pe.au),pe.snapshot})(r,T,S,O);const l=await Vb(r.localStore,e,!0),c=new $4(e,l.Qs),f=c.ru(l.documents),p=Nc.createSynthesizedTargetChangeForCurrentChange(t,i&&r.onlineState!=="Offline",o),g=c.applyChanges(f,r.isPrimaryClient,p);qb(r,t,g.au);const E=new X4(e,t,c);return r.Tu.set(e,E),r.Iu.has(t)?r.Iu.get(t).push(e):r.Iu.set(t,[e]),g.snapshot}async function nM(r,e,t){const i=De(r),o=i.Tu.get(e),l=i.Iu.get(o.targetId);if(l.length>1)return i.Iu.set(o.targetId,l.filter((c=>!Vf(c,e)))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(o.targetId),i.sharedClientState.isActiveQueryTarget(o.targetId)||await Jg(i.localStore,o.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(o.targetId),t&&Qy(i.remoteStore,o.targetId),ty(i,o.targetId)})).catch(Ba)):(ty(i,o.targetId),await Jg(i.localStore,o.targetId,!0))}async function iM(r,e){const t=De(r),i=t.Tu.get(e),o=t.Iu.get(i.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),Qy(t.remoteStore,i.targetId))}async function rM(r,e,t){const i=Ew(r);try{const o=await(function(c,f){const p=De(c),g=tt.now(),E=f.reduce(((O,z)=>O.add(z.key)),ke());let T,S;return p.persistence.runTransaction("Locally write mutations","readwrite",(O=>{let z=Pn(),Y=ke();return p.Ns.getEntries(O,E).next((U=>{z=U,z.forEach(((F,K)=>{K.isValidDocument()||(Y=Y.add(F))}))})).next((()=>p.localDocuments.getOverlayedDocuments(O,z))).next((U=>{T=U;const F=[];for(const K of f){const ee=gO(K,T.get(K.key).overlayedDocument);ee!=null&&F.push(new Nr(K.key,ee,nA(ee.value.mapValue),pn.exists(!0)))}return p.mutationQueue.addMutationBatch(O,g,F,f)})).next((U=>{S=U;const F=U.applyToLocalDocumentSet(T,Y);return p.documentOverlayCache.saveOverlays(O,U.batchId,F)}))})).then((()=>({batchId:S.batchId,changes:mA(T)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(o.batchId),(function(c,f,p){let g=c.Vu[c.currentUser.toKey()];g||(g=new gt(xe)),g=g.insert(f,p),c.Vu[c.currentUser.toKey()]=g})(i,o.batchId,t),await Mc(i,o.changes),await Oc(i.remoteStore)}catch(o){const l=Jy(o,"Failed to persist write");t.reject(l)}}async function pw(r,e){const t=De(r);try{const i=await m4(t.localStore,e);e.targetChanges.forEach(((o,l)=>{const c=t.Au.get(l);c&&(Ee(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?c.hu=!0:o.modifiedDocuments.size>0?Ee(c.hu,14607):o.removedDocuments.size>0&&(Ee(c.hu,42227),c.hu=!1))})),await Mc(t,i,e)}catch(i){await Ba(i)}}function jb(r,e,t){const i=De(r);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const o=[];i.Tu.forEach(((l,c)=>{const f=c.view.va(e);f.snapshot&&o.push(f.snapshot)})),(function(c,f){const p=De(c);p.onlineState=f;let g=!1;p.queries.forEach(((E,T)=>{for(const S of T.Sa)S.va(f)&&(g=!0)})),g&&Zy(p)})(i.eventManager,e),o.length&&i.Pu.H_(o),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function sM(r,e,t){const i=De(r);i.sharedClientState.updateQueryState(e,"rejected",t);const o=i.Au.get(e),l=o&&o.key;if(l){let c=new gt(ce.comparator);c=c.insert(l,Et.newNoDocument(l,be.min()));const f=ke().add(l),p=new kf(be.min(),new Map,new gt(xe),c,f);await pw(i,p),i.du=i.du.remove(l),i.Au.delete(e),t_(i)}else await Jg(i.localStore,e,!1).then((()=>ty(i,e,t))).catch(Ba)}async function aM(r,e){const t=De(r),i=e.batch.batchId;try{const o=await f4(t.localStore,e);yw(t,i,null),gw(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await Mc(t,o)}catch(o){await Ba(o)}}async function oM(r,e,t){const i=De(r);try{const o=await(function(c,f){const p=De(c);return p.persistence.runTransaction("Reject batch","readwrite-primary",(g=>{let E;return p.mutationQueue.lookupMutationBatch(g,f).next((T=>(Ee(T!==null,37113),E=T.keys(),p.mutationQueue.removeMutationBatch(g,T)))).next((()=>p.mutationQueue.performConsistencyCheck(g))).next((()=>p.documentOverlayCache.removeOverlaysForBatchId(g,E,f))).next((()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(g,E))).next((()=>p.localDocuments.getDocuments(g,E)))}))})(i.localStore,e);yw(i,e,t),gw(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await Mc(i,o)}catch(o){await Ba(o)}}function gw(r,e){(r.mu.get(e)||[]).forEach((t=>{t.resolve()})),r.mu.delete(e)}function yw(r,e,t){const i=De(r);let o=i.Vu[i.currentUser.toKey()];if(o){const l=o.get(e);l&&(t?l.reject(t):l.resolve(),o=o.remove(e)),i.Vu[i.currentUser.toKey()]=o}}function ty(r,e,t=null){r.sharedClientState.removeLocalQueryTarget(e);for(const i of r.Iu.get(e))r.Tu.delete(i),t&&r.Pu.yu(i,t);r.Iu.delete(e),r.isPrimaryClient&&r.Ru.jr(e).forEach((i=>{r.Ru.containsKey(i)||_w(r,i)}))}function _w(r,e){r.Eu.delete(e.path.canonicalString());const t=r.du.get(e);t!==null&&(Qy(r.remoteStore,t),r.du=r.du.remove(e),r.Au.delete(t),t_(r))}function qb(r,e,t){for(const i of t)i instanceof dw?(r.Ru.addReference(i.key,e),lM(r,i)):i instanceof fw?(se(e_,"Document no longer in limbo: "+i.key),r.Ru.removeReference(i.key,e),r.Ru.containsKey(i.key)||_w(r,i.key)):ye(19791,{wu:i})}function lM(r,e){const t=e.key,i=t.path.canonicalString();r.du.get(t)||r.Eu.has(i)||(se(e_,"New document in limbo: "+t),r.Eu.add(i),t_(r))}function t_(r){for(;r.Eu.size>0&&r.du.size<r.maxConcurrentLimboResolutions;){const e=r.Eu.values().next().value;r.Eu.delete(e);const t=new ce(We.fromString(e)),i=r.fu.next();r.Au.set(i,new W4(t)),r.du=r.du.insert(t,i),aw(r.remoteStore,new Tr(ei(Nf(t.path)),i,"TargetPurposeLimboResolution",Zn.ce))}}async function Mc(r,e,t){const i=De(r),o=[],l=[],c=[];i.Tu.isEmpty()||(i.Tu.forEach(((f,p)=>{c.push(i.pu(p,e,t).then((g=>{if((g||t)&&i.isPrimaryClient){const E=g?!g.fromCache:t?.targetChanges.get(p.targetId)?.current;i.sharedClientState.updateQueryState(p.targetId,E?"current":"not-current")}if(g){o.push(g);const E=Gy.As(p.targetId,g);l.push(E)}})))})),await Promise.all(c),i.Pu.H_(o),await(async function(p,g){const E=De(p);try{await E.persistence.runTransaction("notifyLocalViewChanges","readwrite",(T=>j.forEach(g,(S=>j.forEach(S.Es,(O=>E.persistence.referenceDelegate.addReference(T,S.targetId,O))).next((()=>j.forEach(S.ds,(O=>E.persistence.referenceDelegate.removeReference(T,S.targetId,O)))))))))}catch(T){if(!Ps(T))throw T;se(Ky,"Failed to update sequence numbers: "+T)}for(const T of g){const S=T.targetId;if(!T.fromCache){const O=E.Ms.get(S),z=O.snapshotVersion,Y=O.withLastLimboFreeSnapshotVersion(z);E.Ms=E.Ms.insert(S,Y)}}})(i.localStore,l))}async function uM(r,e){const t=De(r);if(!t.currentUser.isEqual(e)){se(e_,"User change. New user:",e.toKey());const i=await tw(t.localStore,e);t.currentUser=e,(function(l,c){l.mu.forEach((f=>{f.forEach((p=>{p.reject(new le(Z.CANCELLED,c))}))})),l.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Mc(t,i.Ls)}}function cM(r,e){const t=De(r),i=t.Au.get(e);if(i&&i.hu)return ke().add(i.key);{let o=ke();const l=t.Iu.get(e);if(!l)return o;for(const c of l){const f=t.Tu.get(c);o=o.unionWith(f.view.nu)}return o}}function vw(r){const e=De(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=pw.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=cM.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=sM.bind(null,e),e.Pu.H_=K4.bind(null,e.eventManager),e.Pu.yu=Q4.bind(null,e.eventManager),e}function Ew(r){const e=De(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=aM.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=oM.bind(null,e),e}class gc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=zf(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return ew(this.persistence,new ZA,e.initialUser,this.serializer)}Cu(e){return new Fy(Bf.mi,this.serializer)}Du(e){return new iw}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}gc.provider={build:()=>new gc};class hM extends gc{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Ee(this.persistence.referenceDelegate instanceof hf,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new YA(i,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?ln.withCacheSize(this.cacheSizeBytes):ln.DEFAULT;return new Fy((i=>hf.mi(i,t)),this.serializer)}}class dM extends gc{constructor(e,t,i){super(),this.xu=e,this.cacheSizeBytes=t,this.forceOwnership=i,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await Ew(this.xu.syncEngine),await Oc(this.xu.remoteStore),await this.persistence.Ji((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}vu(e){return ew(this.persistence,new ZA,e.initialUser,this.serializer)}Fu(e,t){const i=this.persistence.referenceDelegate.garbageCollector;return new YA(i,e.asyncQueue,t)}Mu(e,t){const i=new pV(t,this.persistence);return new mV(e.asyncQueue,i)}Cu(e){const t=u4(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),i=this.cacheSizeBytes!==void 0?ln.withCacheSize(this.cacheSizeBytes):ln.DEFAULT;return new Hy(this.synchronizeTabs,t,e.clientId,i,e.asyncQueue,A4(),Bd(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new iw}}class ff{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>jb(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=uM.bind(null,this.syncEngine),await j4(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new F4})()}createDatastore(e){const t=zf(e.databaseInfo.databaseId),i=(function(l){return new S4(l)})(e.databaseInfo);return(function(l,c,f,p){return new C4(l,c,f,p)})(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return(function(i,o,l,c,f){return new D4(i,o,l,c,f)})(this.localStore,this.datastore,e.asyncQueue,(t=>jb(this.syncEngine,t,0)),(function(){return Pb.v()?new Pb:new v4})())}createSyncEngine(e,t){return(function(o,l,c,f,p,g,E){const T=new J4(o,l,c,f,p,g);return E&&(T.gu=!0),T})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const i=De(t);se(ka,"RemoteStore shutting down."),i.Ea.add(5),await Vc(i),i.Aa.shutdown(),i.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}ff.provider={build:()=>new ff};class fM{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):mn("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}const Vs="FirestoreClient";class mM{constructor(e,t,i,o,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=o,this.user=rn.UNAUTHENTICATED,this.clientId=Sy.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(i,(async c=>{se(Vs,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c})),this.appCheckCredentials.start(i,(c=>(se(Vs,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Is;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=Jy(t,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function dg(r,e){r.asyncQueue.verifyOperationInProgress(),se(Vs,"Initializing OfflineComponentProvider");const t=r.configuration;await e.initialize(t);let i=t.initialUser;r.setCredentialChangeListener((async o=>{i.isEqual(o)||(await tw(e.localStore,o),i=o)})),e.persistence.setDatabaseDeletedListener((()=>r.terminate())),r._offlineComponents=e}async function Fb(r,e){r.asyncQueue.verifyOperationInProgress();const t=await pM(r);se(Vs,"Initializing OnlineComponentProvider"),await e.initialize(t,r.configuration),r.setCredentialChangeListener((i=>Lb(e.remoteStore,i))),r.setAppCheckTokenChangeListener(((i,o)=>Lb(e.remoteStore,o))),r._onlineComponents=e}async function pM(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){se(Vs,"Using user provided OfflineComponentProvider");try{await dg(r,r._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(o){return o.name==="FirebaseError"?o.code===Z.FAILED_PRECONDITION||o.code===Z.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(t))throw t;Da("Error using user provided cache. Falling back to memory cache: "+t),await dg(r,new gc)}}else se(Vs,"Using default OfflineComponentProvider"),await dg(r,new hM(void 0));return r._offlineComponents}async function Tw(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(se(Vs,"Using user provided OnlineComponentProvider"),await Fb(r,r._uninitializedComponentsProvider._online)):(se(Vs,"Using default OnlineComponentProvider"),await Fb(r,new ff))),r._onlineComponents}function gM(r){return Tw(r).then((e=>e.syncEngine))}async function Hb(r){const e=await Tw(r),t=e.eventManager;return t.onListen=Z4.bind(null,e.syncEngine),t.onUnlisten=nM.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=eM.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=iM.bind(null,e.syncEngine),t}function bw(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}const Gb=new Map;const Sw="firestore.googleapis.com",Kb=!0;class Qb{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new le(Z.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Sw,this.ssl=Kb}else this.host=e.host,this.ssl=e.ssl??Kb;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=HA;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<KO)throw new le(Z.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}cV("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=bw(e.experimentalLongPollingOptions??{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new le(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new le(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new le(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,o){return i.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class qf{constructor(e,t,i,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Qb({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new le(Z.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new le(Z.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Qb(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new eV;switch(i.type){case"firstParty":return new rV(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new le(Z.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const i=Gb.get(t);i&&(se("ComponentProvider","Removing Datastore"),Gb.delete(t),i.terminate())})(this),Promise.resolve()}}function yM(r,e,t,i={}){r=Sr(r,qf);const o=pl(e),l=r._getSettings(),c={...l,emulatorOptions:r._getEmulatorOptions()},f=`${e}:${t}`;o&&(N1(`https://${f}`),V1("Firestore",!0)),l.host!==Sw&&l.host!==f&&Da("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const p={...l,host:f,ssl:o,emulatorOptions:i};if(!Ia(p,c)&&(r._setSettings(p),i.mockUserToken)){let g,E;if(typeof i.mockUserToken=="string")g=i.mockUserToken,E=rn.MOCK_USER;else{g=mx(i.mockUserToken,r._app?.options.projectId);const T=i.mockUserToken.sub||i.mockUserToken.user_id;if(!T)throw new le(Z.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");E=new rn(T)}r._authCredentials=new tV(new xS(g,E))}}class ja{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new ja(this.firestore,e,this._query)}}class kt{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Cs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new kt(this.firestore,e,this._key)}toJSON(){return{type:kt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,i){if(Rc(t,kt._jsonSchema))return new kt(e,i||null,new ce(We.fromString(t.referencePath)))}}kt._jsonSchemaVersion="firestore/documentReference/1.0",kt._jsonSchema={type:Pt("string",kt._jsonSchemaVersion),referencePath:Pt("string")};class Cs extends ja{constructor(e,t,i){super(e,t,Nf(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new kt(this.firestore,null,new ce(e))}withConverter(e){return new Cs(this.firestore,e,this._path)}}function Os(r,e,...t){if(r=Ht(r),NS("collection","path",e),r instanceof qf){const i=We.fromString(e,...t);return k0(i),new Cs(r,null,i)}{if(!(r instanceof kt||r instanceof Cs))throw new le(Z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=r._path.child(We.fromString(e,...t));return k0(i),new Cs(r.firestore,null,i)}}function Qi(r,e,...t){if(r=Ht(r),arguments.length===1&&(e=Sy.newId()),NS("doc","path",e),r instanceof qf){const i=We.fromString(e,...t);return P0(i),new kt(r,null,new ce(i))}{if(!(r instanceof kt||r instanceof Cs))throw new le(Z.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=r._path.child(We.fromString(e,...t));return P0(i),new kt(r.firestore,r instanceof Cs?r.converter:null,new ce(i))}}const Yb="AsyncQueue";class $b{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new rw(this,"async_queue_retry"),this._c=()=>{const i=Bd();i&&se(Yb,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const t=Bd();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Bd();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new Is;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Ps(e))throw e;se(Yb,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((i=>{throw this.nc=i,this.rc=!1,mn("INTERNAL UNHANDLED ERROR: ",Xb(i)),i})).then((i=>(this.rc=!1,i))))));return this.ac=t,t}enqueueAfterDelay(e,t,i){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const o=Wy.createAndSchedule(this,e,t,i,(l=>this.hc(l)));return this.tc.push(o),o}uc(){this.nc&&ye(47125,{Pc:Xb(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,i)=>t.targetTimeMs-i.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function Xb(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}function Wb(r){return(function(t,i){if(typeof t!="object"||t===null)return!1;const o=t;for(const l of i)if(l in o&&typeof o[l]=="function")return!0;return!1})(r,["next","error","complete"])}class La extends qf{constructor(e,t,i,o){super(e,t,i,o),this.type="firestore",this._queue=new $b,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new $b(e),this._firestoreClient=void 0,await e}}}function _M(r,e){const t=typeof r=="object"?r:z1(),i=typeof r=="string"?r:nf,o=fy(t,"firestore").getImmediate({identifier:i});if(!o._initialized){const l=dx("firestore");l&&yM(o,...l)}return o}function Aw(r){if(r._terminated)throw new le(Z.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||ww(r),r._firestoreClient}function ww(r){const e=r._freezeSettings(),t=(function(o,l,c,f){return new HV(o,l,c,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,bw(f.experimentalLongPollingOptions),f.useFetchStreams,f.isUsingEmulator)})(r._databaseId,r._app?.options.appId||"",r._persistenceKey,e);r._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(r._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),r._firestoreClient=new mM(r._authCredentials,r._appCheckCredentials,r._queue,t,r._componentsProvider&&(function(o){const l=o?._online.build();return{_offline:o?._offline.build(l),_online:l}})(r._componentsProvider))}function vM(r,e){Da("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=r._freezeSettings();return EM(r,ff.provider,{build:i=>new dM(i,t.cacheSizeBytes,e?.forceOwnership)}),Promise.resolve()}function EM(r,e,t){if((r=Sr(r,La))._firestoreClient||r._terminated)throw new le(Z.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(r._componentsProvider||r._getSettings().localCache)throw new le(Z.FAILED_PRECONDITION,"SDK cache is already specified.");r._componentsProvider={_online:e,_offline:t},ww(r)}class Wn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Wn(Lt.fromBase64String(e))}catch(t){throw new le(Z.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Wn(Lt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Wn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Rc(e,Wn._jsonSchema))return Wn.fromBase64String(e.bytes)}}Wn._jsonSchemaVersion="firestore/bytes/1.0",Wn._jsonSchema={type:Pt("string",Wn._jsonSchemaVersion),bytes:Pt("string")};class Ff{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new le(Z.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new yt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Hf{constructor(e){this._methodName=e}}class Xi{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new le(Z.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new le(Z.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return xe(this._lat,e._lat)||xe(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Xi._jsonSchemaVersion}}static fromJSON(e){if(Rc(e,Xi._jsonSchema))return new Xi(e.latitude,e.longitude)}}Xi._jsonSchemaVersion="firestore/geoPoint/1.0",Xi._jsonSchema={type:Pt("string",Xi._jsonSchemaVersion),latitude:Pt("number"),longitude:Pt("number")};class Wi{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,o){if(i.length!==o.length)return!1;for(let l=0;l<i.length;++l)if(i[l]!==o[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Wi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Rc(e,Wi._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Wi(e.vectorValues);throw new le(Z.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Wi._jsonSchemaVersion="firestore/vectorValue/1.0",Wi._jsonSchema={type:Pt("string",Wi._jsonSchemaVersion),vectorValues:Pt("object")};const TM=/^__.*__$/;class bM{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new Nr(e,this.data,this.fieldMask,t,this.fieldTransforms):new Tl(e,this.data,t,this.fieldTransforms)}}class Iw{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new Nr(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Rw(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ye(40011,{Ac:r})}}class n_{constructor(e,t,i,o,l,c){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=o,l===void 0&&this.Rc(),this.fieldTransforms=l||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new n_({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const t=this.path?.child(e),i=this.Vc({path:t,fc:!1});return i.gc(e),i}yc(e){const t=this.path?.child(e),i=this.Vc({path:t,fc:!1});return i.Rc(),i}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return mf(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(Rw(this.Ac)&&TM.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class SM{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||zf(e)}Cc(e,t,i,o=!1){return new n_({Ac:e,methodName:t,Dc:i,path:yt.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function i_(r){const e=r._freezeSettings(),t=zf(r._databaseId);return new SM(r._databaseId,!!e.ignoreUndefinedProperties,t)}function AM(r,e,t,i,o,l={}){const c=r.Cc(l.merge||l.mergeFields?2:0,e,t,o);s_("Data must be an object, but it was:",c,i);const f=Cw(i,c);let p,g;if(l.merge)p=new An(c.fieldMask),g=c.fieldTransforms;else if(l.mergeFields){const E=[];for(const T of l.mergeFields){const S=ny(e,T,t);if(!c.contains(S))throw new le(Z.INVALID_ARGUMENT,`Field '${S}' is specified in your field mask but missing from your input data.`);Dw(E,S)||E.push(S)}p=new An(E),g=c.fieldTransforms.filter((T=>p.covers(T.field)))}else p=null,g=c.fieldTransforms;return new bM(new un(f),p,g)}class Gf extends Hf{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Gf}}class r_ extends Hf{_toFieldTransform(e){return new TA(e.path,new ol)}isEqual(e){return e instanceof r_}}function wM(r,e,t,i){const o=r.Cc(1,e,t);s_("Data must be an object, but it was:",o,i);const l=[],c=un.empty();ks(i,((p,g)=>{const E=a_(e,p,t);g=Ht(g);const T=o.yc(E);if(g instanceof Gf)l.push(E);else{const S=Pc(g,T);S!=null&&(l.push(E),c.set(E,S))}}));const f=new An(l);return new Iw(c,f,o.fieldTransforms)}function IM(r,e,t,i,o,l){const c=r.Cc(1,e,t),f=[ny(e,i,t)],p=[o];if(l.length%2!=0)throw new le(Z.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let S=0;S<l.length;S+=2)f.push(ny(e,l[S])),p.push(l[S+1]);const g=[],E=un.empty();for(let S=f.length-1;S>=0;--S)if(!Dw(g,f[S])){const O=f[S];let z=p[S];z=Ht(z);const Y=c.yc(O);if(z instanceof Gf)g.push(O);else{const U=Pc(z,Y);U!=null&&(g.push(O),E.set(O,U))}}const T=new An(g);return new Iw(E,T,c.fieldTransforms)}function RM(r,e,t,i=!1){return Pc(t,r.Cc(i?4:3,e))}function Pc(r,e){if(xw(r=Ht(r)))return s_("Unsupported field value:",e,r),Cw(r,e);if(r instanceof Hf)return(function(i,o){if(!Rw(o.Ac))throw o.Sc(`${i._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${i._methodName}() is not currently supported inside arrays`);const l=i._toFieldTransform(o);l&&o.fieldTransforms.push(l)})(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(i,o){const l=[];let c=0;for(const f of i){let p=Pc(f,o.wc(c));p==null&&(p={nullValue:"NULL_VALUE"}),l.push(p),c++}return{arrayValue:{values:l}}})(r,e)}return(function(i,o){if((i=Ht(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return cO(o.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const l=tt.fromDate(i);return{timestampValue:cl(o.serializer,l)}}if(i instanceof tt){const l=new tt(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:cl(o.serializer,l)}}if(i instanceof Xi)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Wn)return{bytesValue:CA(o.serializer,i._byteString)};if(i instanceof kt){const l=o.databaseId,c=i.firestore._databaseId;if(!c.isEqual(l))throw o.Sc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:By(i.firestore._databaseId||o.databaseId,i._key.path)}}if(i instanceof Wi)return(function(c,f){return{mapValue:{fields:{[Ny]:{stringValue:Vy},[il]:{arrayValue:{values:c.toArray().map((g=>{if(typeof g!="number")throw f.Sc("VectorValues must only contain numeric values.");return My(f.serializer,g)}))}}}}}})(i,o);throw o.Sc(`Unsupported field value: ${Sf(i)}`)})(r,e)}function Cw(r,e){const t={};return QS(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ks(r,((i,o)=>{const l=Pc(o,e.mc(i));l!=null&&(t[i]=l)})),{mapValue:{fields:t}}}function xw(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof tt||r instanceof Xi||r instanceof Wn||r instanceof kt||r instanceof Hf||r instanceof Wi)}function s_(r,e,t){if(!xw(t)||!VS(t)){const i=Sf(t);throw i==="an object"?e.Sc(r+" a custom object"):e.Sc(r+" "+i)}}function ny(r,e,t){if((e=Ht(e))instanceof Ff)return e._internalPath;if(typeof e=="string")return a_(r,e);throw mf("Field path arguments must be of type string or ",r,!1,void 0,t)}const CM=new RegExp("[~\\*/\\[\\]]");function a_(r,e,t){if(e.search(CM)>=0)throw mf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,t);try{return new Ff(...e.split("."))._internalPath}catch{throw mf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,t)}}function mf(r,e,t,i,o){const l=i&&!i.isEmpty(),c=o!==void 0;let f=`Function ${e}() called with invalid data`;t&&(f+=" (via `toFirestore()`)"),f+=". ";let p="";return(l||c)&&(p+=" (found",l&&(p+=` in field ${i}`),c&&(p+=` in document ${o}`),p+=")"),new le(Z.INVALID_ARGUMENT,f+r+p)}function Dw(r,e){return r.some((t=>t.isEqual(e)))}class Nw{constructor(e,t,i,o,l){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=o,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new kt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new xM(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(o_("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class xM extends Nw{data(){return super.data()}}function o_(r,e){return typeof e=="string"?a_(r,e):e instanceof Ff?e._internalPath:e._delegate._internalPath}function DM(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new le(Z.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class l_{}class Vw extends l_{}function yc(r,e,...t){let i=[];e instanceof l_&&i.push(e),i=i.concat(t),(function(l){const c=l.filter((p=>p instanceof c_)).length,f=l.filter((p=>p instanceof u_)).length;if(c>1||c>0&&f>0)throw new le(Z.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(i);for(const o of i)r=o._apply(r);return r}class u_ extends Vw{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new u_(e,t,i)}_apply(e){const t=this._parse(e);return Ow(e._query,t),new ja(e.firestore,e.converter,Fg(e._query,t))}_parse(e){const t=i_(e.firestore);return(function(l,c,f,p,g,E,T){let S;if(g.isKeyField()){if(E==="array-contains"||E==="array-contains-any")throw new le(Z.INVALID_ARGUMENT,`Invalid Query. You can't perform '${E}' queries on documentId().`);if(E==="in"||E==="not-in"){Zb(T,E);const z=[];for(const Y of T)z.push(Jb(p,l,Y));S={arrayValue:{values:z}}}else S=Jb(p,l,T)}else E!=="in"&&E!=="not-in"&&E!=="array-contains-any"||Zb(T,E),S=RM(f,c,T,E==="in"||E==="not-in");return Fe.create(g,E,S)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}class c_ extends l_{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new c_(e,t)}_parse(e){const t=this._queryConstraints.map((i=>i._parse(e))).filter((i=>i.getFilters().length>0));return t.length===1?t[0]:nt.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(o,l){let c=o;const f=l.getFlattenedFilters();for(const p of f)Ow(c,p),c=Fg(c,p)})(e._query,t),new ja(e.firestore,e.converter,Fg(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class h_ extends Vw{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new h_(e,t)}_apply(e){const t=(function(o,l,c){if(o.startAt!==null)throw new le(Z.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new le(Z.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new mc(l,c)})(e._query,this._field,this._direction);return new ja(e.firestore,e.converter,(function(o,l){const c=o.explicitOrderBy.concat([l]);return new El(o.path,o.collectionGroup,c,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)})(e._query,t))}}function d_(r,e="asc"){const t=e,i=o_("orderBy",r);return h_._create(i,t)}function Jb(r,e,t){if(typeof(t=Ht(t))=="string"){if(t==="")throw new le(Z.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!cA(e)&&t.indexOf("/")!==-1)throw new le(Z.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const i=e.path.child(We.fromString(t));if(!ce.isDocumentKey(i))throw new le(Z.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return dc(r,new ce(i))}if(t instanceof kt)return dc(r,t._key);throw new le(Z.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Sf(t)}.`)}function Zb(r,e){if(!Array.isArray(r)||r.length===0)throw new le(Z.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Ow(r,e){const t=(function(o,l){for(const c of o)for(const f of c.getFlattenedFilters())if(l.indexOf(f.op)>=0)return f.op;return null})(r.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new le(Z.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new le(Z.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class NM{convertValue(e,t="none"){switch(xs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return mt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Cr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw ye(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return ks(e,((o,l)=>{i[o]=this.convertValue(l,t)})),i}convertVectorValue(e){const t=e.fields?.[il].arrayValue?.values?.map((i=>mt(i.doubleValue)));return new Wi(t)}convertGeoPoint(e){return new Xi(mt(e.latitude),mt(e.longitude))}convertArray(e,t){return(e.values||[]).map((i=>this.convertValue(i,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const i=xf(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(cc(e));default:return null}}convertTimestamp(e){const t=Rr(e);return new tt(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=We.fromString(e);Ee(UA(i),9688,{name:e});const o=new Na(i.get(1),i.get(3)),l=new ce(i.popFirst(5));return o.isEqual(t)||mn(`Document ${l} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}function VM(r,e,t){let i;return i=r?r.toFirestore(e):e,i}class Fu{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class wa extends Nw{constructor(e,t,i,o,l,c){super(e,t,i,o,c),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new zd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(o_("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new le(Z.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=wa._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}wa._jsonSchemaVersion="firestore/documentSnapshot/1.0",wa._jsonSchema={type:Pt("string",wa._jsonSchemaVersion),bundleSource:Pt("string","DocumentSnapshot"),bundleName:Pt("string"),bundle:Pt("string")};class zd extends wa{data(e={}){return super.data(e)}}class Yo{constructor(e,t,i,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new Fu(o.hasPendingWrites,o.fromCache),this.query=i}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((i=>{e.call(t,new zd(this._firestore,this._userDataWriter,i.key,i,new Fu(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new le(Z.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(o,l){if(o._snapshot.oldDocs.isEmpty()){let c=0;return o._snapshot.docChanges.map((f=>{const p=new zd(o._firestore,o._userDataWriter,f.doc.key,f.doc,new Fu(o._snapshot.mutatedKeys.has(f.doc.key),o._snapshot.fromCache),o.query.converter);return f.doc,{type:"added",doc:p,oldIndex:-1,newIndex:c++}}))}{let c=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((f=>l||f.type!==3)).map((f=>{const p=new zd(o._firestore,o._userDataWriter,f.doc.key,f.doc,new Fu(o._snapshot.mutatedKeys.has(f.doc.key),o._snapshot.fromCache),o.query.converter);let g=-1,E=-1;return f.type!==0&&(g=c.indexOf(f.doc.key),c=c.delete(f.doc.key)),f.type!==1&&(c=c.add(f.doc),E=c.indexOf(f.doc.key)),{type:OM(f.type),doc:p,oldIndex:g,newIndex:E}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new le(Z.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Yo._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Sy.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],i=[],o=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),i.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),o.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function OM(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ye(61501,{type:r})}}Yo._jsonSchemaVersion="firestore/querySnapshot/1.0",Yo._jsonSchema={type:Pt("string",Yo._jsonSchemaVersion),bundleSource:Pt("string","QuerySnapshot"),bundleName:Pt("string"),bundle:Pt("string")};class Mw extends NM{constructor(e){super(),this.firestore=e}convertBytes(e){return new Wn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new kt(this.firestore,null,t)}}function $o(r,e,t,...i){r=Sr(r,kt);const o=Sr(r.firestore,La),l=i_(o);let c;return c=typeof(e=Ht(e))=="string"||e instanceof Ff?IM(l,"updateDoc",r._key,e,t,i):wM(l,"updateDoc",r._key,e),p_(o,[c.toMutation(r._key,pn.exists(!0))])}function f_(r){return p_(Sr(r.firestore,La),[new Pf(r._key,pn.none())])}function m_(r,e){const t=Sr(r.firestore,La),i=Qi(r),o=VM(r.converter,e);return p_(t,[AM(i_(r.firestore),"addDoc",i._key,o,r.converter!==null,{}).toMutation(i._key,pn.exists(!1))]).then((()=>i))}function _c(r,...e){r=Ht(r);let t={includeMetadataChanges:!1,source:"default"},i=0;typeof e[i]!="object"||Wb(e[i])||(t=e[i++]);const o={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(Wb(e[i])){const p=e[i];e[i]=p.next?.bind(p),e[i+1]=p.error?.bind(p),e[i+2]=p.complete?.bind(p)}let l,c,f;if(r instanceof kt)c=Sr(r.firestore,La),f=Nf(r._key.path),l={next:p=>{e[i]&&e[i](MM(c,r,p))},error:e[i+1],complete:e[i+2]};else{const p=Sr(r,ja);c=Sr(p.firestore,La),f=p._query;const g=new Mw(c);l={next:E=>{e[i]&&e[i](new Yo(c,g,p,E))},error:e[i+1],complete:e[i+2]},DM(r._query)}return(function(g,E,T,S){const O=new fM(S),z=new Y4(E,O,T);return g.asyncQueue.enqueueAndForget((async()=>H4(await Hb(g),z))),()=>{O.Nu(),g.asyncQueue.enqueueAndForget((async()=>G4(await Hb(g),z)))}})(Aw(c),f,o,l)}function p_(r,e){return(function(i,o){const l=new Is;return i.asyncQueue.enqueueAndForget((async()=>rM(await gM(i),o,l))),l.promise})(Aw(r),e)}function MM(r,e,t){const i=t.docs.get(e._key),o=new Mw(r);return new wa(r,o,e._key,i,new Fu(t.hasPendingWrites,t.fromCache),e.converter)}function Jn(){return new r_("serverTimestamp")}(function(e,t=!0){(function(o){vl=o})(gl),Xo(new Ra("firestore",((i,{instanceIdentifier:o,options:l})=>{const c=i.getProvider("app").getImmediate(),f=new La(new nV(i.getProvider("auth-internal")),new sV(c,i.getProvider("app-check-internal")),(function(g,E){if(!Object.prototype.hasOwnProperty.apply(g.options,["projectId"]))throw new le(Z.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Na(g.options.projectId,E)})(c,o),c);return l={useFetchStreams:t,...l},f._setSettings(l),f}),"PUBLIC").setMultipleInstances(!0)),Ss(N0,V0,e),Ss(N0,V0,"esm2020")})();const PM={apiKey:void 0,authDomain:void 0,projectId:void 0,storageBucket:void 0,messagingSenderId:void 0,appId:void 0},Pw=B1(PM),g_=XN(Pw),Xt=_M(Pw);vM(Xt).catch(r=>{console.warn("Firestore persistence error:",r)});const kw=L.createContext(null);function kM({children:r}){const[e,t]=L.useState(null),[i,o]=L.useState(!0);return L.useEffect(()=>{const l=UD(g_,c=>{t(c??null),o(!1)});return()=>l()},[]),A.jsx(kw.Provider,{value:{user:e,loading:i},children:r})}function kc(){const r=L.useContext(kw);if(!r)throw new Error("useAuth debe usarse dentro de <AuthProvider />");return r}const LM={camilo:"camilo@prueba.com",diana:"diana@prueba.com"};function UM(r){return r.trim().toLowerCase()}function BM(){const r=Ec(),e=vi(),{user:t,loading:i}=kc(),o=L.useMemo(()=>e?.state?.from||"/watchlist",[e?.state?.from]),[l,c]=L.useState(""),[f,p]=L.useState(""),[g,E]=L.useState(!1),[T,S]=L.useState("");L.useEffect(()=>{!i&&t&&r(o,{replace:!0})},[i,t,o,r]);async function O(U){if(U.preventDefault(),!g){S(""),E(!0);try{const F=UM(l),K=LM[F];if(!K){S("Usuario no permitido. Usa: camilo o diana.");return}if(!f){S("Escribe la contrasea.");return}await PD(g_,K,f),r(o,{replace:!0})}catch(F){const K=F?.code;K==="auth/invalid-credential"||K==="auth/wrong-password"?S("Contrasea incorrecta."):K==="auth/user-not-found"?S("Ese usuario no existe en Firebase Auth."):K==="auth/too-many-requests"?S("Demasiados intentos. Espera un momento y prueba de nuevo."):(S("No se pudo iniciar sesin. Revisa Firebase Auth y el correo."),console.error("Login error:",F))}finally{E(!1)}}}const z={padding:10,borderRadius:12,border:"1px solid #1f2937",background:"#0b1220",color:"white",width:"100%",boxSizing:"border-box",outline:"none"},Y={padding:10,borderRadius:12,border:"1px solid #1f2937",background:"#111827",color:"white",width:"100%",cursor:"pointer",fontWeight:600,opacity:g||i?.7:1};return A.jsx("div",{style:{minHeight:"100vh",display:"grid",placeItems:"center",background:"#0b1220",color:"white",padding:16},children:A.jsxs("div",{style:{width:360,maxWidth:"100%",padding:16,borderRadius:16,border:"1px solid #1f2937",background:"rgba(17, 24, 39, 0.25)",boxSizing:"border-box"},children:[A.jsx("h2",{style:{marginTop:0},children:"Iniciar sesin"}),A.jsxs("p",{style:{color:"#cbd5e1",marginTop:6},children:["Usuario: ",A.jsx("b",{children:"camilo"})," o ",A.jsx("b",{children:"diana"})]}),A.jsxs("form",{onSubmit:O,style:{display:"grid",gap:10},children:[A.jsx("input",{value:l,onChange:U=>c(U.target.value),placeholder:"Usuario (camilo / diana)",style:z,autoComplete:"username",disabled:g||i}),A.jsx("input",{value:f,onChange:U=>p(U.target.value),placeholder:"Contrasea",type:"password",style:z,autoComplete:"current-password",disabled:g||i}),A.jsx("button",{disabled:g||i,style:Y,type:"submit",children:i?"Cargando":g?"Entrando":"Entrar"}),T?A.jsx("div",{style:{color:"#fca5a5",fontSize:13},children:T}):null]})]})})}const Td=r=>({padding:"10px 12px",borderRadius:999,textDecoration:"none",color:r?"white":"#cbd5e1",background:r?"rgba(51,65,85,.9)":"transparent",border:r?"1px solid rgba(148,163,184,.25)":"1px solid transparent",whiteSpace:"nowrap"});function zM(){const{pathname:r}=vi(),e=Ec();async function t(){await BD(g_),e("/login",{replace:!0})}const i=o=>r.startsWith(o);return A.jsxs("div",{style:{minHeight:"100vh",background:"#0b1220",color:"white"},children:[A.jsx("style",{children:`
        .topbar{
          position: sticky;
          top: 0;
          z-index: 50;
          background: rgba(11,18,32,.92);
          backdrop-filter: blur(10px);
          border-bottom: 1px solid rgba(31,41,55,1);
        }

        .topbarInner{
          width: 100%;
          padding: 12px 12px;
          display:flex;
          align-items:center;
          justify-content:space-between;
          gap: 10px;
        }

        .brand{
          font-weight: 800;
          letter-spacing: .2px;
          line-height: 1;
        }

        .logoutBtn{
          padding: 9px 12px;
          border-radius: 12px;
          border: 1px solid rgba(31,41,55,1);
          background: rgba(17,24,39,1);
          color: white;
          cursor: pointer;
          white-space: nowrap;
        }

        .main{
          max-width: 1200px;
          margin: 0 auto;
          padding: 16px 12px;
          padding-bottom: 84px; /* espacio para bottom nav en mvil */
        }

        /* Top nav (solo desktop/tablet) */
        .topNav{
          max-width: 1200px;
          margin: 0 auto;
          padding: 10px 12px 12px;
          display:flex;
          gap: 8px;
          flex-wrap: wrap;
        }

        /* Bottom nav (solo mvil) */
        .bottomNav{
          position: fixed;
          left: 0;
          right: 0;
          bottom: 0;
          z-index: 60;
          padding: 10px 10px 12px;
          background: rgba(11,18,32,.92);
          backdrop-filter: blur(10px);
          border-top: 1px solid rgba(31,41,55,1);
        }

        .bottomNavInner{
          display:grid;
          grid-template-columns: repeat(4, minmax(0,1fr));
          gap: 8px;
          max-width: 700px;
          margin: 0 auto;
        }

        .bItem{
          display:flex;
          flex-direction: column;
          align-items:center;
          justify-content:center;
          gap: 4px;
          text-decoration:none;
          border-radius: 14px;
          padding: 10px 8px;
          border: 1px solid rgba(148,163,184,.14);
          background: rgba(15,23,42,.35);
          color: #cbd5e1;
          font-size: 12px;
          line-height: 1;
        }

        .bItemActive{
          background: rgba(51,65,85,.9);
          border-color: rgba(148,163,184,.25);
          color: white;
        }

        .bIcon{
          font-size: 16px;
          line-height: 1;
        }

        /* Mostrar topNav en pantallas grandes */
        @media (min-width: 800px){
          .main{ padding-bottom: 16px; }
          .bottomNav{ display: none; }
        }

        /* Ocultar topNav en mvil */
        @media (max-width: 799px){
          .topNav{ display: none; }
        }
      `}),A.jsxs("header",{className:"topbar",children:[A.jsxs("div",{className:"topbarInner",children:[A.jsx("div",{className:"brand",children:"DianiMilo"}),A.jsx("button",{onClick:t,className:"logoutBtn",children:"Salir"})]}),A.jsxs("nav",{className:"topNav",children:[A.jsx(qi,{to:"/watchlist",style:Td(i("/watchlist")),children:"Watchlist"}),A.jsx(qi,{to:"/planes",style:Td(i("/planes")),children:"Planes"}),A.jsx(qi,{to:"/metas",style:Td(i("/metas")),children:"Metas"}),A.jsx(qi,{to:"/ruleta",style:Td(i("/ruleta")),children:"Ruleta"})]})]}),A.jsx("main",{className:"main",children:A.jsx(v1,{})}),A.jsx("div",{className:"bottomNav",children:A.jsxs("div",{className:"bottomNavInner",children:[A.jsxs(qi,{to:"/watchlist",className:`bItem ${i("/watchlist")?"bItemActive":""}`,children:[A.jsx("span",{className:"bIcon"}),"Watchlist"]}),A.jsxs(qi,{to:"/planes",className:`bItem ${i("/planes")?"bItemActive":""}`,children:[A.jsx("span",{className:"bIcon"}),"Planes"]}),A.jsxs(qi,{to:"/metas",className:`bItem ${i("/metas")?"bItemActive":""}`,children:[A.jsx("span",{className:"bIcon"}),"Metas"]}),A.jsxs(qi,{to:"/ruleta",className:`bItem ${i("/ruleta")?"bItemActive":""}`,children:[A.jsx("span",{className:"bIcon"}),"Ruleta"]})]})})]})}const jM="https://api.themoviedb.org/3";function qM(){throw new Error("Falta VITE_TMDB_API_KEY en .env")}async function Lw(r,e){const t=new URL(`${jM}${r}`);if(t.searchParams.set("api_key",qM()),t.searchParams.set("language","es-CO"),e)for(const[o,l]of Object.entries(e))t.searchParams.set(o,l);const i=await fetch(t.toString());if(!i.ok){const o=await i.text().catch(()=>"");throw new Error(`TMDB error ${i.status}: ${o||i.statusText}`)}return await i.json()}async function FM(r){return Lw("/search/multi",{query:r,include_adult:"false"})}async function HM(r,e){return Lw(`/${r}/${e}`)}function fg(r){return r.title??r.name??"Sin ttulo"}function e1(r){const e=r.release_date??r.first_air_date;return e?e.slice(0,4):""}const jd=r=>r?`https://image.tmdb.org/t/p/w342${r}`:null,mg=r=>r?r.split("@")[0]:null;function GM(){const{user:r,loading:e}=kc(),[t,i]=L.useState(null),[o,l]=L.useState(""),[c,f]=L.useState(!1),[p,g]=L.useState(null),[E,T]=L.useState([]),[S,O]=L.useState(null),[z,Y]=L.useState(!1),[U,F]=L.useState(null),[K,ee]=L.useState([]);L.useEffect(()=>{if(e||!r)return;const I=yc(Os(Xt,"watchlist")),fe=_c(I,Ie=>{const $=Ie.docs.map(ae=>({id:ae.id,...ae.data()}));$.sort((ae,ve)=>{const Le=ae?.createdAt?.seconds??0;return(ve?.createdAt?.seconds??0)-Le}),ee($)},Ie=>console.error("watchlist onSnapshot error:",Ie));return()=>fe()},[r,e]);async function he(I){I.preventDefault();const fe=o.trim();if(fe){f(!0),g(null);try{const $=((await FM(fe)).results??[]).filter(ae=>ae.media_type==="movie"||ae.media_type==="tv");T($)}catch(Ie){g(Ie?.message??"Error buscando en TMDB")}finally{f(!1)}}}L.useEffect(()=>{if(!t){O(null);return}let I=!1;return(async()=>{Y(!0),F(null);try{const fe=await HM(t.mediaType,t.tmdbId);I||O(fe)}catch(fe){I||F(fe?.message??"Error cargando detalles")}finally{I||Y(!1)}})(),()=>{I=!0}},[t?.mediaType,t?.tmdbId]);const de=L.useMemo(()=>{const I=new Set;for(const fe of K)I.add(`${fe.mediaType}:${fe.tmdbId}`);return I},[K]);async function pe(I){if(!r){alert("No hay sesin activa.");return}const fe=I.media_type;if(fe!=="movie"&&fe!=="tv")return;const Ie=r.displayName||mg(r.email);await m_(Os(Xt,"watchlist"),{tmdbId:I.id,mediaType:fe,title:fg(I),posterPath:I.poster_path??null,status:"pending",season:fe==="tv"?1:null,episode:fe==="tv"?1:null,createdByUid:r.uid,createdByEmail:r.email??null,createdByName:Ie??null,updatedByUid:r.uid,updatedByEmail:r.email??null,updatedByName:Ie??null,createdAt:Jn(),updatedAt:Jn()}),i({mediaType:fe,tmdbId:I.id})}async function x(I,fe){if(!r)return;const Ie=r.displayName||mg(r.email);await $o(Qi(Xt,"watchlist",I),{status:fe,updatedByUid:r.uid,updatedByEmail:r.email??null,updatedByName:Ie??null,updatedAt:Jn()})}async function R(I,fe,Ie){if(!r)return;const $=r.displayName||mg(r.email);await $o(Qi(Xt,"watchlist",I),{season:fe,episode:Ie,updatedByUid:r.uid,updatedByEmail:r.email??null,updatedByName:$??null,updatedAt:Jn()})}const C=L.useMemo(()=>K.filter(I=>I.status==="pending"),[K]),D=L.useMemo(()=>K.filter(I=>I.status==="watching"),[K]),V=L.useMemo(()=>K.filter(I=>I.status==="done"),[K]);async function k(I,fe){window.confirm(`Seguro quieres eliminar "${fe}"?`)&&await f_(Qi(Xt,"watchlist",I))}return A.jsxs("div",{className:"wlPage",children:[A.jsx("style",{children:`
  .wlPage{
    max-width: 1500px; /* antes 1200 */
    margin: 0 auto;
    padding: 18px;
    display: grid;
    gap: 14px;
  }

  /* Desktop: columnas con mnimo, no micro */
  .wlGrid{
    display: grid;
    gap: 14px;
    align-items: start;

    /* 3 columnas de listas + 2 grandes (search/detalles) */
    grid-template-columns:
      minmax(290px, 0.9fr)
      minmax(290px, 0.9fr)
      minmax(290px, 0.9fr)
      minmax(340px, 1.1fr)
      minmax(360px, 1.2fr);

    grid-template-areas:
      "pending watching done search details";
  }

  .area-pending{ grid-area: pending; }
  .area-watching{ grid-area: watching; }
  .area-done{ grid-area: done; }
  .area-search{ grid-area: search; }
  .area-details{ grid-area: details; }

  /* Cards scroll desktop */
  .wlCardScroll{
    max-height: 74vh;
    overflow: auto;
  }

  /* Tipografa/padding un poco ms grande en PC */
  @media (min-width: 1100px){
    .wlPage{ padding: 20px; }
    .wlCardScroll{
      padding: 14px; /* override visual (si quieres) */
    }
  }

  /* Tablet */
  @media (max-width: 1050px){
    .wlGrid{
      grid-template-columns: 1fr 1fr;
      grid-template-areas:
        "search details"
        "pending watching"
        "done done";
    }
    .wlCardScroll{ max-height: 60vh; }
  }

  /* Celular */
  @media (max-width: 650px){
    .wlPage{ padding: 12px; }
    .wlGrid{
      grid-template-columns: 1fr;
      grid-template-areas:
        "search"
        "pending"
        "watching"
        "done"
        "details";
    }
    .wlCardScroll{
      max-height: none;
      overflow: visible;
    }
    .wlResultRow{ grid-template-columns: 1fr; }
    .wlAddBtn{ width: 100%; }
    .wlActions{ flex-wrap: wrap; }
  }

  .wlWrapAnywhere{ overflow-wrap:anywhere; word-break:break-word; }
  .wlTitleClamp{
    display:-webkit-box;
    -webkit-line-clamp: 3;
    -webkit-box-orient: vertical;
    overflow:hidden;
  }
`}),A.jsxs("div",{children:[A.jsx("h2",{style:{margin:0},children:"Watchlist"}),A.jsx("p",{style:{color:"#cbd5e1",marginTop:6}})]}),A.jsxs("div",{className:"wlGrid",children:[A.jsxs("section",{className:"area-pending wlCardScroll",style:Pu,children:[A.jsxs("header",{style:ku,children:[A.jsx("strong",{children:"Pendientes"}),A.jsx("span",{style:{color:"#94a3b8",fontSize:12},children:C.length})]}),C.length===0?A.jsx("div",{style:ko,children:"No hay pendientes."}):A.jsx("div",{style:{display:"grid",gap:10},children:C.map(I=>A.jsx(pg,{it:I,selected:t,setSelected:i,setStatus:x,removeItem:k,updateProgress:R},I.id))})]}),A.jsxs("section",{className:"area-watching wlCardScroll",style:Pu,children:[A.jsxs("header",{style:ku,children:[A.jsx("strong",{children:"Viendo"}),A.jsx("span",{style:{color:"#94a3b8",fontSize:12},children:D.length})]}),D.length===0?A.jsx("div",{style:ko,children:"Nada en viendo."}):A.jsx("div",{style:{display:"grid",gap:10},children:D.map(I=>A.jsx(pg,{it:I,selected:t,setSelected:i,setStatus:x,removeItem:k,updateProgress:R},I.id))})]}),A.jsxs("section",{className:"area-done wlCardScroll",style:Pu,children:[A.jsxs("header",{style:ku,children:[A.jsx("strong",{children:"Vistas"}),A.jsx("span",{style:{color:"#94a3b8",fontSize:12},children:V.length})]}),V.length===0?A.jsx("div",{style:ko,children:"An no hay vistas."}):A.jsx("div",{style:{display:"grid",gap:10},children:V.map(I=>A.jsx(pg,{it:I,selected:t,setSelected:i,setStatus:x,removeItem:k,updateProgress:R},I.id))})]}),A.jsxs("section",{className:"area-search wlCardScroll",style:Pu,children:[A.jsxs("header",{style:ku,children:[A.jsx("strong",{children:"Buscar Pelicula o Serie"}),A.jsx("span",{style:{color:"#94a3b8",fontSize:12},children:"TMDB"})]}),A.jsxs("form",{onSubmit:he,style:{display:"grid",gap:10},children:[A.jsx("input",{value:o,onChange:I=>l(I.target.value),placeholder:"Buscar",style:KM}),A.jsx("button",{type:"submit",style:QM,disabled:!o.trim()||c,children:c?"Buscando":"Buscar"})]}),p?A.jsx("div",{style:t1,children:p}):null,A.jsx("div",{style:{display:"grid",gap:10,marginTop:12},children:E.map(I=>{const fe=I.media_type,Ie=`${fe}:${I.id}`,$=de.has(Ie),ae=jd(I.poster_path);return A.jsxs("div",{className:"wlResultRow",style:WM,children:[A.jsxs("button",{onClick:()=>i({mediaType:fe,tmdbId:I.id}),style:JM,children:[ae?A.jsx("img",{src:ae,alt:"",style:{width:44,height:66,borderRadius:8,objectFit:"cover",background:"rgba(148,163,184,.08)",flex:"0 0 auto"},onError:ve=>ve.currentTarget.removeAttribute("src")}):A.jsx("div",{style:{width:44,height:66,borderRadius:8,background:"rgba(148,163,184,.08)",flex:"0 0 auto"}}),A.jsxs("div",{style:{display:"grid",gap:4,textAlign:"left",minWidth:0},children:[A.jsx("span",{className:"wlTitleClamp",style:{fontWeight:600},children:fg(I)}),A.jsx("span",{style:{fontSize:12,color:"#94a3b8"},children:(fe==="movie"?"Pelcula":"Serie")+(e1(I)?`  ${e1(I)}`:"")})]})]}),A.jsx("button",{className:"wlAddBtn",onClick:()=>$?null:pe(I),disabled:$,style:$?eP:ZM,title:$?"Ya est en pendientes":"Agregar a pendientes",children:$?"Agregada":"Agregar"})]},Ie)})})]}),A.jsxs("section",{className:"area-details wlCardScroll",style:Pu,children:[A.jsxs("header",{style:ku,children:[A.jsx("strong",{children:"Detalles"}),A.jsx("span",{style:{color:"#94a3b8",fontSize:12}})]}),t?z?A.jsx("div",{style:ko,children:"Cargando detalles"}):U?A.jsx("div",{style:t1,children:U}):S?A.jsxs("div",{style:{display:"grid",gap:12,minWidth:0},children:[A.jsxs("div",{style:{display:"flex",gap:12,minWidth:0},children:[jd(S.poster_path)?A.jsx("img",{src:jd(S.poster_path)??void 0,alt:"",style:{width:92,height:138,borderRadius:12,objectFit:"cover",background:"rgba(148,163,184,.08)",flex:"0 0 auto"},onError:I=>I.currentTarget.removeAttribute("src")}):A.jsx("div",{style:{width:92,height:138,borderRadius:12,background:"rgba(148,163,184,.08)",flex:"0 0 auto"}}),A.jsxs("div",{style:{display:"grid",gap:6,minWidth:0},children:[A.jsx("h3",{className:"wlWrapAnywhere",style:{margin:0},children:fg(S)}),A.jsxs("div",{style:{color:"#94a3b8",fontSize:12},children:[S.release_date?.slice(0,4)||S.first_air_date?.slice(0,4)||"",S.vote_average?`   ${S.vote_average.toFixed(1)}`:""]}),S.genres?.length?A.jsx("div",{style:{display:"flex",gap:6,flexWrap:"wrap"},children:S.genres.slice(0,4).map(I=>A.jsx("span",{style:tP,children:I.name},I.id))}):null]})]}),(()=>{const I=K.find(fe=>fe.tmdbId===t.tmdbId&&fe.mediaType===t.mediaType);return!I?.createdByName&&!I?.createdByEmail?null:A.jsxs("div",{style:{color:"#94a3b8",fontSize:12},children:["Agregado por:"," ",I.createdByName||(I.createdByEmail?I.createdByEmail.split("@")[0]:"")]})})(),t.mediaType==="tv"?A.jsxs("div",{style:{color:"#cbd5e1",fontSize:13},children:[S.number_of_seasons?`Temporadas: ${S.number_of_seasons}`:"",S.number_of_episodes?`  Episodios: ${S.number_of_episodes}`:""]}):S.runtime?A.jsxs("div",{style:{color:"#cbd5e1",fontSize:13},children:["Duracin: ",S.runtime," min"]}):null,A.jsx("p",{className:"wlWrapAnywhere",style:{margin:0,color:"#cbd5e1",lineHeight:1.4},children:S.overview||"Sin sinopsis disponible."})]}):A.jsx("div",{style:ko,children:"Sin detalles."}):A.jsx("div",{style:ko,children:"Haz click en un pendiente o en un resultado para ver detalles."})]})]})]})}function pg({it:r,selected:e,setSelected:t,setStatus:i,removeItem:o}){const l=e?.tmdbId===r.tmdbId&&e?.mediaType===r.mediaType,c=jd(r.posterPath);return A.jsxs("div",{style:YM,children:[A.jsxs("button",{onClick:()=>t({mediaType:r.mediaType,tmdbId:r.tmdbId}),style:$M(l),children:[c?A.jsx("img",{src:c,alt:"",style:{width:44,height:66,borderRadius:8,objectFit:"cover",background:"rgba(148,163,184,.08)",flex:"0 0 auto"},onError:f=>f.currentTarget.removeAttribute("src")}):A.jsx("div",{style:{width:44,height:66,borderRadius:8,background:"rgba(148,163,184,.08)",flex:"0 0 auto"}}),A.jsxs("div",{style:{display:"grid",gap:4,textAlign:"left",minWidth:0},children:[A.jsx("span",{className:"wlTitleClamp",style:{fontWeight:600},children:r.title}),A.jsx("span",{style:{fontSize:12,color:"#94a3b8"},children:r.mediaType==="movie"?"Pelcula":"Serie"}),r.createdByName||r.createdByEmail?A.jsxs("span",{style:{fontSize:11,color:"#64748b"},children:["Agregado por:"," ",r.createdByName||(r.createdByEmail?r.createdByEmail.split("@")[0]:"")]}):null]})]}),A.jsxs("div",{className:"wlActions",style:{display:"flex",gap:6,alignItems:"center"},children:[r.status!=="pending"&&A.jsx("button",{onClick:()=>i(r.id,"pending"),style:gg,children:"Pendiente"}),r.status!=="watching"&&A.jsx("button",{onClick:()=>i(r.id,"watching"),style:gg,children:"Viendo"}),r.status!=="done"&&A.jsx("button",{onClick:()=>i(r.id,"done"),style:gg,children:"Visto"}),r.mediaType==="tv"&&r.status==="watching"?A.jsx("div",{style:{display:"flex",gap:6}}):null,A.jsx("button",{onClick:()=>o(r.id,r.title),style:XM,children:""})]})]})}const Pu={border:"2px solid rgba(148,163,184,.2)",borderRadius:14,padding:12,background:"rgba(2,6,23,.35)",minWidth:0},ku={display:"flex",alignItems:"center",justifyContent:"space-between",paddingBottom:10,borderBottom:"1px solid rgba(148,163,184,.15)",marginBottom:12},KM={width:"100%",padding:"10px 12px",borderRadius:10,border:"1px solid rgba(148,163,184,.25)",background:"rgba(15,23,42,.35)",color:"#e2e8f0",outline:"none",fontSize:16,boxSizing:"border-box"},QM={padding:"10px 12px",borderRadius:10,border:"1px solid rgba(148,163,184,.25)",background:"rgba(56,189,248,.15)",color:"#e2e8f0",cursor:"pointer",minHeight:40},ko={border:"1px dashed rgba(148,163,184,.25)",borderRadius:12,padding:14,color:"#94a3b8",background:"rgba(15,23,42,.15)"},t1={marginTop:12,border:"1px solid rgba(248,113,113,.35)",background:"rgba(248,113,113,.10)",borderRadius:12,padding:12,color:"#fecaca",fontSize:13},YM={display:"grid",gridTemplateColumns:"1fr",gap:10,alignItems:"center",minWidth:0},$M=r=>({display:"flex",gap:10,alignItems:"center",padding:10,borderRadius:12,border:"1px solid rgba(148,163,184,.2)",background:r?"rgba(56,189,248,.12)":"rgba(15,23,42,.25)",color:"#e2e8f0",cursor:"pointer",width:"100%",minWidth:0}),gg={height:34,padding:"0 10px",borderRadius:10,border:"1px solid rgba(148,163,184,.25)",background:"rgba(148,163,184,.08)",color:"#e2e8f0",cursor:"pointer"},XM={height:34,padding:"0 10px",borderRadius:10,border:"1px solid rgba(248,113,113,.35)",background:"rgba(248,113,113,.12)",color:"#fecaca",cursor:"pointer"},WM={display:"grid",gridTemplateColumns:"1fr auto",gap:10,alignItems:"center",border:"1px solid rgba(148,163,184,.15)",borderRadius:12,padding:10,background:"rgba(15,23,42,.18)",minWidth:0},JM={display:"flex",gap:10,alignItems:"center",border:"none",background:"transparent",color:"#e2e8f0",cursor:"pointer",textAlign:"left",minWidth:0},ZM={height:34,padding:"0 10px",borderRadius:10,border:"1px solid rgba(34,197,94,.35)",background:"rgba(34,197,94,.12)",color:"#bbf7d0",cursor:"pointer"},eP={height:34,padding:"0 10px",borderRadius:10,border:"1px solid rgba(148,163,184,.25)",background:"rgba(148,163,184,.08)",color:"#94a3b8",cursor:"not-allowed"},tP={padding:"4px 10px",borderRadius:999,border:"1px solid rgba(148,163,184,.25)",background:"rgba(148,163,184,.08)",color:"#e2e8f0",fontSize:12},nP=[{key:"idea",label:"Idea"},{key:"planned",label:"Planeado"},{key:"done",label:"Hecho"}],n1=r=>r?r.split("@")[0]:null;function iP(){const{user:r,loading:e}=kc(),[t,i]=L.useState([]),[o,l]=L.useState(!0),[c,f]=L.useState(""),[p,g]=L.useState(""),[E,T]=L.useState("");L.useEffect(()=>{if(e||!r)return;l(!0);const U=yc(Os(Xt,"plans"),d_("sort","asc")),F=_c(U,K=>{const ee=K.docs.map(he=>{const de=he.data();return{id:he.id,...de}});i(ee),l(!1)},K=>{console.warn("plans snapshot error:",K),l(!1)});return()=>F()},[r,e]);const S=L.useMemo(()=>{const U={idea:[],planned:[],done:[]};for(const F of t)U[F.status].push(F);return U},[t]);async function O(){const U=c.trim();if(!U)return;if(!r){alert("No hay sesin activa.");return}const F=E.split(`
`).map(ee=>ee.trim()).filter(Boolean),K=r.displayName||n1(r.email);await m_(Os(Xt,"plans"),{title:U,description:p.trim()||"",links:F,status:"idea",sort:Date.now(),createdByUid:r.uid,createdByEmail:r.email??null,createdByName:K??null,updatedByUid:r.uid,updatedByEmail:r.email??null,updatedByName:K??null,createdAt:Jn(),updatedAt:Jn()}),f(""),g(""),T("")}async function z(U,F){if(!r)return;const K={};for(const[he,de]of Object.entries(F))de!==void 0&&(K[he]=de);const ee=r.displayName||n1(r.email);await $o(Qi(Xt,"plans",U),{...K,updatedByUid:r.uid,updatedByEmail:r.email??null,updatedByName:ee??null,updatedAt:Jn()})}async function Y(U){await f_(Qi(Xt,"plans",U))}return A.jsxs("div",{className:"page",children:[A.jsx("style",{children:`
        .page{
          max-width: 1100px;
          margin: 0 auto;
          padding: 16px;
          display: grid;
          gap: 16px;
        }

        .headerRow{
          display:flex;
          align-items:center;
          justify-content:space-between;
          gap: 12px;
          flex-wrap: wrap;
        }

        .board{
          display: grid;
          gap: 12px;
          grid-template-columns: repeat(3, minmax(0, 1fr));
        }

        /* Tablet */
        @media (max-width: 900px){
          .page{ padding: 14px; }
          .board{ grid-template-columns: repeat(2, minmax(0, 1fr)); }
        }

        /* Celular */
        @media (max-width: 600px){
          .page{ padding: 12px; }
          .board{ grid-template-columns: 1fr; }
          .createRow{
            flex-direction: column;
            align-items: stretch;
          }
          .createBtn{
            width: 100%;
          }
          .actionsRow{
            flex-direction: column;
            align-items: stretch;
          }
          .deleteBtn{
            width: 100%;
          }
        }

        /* Botones de estado: que envuelvan bonito */
        .statusBtns{
          display:flex;
          gap:6px;
          flex-wrap: wrap;
        }

        /* Evitar overflow de links largos */
        .linkItem{
          overflow-wrap: anywhere;
          word-break: break-word;
        }
      `}),A.jsx("header",{className:"headerRow",children:A.jsx("h2",{style:{margin:0},children:"Planes"})}),A.jsx("section",{style:rP,children:A.jsxs("div",{style:{display:"grid",gap:10},children:[A.jsxs("div",{className:"createRow",style:{display:"flex",gap:10,flexWrap:"wrap"},children:[A.jsx("input",{style:{...Lo,flex:1,minWidth:220},placeholder:"Ttulo",value:c,onChange:U=>f(U.target.value)}),A.jsx("button",{className:"createBtn",style:oP,onClick:O,children:"Agregar"})]}),A.jsx("textarea",{style:{...Lo,width:"100%",resize:"vertical"},rows:2,placeholder:"Descripcin (opcional)",value:p,onChange:U=>g(U.target.value)}),A.jsx("textarea",{style:{...Lo,width:"100%",resize:"vertical"},rows:3,placeholder:"Links (opcionales, uno por lnea)",value:E,onChange:U=>T(U.target.value)})]})}),A.jsx("section",{className:"board",children:nP.map(U=>A.jsxs("div",{style:sP,children:[A.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:10},children:[A.jsx("h3",{style:{margin:0},children:U.label}),A.jsx("span",{style:{color:"#94a3b8",fontSize:12},children:S[U.key].length})]}),A.jsxs("div",{style:{display:"grid",gap:10,marginTop:10},children:[o&&A.jsx("p",{style:{color:"#94a3b8"},children:"Cargando"}),!o&&S[U.key].length===0&&A.jsx("p",{style:{color:"#94a3b8"},children:"Nada aqu."}),S[U.key].map(F=>A.jsxs("div",{style:aP,children:[A.jsx("input",{style:{...Lo,width:"100%",fontWeight:700},value:F.title,onChange:K=>z(F.id,{title:K.target.value})}),F.createdByName||F.createdByEmail?A.jsxs("div",{style:{color:"#94a3b8",fontSize:12},children:["Agregado por:"," ",F.createdByName||(F.createdByEmail?F.createdByEmail.split("@")[0]:"")]}):null,A.jsx("textarea",{style:{...Lo,width:"100%",resize:"vertical"},rows:2,placeholder:"Descripcin",value:F.description||"",onChange:K=>z(F.id,{description:K.target.value})}),A.jsx("textarea",{style:{...Lo,width:"100%",resize:"vertical"},rows:2,placeholder:"Links (uno por lnea)",value:(F.links||[]).join(`
`),onChange:K=>z(F.id,{links:K.target.value.split(`
`).map(ee=>ee.trim()).filter(Boolean)})}),(F.links?.length??0)>0?A.jsxs("div",{style:{display:"grid",gap:4},children:[F.links.slice(0,4).map(K=>A.jsx("a",{href:K,target:"_blank",rel:"noreferrer",className:"linkItem",style:{color:"#93c5fd",fontSize:13},children:K},K)),F.links.length>4?A.jsxs("span",{style:{color:"#94a3b8",fontSize:12},children:["+",F.links.length-4," ms"]}):null]}):null,A.jsxs("div",{className:"actionsRow",style:{display:"flex",gap:8,justifyContent:"space-between",alignItems:"flex-start"},children:[A.jsxs("div",{className:"statusBtns",children:[F.status!=="idea"&&A.jsx("button",{style:yg,onClick:()=>z(F.id,{status:"idea"}),children:"Idea"}),F.status!=="planned"&&A.jsx("button",{style:yg,onClick:()=>z(F.id,{status:"planned"}),children:"Planeado"}),F.status!=="done"&&A.jsx("button",{style:yg,onClick:()=>z(F.id,{status:"done"}),children:"Hecho"})]}),A.jsx("button",{className:"deleteBtn",style:lP,onClick:()=>Y(F.id),children:"Borrar"})]}),F.updatedByName||F.updatedByEmail?A.jsxs("div",{style:{color:"#64748b",fontSize:11},children:["ltima edicin:"," ",F.updatedByName||(F.updatedByEmail?F.updatedByEmail.split("@")[0]:"")]}):null]},F.id))]})]},U.key))})]})}const rP={border:"1px solid rgba(148,163,184,.25)",borderRadius:12,padding:12,background:"rgba(15,23,42,.35)"},sP={border:"1px solid rgba(148,163,184,.18)",borderRadius:12,padding:10,background:"rgba(2,6,23,.35)",minHeight:220,minWidth:0},aP={border:"1px solid rgba(148,163,184,.18)",borderRadius:12,padding:10,background:"rgba(15,23,42,.35)",display:"grid",gap:10,minWidth:0},Lo={boxSizing:"border-box",background:"rgba(2,6,23,.35)",border:"1px solid rgba(148,163,184,.25)",color:"#e2e8f0",borderRadius:10,padding:"10px 10px",outline:"none",width:"100%",fontSize:16},oP={background:"#2563eb",border:"1px solid rgba(255,255,255,.12)",color:"white",borderRadius:10,padding:"10px 12px",cursor:"pointer",minHeight:40},yg={background:"rgba(148,163,184,.12)",border:"1px solid rgba(148,163,184,.22)",color:"#e2e8f0",borderRadius:10,padding:"8px 10px",cursor:"pointer",minHeight:36},lP={background:"rgba(239,68,68,.15)",border:"1px solid rgba(239,68,68,.35)",color:"#fecaca",borderRadius:10,padding:"8px 10px",cursor:"pointer",minHeight:36};function uP(){return Math.random().toString(36).slice(2,10)}function Fi(r,e=0){const t=typeof r=="number"?r:Number(r);return Number.isFinite(t)?t:e}function pf(r){try{return new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",maximumFractionDigits:0}).format(r)}catch{return`COP ${r}`}}function cP(r){const e=[];if(r.money){const t=Math.max(0,Fi(r.money.currentAmount,0)),i=Math.max(0,Fi(r.money.targetAmount,0));e.push(`Dinero: ${pf(t)} / ${pf(i)}`)}if(r.checklist){const t=Array.isArray(r.checklist.items)?r.checklist.items:[],i=t.length,o=t.filter(l=>l.done).length;e.push(`Checklist: ${o}/${i} pasos`)}return e.length===0&&e.push("Sin progreso configurado"),e}const bd=r=>r?r.split("@")[0]:null;function hP(){return L.useMemo(()=>{const e={border:"1px solid rgba(148,163,184,0.18)",background:"rgba(15,23,42,0.65)",borderRadius:14,padding:14,boxShadow:"0 10px 25px rgba(0,0,0,0.25)"},t={fontSize:12,color:"#94a3b8",display:"block",marginBottom:6},i={width:"100%",maxWidth:"100%",display:"block",boxSizing:"border-box",padding:"10px 12px",borderRadius:10,border:"1px solid rgba(148,163,184,0.22)",background:"rgba(2,6,23,0.45)",color:"#e2e8f0",outline:"none",minWidth:0},o={...i,minHeight:96,resize:"vertical"},l={...i,appearance:"none"},c={padding:"10px 12px",borderRadius:10,border:"1px solid rgba(148,163,184,0.25)",background:"rgba(30,41,59,0.6)",color:"#e2e8f0",cursor:"pointer",whiteSpace:"nowrap"},f={...c,background:"rgba(99,102,241,0.35)"};return{card:e,label:t,inputBase:i,textarea:o,select:l,btn:c,btnPrimary:f,chip:{display:"inline-flex",alignItems:"center",gap:6,padding:"4px 8px",borderRadius:999,border:"1px solid rgba(148,163,184,0.22)",background:"rgba(2,6,23,0.35)",color:"#cbd5e1",fontSize:12,maxWidth:"100%"},hr:{border:0,borderTop:"1px solid rgba(148,163,184,0.18)",margin:"12px 0"},gridAuto:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(220px, 1fr))",gap:12,alignItems:"start",minWidth:0}}},[])}function dP(){const r=hP(),{user:e,loading:t}=kc(),[i,o]=L.useState([]),[l,c]=L.useState(!0),[f,p]=L.useState(null),[g,E]=L.useState(""),[T,S]=L.useState(""),[O,z]=L.useState("active"),[Y,U]=L.useState("none"),[F,K]=L.useState(""),[ee,he]=L.useState(!0),[de,pe]=L.useState(!1),[x,R]=L.useState(0),[C,D]=L.useState(0),[V,k]=L.useState(""),[I,fe]=L.useState([]);L.useEffect(()=>{if(t||!e)return;const re=yc(Os(Xt,"goals"),d_("order","desc")),Ve=_c(re,Ce=>{const Ut=Ce.docs.map(Zi=>{const ut=Zi.data(),Bt=ut.progress??{};let zt={};return Bt?.mode==="money"?zt.money={currency:"COP",targetAmount:Math.max(0,Fi(Bt.targetAmount,0)),currentAmount:Math.max(0,Fi(Bt.currentAmount,0))}:Bt?.mode==="checklist"?zt.checklist={items:Array.isArray(Bt.items)?Bt.items:[]}:(Bt?.money&&(zt.money={currency:"COP",targetAmount:Math.max(0,Fi(Bt.money.targetAmount,0)),currentAmount:Math.max(0,Fi(Bt.money.currentAmount,0))}),Bt?.checklist&&(zt.checklist={items:Array.isArray(Bt.checklist.items)?Bt.checklist.items:[]})),!zt.money&&!zt.checklist&&(zt={checklist:{items:[]}}),{id:Zi.id,title:String(ut.title??""),description:ut.description?String(ut.description):"",status:ut.status??"active",priority:ut.priority??void 0,targetDate:ut.targetDate?String(ut.targetDate):"",progress:zt,order:typeof ut.order=="number"?ut.order:0,createdByUid:ut.createdByUid??null,createdByEmail:ut.createdByEmail??null,createdByName:ut.createdByName??null,updatedByUid:ut.updatedByUid??null,updatedByEmail:ut.updatedByEmail??null,updatedByName:ut.updatedByName??null,createdAt:ut.createdAt,updatedAt:ut.updatedAt}});o(Ut),c(!1)},Ce=>{console.error("goals snapshot error:",Ce),c(!1)});return()=>Ve()},[e,t]);function Ie(){p(null),E(""),S(""),z("active"),U("none"),K(""),he(!0),pe(!1),R(0),D(0),k(""),fe([])}function $(re){p(re.id),E(re.title??""),S(re.description??""),z(re.status??"active"),U(re.priority??"none"),K(re.targetDate??""),pe(!!re.progress.money),he(!!re.progress.checklist),re.progress.money?(R(Math.max(0,Fi(re.progress.money.targetAmount,0))),D(Math.max(0,Fi(re.progress.money.currentAmount,0)))):(R(0),D(0)),re.progress.checklist?fe(Array.isArray(re.progress.checklist.items)?re.progress.checklist.items:[]):fe([])}function ae(){const re=!ee&&!de,Ve={};return de&&(Ve.money={currency:"COP",targetAmount:Math.max(0,Fi(x,0)),currentAmount:Math.max(0,Fi(C,0))}),(ee||re)&&(Ve.checklist={items:I}),Ve}async function ve(){const re=g.trim();if(!re)return;if(!e){alert("No hay sesin activa.");return}const Ve=e.displayName||bd(e.email),Ce={title:re,description:T.trim(),status:O,priority:Y==="none"?null:Y,targetDate:F||null,progress:ae(),order:Date.now(),createdByUid:e.uid,createdByEmail:e.email??null,createdByName:Ve??null,updatedByUid:e.uid,updatedByEmail:e.email??null,updatedByName:Ve??null,createdAt:Jn(),updatedAt:Jn()};await m_(Os(Xt,"goals"),Ce),Ie()}async function Le(){if(!f)return;const re=g.trim();if(!re||!e)return;const Ve=e.displayName||bd(e.email),Ce=Qi(Xt,"goals",f);await $o(Ce,{title:re,description:T.trim(),status:O,priority:Y==="none"?null:Y,targetDate:F||null,progress:ae(),updatedByUid:e.uid,updatedByEmail:e.email??null,updatedByName:Ve??null,updatedAt:Jn()}),Ie()}async function Ge(re){if(!e)return;const Ve=e.displayName||bd(e.email),Ce=Qi(Xt,"goals",re.id),Ut=re.status==="done"?"active":"done";await $o(Ce,{status:Ut,updatedByUid:e.uid,updatedByEmail:e.email??null,updatedByName:Ve??null,updatedAt:Jn()})}async function P(re){if(!e)return;const Ve=e.displayName||bd(e.email),Ce=Qi(Xt,"goals",re.id),Ut=re.status==="paused"?"active":"paused";await $o(Ce,{status:Ut,updatedByUid:e.uid,updatedByEmail:e.email??null,updatedByName:Ve??null,updatedAt:Jn()})}async function ne(re){await f_(Qi(Xt,"goals",re)),f===re&&Ie()}function ue(){const re=V.trim();re&&(fe(Ve=>[{id:uP(),text:re,done:!1},...Ve]),k(""))}function me(re){fe(Ve=>Ve.map(Ce=>Ce.id===re?{...Ce,done:!Ce.done}:Ce))}function we(re){fe(Ve=>Ve.filter(Ce=>Ce.id!==re))}const Re=L.useMemo(()=>{const re=i.filter(Ut=>Ut.status==="active"),Ve=i.filter(Ut=>Ut.status==="paused"),Ce=i.filter(Ut=>Ut.status==="done");return{active:re,paused:Ve,done:Ce}},[i]);return A.jsxs("div",{style:{display:"grid",gap:14,minWidth:0},children:[A.jsxs("div",{style:r.card,children:[A.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:12,flexWrap:"wrap"},children:[A.jsxs("div",{style:{minWidth:0},children:[A.jsx("div",{style:{fontWeight:800,color:"#e2e8f0"},children:f?"Editar meta":"Nueva meta"}),A.jsx("div",{style:{fontSize:12,color:"#94a3b8",marginTop:2},children:f?"Actualiza y guarda":"Crea una meta en segundos"})]}),A.jsx("div",{style:{display:"flex",gap:10,flexWrap:"wrap"},children:f?A.jsxs(A.Fragment,{children:[A.jsx("button",{style:r.btnPrimary,onClick:Le,children:"Guardar"}),A.jsx("button",{style:r.btn,onClick:Ie,children:"Cancelar"})]}):A.jsxs(A.Fragment,{children:[A.jsx("button",{style:r.btnPrimary,onClick:ve,children:"Crear"}),A.jsx("button",{style:r.btn,onClick:Ie,children:"Limpiar"})]})})]}),A.jsx("hr",{style:r.hr}),A.jsx("div",{style:{fontWeight:700,color:"#cbd5e1",marginBottom:8},children:"Detalles"}),A.jsxs("div",{style:r.gridAuto,children:[A.jsxs("div",{style:{minWidth:0},children:[A.jsx("label",{style:r.label,children:"Ttulo"}),A.jsx("input",{style:r.inputBase,value:g,onChange:re=>E(re.target.value)})]}),A.jsxs("div",{style:{minWidth:0},children:[A.jsx("label",{style:r.label,children:"Fecha objetivo (opcional)"}),A.jsx("input",{style:r.inputBase,type:"date",value:F,onChange:re=>K(re.target.value)})]}),A.jsxs("div",{style:{minWidth:0},children:[A.jsx("label",{style:r.label,children:"Estado"}),A.jsxs("select",{style:r.select,value:O,onChange:re=>z(re.target.value),children:[A.jsx("option",{value:"active",children:"Activa"}),A.jsx("option",{value:"paused",children:"Pausada"}),A.jsx("option",{value:"done",children:"Completada"})]})]}),A.jsxs("div",{style:{minWidth:0},children:[A.jsx("label",{style:r.label,children:"Prioridad"}),A.jsxs("select",{style:r.select,value:Y,onChange:re=>U(re.target.value),children:[A.jsx("option",{value:"none",children:""}),A.jsx("option",{value:"low",children:"Baja"}),A.jsx("option",{value:"medium",children:"Media"}),A.jsx("option",{value:"high",children:"Alta"})]})]}),A.jsxs("div",{style:{gridColumn:"1 / -1",minWidth:0},children:[A.jsx("label",{style:r.label,children:"Descripcin"}),A.jsx("textarea",{style:r.textarea,value:T,onChange:re=>S(re.target.value)})]})]}),A.jsx("hr",{style:r.hr}),A.jsx("div",{style:{fontWeight:700,color:"#cbd5e1",marginBottom:8},children:"Progreso"}),A.jsxs("div",{style:{display:"flex",gap:16,flexWrap:"wrap",alignItems:"center"},children:[A.jsxs("label",{style:{display:"flex",gap:8,alignItems:"center",color:"#cbd5e1"},children:[A.jsx("input",{type:"checkbox",checked:ee,onChange:re=>he(re.target.checked)}),"Checklist"]}),A.jsxs("label",{style:{display:"flex",gap:8,alignItems:"center",color:"#cbd5e1"},children:[A.jsx("input",{type:"checkbox",checked:de,onChange:re=>pe(re.target.checked)}),"Dinero"]}),!ee&&!de&&A.jsx("span",{style:{fontSize:12,color:"#94a3b8"},children:"Activa al menos una opcin."})]}),A.jsxs("div",{style:{marginTop:12,display:"grid",gap:14},children:[de&&A.jsxs("div",{style:r.gridAuto,children:[A.jsxs("div",{style:{minWidth:0},children:[A.jsx("label",{style:r.label,children:"Objetivo (COP)"}),A.jsx("input",{style:r.inputBase,type:"number",min:0,value:x,onChange:re=>R(Math.max(0,Number(re.target.value)))})]}),A.jsxs("div",{style:{minWidth:0},children:[A.jsx("label",{style:r.label,children:"Llevan (COP)"}),A.jsx("input",{style:r.inputBase,type:"number",min:0,value:C,onChange:re=>D(Math.max(0,Number(re.target.value)))})]}),A.jsxs("div",{style:{gridColumn:"1 / -1",fontSize:12,color:"#cbd5e1"},children:[pf(Math.max(0,C))," /"," ",pf(Math.max(0,x))]})]}),ee&&A.jsxs("div",{style:{display:"grid",gap:10,minWidth:0},children:[A.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr auto",gap:10,minWidth:0},children:[A.jsxs("div",{style:{minWidth:0},children:[A.jsx("label",{style:r.label,children:"Agregar paso"}),A.jsx("input",{style:r.inputBase,placeholder:"Ej: cotizar, reservar, ahorrar",value:V,onChange:re=>k(re.target.value),onKeyDown:re=>{re.key==="Enter"&&(re.preventDefault(),ue())}})]}),A.jsx("div",{style:{alignSelf:"end"},children:A.jsx("button",{style:r.btn,onClick:ue,type:"button",children:"Agregar"})})]}),I.length>0?A.jsx("div",{style:{display:"grid",gap:8,minWidth:0},children:I.map(re=>A.jsxs("div",{style:{display:"grid",gridTemplateColumns:"auto 1fr auto",gap:10,alignItems:"center",padding:"8px 10px",borderRadius:12,border:"1px solid rgba(148,163,184,0.18)",background:"rgba(2,6,23,0.25)",minWidth:0},children:[A.jsx("input",{type:"checkbox",checked:re.done,onChange:()=>me(re.id)}),A.jsx("div",{style:{color:"#e2e8f0",textDecoration:re.done?"line-through":"none",overflowWrap:"anywhere",minWidth:0},children:re.text}),A.jsx("button",{style:r.btn,onClick:()=>we(re.id),type:"button",children:"Eliminar"})]},re.id))}):A.jsx("div",{style:{fontSize:12,color:"#94a3b8"},children:"Sin pasos todava."})]})]})]}),A.jsx("div",{style:{color:"#cbd5e1"},children:l?"Cargando":`${i.length} meta${i.length===1?"":"s"} en total`}),A.jsx(_g,{title:"Activas",items:Re.active,s:r,onEdit:$,onToggleDone:Ge,onTogglePaused:P,onDelete:ne}),A.jsx(_g,{title:"Pausadas",items:Re.paused,s:r,onEdit:$,onToggleDone:Ge,onTogglePaused:P,onDelete:ne}),A.jsx(_g,{title:"Completadas",items:Re.done,s:r,onEdit:$,onToggleDone:Ge,onTogglePaused:P,onDelete:ne})]})}function _g(r){const{title:e,items:t,s:i,onEdit:o,onToggleDone:l,onTogglePaused:c,onDelete:f}=r;return A.jsxs("div",{style:{display:"grid",gap:10,minWidth:0},children:[A.jsxs("div",{style:{display:"flex",alignItems:"baseline",justifyContent:"space-between",gap:10},children:[A.jsx("div",{style:{fontWeight:800,color:"#e2e8f0"},children:e}),A.jsx("div",{style:{fontSize:12,color:"#94a3b8"},children:t.length})]}),t.length===0?A.jsx("div",{style:{color:"#94a3b8",fontSize:13,padding:"6px 2px"},children:""}):A.jsx("div",{style:{display:"grid",gap:12,minWidth:0},children:t.map(p=>{const g=!!p.progress.money,E=!!p.progress.checklist,T=p.createdByName||(p.createdByEmail?p.createdByEmail.split("@")[0]:null),S=p.updatedByName||(p.updatedByEmail?p.updatedByEmail.split("@")[0]:null);return A.jsx("div",{style:i.card,children:A.jsxs("div",{style:{display:"grid",gap:10,minWidth:0},children:[A.jsxs("div",{style:{display:"flex",gap:10,alignItems:"center",flexWrap:"wrap",minWidth:0},children:[A.jsx("div",{style:{fontWeight:900,color:"#e2e8f0",overflowWrap:"anywhere"},children:p.title}),E&&A.jsx("span",{style:i.chip,children:"checklist"}),g&&A.jsx("span",{style:i.chip,children:"dinero"}),A.jsx("span",{style:i.chip,children:p.status==="active"?"activa":p.status==="paused"?"pausada":"completada"}),p.priority&&A.jsxs("span",{style:i.chip,children:["prio: ",p.priority]}),p.targetDate&&A.jsxs("span",{style:i.chip,children:[" ",p.targetDate]})]}),T?A.jsxs("div",{style:{color:"#94a3b8",fontSize:12},children:["Agregado por: ",T]}):null,p.description?A.jsx("div",{style:{color:"#cbd5e1",lineHeight:1.4,overflowWrap:"anywhere"},children:p.description}):A.jsx("div",{style:{color:"#94a3b8",fontSize:12},children:"Sin descripcin."}),A.jsx("div",{style:{fontSize:12,color:"#cbd5e1",display:"grid",gap:4},children:cP(p.progress).map(O=>A.jsxs("div",{children:[A.jsx("span",{style:{color:"#94a3b8"},children:"Progreso: "}),O]},O))}),A.jsxs("div",{style:{display:"flex",gap:10,flexWrap:"wrap"},children:[A.jsx("button",{style:i.btn,onClick:()=>o(p),children:"Editar"}),A.jsx("button",{style:i.btn,onClick:()=>l(p),children:p.status==="done"?"Reabrir":"Completar"}),A.jsx("button",{style:i.btn,onClick:()=>c(p),children:p.status==="paused"?"Activar":"Pausar"}),A.jsx("button",{style:i.btn,onClick:()=>f(p.id),children:"Eliminar"})]}),S?A.jsxs("div",{style:{color:"#64748b",fontSize:11},children:["ltima edicin: ",S]}):null]})},p.id)})})]})}const fP=r=>r?`https://image.tmdb.org/t/p/w342${r}`:"";function mP(){const r=Ec(),[e,t]=L.useState([]),[i,o]=L.useState([]),[l,c]=L.useState("mix"),[f,p]=L.useState(!1),[g,E]=L.useState(!1),[T,S]=L.useState(null),[O,z]=L.useState(null),[Y,U]=L.useState(null),F=L.useRef([]);L.useEffect(()=>{const C=yc(Os(Xt,"plans"),d_("sort","asc")),D=_c(C,V=>{const k=V.docs.map(I=>{const fe=I.data();return{id:I.id,...fe}});t(k)},V=>console.warn("roulette plans snapshot:",V));return()=>D()},[]),L.useEffect(()=>{const C=yc(Os(Xt,"watchlist")),D=_c(C,V=>{const k=V.docs.map(I=>({id:I.id,...I.data()}));o(k)},V=>console.warn("roulette watchlist snapshot:",V));return()=>D()},[]),L.useEffect(()=>()=>{for(const C of F.current)window.clearTimeout(C);F.current=[]},[]);const K=L.useMemo(()=>(f?e:e.filter(D=>D.status!=="done")).map(D=>({kind:"plan",id:D.id,title:D.title,subtitle:D.status==="idea"?"Plan  Idea":D.status==="planned"?"Plan  Planeado":"Plan  Hecho",links:D.links||[],status:D.status})),[e,f]),ee=L.useMemo(()=>(f?i:i.filter(D=>D.status!=="done")).map(D=>{const V=D.mediaType==="movie"?"Pelcula":"Serie",k=D.status==="pending"?"Pendiente":D.status==="watching"?"Viendo":"Visto",I=D.mediaType==="tv"&&D.status==="watching"?`  T${D.season??1} E${D.episode??1}`:"";return{kind:"watch",id:D.id,title:D.title,subtitle:`${V}  ${k}${I}`,posterPath:D.posterPath??null,mediaType:D.mediaType,status:D.status,season:D.season??null,episode:D.episode??null}}),[i,f]),he=L.useMemo(()=>l==="plans"?K:l==="watch"?ee:[...K,...ee],[l,K,ee]);function de(){for(const C of F.current)window.clearTimeout(C);F.current=[]}function pe(){if(g)return;if(U(null),z(null),he.length===0){U("No hay nada para elegir con la configuracin actual.");return}E(!0);const C=he[Math.floor(Math.random()*he.length)],D=Math.min(36,Math.max(18,he.length+12)),V=[];for(let fe=0;fe<D-1;fe++)V.push(he[Math.floor(Math.random()*he.length)]);V.push(C),de();let k=0;for(let fe=0;fe<V.length;fe++){const Ie=fe/(V.length-1),$=45+Math.round(240*Ie*Ie);k+=$;const ae=window.setTimeout(()=>{S(V[fe])},k);F.current.push(ae)}const I=window.setTimeout(()=>{z(C),S(C),E(!1)},k+80);F.current.push(I)}function x(){if(O){if(O.kind==="plan"){r("/planes");return}r("/watchlist")}}function R(){O&&navigator.clipboard?.writeText(O.title).catch(()=>{})}return A.jsxs("div",{style:{display:"grid",gap:14},children:[A.jsxs("header",{children:[A.jsx("h2",{style:{margin:0},children:"Ruleta"}),A.jsx("p",{style:{color:"#cbd5e1",marginTop:6},children:"Elige al azar un plan o algo para ver"})]}),A.jsxs("section",{style:pP,children:[A.jsxs("div",{style:{display:"flex",gap:10,flexWrap:"wrap",alignItems:"center"},children:[A.jsxs("div",{style:{display:"flex",gap:10,flexWrap:"wrap"},children:[A.jsx("button",{onClick:()=>c("mix"),style:l==="mix"?vg:qd,disabled:g,children:"Mixto"}),A.jsx("button",{onClick:()=>c("plans"),style:l==="plans"?vg:qd,disabled:g,children:"Solo planes"}),A.jsx("button",{onClick:()=>c("watch"),style:l==="watch"?vg:qd,disabled:g,children:"Solo watchlist"})]}),A.jsxs("label",{style:{display:"flex",gap:8,alignItems:"center",color:"#e2e8f0"},children:[A.jsx("input",{type:"checkbox",checked:f,onChange:C=>p(C.target.checked),disabled:g}),"Incluir hechos/vistos"]}),A.jsxs("div",{style:{marginLeft:"auto",color:"#94a3b8",fontSize:13},children:["Pool: ",A.jsx("strong",{style:{color:"#e2e8f0"},children:he.length})," ","(Planes ",K.length,"  Watchlist ",ee.length,")"]})]}),A.jsxs("div",{style:{display:"grid",gap:12,marginTop:12},children:[Y?A.jsx("div",{style:bP,children:Y}):null,A.jsx("div",{style:gP,children:T?A.jsxs("div",{style:{display:"grid",gap:10},children:[A.jsxs("div",{style:{display:"flex",gap:12,alignItems:"center"},children:[T.kind==="watch"?A.jsx("img",{src:T.posterPath?fP(T.posterPath):"",alt:"",style:yP,onError:C=>C.currentTarget.src=""}):A.jsx("div",{style:_P,children:A.jsx("span",{style:{fontSize:22}})}),A.jsxs("div",{style:{display:"grid",gap:4},children:[A.jsx("div",{style:{fontSize:18,fontWeight:800,color:"#e2e8f0"},children:T.title}),A.jsxs("div",{style:{color:"#94a3b8",fontSize:13},children:[T.subtitle||"",g?"  girando...":""]})]})]}),O?A.jsxs("div",{style:TP,children:[A.jsx("div",{style:{fontWeight:800},children:"Resultado"}),A.jsxs("div",{style:{color:"#cbd5e1"},children:[O.kind==="plan"?"Plan elegido":"Para ver",":"," ",A.jsx("strong",{children:O.title})]}),A.jsxs("div",{style:{display:"flex",gap:10,flexWrap:"wrap"},children:[A.jsx("button",{style:EP,onClick:pe,children:"Girar otra vez"}),A.jsx("button",{style:i1,onClick:x,children:"Ir a su seccin"}),A.jsx("button",{style:i1,onClick:R,children:"Copiar ttulo"})]})]}):null]}):A.jsxs("div",{style:{color:"#94a3b8"},children:["Presiona ",A.jsx("strong",{children:"Girar"})," para elegir."]})}),A.jsx("div",{style:{display:"flex",gap:10,justifyContent:"center"},children:A.jsx("button",{style:g||he.length===0?vP:Uw,onClick:pe,disabled:g||he.length===0,title:he.length===0?"No hay elementos para elegir":"Girar",children:g?"Girando":"Girar"})})]})]})]})}const pP={border:"1px solid rgba(148,163,184,.25)",borderRadius:14,padding:12,background:"rgba(15,23,42,.35)"},qd={padding:"8px 12px",borderRadius:999,border:"1px solid rgba(148,163,184,.25)",background:"rgba(148,163,184,.08)",color:"#e2e8f0",cursor:"pointer"},vg={...qd,border:"1px solid rgba(56,189,248,.45)",background:"rgba(56,189,248,.14)"},gP={border:"1px dashed rgba(148,163,184,.25)",borderRadius:14,padding:14,background:"rgba(2,6,23,.25)",minHeight:120,display:"flex",alignItems:"center",justifyContent:"center"},yP={width:64,height:96,borderRadius:12,objectFit:"cover",background:"rgba(148,163,184,.08)",border:"1px solid rgba(148,163,184,.18)"},_P={width:64,height:96,borderRadius:12,display:"flex",alignItems:"center",justifyContent:"center",background:"rgba(148,163,184,.08)",border:"1px solid rgba(148,163,184,.18)"},Uw={padding:"12px 18px",borderRadius:12,border:"1px solid rgba(56,189,248,.35)",background:"rgba(56,189,248,.16)",color:"#e2e8f0",cursor:"pointer",fontWeight:800,minWidth:160},vP={...Uw,border:"1px solid rgba(148,163,184,.25)",background:"rgba(148,163,184,.08)",color:"#94a3b8",cursor:"not-allowed"},EP={padding:"10px 12px",borderRadius:10,border:"1px solid rgba(255,255,255,.12)",background:"#2563eb",color:"white",cursor:"pointer",fontWeight:700},i1={padding:"10px 12px",borderRadius:10,border:"1px solid rgba(148,163,184,.25)",background:"rgba(148,163,184,.08)",color:"#e2e8f0",cursor:"pointer"},TP={marginTop:6,border:"1px solid rgba(34,197,94,.35)",background:"rgba(34,197,94,.10)",borderRadius:12,padding:12,display:"grid",gap:10},bP={border:"1px solid rgba(248,113,113,.35)",background:"rgba(248,113,113,.10)",borderRadius:12,padding:12,color:"#fecaca",fontSize:13};function SP(){const{user:r,loading:e}=kc(),t=vi();return e?A.jsx("div",{style:{minHeight:"100vh",display:"grid",placeItems:"center",background:"#0b1220",color:"white"},children:"Cargando"}):r?A.jsx(v1,{}):A.jsx(Tg,{to:"/login",replace:!0,state:{from:t.pathname}})}function AP(){return A.jsx(kM,{children:A.jsxs(wC,{children:[A.jsx(ji,{path:"/login",element:A.jsx(BM,{})}),A.jsx(ji,{element:A.jsx(SP,{}),children:A.jsxs(ji,{path:"/",element:A.jsx(zM,{}),children:[A.jsx(ji,{index:!0,element:A.jsx(Tg,{to:"/watchlist",replace:!0})}),A.jsx(ji,{path:"watchlist",element:A.jsx(GM,{})}),A.jsx(ji,{path:"planes",element:A.jsx(iP,{})}),A.jsx(ji,{path:"metas",element:A.jsx(dP,{})}),A.jsx(ji,{path:"ruleta",element:A.jsx(mP,{})})]})}),A.jsx(ji,{path:"*",element:A.jsx(Tg,{to:"/",replace:!0})})]})})}IR.createRoot(document.getElementById("root")).render(A.jsx(_R.StrictMode,{children:A.jsx($C,{children:A.jsx(AP,{})})}));
